window.convolutionRu={round:"Количество",score:"Очки",neurons:"Нейроны",convolution:"Извилина",topScores:"Лучшие результаты",levelComplete:"Уровень пройден",gameOver:"Поражение",menu:"Меню",restart:"Повторить",shortTerm:"Кратковременная",longTerm:"Долговременная",nback:"Н-назад",all:"Поиск","double":"Двойная",start:"Начать",triple:"Тройная",tLong:"Вам необходимо накормить извилину поглощая иконки. Все иконки в извилине должны быть уникальными. Для прохождения уровня поглотите заданное количество иконок.",tNback:"Длина извилины ограничена. Нужно помнить только две последних иконки. За каждую ошибку вы теряется один нейрон и 50 очков.",tShort:"Нужно запоминать только расположение. Вы получаете звезды только при прохождении уровня.",tDouble:"Под вашим контролем две извилины. Направление движения извилины передается от предыдущей. Направление можно переключать перед началом движения следующей извилины.",tSearch:"Только одна иконка является новой. Найдите ее.",controlWeb:"Используйте стрелки что бы сменить направление движения извилины.",controlMobile:"Используйте левую и правую сторону экрана что бы повернуть извилину."};(function(){var cache={};var ctx=null,usingWebAudio=true,noAudio=false;try{if(typeof AudioContext!=="undefined"){ctx=new AudioContext}else if(typeof webkitAudioContext!=="undefined"){ctx=new webkitAudioContext}else{usingWebAudio=false}}catch(e){usingWebAudio=false}if(!usingWebAudio){if(typeof Audio!=="undefined"){try{new Audio}catch(e){noAudio=true}}else{noAudio=true}}if(usingWebAudio){var masterGain=typeof ctx.createGain==="undefined"?ctx.createGainNode():ctx.createGain();masterGain.gain.value=1;masterGain.connect(ctx.destination)}var HowlerGlobal=function(codecs){this._volume=1;this._muted=false;this.usingWebAudio=usingWebAudio;this.ctx=ctx;this.noAudio=noAudio;this._howls=[];this._codecs=codecs;this.iOSAutoEnable=true};HowlerGlobal.prototype={volume:function(vol){var self=this;vol=parseFloat(vol);if(vol>=0&&vol<=1){self._volume=vol;if(usingWebAudio){masterGain.gain.value=vol}for(var key in self._howls){if(self._howls.hasOwnProperty(key)&&self._howls[key]._webAudio===false){for(var i=0;i<self._howls[key]._audioNode.length;i++){self._howls[key]._audioNode[i].volume=self._howls[key]._volume*self._volume}}}return self}return usingWebAudio?masterGain.gain.value:self._volume},mute:function(){this._setMuted(true);return this},unmute:function(){this._setMuted(false);return this},_setMuted:function(muted){var self=this;self._muted=muted;if(usingWebAudio){masterGain.gain.value=muted?0:self._volume}for(var key in self._howls){if(self._howls.hasOwnProperty(key)&&self._howls[key]._webAudio===false){for(var i=0;i<self._howls[key]._audioNode.length;i++){self._howls[key]._audioNode[i].muted=muted}}}},codecs:function(ext){return this._codecs[ext]},_enableiOSAudio:function(){var self=this;if(ctx&&(self._iOSEnabled||!/iPhone|iPad|iPod/i.test(navigator.userAgent))){return}self._iOSEnabled=false;var unlock=function(){var buffer=ctx.createBuffer(1,1,22050);var source=ctx.createBufferSource();source.buffer=buffer;source.connect(ctx.destination);if(typeof source.start==="undefined"){source.noteOn(0)}else{source.start(0)}setTimeout(function(){if(source.playbackState===source.PLAYING_STATE||source.playbackState===source.FINISHED_STATE){self._iOSEnabled=true;self.iOSAutoEnable=false;window.removeEventListener("touchend",unlock,false)}},0)};window.addEventListener("touchend",unlock,false);return self}};var audioTest=null;var codecs={};if(!noAudio){audioTest=new Audio;codecs={mp3:!!audioTest.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!audioTest.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!audioTest.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(audioTest.canPlayType("audio/x-m4a;")||audioTest.canPlayType("audio/m4a;")||audioTest.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(audioTest.canPlayType("audio/x-mp4;")||audioTest.canPlayType("audio/mp4;")||audioTest.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var Howler=new HowlerGlobal(codecs);var Howl=function(o){var self=this;self._autoplay=o.autoplay||false;self._buffer=o.buffer||false;self._duration=o.duration||0;self._format=o.format||null;self._loop=o.loop||false;self._loaded=false;self._sprite=o.sprite||{};self._src=o.src||"";self._pos3d=o.pos3d||[0,0,-.5];self._volume=o.volume!==undefined?o.volume:1;self._urls=o.urls||[];self._rate=o.rate||1;self._model=o.model||null;self._onload=[o.onload||function(){}];self._onloaderror=[o.onloaderror||function(){}];self._onend=[o.onend||function(){}];self._onpause=[o.onpause||function(){}];self._onplay=[o.onplay||function(){}];self._onendTimer=[];self._webAudio=usingWebAudio&&!self._buffer;self._audioNode=[];if(self._webAudio){self._setupAudioNode()}if(typeof ctx!=="undefined"&&ctx&&Howler.iOSAutoEnable){Howler._enableiOSAudio()}Howler._howls.push(self);self.load()};Howl.prototype={load:function(){var self=this,url=null;if(noAudio){self.on("loaderror",new Error("No audio support."));return}for(var i=0;i<self._urls.length;i++){var ext,urlItem;if(self._format){ext=self._format}else{urlItem=self._urls[i];ext=/^data:audio\/([^;,]+);/i.exec(urlItem);if(!ext){ext=/\.([^.]+)$/.exec(urlItem.split("?",1)[0])}if(ext){ext=ext[1].toLowerCase()}else{self.on("loaderror",new Error("Could not extract format from passed URLs, please add format parameter."));return}}if(codecs[ext]){url=self._urls[i];break}}if(!url){self.on("loaderror",new Error("No codec support for selected audio sources."));return}self._src=url;if(self._webAudio){loadBuffer(self,url)}else{var newNode=new Audio;newNode.addEventListener("error",function(){if(newNode.error&&newNode.error.code===4){HowlerGlobal.noAudio=true}self.on("loaderror",{type:newNode.error?newNode.error.code:0})},false);self._audioNode.push(newNode);newNode.src=url;newNode._pos=0;newNode.preload="auto";newNode.volume=Howler._muted?0:self._volume*Howler.volume();var listener=function(){self._duration=Math.ceil(newNode.duration*10)/10;if(Object.getOwnPropertyNames(self._sprite).length===0){self._sprite={_default:[0,self._duration*1e3]}}if(!self._loaded){self._loaded=true;self.on("load")}if(self._autoplay){self.play()}newNode.removeEventListener("canplaythrough",listener,false)};newNode.addEventListener("canplaythrough",listener,false);newNode.load()}return self},urls:function(urls){var self=this;if(urls){self.stop();self._urls=typeof urls==="string"?[urls]:urls;self._loaded=false;self.load();return self}else{return self._urls}},play:function(sprite,callback){var self=this;if(typeof sprite==="function"){callback=sprite}if(!sprite||typeof sprite==="function"){sprite="_default"}if(!self._loaded){self.on("load",function(){self.play(sprite,callback)});return self}if(!self._sprite[sprite]){if(typeof callback==="function")callback();return self}self._inactiveNode(function(node){node._sprite=sprite;var pos=node._pos>0?node._pos:self._sprite[sprite][0]/1e3;var duration=0;if(self._webAudio){duration=self._sprite[sprite][1]/1e3-node._pos;if(node._pos>0){pos=self._sprite[sprite][0]/1e3+pos}}else{duration=self._sprite[sprite][1]/1e3-(pos-self._sprite[sprite][0]/1e3)}var loop=!!(self._loop||self._sprite[sprite][2]);var soundId=typeof callback==="string"?callback:Math.round(Date.now()*Math.random())+"",timerId;(function(){var data={id:soundId,sprite:sprite,loop:loop};timerId=setTimeout(function(){if(!self._webAudio&&loop){self.stop(data.id).play(sprite,data.id)}if(self._webAudio&&!loop){self._nodeById(data.id).paused=true;self._nodeById(data.id)._pos=0;self._clearEndTimer(data.id)}if(!self._webAudio&&!loop){self.stop(data.id)}self.on("end",soundId)},duration/self._rate*1e3);self._onendTimer.push({timer:timerId,id:data.id})})();if(self._webAudio){var loopStart=self._sprite[sprite][0]/1e3,loopEnd=self._sprite[sprite][1]/1e3;node.id=soundId;node.paused=false;refreshBuffer(self,[loop,loopStart,loopEnd],soundId);self._playStart=ctx.currentTime;node.gain.value=self._volume;if(typeof node.bufferSource.start==="undefined"){loop?node.bufferSource.noteGrainOn(0,pos,86400):node.bufferSource.noteGrainOn(0,pos,duration)}else{loop?node.bufferSource.start(0,pos,86400):node.bufferSource.start(0,pos,duration)}}else{if(node.readyState===4||!node.readyState&&navigator.isCocoonJS){node.readyState=4;node.id=soundId;node.currentTime=pos;node.muted=Howler._muted||node.muted;node.volume=self._volume*Howler.volume();setTimeout(function(){node.play()},0)}else{self._clearEndTimer(soundId);(function(){var sound=self,playSprite=sprite,fn=callback,newNode=node;var listener=function(){sound.play(playSprite,fn);newNode.removeEventListener("canplaythrough",listener,false)};newNode.addEventListener("canplaythrough",listener,false)})();return self}}self.on("play");if(typeof callback==="function")callback(soundId);return self});return self},pause:function(id){var self=this;if(!self._loaded){self.on("play",function(){self.pause(id)});return self}self._clearEndTimer(id);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){activeNode._pos=self.pos(null,id);if(self._webAudio){if(!activeNode.bufferSource||activeNode.paused){return self}activeNode.paused=true;if(typeof activeNode.bufferSource.stop==="undefined"){activeNode.bufferSource.noteOff(0)}else{activeNode.bufferSource.stop(0)}}else{activeNode.pause()}}self.on("pause");return self},stop:function(id){var self=this;if(!self._loaded){self.on("play",function(){self.stop(id)});return self}self._clearEndTimer(id);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){activeNode._pos=0;if(self._webAudio){if(!activeNode.bufferSource||activeNode.paused){return self}activeNode.paused=true;if(typeof activeNode.bufferSource.stop==="undefined"){activeNode.bufferSource.noteOff(0)}else{activeNode.bufferSource.stop(0)}}else if(!isNaN(activeNode.duration)){activeNode.pause();activeNode.currentTime=0}}return self},mute:function(id){var self=this;if(!self._loaded){self.on("play",function(){self.mute(id)});return self}var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(self._webAudio){activeNode.gain.value=0}else{activeNode.muted=true}}return self},unmute:function(id){var self=this;if(!self._loaded){self.on("play",function(){self.unmute(id)});return self}var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(self._webAudio){activeNode.gain.value=self._volume}else{activeNode.muted=false}}return self},volume:function(vol,id){var self=this;vol=parseFloat(vol);if(vol>=0&&vol<=1){self._volume=vol;if(!self._loaded){self.on("play",function(){self.volume(vol,id)});return self}var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(self._webAudio){activeNode.gain.value=vol}else{activeNode.volume=vol*Howler.volume()}}return self}else{return self._volume}},loop:function(loop){var self=this;if(typeof loop==="boolean"){self._loop=loop;return self}else{return self._loop}},sprite:function(sprite){var self=this;if(typeof sprite==="object"){self._sprite=sprite;return self}else{return self._sprite}},pos:function(pos,id){var self=this;if(!self._loaded){self.on("load",function(){self.pos(pos)});return typeof pos==="number"?self:self._pos||0}pos=parseFloat(pos);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(pos>=0){self.pause(id);activeNode._pos=pos;self.play(activeNode._sprite,id);return self}else{return self._webAudio?activeNode._pos+(ctx.currentTime-self._playStart):activeNode.currentTime}}else if(pos>=0){return self}else{for(var i=0;i<self._audioNode.length;i++){if(self._audioNode[i].paused&&self._audioNode[i].readyState===4){return self._webAudio?self._audioNode[i]._pos:self._audioNode[i].currentTime}}}},pos3d:function(x,y,z,id){var self=this;y=typeof y==="undefined"||!y?0:y;z=typeof z==="undefined"||!z?-.5:z;if(!self._loaded){self.on("play",function(){self.pos3d(x,y,z,id)});return self}if(x>=0||x<0){if(self._webAudio){var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){self._pos3d=[x,y,z];activeNode.panner.setPosition(x,y,z);activeNode.panner.panningModel=self._model||"HRTF"}}}else{return self._pos3d}return self},fade:function(from,to,len,callback,id){var self=this,diff=Math.abs(from-to),dir=from>to?"down":"up",steps=diff/.01,stepTime=len/steps;if(!self._loaded){self.on("load",function(){self.fade(from,to,len,callback,id)});return self}self.volume(from,id);for(var i=1;i<=steps;i++){(function(){var change=self._volume+(dir==="up"?.01:-.01)*i,vol=Math.round(1e3*change)/1e3,toVol=to;setTimeout(function(){self.volume(vol,id);if(vol===toVol){if(callback)callback()}},stepTime*i)})()}},fadeIn:function(to,len,callback){return this.volume(0).play().fade(0,to,len,callback)},fadeOut:function(to,len,callback,id){var self=this;return self.fade(self._volume,to,len,function(){if(callback)callback();self.pause(id);self.on("end")},id)},_nodeById:function(id){var self=this,node=self._audioNode[0];for(var i=0;i<self._audioNode.length;i++){if(self._audioNode[i].id===id){node=self._audioNode[i];break}}return node},_activeNode:function(){var self=this,node=null;for(var i=0;i<self._audioNode.length;i++){if(!self._audioNode[i].paused){node=self._audioNode[i];break}}self._drainPool();return node},_inactiveNode:function(callback){var self=this,node=null;for(var i=0;i<self._audioNode.length;i++){if(self._audioNode[i].paused&&self._audioNode[i].readyState===4){callback(self._audioNode[i]);node=true;break}}self._drainPool();if(node){return}var newNode;if(self._webAudio){newNode=self._setupAudioNode();callback(newNode)}else{self.load();newNode=self._audioNode[self._audioNode.length-1];var listenerEvent=navigator.isCocoonJS?"canplaythrough":"loadedmetadata";var listener=function(){newNode.removeEventListener(listenerEvent,listener,false);callback(newNode)};newNode.addEventListener(listenerEvent,listener,false)}},_drainPool:function(){var self=this,inactive=0,i;for(i=0;i<self._audioNode.length;i++){if(self._audioNode[i].paused){inactive++}}for(i=self._audioNode.length-1;i>=0;i--){if(inactive<=5){break}if(self._audioNode[i].paused){if(self._webAudio){self._audioNode[i].disconnect(0)}inactive--;self._audioNode.splice(i,1)}}},_clearEndTimer:function(soundId){var self=this,index=-1;for(var i=0;i<self._onendTimer.length;i++){if(self._onendTimer[i].id===soundId){index=i;break}}var timer=self._onendTimer[index];if(timer){clearTimeout(timer.timer);self._onendTimer.splice(index,1)}},_setupAudioNode:function(){var self=this,node=self._audioNode,index=self._audioNode.length;node[index]=typeof ctx.createGain==="undefined"?ctx.createGainNode():ctx.createGain();node[index].gain.value=self._volume;node[index].paused=true;node[index]._pos=0;node[index].readyState=4;node[index].connect(masterGain);node[index].panner=ctx.createPanner();node[index].panner.panningModel=self._model||"equalpower";node[index].panner.setPosition(self._pos3d[0],self._pos3d[1],self._pos3d[2]);node[index].panner.connect(node[index]);return node[index]},on:function(event,fn){var self=this,events=self["_on"+event];if(typeof fn==="function"){events.push(fn)}else{for(var i=0;i<events.length;i++){if(fn){events[i].call(self,fn)}else{events[i].call(self)}}}return self},off:function(event,fn){var self=this,events=self["_on"+event];if(fn){for(var i=0;i<events.length;i++){if(fn===events[i]){events.splice(i,1);break}}}else{self["_on"+event]=[]}return self},unload:function(){var self=this;var nodes=self._audioNode;for(var i=0;i<self._audioNode.length;i++){if(!nodes[i].paused){self.stop(nodes[i].id);self.on("end",nodes[i].id)}if(!self._webAudio){nodes[i].src=""}else{nodes[i].disconnect(0)}}for(i=0;i<self._onendTimer.length;i++){clearTimeout(self._onendTimer[i].timer)}var index=Howler._howls.indexOf(self);if(index!==null&&index>=0){Howler._howls.splice(index,1)}delete cache[self._src];self=null}};if(usingWebAudio){var loadBuffer=function(obj,url){if(url in cache){obj._duration=cache[url].duration;loadSound(obj);return}if(/^data:[^;]+;base64,/.test(url)){var data=atob(url.split(",")[1]);var dataView=new Uint8Array(data.length);for(var i=0;i<data.length;++i){dataView[i]=data.charCodeAt(i)}decodeAudioData(dataView.buffer,obj,url)}else{var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(){decodeAudioData(xhr.response,obj,url)};xhr.onerror=function(){if(obj._webAudio){obj._buffer=true;obj._webAudio=false;obj._audioNode=[];delete obj._gainNode;delete cache[url];obj.load()}};try{xhr.send()}catch(e){xhr.onerror()}}};var decodeAudioData=function(arraybuffer,obj,url){ctx.decodeAudioData(arraybuffer,function(buffer){if(buffer){cache[url]=buffer;loadSound(obj,buffer)}},function(err){obj.on("loaderror",err)})};var loadSound=function(obj,buffer){obj._duration=buffer?buffer.duration:obj._duration;if(Object.getOwnPropertyNames(obj._sprite).length===0){obj._sprite={_default:[0,obj._duration*1e3]}}if(!obj._loaded){obj._loaded=true;obj.on("load")}if(obj._autoplay){obj.play()}};var refreshBuffer=function(obj,loop,id){var node=obj._nodeById(id);node.bufferSource=ctx.createBufferSource();node.bufferSource.buffer=cache[obj._src];node.bufferSource.connect(node.panner);node.bufferSource.loop=loop[0];if(loop[0]){node.bufferSource.loopStart=loop[1];node.bufferSource.loopEnd=loop[1]+loop[2]}node.bufferSource.playbackRate.value=obj._rate}}if(typeof define==="function"&&define.amd){define(function(){return{Howler:Howler,Howl:Howl}})}if(typeof exports!=="undefined"){exports.Howler=Howler;exports.Howl=Howl}if(typeof window!=="undefined"){window.Howler=Howler;window.Howl=Howl}})();(function(window,document,undefined){var _MAP={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"};var _KEYCODE_MAP={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};var _SHIFT_MAP={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"};var _SPECIAL_ALIASES={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};var _REVERSE_MAP;for(var i=1;i<20;++i){_MAP[111+i]="f"+i}for(i=0;i<=9;++i){_MAP[i+96]=i}function _addEvent(object,type,callback){if(object.addEventListener){object.addEventListener(type,callback,false);return}object.attachEvent("on"+type,callback)}function _characterFromEvent(e){if(e.type=="keypress"){var character=String.fromCharCode(e.which);if(!e.shiftKey){character=character.toLowerCase()}return character}if(_MAP[e.which]){return _MAP[e.which]}if(_KEYCODE_MAP[e.which]){return _KEYCODE_MAP[e.which]}return String.fromCharCode(e.which).toLowerCase()}function _modifiersMatch(modifiers1,modifiers2){return modifiers1.sort().join(",")===modifiers2.sort().join(",")}function _eventModifiers(e){var modifiers=[];if(e.shiftKey){modifiers.push("shift")}if(e.altKey){modifiers.push("alt")}if(e.ctrlKey){modifiers.push("ctrl")}if(e.metaKey){modifiers.push("meta")}return modifiers}function _preventDefault(e){if(e.preventDefault){e.preventDefault();return}e.returnValue=false}function _stopPropagation(e){if(e.stopPropagation){e.stopPropagation();return}e.cancelBubble=true}function _isModifier(key){return key=="shift"||key=="ctrl"||key=="alt"||key=="meta"}function _getReverseMap(){if(!_REVERSE_MAP){_REVERSE_MAP={};for(var key in _MAP){if(key>95&&key<112){continue}if(_MAP.hasOwnProperty(key)){_REVERSE_MAP[_MAP[key]]=key}}}return _REVERSE_MAP}function _pickBestAction(key,modifiers,action){if(!action){action=_getReverseMap()[key]?"keydown":"keypress"}if(action=="keypress"&&modifiers.length){action="keydown"}return action}function _keysFromString(combination){if(combination==="+"){return["+"]}combination=combination.replace(/\+{2}/g,"+plus");return combination.split("+")}function _getKeyInfo(combination,action){var keys;var key;var i;var modifiers=[];keys=_keysFromString(combination);for(i=0;i<keys.length;++i){key=keys[i];if(_SPECIAL_ALIASES[key]){key=_SPECIAL_ALIASES[key]}if(action&&action!="keypress"&&_SHIFT_MAP[key]){key=_SHIFT_MAP[key];modifiers.push("shift")}if(_isModifier(key)){modifiers.push(key)}}action=_pickBestAction(key,modifiers,action);return{key:key,modifiers:modifiers,action:action}}function _belongsTo(element,ancestor){if(element===null||element===document){return false}if(element===ancestor){return true}return _belongsTo(element.parentNode,ancestor)}function Mousetrap(targetElement){var self=this;targetElement=targetElement||document;if(!(self instanceof Mousetrap)){return new Mousetrap(targetElement)}self.target=targetElement;self._callbacks={};self._directMap={};var _sequenceLevels={};var _resetTimer;var _ignoreNextKeyup=false;var _ignoreNextKeypress=false;var _nextExpectedAction=false;function _resetSequences(doNotReset){doNotReset=doNotReset||{};var activeSequences=false,key;for(key in _sequenceLevels){if(doNotReset[key]){activeSequences=true;continue}_sequenceLevels[key]=0}if(!activeSequences){_nextExpectedAction=false}}function _getMatches(character,modifiers,e,sequenceName,combination,level){var i;var callback;var matches=[];var action=e.type;if(!self._callbacks[character]){return[]}if(action=="keyup"&&_isModifier(character)){modifiers=[character]}for(i=0;i<self._callbacks[character].length;++i){callback=self._callbacks[character][i];if(!sequenceName&&callback.seq&&_sequenceLevels[callback.seq]!=callback.level){continue}if(action!=callback.action){continue}if(action=="keypress"&&!e.metaKey&&!e.ctrlKey||_modifiersMatch(modifiers,callback.modifiers)){var deleteCombo=!sequenceName&&callback.combo==combination;var deleteSequence=sequenceName&&callback.seq==sequenceName&&callback.level==level;if(deleteCombo||deleteSequence){self._callbacks[character].splice(i,1)}matches.push(callback)}}return matches}function _fireCallback(callback,e,combo,sequence){if(self.stopCallback(e,e.target||e.srcElement,combo,sequence)){return}if(callback(e,combo)===false){_preventDefault(e);_stopPropagation(e)}}self._handleKey=function(character,modifiers,e){var callbacks=_getMatches(character,modifiers,e);var i;var doNotReset={};var maxLevel=0;var processedSequenceCallback=false;for(i=0;i<callbacks.length;++i){if(callbacks[i].seq){maxLevel=Math.max(maxLevel,callbacks[i].level)}}for(i=0;i<callbacks.length;++i){if(callbacks[i].seq){if(callbacks[i].level!=maxLevel){continue}processedSequenceCallback=true;doNotReset[callbacks[i].seq]=1;_fireCallback(callbacks[i].callback,e,callbacks[i].combo,callbacks[i].seq);continue}if(!processedSequenceCallback){_fireCallback(callbacks[i].callback,e,callbacks[i].combo)}}var ignoreThisKeypress=e.type=="keypress"&&_ignoreNextKeypress;if(e.type==_nextExpectedAction&&!_isModifier(character)&&!ignoreThisKeypress){_resetSequences(doNotReset)}_ignoreNextKeypress=processedSequenceCallback&&e.type=="keydown"};function _handleKeyEvent(e){if(typeof e.which!=="number"){e.which=e.keyCode}var character=_characterFromEvent(e);if(!character){return}if(e.type=="keyup"&&_ignoreNextKeyup===character){_ignoreNextKeyup=false;return}self.handleKey(character,_eventModifiers(e),e)}function _resetSequenceTimer(){clearTimeout(_resetTimer);_resetTimer=setTimeout(_resetSequences,1e3)}function _bindSequence(combo,keys,callback,action){_sequenceLevels[combo]=0;function _increaseSequence(nextAction){return function(){_nextExpectedAction=nextAction;++_sequenceLevels[combo];_resetSequenceTimer()}}function _callbackAndReset(e){_fireCallback(callback,e,combo);if(action!=="keyup"){_ignoreNextKeyup=_characterFromEvent(e)}setTimeout(_resetSequences,10)}for(var i=0;i<keys.length;++i){var isFinal=i+1===keys.length;var wrappedCallback=isFinal?_callbackAndReset:_increaseSequence(action||_getKeyInfo(keys[i+1]).action);_bindSingle(keys[i],wrappedCallback,action,combo,i)}}function _bindSingle(combination,callback,action,sequenceName,level){self._directMap[combination+":"+action]=callback;combination=combination.replace(/\s+/g," ");var sequence=combination.split(" ");var info;if(sequence.length>1){_bindSequence(combination,sequence,callback,action);return}info=_getKeyInfo(combination,action);self._callbacks[info.key]=self._callbacks[info.key]||[];_getMatches(info.key,info.modifiers,{type:info.action},sequenceName,combination,level);self._callbacks[info.key][sequenceName?"unshift":"push"]({callback:callback,modifiers:info.modifiers,action:info.action,seq:sequenceName,level:level,combo:combination})}self._bindMultiple=function(combinations,callback,action){for(var i=0;i<combinations.length;++i){_bindSingle(combinations[i],callback,action)}};_addEvent(targetElement,"keypress",_handleKeyEvent);_addEvent(targetElement,"keydown",_handleKeyEvent);_addEvent(targetElement,"keyup",_handleKeyEvent)}Mousetrap.prototype.bind=function(keys,callback,action){var self=this;keys=keys instanceof Array?keys:[keys];self._bindMultiple.call(self,keys,callback,action);return self};Mousetrap.prototype.unbind=function(keys,action){var self=this;return self.bind.call(self,keys,function(){},action)};Mousetrap.prototype.trigger=function(keys,action){var self=this;if(self._directMap[keys+":"+action]){self._directMap[keys+":"+action]({},keys)}return self};Mousetrap.prototype.reset=function(){var self=this;self._callbacks={};self._directMap={};return self};Mousetrap.prototype.stopCallback=function(e,element){var self=this;if((" "+element.className+" ").indexOf(" mousetrap ")>-1){return false}if(_belongsTo(element,self.target)){return false}return element.tagName=="INPUT"||element.tagName=="SELECT"||element.tagName=="TEXTAREA"||element.isContentEditable};Mousetrap.prototype.handleKey=function(){var self=this;return self._handleKey.apply(self,arguments)};Mousetrap.init=function(){var documentMousetrap=Mousetrap(document);for(var method in documentMousetrap){if(method.charAt(0)!=="_"){Mousetrap[method]=function(method){return function(){return documentMousetrap[method].apply(documentMousetrap,arguments)}}(method)}}};Mousetrap.init();window.Mousetrap=Mousetrap;if(typeof module!=="undefined"&&module.exports){module.exports=Mousetrap}if(typeof define==="function"&&define.amd){define(function(){return Mousetrap})}})(window,document);(function(){if("performance"in window===false){window.performance={}}Date.now=Date.now||function(){return(new Date).getTime()};if("now"in window.performance===false){var offset=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-offset}}})();var TWEEN=TWEEN||function(){var _tweens=[];return{getAll:function(){return _tweens},removeAll:function(){_tweens=[]},add:function(tween){_tweens.push(tween)},remove:function(tween){var i=_tweens.indexOf(tween);if(i!==-1){_tweens.splice(i,1)}},update:function(time){if(_tweens.length===0){return false}var i=0;time=time!==undefined?time:window.performance.now();while(i<_tweens.length){if(_tweens[i].update(time)){i++}else{_tweens.splice(i,1)}}return true}}}();TWEEN.Tween=function(object){var _object=object;var _valuesStart={};var _valuesEnd={};var _valuesStartRepeat={};var _duration=1e3;var _repeat=0;var _yoyo=false;var _isPlaying=false;var _reversed=false;var _delayTime=0;var _startTime=null;var _easingFunction=TWEEN.Easing.Linear.None;var _interpolationFunction=TWEEN.Interpolation.Linear;var _chainedTweens=[];var _onStartCallback=null;var _onStartCallbackFired=false;var _onUpdateCallback=null;var _onCompleteCallback=null;var _onStopCallback=null;for(var field in object){_valuesStart[field]=parseFloat(object[field],10)}this.to=function(properties,duration){if(duration!==undefined){_duration=duration}_valuesEnd=properties;return this};this.start=function(time){TWEEN.add(this);_isPlaying=true;_onStartCallbackFired=false;_startTime=time!==undefined?time:window.performance.now();_startTime+=_delayTime;for(var property in _valuesEnd){if(_valuesEnd[property]instanceof Array){if(_valuesEnd[property].length===0){continue}_valuesEnd[property]=[_object[property]].concat(_valuesEnd[property])}if(_valuesStart[property]===undefined){continue}_valuesStart[property]=_object[property];if(_valuesStart[property]instanceof Array===false){_valuesStart[property]*=1}_valuesStartRepeat[property]=_valuesStart[property]||0}return this};this.stop=function(){if(!_isPlaying){return this}TWEEN.remove(this);_isPlaying=false;if(_onStopCallback!==null){_onStopCallback.call(_object)}this.stopChainedTweens();return this};this.stopChainedTweens=function(){for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++){_chainedTweens[i].stop()}};this.delay=function(amount){_delayTime=amount;return this};this.repeat=function(times){_repeat=times;return this};this.yoyo=function(yoyo){_yoyo=yoyo;return this};this.easing=function(easing){_easingFunction=easing;return this};this.interpolation=function(interpolation){_interpolationFunction=interpolation;return this};this.chain=function(){_chainedTweens=arguments;return this};this.onStart=function(callback){_onStartCallback=callback;return this};this.onUpdate=function(callback){_onUpdateCallback=callback;return this};this.onComplete=function(callback){_onCompleteCallback=callback;return this};this.onStop=function(callback){_onStopCallback=callback;return this};this.update=function(time){var property;var elapsed;var value;if(time<_startTime){return true}if(_onStartCallbackFired===false){if(_onStartCallback!==null){_onStartCallback.call(_object)}_onStartCallbackFired=true}elapsed=(time-_startTime)/_duration;elapsed=elapsed>1?1:elapsed;value=_easingFunction(elapsed);for(property in _valuesEnd){if(_valuesStart[property]===undefined){continue}var start=_valuesStart[property]||0;var end=_valuesEnd[property];if(end instanceof Array){_object[property]=_interpolationFunction(end,value)}else{if(typeof end==="string"){if(end.startsWith("+")||end.startsWith("-")){end=start+parseFloat(end,10)}else{end=parseFloat(end,10)}}if(typeof end==="number"){_object[property]=start+(end-start)*value}}}if(_onUpdateCallback!==null){_onUpdateCallback.call(_object,value)}if(elapsed===1){if(_repeat>0){if(isFinite(_repeat)){_repeat--}for(property in _valuesStartRepeat){if(typeof _valuesEnd[property]==="string"){_valuesStartRepeat[property]=_valuesStartRepeat[property]+parseFloat(_valuesEnd[property],10)}if(_yoyo){var tmp=_valuesStartRepeat[property];_valuesStartRepeat[property]=_valuesEnd[property];_valuesEnd[property]=tmp}_valuesStart[property]=_valuesStartRepeat[property]}if(_yoyo){_reversed=!_reversed}_startTime=time+_delayTime;return true}else{if(_onCompleteCallback!==null){_onCompleteCallback.call(_object)}for(var i=0,numChainedTweens=_chainedTweens.length;i<numChainedTweens;i++){_chainedTweens[i].start(_startTime+_duration)}return false}}return true}};TWEEN.Easing={Linear:{None:function(k){return k}},Quadratic:{In:function(k){return k*k},Out:function(k){return k*(2-k)},InOut:function(k){if((k*=2)<1){return.5*k*k}return-.5*(--k*(k-2)-1)}},Cubic:{In:function(k){return k*k*k},Out:function(k){return--k*k*k+1},InOut:function(k){if((k*=2)<1){return.5*k*k*k}return.5*((k-=2)*k*k+2)}},Quartic:{In:function(k){return k*k*k*k},Out:function(k){return 1- --k*k*k*k},InOut:function(k){if((k*=2)<1){return.5*k*k*k*k}return-.5*((k-=2)*k*k*k-2)}},Quintic:{In:function(k){return k*k*k*k*k},Out:function(k){return--k*k*k*k*k+1},InOut:function(k){if((k*=2)<1){return.5*k*k*k*k*k}return.5*((k-=2)*k*k*k*k+2)}},Sinusoidal:{In:function(k){return 1-Math.cos(k*Math.PI/2)},Out:function(k){return Math.sin(k*Math.PI/2)},InOut:function(k){return.5*(1-Math.cos(Math.PI*k))}},Exponential:{In:function(k){return k===0?0:Math.pow(1024,k-1)},Out:function(k){return k===1?1:1-Math.pow(2,-10*k)},InOut:function(k){if(k===0){
return 0}if(k===1){return 1}if((k*=2)<1){return.5*Math.pow(1024,k-1)}return.5*(-Math.pow(2,-10*(k-1))+2)}},Circular:{In:function(k){return 1-Math.sqrt(1-k*k)},Out:function(k){return Math.sqrt(1- --k*k)},InOut:function(k){if((k*=2)<1){return-.5*(Math.sqrt(1-k*k)-1)}return.5*(Math.sqrt(1-(k-=2)*k)+1)}},Elastic:{In:function(k){var s;var a=.1;var p=.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))},Out:function(k){var s;var a=.1;var p=.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1},InOut:function(k){var s;var a=.1;var p=.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}if((k*=2)<1){return-.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))}return a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*.5+1}},Back:{In:function(k){var s=1.70158;return k*k*((s+1)*k-s)},Out:function(k){var s=1.70158;return--k*k*((s+1)*k+s)+1},InOut:function(k){var s=1.70158*1.525;if((k*=2)<1){return.5*(k*k*((s+1)*k-s))}return.5*((k-=2)*k*((s+1)*k+s)+2)}},Bounce:{In:function(k){return 1-TWEEN.Easing.Bounce.Out(1-k)},Out:function(k){if(k<1/2.75){return 7.5625*k*k}else if(k<2/2.75){return 7.5625*(k-=1.5/2.75)*k+.75}else if(k<2.5/2.75){return 7.5625*(k-=2.25/2.75)*k+.9375}else{return 7.5625*(k-=2.625/2.75)*k+.984375}},InOut:function(k){if(k<.5){return TWEEN.Easing.Bounce.In(k*2)*.5}return TWEEN.Easing.Bounce.Out(k*2-1)*.5+.5}}};TWEEN.Interpolation={Linear:function(v,k){var m=v.length-1;var f=m*k;var i=Math.floor(f);var fn=TWEEN.Interpolation.Utils.Linear;if(k<0){return fn(v[0],v[1],f)}if(k>1){return fn(v[m],v[m-1],m-f)}return fn(v[i],v[i+1>m?m:i+1],f-i)},Bezier:function(v,k){var b=0;var n=v.length-1;var pw=Math.pow;var bn=TWEEN.Interpolation.Utils.Bernstein;for(var i=0;i<=n;i++){b+=pw(1-k,n-i)*pw(k,i)*v[i]*bn(n,i)}return b},CatmullRom:function(v,k){var m=v.length-1;var f=m*k;var i=Math.floor(f);var fn=TWEEN.Interpolation.Utils.CatmullRom;if(v[0]===v[m]){if(k<0){i=Math.floor(f=m*(1+k))}return fn(v[(i-1+m)%m],v[i],v[(i+1)%m],v[(i+2)%m],f-i)}else{if(k<0){return v[0]-(fn(v[0],v[0],v[1],v[1],-f)-v[0])}if(k>1){return v[m]-(fn(v[m],v[m],v[m-1],v[m-1],f-m)-v[m])}return fn(v[i?i-1:0],v[i],v[m<i+1?m:i+1],v[m<i+2?m:i+2],f-i)}},Utils:{Linear:function(p0,p1,t){return(p1-p0)*t+p0},Bernstein:function(n,i){var fc=TWEEN.Interpolation.Utils.Factorial;return fc(n)/fc(i)/fc(n-i)},Factorial:function(){var a=[1];return function(n){var s=1;if(a[n]){return a[n]}for(var i=n;i>1;i--){s*=i}a[n]=s;return s}}(),CatmullRom:function(p0,p1,p2,p3,t){var v0=(p2-p0)*.5;var v1=(p3-p1)*.5;var t2=t*t;var t3=t*t2;return(2*p1-2*p2+v0+v1)*t3+(-3*p1+3*p2-2*v0-v1)*t2+v0*t+p1}}};(function(root){if(typeof define==="function"&&define.amd){define([],function(){return TWEEN})}else if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=TWEEN}else if(root!==undefined){root.TWEEN=TWEEN}})(this);(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.PIXI=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(process,global){(function(){var async={};function noop(){}function identity(v){return v}function toBool(v){return!!v}function notId(v){return!v}var previous_async;var root=typeof self==="object"&&self.self===self&&self||typeof global==="object"&&global.global===global&&global||this;if(root!=null){previous_async=root.async}async.noConflict=function(){root.async=previous_async;return async};function only_once(fn){return function(){if(fn===null)throw new Error("Callback was already called.");fn.apply(this,arguments);fn=null}}function _once(fn){return function(){if(fn===null)return;fn.apply(this,arguments);fn=null}}var _toString=Object.prototype.toString;var _isArray=Array.isArray||function(obj){return _toString.call(obj)==="[object Array]"};var _isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};function _isArrayLike(arr){return _isArray(arr)||typeof arr.length==="number"&&arr.length>=0&&arr.length%1===0}function _arrayEach(arr,iterator){var index=-1,length=arr.length;while(++index<length){iterator(arr[index],index,arr)}}function _map(arr,iterator){var index=-1,length=arr.length,result=Array(length);while(++index<length){result[index]=iterator(arr[index],index,arr)}return result}function _range(count){return _map(Array(count),function(v,i){return i})}function _reduce(arr,iterator,memo){_arrayEach(arr,function(x,i,a){memo=iterator(memo,x,i,a)});return memo}function _forEachOf(object,iterator){_arrayEach(_keys(object),function(key){iterator(object[key],key)})}function _indexOf(arr,item){for(var i=0;i<arr.length;i++){if(arr[i]===item)return i}return-1}var _keys=Object.keys||function(obj){var keys=[];for(var k in obj){if(obj.hasOwnProperty(k)){keys.push(k)}}return keys};function _keyIterator(coll){var i=-1;var len;var keys;if(_isArrayLike(coll)){len=coll.length;return function next(){i++;return i<len?i:null}}else{keys=_keys(coll);len=keys.length;return function next(){i++;return i<len?keys[i]:null}}}function _restParam(func,startIndex){startIndex=startIndex==null?func.length-1:+startIndex;return function(){var length=Math.max(arguments.length-startIndex,0);var rest=Array(length);for(var index=0;index<length;index++){rest[index]=arguments[index+startIndex]}switch(startIndex){case 0:return func.call(this,rest);case 1:return func.call(this,arguments[0],rest)}}}function _withoutIndex(iterator){return function(value,index,callback){return iterator(value,callback)}}var _setImmediate=typeof setImmediate==="function"&&setImmediate;var _delay=_setImmediate?function(fn){_setImmediate(fn)}:function(fn){setTimeout(fn,0)};if(typeof process==="object"&&typeof process.nextTick==="function"){async.nextTick=process.nextTick}else{async.nextTick=_delay}async.setImmediate=_setImmediate?_delay:async.nextTick;async.forEach=async.each=function(arr,iterator,callback){return async.eachOf(arr,_withoutIndex(iterator),callback)};async.forEachSeries=async.eachSeries=function(arr,iterator,callback){return async.eachOfSeries(arr,_withoutIndex(iterator),callback)};async.forEachLimit=async.eachLimit=function(arr,limit,iterator,callback){return _eachOfLimit(limit)(arr,_withoutIndex(iterator),callback)};async.forEachOf=async.eachOf=function(object,iterator,callback){callback=_once(callback||noop);object=object||[];var iter=_keyIterator(object);var key,completed=0;while((key=iter())!=null){completed+=1;iterator(object[key],key,only_once(done))}if(completed===0)callback(null);function done(err){completed--;if(err){callback(err)}else if(key===null&&completed<=0){callback(null)}}};async.forEachOfSeries=async.eachOfSeries=function(obj,iterator,callback){callback=_once(callback||noop);obj=obj||[];var nextKey=_keyIterator(obj);var key=nextKey();function iterate(){var sync=true;if(key===null){return callback(null)}iterator(obj[key],key,only_once(function(err){if(err){callback(err)}else{key=nextKey();if(key===null){return callback(null)}else{if(sync){async.setImmediate(iterate)}else{iterate()}}}}));sync=false}iterate()};async.forEachOfLimit=async.eachOfLimit=function(obj,limit,iterator,callback){_eachOfLimit(limit)(obj,iterator,callback)};function _eachOfLimit(limit){return function(obj,iterator,callback){callback=_once(callback||noop);obj=obj||[];var nextKey=_keyIterator(obj);if(limit<=0){return callback(null)}var done=false;var running=0;var errored=false;(function replenish(){if(done&&running<=0){return callback(null)}while(running<limit&&!errored){var key=nextKey();if(key===null){done=true;if(running<=0){callback(null)}return}running+=1;iterator(obj[key],key,only_once(function(err){running-=1;if(err){callback(err);errored=true}else{replenish()}}))}})()}}function doParallel(fn){return function(obj,iterator,callback){return fn(async.eachOf,obj,iterator,callback)}}function doParallelLimit(fn){return function(obj,limit,iterator,callback){return fn(_eachOfLimit(limit),obj,iterator,callback)}}function doSeries(fn){return function(obj,iterator,callback){return fn(async.eachOfSeries,obj,iterator,callback)}}function _asyncMap(eachfn,arr,iterator,callback){callback=_once(callback||noop);arr=arr||[];var results=_isArrayLike(arr)?[]:{};eachfn(arr,function(value,index,callback){iterator(value,function(err,v){results[index]=v;callback(err)})},function(err){callback(err,results)})}async.map=doParallel(_asyncMap);async.mapSeries=doSeries(_asyncMap);async.mapLimit=doParallelLimit(_asyncMap);async.inject=async.foldl=async.reduce=function(arr,memo,iterator,callback){async.eachOfSeries(arr,function(x,i,callback){iterator(memo,x,function(err,v){memo=v;callback(err)})},function(err){callback(err,memo)})};async.foldr=async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,identity).reverse();async.reduce(reversed,memo,iterator,callback)};async.transform=function(arr,memo,iterator,callback){if(arguments.length===3){callback=iterator;iterator=memo;memo=_isArray(arr)?[]:{}}async.eachOf(arr,function(v,k,cb){iterator(memo,v,k,cb)},function(err){callback(err,memo)})};function _filter(eachfn,arr,iterator,callback){var results=[];eachfn(arr,function(x,index,callback){iterator(x,function(v){if(v){results.push({index:index,value:x})}callback()})},function(){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})}async.select=async.filter=doParallel(_filter);async.selectLimit=async.filterLimit=doParallelLimit(_filter);async.selectSeries=async.filterSeries=doSeries(_filter);function _reject(eachfn,arr,iterator,callback){_filter(eachfn,arr,function(value,cb){iterator(value,function(v){cb(!v)})},callback)}async.reject=doParallel(_reject);async.rejectLimit=doParallelLimit(_reject);async.rejectSeries=doSeries(_reject);function _createTester(eachfn,check,getResult){return function(arr,limit,iterator,cb){function done(){if(cb)cb(getResult(false,void 0))}function iteratee(x,_,callback){if(!cb)return callback();iterator(x,function(v){if(cb&&check(v)){cb(getResult(true,x));cb=iterator=false}callback()})}if(arguments.length>3){eachfn(arr,limit,iteratee,done)}else{cb=iterator;iterator=limit;eachfn(arr,iteratee,done)}}}async.any=async.some=_createTester(async.eachOf,toBool,identity);async.someLimit=_createTester(async.eachOfLimit,toBool,identity);async.all=async.every=_createTester(async.eachOf,notId,notId);async.everyLimit=_createTester(async.eachOfLimit,notId,notId);function _findGetResult(v,x){return x}async.detect=_createTester(async.eachOf,identity,_findGetResult);async.detectSeries=_createTester(async.eachOfSeries,identity,_findGetResult);async.detectLimit=_createTester(async.eachOfLimit,identity,_findGetResult);async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){if(err){callback(err)}else{callback(null,{value:x,criteria:criteria})}})},function(err,results){if(err){return callback(err)}else{callback(null,_map(results.sort(comparator),function(x){return x.value}))}});function comparator(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0}};async.auto=function(tasks,concurrency,callback){if(typeof arguments[1]==="function"){callback=concurrency;concurrency=null}callback=_once(callback||noop);var keys=_keys(tasks);var remainingTasks=keys.length;if(!remainingTasks){return callback(null)}if(!concurrency){concurrency=remainingTasks}var results={};var runningTasks=0;var hasError=false;var listeners=[];function addListener(fn){listeners.unshift(fn)}function removeListener(fn){var idx=_indexOf(listeners,fn);if(idx>=0)listeners.splice(idx,1)}function taskComplete(){remainingTasks--;_arrayEach(listeners.slice(0),function(fn){fn()})}addListener(function(){if(!remainingTasks){callback(null,results)}});_arrayEach(keys,function(k){if(hasError)return;var task=_isArray(tasks[k])?tasks[k]:[tasks[k]];var taskCallback=_restParam(function(err,args){runningTasks--;if(args.length<=1){args=args[0]}if(err){var safeResults={};_forEachOf(results,function(val,rkey){safeResults[rkey]=val});safeResults[k]=args;hasError=true;callback(err,safeResults)}else{results[k]=args;async.setImmediate(taskComplete)}});var requires=task.slice(0,task.length-1);var len=requires.length;var dep;while(len--){if(!(dep=tasks[requires[len]])){throw new Error("Has nonexistent dependency in "+requires.join(", "))}if(_isArray(dep)&&_indexOf(dep,k)>=0){throw new Error("Has cyclic dependencies")}}function ready(){return runningTasks<concurrency&&_reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},true)&&!results.hasOwnProperty(k)}if(ready()){runningTasks++;task[task.length-1](taskCallback,results)}else{addListener(listener)}function listener(){if(ready()){runningTasks++;removeListener(listener);task[task.length-1](taskCallback,results)}}})};async.retry=function(times,task,callback){var DEFAULT_TIMES=5;var DEFAULT_INTERVAL=0;var attempts=[];var opts={times:DEFAULT_TIMES,interval:DEFAULT_INTERVAL};function parseTimes(acc,t){if(typeof t==="number"){acc.times=parseInt(t,10)||DEFAULT_TIMES}else if(typeof t==="object"){acc.times=parseInt(t.times,10)||DEFAULT_TIMES;acc.interval=parseInt(t.interval,10)||DEFAULT_INTERVAL}else{throw new Error("Unsupported argument type for 'times': "+typeof t)}}var length=arguments.length;if(length<1||length>3){throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)")}else if(length<=2&&typeof times==="function"){callback=task;task=times}if(typeof times!=="function"){parseTimes(opts,times)}opts.callback=callback;opts.task=task;function wrappedTask(wrappedCallback,wrappedResults){function retryAttempt(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}}function retryInterval(interval){return function(seriesCallback){setTimeout(function(){seriesCallback(null)},interval)}}while(opts.times){var finalAttempt=!(opts.times-=1);attempts.push(retryAttempt(opts.task,finalAttempt));if(!finalAttempt&&opts.interval>0){attempts.push(retryInterval(opts.interval))}}async.series(attempts,function(done,data){data=data[data.length-1];(wrappedCallback||opts.callback)(data.err,data.result)})}return opts.callback?wrappedTask():wrappedTask};async.waterfall=function(tasks,callback){callback=_once(callback||noop);if(!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length){return callback()}function wrapIterator(iterator){return _restParam(function(err,args){if(err){callback.apply(null,[err].concat(args))}else{var next=iterator.next();if(next){args.push(wrapIterator(next))}else{args.push(callback)}ensureAsync(iterator).apply(null,args)}})}wrapIterator(async.iterator(tasks))()};function _parallel(eachfn,tasks,callback){callback=callback||noop;var results=_isArrayLike(tasks)?[]:{};eachfn(tasks,function(task,key,callback){task(_restParam(function(err,args){if(args.length<=1){args=args[0]}results[key]=args;callback(err)}))},function(err){callback(err,results)})}async.parallel=function(tasks,callback){_parallel(async.eachOf,tasks,callback)};async.parallelLimit=function(tasks,limit,callback){_parallel(_eachOfLimit(limit),tasks,callback)};async.series=function(tasks,callback){_parallel(async.eachOfSeries,tasks,callback)};async.iterator=function(tasks){function makeCallback(index){function fn(){if(tasks.length){tasks[index].apply(null,arguments)}return fn.next()}fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null};return fn}return makeCallback(0)};async.apply=_restParam(function(fn,args){return _restParam(function(callArgs){return fn.apply(null,args.concat(callArgs))})});function _concat(eachfn,arr,fn,callback){var result=[];eachfn(arr,function(x,index,cb){fn(x,function(err,y){result=result.concat(y||[]);cb(err)})},function(err){callback(err,result)})}async.concat=doParallel(_concat);async.concatSeries=doSeries(_concat);async.whilst=function(test,iterator,callback){callback=callback||noop;if(test()){var next=_restParam(function(err,args){if(err){callback(err)}else if(test.apply(this,args)){iterator(next)}else{callback.apply(null,[null].concat(args))}});iterator(next)}else{callback(null)}};async.doWhilst=function(iterator,test,callback){var calls=0;return async.whilst(function(){return++calls<=1||test.apply(this,arguments)},iterator,callback)};async.until=function(test,iterator,callback){return async.whilst(function(){return!test.apply(this,arguments)},iterator,callback)};async.doUntil=function(iterator,test,callback){return async.doWhilst(iterator,function(){return!test.apply(this,arguments)},callback)};async.during=function(test,iterator,callback){callback=callback||noop;var next=_restParam(function(err,args){if(err){callback(err)}else{args.push(check);test.apply(this,args)}});var check=function(err,truth){if(err){callback(err)}else if(truth){iterator(next)}else{callback(null)}};test(check)};async.doDuring=function(iterator,test,callback){var calls=0;async.during(function(next){if(calls++<1){next(null,true)}else{test.apply(this,arguments)}},iterator,callback)};function _queue(worker,concurrency,payload){if(concurrency==null){concurrency=1}else if(concurrency===0){throw new Error("Concurrency must not be zero")}function _insert(q,data,pos,callback){if(callback!=null&&typeof callback!=="function"){throw new Error("task callback must be a function")}q.started=true;if(!_isArray(data)){data=[data]}if(data.length===0&&q.idle()){return async.setImmediate(function(){q.drain()})}_arrayEach(data,function(task){var item={data:task,callback:callback||noop};if(pos){q.tasks.unshift(item)}else{q.tasks.push(item)}if(q.tasks.length===q.concurrency){q.saturated()}});async.setImmediate(q.process)}function _next(q,tasks){return function(){workers-=1;var removed=false;var args=arguments;_arrayEach(tasks,function(task){_arrayEach(workersList,function(worker,index){if(worker===task&&!removed){workersList.splice(index,1);removed=true}});task.callback.apply(task,args)});if(q.tasks.length+workers===0){q.drain()}q.process()}}var workers=0;var workersList=[];var q={tasks:[],concurrency:concurrency,payload:payload,saturated:noop,empty:noop,drain:noop,started:false,paused:false,push:function(data,callback){_insert(q,data,false,callback)},kill:function(){q.drain=noop;q.tasks=[]},unshift:function(data,callback){_insert(q,data,true,callback)},process:function(){while(!q.paused&&workers<q.concurrency&&q.tasks.length){var tasks=q.payload?q.tasks.splice(0,q.payload):q.tasks.splice(0,q.tasks.length);var data=_map(tasks,function(task){return task.data});if(q.tasks.length===0){q.empty()}workers+=1;workersList.push(tasks[0]);var cb=only_once(_next(q,tasks));worker(data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},workersList:function(){return workersList},idle:function(){return q.tasks.length+workers===0},pause:function(){q.paused=true},resume:function(){if(q.paused===false){return}q.paused=false;var resumeCount=Math.min(q.concurrency,q.tasks.length);for(var w=1;w<=resumeCount;w++){async.setImmediate(q.process)}}};return q}async.queue=function(worker,concurrency){var q=_queue(function(items,cb){worker(items[0],cb)},concurrency,1);return q};async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){var beg=-1,end=sequence.length-1;while(beg<end){var mid=beg+(end-beg+1>>>1);if(compare(item,sequence[mid])>=0){beg=mid}else{end=mid-1}}return beg}function _insert(q,data,priority,callback){if(callback!=null&&typeof callback!=="function"){throw new Error("task callback must be a function")}q.started=true;if(!_isArray(data)){data=[data]}if(data.length===0){return async.setImmediate(function(){q.drain()})}_arrayEach(data,function(task){var item={data:task,priority:priority,callback:typeof callback==="function"?callback:noop};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item);if(q.tasks.length===q.concurrency){q.saturated()}async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);q.push=function(data,priority,callback){_insert(q,data,priority,callback)};delete q.unshift;return q};async.cargo=function(worker,payload){return _queue(worker,1,payload)};function _console_fn(name){return _restParam(function(fn,args){fn.apply(null,args.concat([_restParam(function(err,args){if(typeof console==="object"){if(err){if(console.error){console.error(err)}}else if(console[name]){_arrayEach(args,function(x){console[name](x)})}}})]))})}async.log=_console_fn("log");async.dir=_console_fn("dir");async.memoize=function(fn,hasher){var memo={};var queues={};var has=Object.prototype.hasOwnProperty;hasher=hasher||identity;var memoized=_restParam(function memoized(args){var callback=args.pop();var key=hasher.apply(null,args);if(has.call(memo,key)){async.setImmediate(function(){callback.apply(null,memo[key])})}else if(has.call(queues,key)){queues[key].push(callback)}else{queues[key]=[callback];fn.apply(null,args.concat([_restParam(function(args){memo[key]=args;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++){q[i].apply(null,args)}})]))}});memoized.memo=memo;memoized.unmemoized=fn;return memoized};async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}};function _times(mapper){return function(count,iterator,callback){mapper(_range(count),iterator,callback)}}async.times=_times(async.map);async.timesSeries=_times(async.mapSeries);async.timesLimit=function(count,limit,iterator,callback){return async.mapLimit(_range(count),limit,iterator,callback)};async.seq=function(){var fns=arguments;return _restParam(function(args){var that=this;var callback=args[args.length-1];if(typeof callback=="function"){args.pop()}else{callback=noop}async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([_restParam(function(err,nextargs){cb(err,nextargs)})]))},function(err,results){callback.apply(that,[err].concat(results))})})};async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))};function _applyEach(eachfn){return _restParam(function(fns,args){var go=_restParam(function(args){var that=this;var callback=args.pop();return eachfn(fns,function(fn,_,cb){fn.apply(that,args.concat([cb]))},callback)});if(args.length){return go.apply(this,args)}else{return go}})}async.applyEach=_applyEach(async.eachOf);async.applyEachSeries=_applyEach(async.eachOfSeries);async.forever=function(fn,callback){var done=only_once(callback||noop);var task=ensureAsync(fn);function next(err){if(err){return done(err)}task(next)}next()};function ensureAsync(fn){return _restParam(function(args){var callback=args.pop();args.push(function(){var innerArgs=arguments;if(sync){async.setImmediate(function(){callback.apply(null,innerArgs)})}else{callback.apply(null,innerArgs)}});var sync=true;fn.apply(this,args);sync=false})}async.ensureAsync=ensureAsync;async.constant=_restParam(function(values){var args=[null].concat(values);return function(callback){return callback.apply(this,args)}});async.wrapSync=async.asyncify=function asyncify(func){return _restParam(function(args){var callback=args.pop();var result;try{result=func.apply(this,args)}catch(e){return callback(e)}if(_isObject(result)&&typeof result.then==="function"){result.then(function(value){callback(null,value)})["catch"](function(err){callback(err.message?err:new Error(err))})}else{callback(null,result)}})};if(typeof module==="object"&&module.exports){module.exports=async}else if(typeof define==="function"&&define.amd){define([],function(){return async})}else{root.async=async}})()}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:3}],2:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:3}],3:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],4:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){
error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],5:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],6:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},{}],7:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":5,"./encode":6}],8:[function(require,module,exports){var punycode=require("punycode");exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=require("querystring");function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var rest=url;rest=rest.trim();var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){var domainArray=this.hostname.split(".");var newOut=[];for(var i=0;i<domainArray.length;++i){var s=domainArray[i];newOut.push(s.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(s):s)}this.hostname=newOut.join(".")}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;Object.keys(this).forEach(function(k){result[k]=this[k]},this);result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){Object.keys(relative).forEach(function(k){if(k!=="protocol")result[k]=relative[k]});if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){Object.keys(relative).forEach(function(k){result[k]=relative[k]});result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last=="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!isNull(result.pathname)||!isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host};function isString(arg){return typeof arg==="string"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isNull(arg){return arg===null}function isNullOrUndefined(arg){return arg==null}},{punycode:4,querystring:7}],9:[function(require,module,exports){"use strict";module.exports=earcut;function earcut(data,holeIndices,dim){dim=dim||2;var hasHoles=holeIndices&&holeIndices.length,outerLen=hasHoles?holeIndices[0]*dim:data.length,outerNode=linkedList(data,0,outerLen,dim,true),triangles=[];if(!outerNode)return triangles;var minX,minY,maxX,maxY,x,y,size;if(hasHoles)outerNode=eliminateHoles(data,holeIndices,outerNode,dim);if(data.length>80*dim){minX=maxX=data[0];minY=maxY=data[1];for(var i=dim;i<outerLen;i+=dim){x=data[i];y=data[i+1];if(x<minX)minX=x;if(y<minY)minY=y;if(x>maxX)maxX=x;if(y>maxY)maxY=y}size=Math.max(maxX-minX,maxY-minY)}earcutLinked(outerNode,triangles,dim,minX,minY,size);return triangles}function linkedList(data,start,end,dim,clockwise){var sum=0,i,j,last;for(i=start,j=end-dim;i<end;i+=dim){sum+=(data[j]-data[i])*(data[i+1]+data[j+1]);j=i}if(clockwise===sum>0){for(i=start;i<end;i+=dim)last=insertNode(i,data[i],data[i+1],last)}else{for(i=end-dim;i>=start;i-=dim)last=insertNode(i,data[i],data[i+1],last)}return last}function filterPoints(start,end){if(!start)return start;if(!end)end=start;var p=start,again;do{again=false;if(!p.steiner&&(equals(p,p.next)||area(p.prev,p,p.next)===0)){removeNode(p);p=end=p.prev;if(p===p.next)return null;again=true}else{p=p.next}}while(again||p!==end);return end}function earcutLinked(ear,triangles,dim,minX,minY,size,pass){if(!ear)return;if(!pass&&size)indexCurve(ear,minX,minY,size);var stop=ear,prev,next;while(ear.prev!==ear.next){prev=ear.prev;next=ear.next;if(size?isEarHashed(ear,minX,minY,size):isEar(ear)){triangles.push(prev.i/dim);triangles.push(ear.i/dim);triangles.push(next.i/dim);removeNode(ear);ear=next.next;stop=next.next;continue}ear=next;if(ear===stop){if(!pass){earcutLinked(filterPoints(ear),triangles,dim,minX,minY,size,1)}else if(pass===1){ear=cureLocalIntersections(ear,triangles,dim);earcutLinked(ear,triangles,dim,minX,minY,size,2)}else if(pass===2){splitEarcut(ear,triangles,dim,minX,minY,size)}break}}}function isEar(ear){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return false;var p=ear.next.next;while(p!==ear.prev){if(pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return false;p=p.next}return true}function isEarHashed(ear,minX,minY,size){var a=ear.prev,b=ear,c=ear.next;if(area(a,b,c)>=0)return false;var minTX=a.x<b.x?a.x<c.x?a.x:c.x:b.x<c.x?b.x:c.x,minTY=a.y<b.y?a.y<c.y?a.y:c.y:b.y<c.y?b.y:c.y,maxTX=a.x>b.x?a.x>c.x?a.x:c.x:b.x>c.x?b.x:c.x,maxTY=a.y>b.y?a.y>c.y?a.y:c.y:b.y>c.y?b.y:c.y;var minZ=zOrder(minTX,minTY,minX,minY,size),maxZ=zOrder(maxTX,maxTY,minX,minY,size);var p=ear.nextZ;while(p&&p.z<=maxZ){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return false;p=p.nextZ}p=ear.prevZ;while(p&&p.z>=minZ){if(p!==ear.prev&&p!==ear.next&&pointInTriangle(a.x,a.y,b.x,b.y,c.x,c.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return false;p=p.prevZ}return true}function cureLocalIntersections(start,triangles,dim){var p=start;do{var a=p.prev,b=p.next.next;if(intersects(a,p,p.next,b)&&locallyInside(a,b)&&locallyInside(b,a)){triangles.push(a.i/dim);triangles.push(p.i/dim);triangles.push(b.i/dim);removeNode(p);removeNode(p.next);p=start=b}p=p.next}while(p!==start);return p}function splitEarcut(start,triangles,dim,minX,minY,size){var a=start;do{var b=a.next.next;while(b!==a.prev){if(a.i!==b.i&&isValidDiagonal(a,b)){var c=splitPolygon(a,b);a=filterPoints(a,a.next);c=filterPoints(c,c.next);earcutLinked(a,triangles,dim,minX,minY,size);earcutLinked(c,triangles,dim,minX,minY,size);return}b=b.next}a=a.next}while(a!==start)}function eliminateHoles(data,holeIndices,outerNode,dim){var queue=[],i,len,start,end,list;for(i=0,len=holeIndices.length;i<len;i++){start=holeIndices[i]*dim;end=i<len-1?holeIndices[i+1]*dim:data.length;list=linkedList(data,start,end,dim,false);if(list===list.next)list.steiner=true;queue.push(getLeftmost(list))}queue.sort(compareX);for(i=0;i<queue.length;i++){eliminateHole(queue[i],outerNode);outerNode=filterPoints(outerNode,outerNode.next)}return outerNode}function compareX(a,b){return a.x-b.x}function eliminateHole(hole,outerNode){outerNode=findHoleBridge(hole,outerNode);if(outerNode){var b=splitPolygon(outerNode,hole);filterPoints(b,b.next)}}function findHoleBridge(hole,outerNode){var p=outerNode,hx=hole.x,hy=hole.y,qx=-Infinity,m;do{if(hy<=p.y&&hy>=p.next.y){var x=p.x+(hy-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(x<=hx&&x>qx){qx=x;m=p.x<p.next.x?p:p.next}}p=p.next}while(p!==outerNode);if(!m)return null;if(hole.x===m.x)return m.prev;var stop=m,tanMin=Infinity,tan;p=m.next;while(p!==stop){if(hx>=p.x&&p.x>=m.x&&pointInTriangle(hy<m.y?hx:qx,hy,m.x,m.y,hy<m.y?qx:hx,hy,p.x,p.y)){tan=Math.abs(hy-p.y)/(hx-p.x);if((tan<tanMin||tan===tanMin&&p.x>m.x)&&locallyInside(p,hole)){m=p;tanMin=tan}}p=p.next}return m}function indexCurve(start,minX,minY,size){var p=start;do{if(p.z===null)p.z=zOrder(p.x,p.y,minX,minY,size);p.prevZ=p.prev;p.nextZ=p.next;p=p.next}while(p!==start);p.prevZ.nextZ=null;p.prevZ=null;sortLinked(p)}function sortLinked(list){var i,p,q,e,tail,numMerges,pSize,qSize,inSize=1;do{p=list;list=null;tail=null;numMerges=0;while(p){numMerges++;q=p;pSize=0;for(i=0;i<inSize;i++){pSize++;q=q.nextZ;if(!q)break}qSize=inSize;while(pSize>0||qSize>0&&q){if(pSize===0){e=q;q=q.nextZ;qSize--}else if(qSize===0||!q){e=p;p=p.nextZ;pSize--}else if(p.z<=q.z){e=p;p=p.nextZ;pSize--}else{e=q;q=q.nextZ;qSize--}if(tail)tail.nextZ=e;else list=e;e.prevZ=tail;tail=e}p=q}tail.nextZ=null;inSize*=2}while(numMerges>1);return list}function zOrder(x,y,minX,minY,size){x=32767*(x-minX)/size;y=32767*(y-minY)/size;x=(x|x<<8)&16711935;x=(x|x<<4)&252645135;x=(x|x<<2)&858993459;x=(x|x<<1)&1431655765;y=(y|y<<8)&16711935;y=(y|y<<4)&252645135;y=(y|y<<2)&858993459;y=(y|y<<1)&1431655765;return x|y<<1}function getLeftmost(start){var p=start,leftmost=start;do{if(p.x<leftmost.x)leftmost=p;p=p.next}while(p!==start);return leftmost}function pointInTriangle(ax,ay,bx,by,cx,cy,px,py){return(cx-px)*(ay-py)-(ax-px)*(cy-py)>=0&&(ax-px)*(by-py)-(bx-px)*(ay-py)>=0&&(bx-px)*(cy-py)-(cx-px)*(by-py)>=0}function isValidDiagonal(a,b){return equals(a,b)||a.next.i!==b.i&&a.prev.i!==b.i&&!intersectsPolygon(a,b)&&locallyInside(a,b)&&locallyInside(b,a)&&middleInside(a,b)}function area(p,q,r){return(q.y-p.y)*(r.x-q.x)-(q.x-p.x)*(r.y-q.y)}function equals(p1,p2){return p1.x===p2.x&&p1.y===p2.y}function intersects(p1,q1,p2,q2){return area(p1,q1,p2)>0!==area(p1,q1,q2)>0&&area(p2,q2,p1)>0!==area(p2,q2,q1)>0}function intersectsPolygon(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&intersects(p,p.next,a,b))return true;p=p.next}while(p!==a);return false}function locallyInside(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function middleInside(a,b){var p=a,inside=false,px=(a.x+b.x)/2,py=(a.y+b.y)/2;do{if(p.y>py!==p.next.y>py&&px<(p.next.x-p.x)*(py-p.y)/(p.next.y-p.y)+p.x)inside=!inside;p=p.next}while(p!==a);return inside}function splitPolygon(a,b){var a2=new Node(a.i,a.x,a.y),b2=new Node(b.i,b.x,b.y),an=a.next,bp=b.prev;a.next=b;b.prev=a;a2.next=an;an.prev=a2;b2.next=a2;a2.prev=b2;bp.next=b2;b2.prev=bp;return b2}function insertNode(i,x,y,last){var p=new Node(i,x,y);if(!last){p.prev=p;p.next=p}else{p.next=last.next;p.prev=last;last.next.prev=p;last.next=p}return p}function removeNode(p){p.next.prev=p.prev;p.prev.next=p.next;if(p.prevZ)p.prevZ.nextZ=p.nextZ;if(p.nextZ)p.nextZ.prevZ=p.prevZ}function Node(i,x,y){this.i=i;this.x=x;this.y=y;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false}},{}],10:[function(require,module,exports){"use strict";var prefix=typeof Object.create!=="function"?"~":false;function EE(fn,context,once){this.fn=fn;this.context=context;this.once=once||false}function EventEmitter(){}EventEmitter.prototype._events=undefined;EventEmitter.prototype.listeners=function listeners(event,exists){var evt=prefix?prefix+event:event,available=this._events&&this._events[evt];if(exists)return!!available;if(!available)return[];if(available.fn)return[available.fn];for(var i=0,l=available.length,ee=new Array(l);i<l;i++){ee[i]=available[i].fn}return ee};EventEmitter.prototype.emit=function emit(event,a1,a2,a3,a4,a5){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return false;var listeners=this._events[evt],len=arguments.length,args,i;if("function"===typeof listeners.fn){if(listeners.once)this.removeListener(event,listeners.fn,undefined,true);switch(len){case 1:return listeners.fn.call(listeners.context),true;case 2:return listeners.fn.call(listeners.context,a1),true;case 3:return listeners.fn.call(listeners.context,a1,a2),true;case 4:return listeners.fn.call(listeners.context,a1,a2,a3),true;case 5:return listeners.fn.call(listeners.context,a1,a2,a3,a4),true;case 6:return listeners.fn.call(listeners.context,a1,a2,a3,a4,a5),true}for(i=1,args=new Array(len-1);i<len;i++){args[i-1]=arguments[i]}listeners.fn.apply(listeners.context,args)}else{var length=listeners.length,j;for(i=0;i<length;i++){if(listeners[i].once)this.removeListener(event,listeners[i].fn,undefined,true);switch(len){case 1:listeners[i].fn.call(listeners[i].context);break;case 2:listeners[i].fn.call(listeners[i].context,a1);break;case 3:listeners[i].fn.call(listeners[i].context,a1,a2);break;default:if(!args)for(j=1,args=new Array(len-1);j<len;j++){args[j-1]=arguments[j]}listeners[i].fn.apply(listeners[i].context,args)}}}return true};EventEmitter.prototype.on=function on(event,fn,context){var listener=new EE(fn,context||this),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.once=function once(event,fn,context){var listener=new EE(fn,context||this,true),evt=prefix?prefix+event:event;if(!this._events)this._events=prefix?{}:Object.create(null);if(!this._events[evt])this._events[evt]=listener;else{if(!this._events[evt].fn)this._events[evt].push(listener);else this._events[evt]=[this._events[evt],listener]}return this};EventEmitter.prototype.removeListener=function removeListener(event,fn,context,once){var evt=prefix?prefix+event:event;if(!this._events||!this._events[evt])return this;var listeners=this._events[evt],events=[];if(fn){if(listeners.fn){if(listeners.fn!==fn||once&&!listeners.once||context&&listeners.context!==context){events.push(listeners)}}else{for(var i=0,length=listeners.length;i<length;i++){if(listeners[i].fn!==fn||once&&!listeners[i].once||context&&listeners[i].context!==context){events.push(listeners[i])}}}}if(events.length){this._events[evt]=events.length===1?events[0]:events}else{delete this._events[evt]}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(event){if(!this._events)return this;if(event)delete this._events[prefix?prefix+event:event];else this._events=prefix?{}:Object.create(null);return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prefixed=prefix;if("undefined"!==typeof module){module.exports=EventEmitter}},{}],11:[function(require,module,exports){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}module.exports=Object.assign||function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},{}],12:[function(require,module,exports){(function(process){(function(){var async={};var root,previous_async;root=this;if(root!=null){previous_async=root.async}async.noConflict=function(){root.async=previous_async;return async};function only_once(fn){var called=false;return function(){if(called)throw new Error("Callback was already called.");called=true;fn.apply(root,arguments)}}var _toString=Object.prototype.toString;var _isArray=Array.isArray||function(obj){return _toString.call(obj)==="[object Array]"};var _each=function(arr,iterator){for(var i=0;i<arr.length;i+=1){iterator(arr[i],i,arr)}};var _map=function(arr,iterator){if(arr.map){return arr.map(iterator)}var results=[];_each(arr,function(x,i,a){results.push(iterator(x,i,a))});return results};var _reduce=function(arr,iterator,memo){if(arr.reduce){return arr.reduce(iterator,memo)}_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)});return memo};var _keys=function(obj){if(Object.keys){return Object.keys(obj)}var keys=[];for(var k in obj){if(obj.hasOwnProperty(k)){keys.push(k)}}return keys};if(typeof process==="undefined"||!process.nextTick){if(typeof setImmediate==="function"){async.nextTick=function(fn){setImmediate(fn)};async.setImmediate=async.nextTick}else{async.nextTick=function(fn){setTimeout(fn,0)};async.setImmediate=async.nextTick}}else{async.nextTick=process.nextTick;if(typeof setImmediate!=="undefined"){async.setImmediate=function(fn){setImmediate(fn)}}else{async.setImmediate=async.nextTick}}async.each=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback()}var completed=0;_each(arr,function(x){iterator(x,only_once(done))});function done(err){if(err){callback(err);callback=function(){}}else{completed+=1;if(completed>=arr.length){callback()}}}};async.forEach=async.each;async.eachSeries=function(arr,iterator,callback){callback=callback||function(){};if(!arr.length){return callback()}var completed=0;var iterate=function(){iterator(arr[completed],function(err){if(err){callback(err);callback=function(){}}else{completed+=1;if(completed>=arr.length){callback()}else{iterate()}}})};iterate()};async.forEachSeries=async.eachSeries;async.eachLimit=function(arr,limit,iterator,callback){var fn=_eachLimit(limit);fn.apply(null,[arr,iterator,callback])};async.forEachLimit=async.eachLimit;var _eachLimit=function(limit){return function(arr,iterator,callback){callback=callback||function(){};if(!arr.length||limit<=0){return callback()}var completed=0;var started=0;var running=0;(function replenish(){if(completed>=arr.length){return callback()}while(running<limit&&started<arr.length){started+=1;running+=1;iterator(arr[started-1],function(err){if(err){callback(err);callback=function(){}}else{completed+=1;running-=1;if(completed>=arr.length){callback()}else{replenish()}}})}})()}};var doParallel=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.each].concat(args))}};var doParallelLimit=function(limit,fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[_eachLimit(limit)].concat(args))}};var doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments);return fn.apply(null,[async.eachSeries].concat(args))}};var _asyncMap=function(eachfn,arr,iterator,callback){arr=_map(arr,function(x,i){return{index:i,value:x}});if(!callback){eachfn(arr,function(x,callback){iterator(x.value,function(err){callback(err)})})}else{var results=[];eachfn(arr,function(x,callback){iterator(x.value,function(err,v){results[x.index]=v;callback(err)})},function(err){callback(err,results)})}};async.map=doParallel(_asyncMap);async.mapSeries=doSeries(_asyncMap);async.mapLimit=function(arr,limit,iterator,callback){return _mapLimit(limit)(arr,iterator,callback)};var _mapLimit=function(limit){return doParallelLimit(limit,_asyncMap)};async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){
memo=v;callback(err)})},function(err){callback(err,memo)})};async.inject=async.reduce;async.foldl=async.reduce;async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse();async.reduce(reversed,memo,iterator,callback)};async.foldr=async.reduceRight;var _filter=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(v){results.push(x)}callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.filter=doParallel(_filter);async.filterSeries=doSeries(_filter);async.select=async.filter;async.selectSeries=async.filterSeries;var _reject=function(eachfn,arr,iterator,callback){var results=[];arr=_map(arr,function(x,i){return{index:i,value:x}});eachfn(arr,function(x,callback){iterator(x.value,function(v){if(!v){results.push(x)}callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index}),function(x){return x.value}))})};async.reject=doParallel(_reject);async.rejectSeries=doSeries(_reject);var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){if(result){main_callback(x);main_callback=function(){}}else{callback()}})},function(err){main_callback()})};async.detect=doParallel(_detect);async.detectSeries=doSeries(_detect);async.some=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(v){main_callback(true);main_callback=function(){}}callback()})},function(err){main_callback(false)})};async.any=async.some;async.every=function(arr,iterator,main_callback){async.each(arr,function(x,callback){iterator(x,function(v){if(!v){main_callback(false);main_callback=function(){}}callback()})},function(err){main_callback(true)})};async.all=async.every;async.sortBy=function(arr,iterator,callback){async.map(arr,function(x,callback){iterator(x,function(err,criteria){if(err){callback(err)}else{callback(null,{value:x,criteria:criteria})}})},function(err,results){if(err){return callback(err)}else{var fn=function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0};callback(null,_map(results.sort(fn),function(x){return x.value}))}})};async.auto=function(tasks,callback){callback=callback||function(){};var keys=_keys(tasks);var remainingTasks=keys.length;if(!remainingTasks){return callback()}var results={};var listeners=[];var addListener=function(fn){listeners.unshift(fn)};var removeListener=function(fn){for(var i=0;i<listeners.length;i+=1){if(listeners[i]===fn){listeners.splice(i,1);return}}};var taskComplete=function(){remainingTasks--;_each(listeners.slice(0),function(fn){fn()})};addListener(function(){if(!remainingTasks){var theCallback=callback;callback=function(){};theCallback(null,results)}});_each(keys,function(k){var task=_isArray(tasks[k])?tasks[k]:[tasks[k]];var taskCallback=function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}if(err){var safeResults={};_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey]});safeResults[k]=args;callback(err,safeResults);callback=function(){}}else{results[k]=args;async.setImmediate(taskComplete)}};var requires=task.slice(0,Math.abs(task.length-1))||[];var ready=function(){return _reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},true)&&!results.hasOwnProperty(k)};if(ready()){task[task.length-1](taskCallback,results)}else{var listener=function(){if(ready()){removeListener(listener);task[task.length-1](taskCallback,results)}};addListener(listener)}})};async.retry=function(times,task,callback){var DEFAULT_TIMES=5;var attempts=[];if(typeof times==="function"){callback=task;task=times;times=DEFAULT_TIMES}times=parseInt(times,10)||DEFAULT_TIMES;var wrappedTask=function(wrappedCallback,wrappedResults){var retryAttempt=function(task,finalAttempt){return function(seriesCallback){task(function(err,result){seriesCallback(!err||finalAttempt,{err:err,result:result})},wrappedResults)}};while(times){attempts.push(retryAttempt(task,!(times-=1)))}async.series(attempts,function(done,data){data=data[data.length-1];(wrappedCallback||callback)(data.err,data.result)})};return callback?wrappedTask():wrappedTask};async.waterfall=function(tasks,callback){callback=callback||function(){};if(!_isArray(tasks)){var err=new Error("First argument to waterfall must be an array of functions");return callback(err)}if(!tasks.length){return callback()}var wrapIterator=function(iterator){return function(err){if(err){callback.apply(null,arguments);callback=function(){}}else{var args=Array.prototype.slice.call(arguments,1);var next=iterator.next();if(next){args.push(wrapIterator(next))}else{args.push(callback)}async.setImmediate(function(){iterator.apply(null,args)})}}};wrapIterator(async.iterator(tasks))()};var _parallel=function(eachfn,tasks,callback){callback=callback||function(){};if(_isArray(tasks)){eachfn.map(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}callback.call(null,err,args)})}},callback)}else{var results={};eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}results[k]=args;callback(err)})},function(err){callback(err,results)})}};async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)};async.parallelLimit=function(tasks,limit,callback){_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)};async.series=function(tasks,callback){callback=callback||function(){};if(_isArray(tasks)){async.mapSeries(tasks,function(fn,callback){if(fn){fn(function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}callback.call(null,err,args)})}},callback)}else{var results={};async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1);if(args.length<=1){args=args[0]}results[k]=args;callback(err)})},function(err){callback(err,results)})}};async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){if(tasks.length){tasks[index].apply(null,arguments)}return fn.next()};fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null};return fn};return makeCallback(0)};async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1);return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}};var _concat=function(eachfn,arr,fn,callback){var r=[];eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]);cb(err)})},function(err){callback(err,r)})};async.concat=doParallel(_concat);async.concatSeries=doSeries(_concat);async.whilst=function(test,iterator,callback){if(test()){iterator(function(err){if(err){return callback(err)}async.whilst(test,iterator,callback)})}else{callback()}};async.doWhilst=function(iterator,test,callback){iterator(function(err){if(err){return callback(err)}var args=Array.prototype.slice.call(arguments,1);if(test.apply(null,args)){async.doWhilst(iterator,test,callback)}else{callback()}})};async.until=function(test,iterator,callback){if(!test()){iterator(function(err){if(err){return callback(err)}async.until(test,iterator,callback)})}else{callback()}};async.doUntil=function(iterator,test,callback){iterator(function(err){if(err){return callback(err)}var args=Array.prototype.slice.call(arguments,1);if(!test.apply(null,args)){async.doUntil(iterator,test,callback)}else{callback()}})};async.queue=function(worker,concurrency){if(concurrency===undefined){concurrency=1}function _insert(q,data,pos,callback){if(!q.started){q.started=true}if(!_isArray(data)){data=[data]}if(data.length==0){return async.setImmediate(function(){if(q.drain){q.drain()}})}_each(data,function(task){var item={data:task,callback:typeof callback==="function"?callback:null};if(pos){q.tasks.unshift(item)}else{q.tasks.push(item)}if(q.saturated&&q.tasks.length===q.concurrency){q.saturated()}async.setImmediate(q.process)})}var workers=0;var q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,started:false,paused:false,push:function(data,callback){_insert(q,data,false,callback)},kill:function(){q.drain=null;q.tasks=[]},unshift:function(data,callback){_insert(q,data,true,callback)},process:function(){if(!q.paused&&workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift();if(q.empty&&q.tasks.length===0){q.empty()}workers+=1;var next=function(){workers-=1;if(task.callback){task.callback.apply(task,arguments)}if(q.drain&&q.tasks.length+workers===0){q.drain()}q.process()};var cb=only_once(next);worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers},idle:function(){return q.tasks.length+workers===0},pause:function(){if(q.paused===true){return}q.paused=true},resume:function(){if(q.paused===false){return}q.paused=false;for(var w=1;w<=q.concurrency;w++){async.setImmediate(q.process)}}};return q};async.priorityQueue=function(worker,concurrency){function _compareTasks(a,b){return a.priority-b.priority}function _binarySearch(sequence,item,compare){var beg=-1,end=sequence.length-1;while(beg<end){var mid=beg+(end-beg+1>>>1);if(compare(item,sequence[mid])>=0){beg=mid}else{end=mid-1}}return beg}function _insert(q,data,priority,callback){if(!q.started){q.started=true}if(!_isArray(data)){data=[data]}if(data.length==0){return async.setImmediate(function(){if(q.drain){q.drain()}})}_each(data,function(task){var item={data:task,priority:priority,callback:typeof callback==="function"?callback:null};q.tasks.splice(_binarySearch(q.tasks,item,_compareTasks)+1,0,item);if(q.saturated&&q.tasks.length===q.concurrency){q.saturated()}async.setImmediate(q.process)})}var q=async.queue(worker,concurrency);q.push=function(data,priority,callback){_insert(q,data,priority,callback)};delete q.unshift;return q};async.cargo=function(worker,payload){var working=false,tasks=[];var cargo={tasks:tasks,payload:payload,saturated:null,empty:null,drain:null,drained:true,push:function(data,callback){if(!_isArray(data)){data=[data]}_each(data,function(task){tasks.push({data:task,callback:typeof callback==="function"?callback:null});cargo.drained=false;if(cargo.saturated&&tasks.length===payload){cargo.saturated()}});async.setImmediate(cargo.process)},process:function process(){if(working)return;if(tasks.length===0){if(cargo.drain&&!cargo.drained)cargo.drain();cargo.drained=true;return}var ts=typeof payload==="number"?tasks.splice(0,payload):tasks.splice(0,tasks.length);var ds=_map(ts,function(task){return task.data});if(cargo.empty)cargo.empty();working=true;worker(ds,function(){working=false;var args=arguments;_each(ts,function(data){if(data.callback){data.callback.apply(null,args)}});process()})},length:function(){return tasks.length},running:function(){return working}};return cargo};var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1);fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1);if(typeof console!=="undefined"){if(err){if(console.error){console.error(err)}}else if(console[name]){_each(args,function(x){console[name](x)})}}}]))}};async.log=_console_fn("log");async.dir=_console_fn("dir");async.memoize=function(fn,hasher){var memo={};var queues={};hasher=hasher||function(x){return x};var memoized=function(){var args=Array.prototype.slice.call(arguments);var callback=args.pop();var key=hasher.apply(null,args);if(key in memo){async.nextTick(function(){callback.apply(null,memo[key])})}else if(key in queues){queues[key].push(callback)}else{queues[key]=[callback];fn.apply(null,args.concat([function(){memo[key]=arguments;var q=queues[key];delete queues[key];for(var i=0,l=q.length;i<l;i++){q[i].apply(null,arguments)}}]))}};memoized.memo=memo;memoized.unmemoized=fn;return memoized};async.unmemoize=function(fn){return function(){return(fn.unmemoized||fn).apply(null,arguments)}};async.times=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i)}return async.map(counter,iterator,callback)};async.timesSeries=function(count,iterator,callback){var counter=[];for(var i=0;i<count;i++){counter.push(i)}return async.mapSeries(counter,iterator,callback)};async.seq=function(){var fns=arguments;return function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0];var nextargs=Array.prototype.slice.call(arguments,1);cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}};async.compose=function(){return async.seq.apply(null,Array.prototype.reverse.call(arguments))};var _applyEach=function(eachfn,fns){var go=function(){var that=this;var args=Array.prototype.slice.call(arguments);var callback=args.pop();return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)};if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return go.apply(this,args)}else{return go}};async.applyEach=doParallel(_applyEach);async.applyEachSeries=doSeries(_applyEach);async.forever=function(fn,callback){function next(err){if(err){if(callback){return callback(err)}throw err}fn(next)}next()};if(typeof module!=="undefined"&&module.exports){module.exports=async}else if(typeof define!=="undefined"&&define.amd){define([],function(){return async})}else{root.async=async}})()}).call(this,require("_process"))},{_process:3}],13:[function(require,module,exports){var async=require("async"),urlParser=require("url"),Resource=require("./Resource"),EventEmitter=require("eventemitter3");function Loader(baseUrl,concurrency){EventEmitter.call(this);concurrency=concurrency||10;this.baseUrl=baseUrl||"";this.progress=0;this.loading=false;this._progressChunk=0;this._beforeMiddleware=[];this._afterMiddleware=[];this._boundLoadResource=this._loadResource.bind(this);this._boundOnLoad=this._onLoad.bind(this);this._buffer=[];this._numToLoad=0;this._queue=async.queue(this._boundLoadResource,concurrency);this.resources={}}Loader.prototype=Object.create(EventEmitter.prototype);Loader.prototype.constructor=Loader;module.exports=Loader;Loader.prototype.add=Loader.prototype.enqueue=function(name,url,options,cb){if(Array.isArray(name)){for(var i=0;i<name.length;++i){this.add(name[i])}return this}if(typeof name==="object"){cb=url||name.callback||name.onComplete;options=name;url=name.url;name=name.name||name.key||name.url}if(typeof url!=="string"){cb=options;options=url;url=name}if(typeof url!=="string"){throw new Error("No url passed to add resource to loader.")}if(typeof options==="function"){cb=options;options=null}if(this.resources[name]){throw new Error('Resource with name "'+name+'" already exists.')}url=this._handleBaseUrl(url);this.resources[name]=new Resource(name,url,options);if(typeof cb==="function"){this.resources[name].once("afterMiddleware",cb)}this._numToLoad++;if(this._queue.started){this._queue.push(this.resources[name]);this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())}else{this._buffer.push(this.resources[name]);this._progressChunk=100/this._buffer.length}return this};Loader.prototype._handleBaseUrl=function(url){var parsedUrl=urlParser.parse(url);if(parsedUrl.protocol||parsedUrl.pathname.indexOf("//")===0){return url}if(this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&url.charAt(0)!=="/"){return this.baseUrl+"/"+url}else{return this.baseUrl+url}};Loader.prototype.before=Loader.prototype.pre=function(fn){this._beforeMiddleware.push(fn);return this};Loader.prototype.after=Loader.prototype.use=function(fn){this._afterMiddleware.push(fn);return this};Loader.prototype.reset=function(){this.progress=0;this.loading=false;this._progressChunk=0;this._buffer.length=0;this._numToLoad=0;this._queue.kill();this._queue.started=false;this.resources={}};Loader.prototype.load=function(cb){if(typeof cb==="function"){this.once("complete",cb)}if(this._queue.started){return this}this.emit("start",this);for(var i=0;i<this._buffer.length;++i){this._queue.push(this._buffer[i])}this._buffer.length=0;return this};Loader.prototype._loadResource=function(resource,dequeue){var self=this;resource._dequeue=dequeue;this._runMiddleware(resource,this._beforeMiddleware,function(){resource.load(self._boundOnLoad)})};Loader.prototype._onComplete=function(){this.emit("complete",this,this.resources)};Loader.prototype._onLoad=function(resource){this.progress+=this._progressChunk;this.emit("progress",this,resource);this._runMiddleware(resource,this._afterMiddleware,function(){resource.emit("afterMiddleware",resource);this._numToLoad--;if(this._numToLoad===0){this.progress=100;this._onComplete()}if(resource.error){this.emit("error",resource.error,this,resource)}else{this.emit("load",this,resource)}});resource._dequeue()};Loader.prototype._runMiddleware=function(resource,fns,cb){var self=this;async.eachSeries(fns,function(fn,next){fn.call(self,resource,next)},cb.bind(this,resource))};Loader.LOAD_TYPE=Resource.LOAD_TYPE;Loader.XHR_READY_STATE=Resource.XHR_READY_STATE;Loader.XHR_RESPONSE_TYPE=Resource.XHR_RESPONSE_TYPE},{"./Resource":14,async:12,eventemitter3:10,url:8}],14:[function(require,module,exports){var EventEmitter=require("eventemitter3"),_url=require("url"),useXdr=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),tempAnchor=null;function Resource(name,url,options){EventEmitter.call(this);options=options||{};if(typeof name!=="string"||typeof url!=="string"){throw new Error("Both name and url are required for constructing a resource.")}this.name=name;this.url=url;this.isDataUrl=this.url.indexOf("data:")===0;this.data=null;this.crossOrigin=options.crossOrigin===true?"anonymous":options.crossOrigin;this.loadType=options.loadType||this._determineLoadType();this.xhrType=options.xhrType;this.metadata=options.metadata||{};this.error=null;this.xhr=null;this.isJson=false;this.isXml=false;this.isImage=false;this.isAudio=false;this.isVideo=false;this._dequeue=null;this._boundComplete=this.complete.bind(this);this._boundOnError=this._onError.bind(this);this._boundOnProgress=this._onProgress.bind(this);this._boundXhrOnError=this._xhrOnError.bind(this);this._boundXhrOnAbort=this._xhrOnAbort.bind(this);this._boundXhrOnLoad=this._xhrOnLoad.bind(this);this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}Resource.prototype=Object.create(EventEmitter.prototype);Resource.prototype.constructor=Resource;module.exports=Resource;Resource.prototype.complete=function(){if(this.data&&this.data.removeEventListener){this.data.removeEventListener("error",this._boundOnError);this.data.removeEventListener("load",this._boundComplete);this.data.removeEventListener("progress",this._boundOnProgress);this.data.removeEventListener("canplaythrough",this._boundComplete)}if(this.xhr){if(this.xhr.removeEventListener){this.xhr.removeEventListener("error",this._boundXhrOnError);this.xhr.removeEventListener("abort",this._boundXhrOnAbort);this.xhr.removeEventListener("progress",this._boundOnProgress);this.xhr.removeEventListener("load",this._boundXhrOnLoad)}else{this.xhr.onerror=null;this.xhr.ontimeout=null;this.xhr.onprogress=null;this.xhr.onload=null}}this.emit("complete",this)};Resource.prototype.load=function(cb){this.emit("start",this);if(cb){this.once("complete",cb)}if(this.crossOrigin===false||typeof this.crossOrigin!=="string"){this.crossOrigin=this._determineCrossOrigin(this.url)}switch(this.loadType){case Resource.LOAD_TYPE.IMAGE:this._loadImage();break;case Resource.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case Resource.LOAD_TYPE.VIDEO:this._loadElement("video");break;case Resource.LOAD_TYPE.XHR:default:if(useXdr&&this.crossOrigin){this._loadXdr()}else{this._loadXhr()}break}};Resource.prototype._loadImage=function(){this.data=new Image;if(this.crossOrigin){this.data.crossOrigin=this.crossOrigin}this.data.src=this.url;this.isImage=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false)};Resource.prototype._loadElement=function(type){if(type==="audio"&&typeof Audio!=="undefined"){this.data=new Audio}else{this.data=document.createElement(type)}if(this.data===null){this.error=new Error("Unsupported element "+type);this.complete();return}if(navigator.isCocoonJS){this.data.src=Array.isArray(this.url)?this.url[0]:this.url}else{if(Array.isArray(this.url)){for(var i=0;i<this.url.length;++i){this.data.appendChild(this._createSource(type,this.url[i]))}}else{this.data.appendChild(this._createSource(type,this.url))}}this["is"+type[0].toUpperCase()+type.substring(1)]=true;this.data.addEventListener("error",this._boundOnError,false);this.data.addEventListener("load",this._boundComplete,false);this.data.addEventListener("progress",this._boundOnProgress,false);this.data.addEventListener("canplaythrough",this._boundComplete,false);this.data.load()};Resource.prototype._loadXhr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var xhr=this.xhr=new XMLHttpRequest;xhr.open("GET",this.url,true);if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT){xhr.responseType=Resource.XHR_RESPONSE_TYPE.TEXT}else{xhr.responseType=this.xhrType}xhr.addEventListener("error",this._boundXhrOnError,false);xhr.addEventListener("abort",this._boundXhrOnAbort,false);xhr.addEventListener("progress",this._boundOnProgress,false);xhr.addEventListener("load",this._boundXhrOnLoad,false);xhr.send()};Resource.prototype._loadXdr=function(){if(typeof this.xhrType!=="string"){this.xhrType=this._determineXhrType()}var xdr=this.xhr=new XDomainRequest;xdr.timeout=5e3;xdr.onerror=this._boundXhrOnError;xdr.ontimeout=this._boundXdrOnTimeout;xdr.onprogress=this._boundOnProgress;xdr.onload=this._boundXhrOnLoad;xdr.open("GET",this.url,true);setTimeout(function(){xdr.send()},0)};Resource.prototype._createSource=function(type,url,mime){if(!mime){mime=type+"/"+url.substr(url.lastIndexOf(".")+1)}var source=document.createElement("source");source.src=url;source.type=mime;return source};Resource.prototype._onError=function(event){this.error=new Error("Failed to load element using "+event.target.nodeName);this.complete()};Resource.prototype._onProgress=function(event){if(event&&event.lengthComputable){this.emit("progress",this,event.loaded/event.total)}};Resource.prototype._xhrOnError=function(){this.error=new Error(reqType(this.xhr)+" Request failed. "+"Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"');this.complete()};Resource.prototype._xhrOnAbort=function(){this.error=new Error(reqType(this.xhr)+" Request was aborted by the user.");this.complete()};Resource.prototype._xdrOnTimeout=function(){this.error=new Error(reqType(this.xhr)+" Request timed out.");this.complete()};Resource.prototype._xhrOnLoad=function(){var xhr=this.xhr,status=xhr.status!==undefined?xhr.status:200;if(status===200||status===204||status===0&&xhr.responseText.length>0){if(this.xhrType===Resource.XHR_RESPONSE_TYPE.TEXT){this.data=xhr.responseText}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.JSON){try{this.data=JSON.parse(xhr.responseText);this.isJson=true}catch(e){this.error=new Error("Error trying to parse loaded json:",e)}}else if(this.xhrType===Resource.XHR_RESPONSE_TYPE.DOCUMENT){try{if(window.DOMParser){var domparser=new DOMParser;this.data=domparser.parseFromString(xhr.responseText,"text/xml")}else{var div=document.createElement("div");div.innerHTML=xhr.responseText;this.data=div}this.isXml=true}catch(e){this.error=new Error("Error trying to parse loaded xml:",e)}}else{this.data=xhr.response||xhr.responseText}}else{this.error=new Error("["+xhr.status+"]"+xhr.statusText+":"+xhr.responseURL)}this.complete()};function reqType(xhr){return xhr.toString().replace("object ","")}Resource.prototype._determineCrossOrigin=function(url,loc){if(url.indexOf("data:")===0){return""}loc=loc||window.location;if(!tempAnchor){tempAnchor=document.createElement("a")}tempAnchor.href=url;url=_url.parse(tempAnchor.href);var samePort=!url.port&&loc.port===""||url.port===loc.port;if(url.hostname!==loc.hostname||!samePort||url.protocol!==loc.protocol){return"anonymous"}return""};Resource.prototype._determineXhrType=function(){return Resource._xhrTypeMap[this._getExtension()]||Resource.XHR_RESPONSE_TYPE.TEXT};Resource.prototype._determineLoadType=function(){return Resource._loadTypeMap[this._getExtension()]||Resource.LOAD_TYPE.XHR};Resource.prototype._getExtension=function(){var url=this.url,ext;if(this.isDataUrl){var slashIndex=url.indexOf("/");ext=url.substring(slashIndex+1,url.indexOf(";",slashIndex))}else{var queryStart=url.indexOf("?");if(queryStart!==-1){url=url.substring(0,queryStart)}ext=url.substring(url.lastIndexOf(".")+1)}return ext};Resource.prototype._getMimeFromXhrType=function(type){switch(type){case Resource.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Resource.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Resource.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Resource.XHR_RESPONSE_TYPE.JSON:return"application/json";case Resource.XHR_RESPONSE_TYPE.DEFAULT:case Resource.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}};Resource.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4};Resource.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};Resource.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"};Resource._loadTypeMap={gif:Resource.LOAD_TYPE.IMAGE,png:Resource.LOAD_TYPE.IMAGE,bmp:Resource.LOAD_TYPE.IMAGE,jpg:Resource.LOAD_TYPE.IMAGE,jpeg:Resource.LOAD_TYPE.IMAGE,tif:Resource.LOAD_TYPE.IMAGE,tiff:Resource.LOAD_TYPE.IMAGE,webp:Resource.LOAD_TYPE.IMAGE,tga:Resource.LOAD_TYPE.IMAGE};Resource._xhrTypeMap={xhtml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,html:Resource.XHR_RESPONSE_TYPE.DOCUMENT,htm:Resource.XHR_RESPONSE_TYPE.DOCUMENT,xml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,svg:Resource.XHR_RESPONSE_TYPE.DOCUMENT,gif:Resource.XHR_RESPONSE_TYPE.BLOB,png:Resource.XHR_RESPONSE_TYPE.BLOB,bmp:Resource.XHR_RESPONSE_TYPE.BLOB,jpg:Resource.XHR_RESPONSE_TYPE.BLOB,jpeg:Resource.XHR_RESPONSE_TYPE.BLOB,tif:Resource.XHR_RESPONSE_TYPE.BLOB,tiff:Resource.XHR_RESPONSE_TYPE.BLOB,webp:Resource.XHR_RESPONSE_TYPE.BLOB,tga:Resource.XHR_RESPONSE_TYPE.BLOB,json:Resource.XHR_RESPONSE_TYPE.JSON,text:Resource.XHR_RESPONSE_TYPE.TEXT,txt:Resource.XHR_RESPONSE_TYPE.TEXT};Resource.setExtensionLoadType=function(extname,loadType){setExtMap(Resource._loadTypeMap,extname,loadType)};Resource.setExtensionXhrType=function(extname,xhrType){setExtMap(Resource._xhrTypeMap,extname,xhrType)};function setExtMap(map,extname,val){if(extname&&extname.indexOf(".")===0){extname=extname.substring(1)}if(!extname){return}map[extname]=val}},{eventemitter3:10,url:8}],15:[function(require,module,exports){module.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(input){var output="";var bytebuffer;var encodedCharIndexes=new Array(4);var inx=0;var jnx=0;var paddingBytes=0;while(inx<input.length){bytebuffer=new Array(3);for(jnx=0;jnx<bytebuffer.length;jnx++){if(inx<input.length){bytebuffer[jnx]=input.charCodeAt(inx++)&255}else{bytebuffer[jnx]=0}}encodedCharIndexes[0]=bytebuffer[0]>>2;encodedCharIndexes[1]=(bytebuffer[0]&3)<<4|bytebuffer[1]>>4;encodedCharIndexes[2]=(bytebuffer[1]&15)<<2|bytebuffer[2]>>6;encodedCharIndexes[3]=bytebuffer[2]&63;paddingBytes=inx-(input.length-1);switch(paddingBytes){case 2:encodedCharIndexes[3]=64;encodedCharIndexes[2]=64;break;case 1:encodedCharIndexes[3]=64;break;default:break}for(jnx=0;jnx<encodedCharIndexes.length;jnx++){output+=this._keyStr.charAt(encodedCharIndexes[jnx])}}return output}}},{}],16:[function(require,module,exports){module.exports=require("./Loader");module.exports.Resource=require("./Resource");module.exports.middleware={caching:{memory:require("./middlewares/caching/memory")},parsing:{blob:require("./middlewares/parsing/blob")}}},{"./Loader":13,"./Resource":14,"./middlewares/caching/memory":17,"./middlewares/parsing/blob":18}],17:[function(require,module,exports){var cache={};module.exports=function(){return function(resource,next){if(cache[resource.url]){resource.data=cache[resource.url];resource.complete()}else{resource.once("complete",function(){cache[this.url]=this.data})}next()}}},{}],18:[function(require,module,exports){var Resource=require("../../Resource"),b64=require("../../b64");window.URL=window.URL||window.webkitURL;module.exports=function(){return function(resource,next){if(!resource.data){return next()}if(resource.xhr&&resource.xhrType===Resource.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof resource.data==="string"){var type=resource.xhr.getResponseHeader("content-type");if(type&&type.indexOf("image")===0){resource.data=new Image;resource.data.src="data:"+type+";base64,"+b64.encodeBinary(resource.xhr.responseText);resource.isImage=true;resource.data.onload=function(){resource.data.onload=null;next()}}}else if(resource.data.type.indexOf("image")===0){var src=URL.createObjectURL(resource.data);resource.blob=resource.data;resource.data=new Image;resource.data.src=src;resource.isImage=true;resource.data.onload=function(){URL.revokeObjectURL(src);resource.data.onload=null;next()}}}else{next()}}}},{"../../Resource":14,"../../b64":15}],19:[function(require,module,exports){var core=require("../core");Object.assign(core.DisplayObject.prototype,require("./accessibleTarget"));function AccessibilityManager(renderer){var div=document.createElement("div");div.style.width=100+"px";div.style.height=100+"px";div.style.position="absolute";div.style.top=0;div.style.left=0;div.style.zIndex=2;this.div=div;this.pool=[];this.renderId=0;this.debug=false;this.renderer=renderer;this.children=[];this._onKeyDown=this._onKeyDown.bind(this);this._onMouseMove=this._onMouseMove.bind(this);this.isActive=false;window.addEventListener("keydown",this._onKeyDown,false)}AccessibilityManager.prototype.constructor=AccessibilityManager;module.exports=AccessibilityManager;AccessibilityManager.prototype.activate=function(){if(this.isActive){return}this.isActive=true;window.document.addEventListener("mousemove",this._onMouseMove,true);window.removeEventListener("keydown",this._onKeyDown,false);this.renderer.on("postrender",this.update,this);this.renderer.view.parentNode.appendChild(this.div)};AccessibilityManager.prototype.deactivate=function(){if(!this.isActive){return}this.isActive=false;window.document.removeEventListener("mousemove",this._onMouseMove);window.addEventListener("keydown",this._onKeyDown,false);this.renderer.off("postrender",this.update);this.div.parentNode.removeChild(this.div)};AccessibilityManager.prototype.updateAccessibleObjects=function(displayObject){if(!displayObject.visible){return}if(displayObject.accessible&&displayObject.interactive){if(!displayObject._accessibleActive){this.addChild(displayObject)}displayObject.renderId=this.renderId}if(displayObject.interactiveChildren){var children=displayObject.children;for(var i=children.length-1;i>=0;i--){this.updateAccessibleObjects(children[i])}}};AccessibilityManager.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var rect=this.renderer.view.getBoundingClientRect();var sx=rect.width/this.renderer.width;var sy=rect.height/this.renderer.height;var div=this.div;div.style.left=rect.left+"px";div.style.top=rect.top+"px";div.style.width=this.renderer.width+"px";div.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var child=this.children[i];if(child.renderId!==this.renderId){child._accessibleActive=false;core.utils.removeItems(this.children,i,1);
this.div.removeChild(child._accessibleDiv);this.pool.push(child._accessibleDiv);child._accessibleDiv=null;i--;if(this.children.length===0){this.deactivate()}}else{div=child._accessibleDiv;var hitArea=child.hitArea;var wt=child.worldTransform;if(child.hitArea){div.style.left=(wt.tx+hitArea.x*wt.a)*sx+"px";div.style.top=(wt.ty+hitArea.y*wt.d)*sy+"px";div.style.width=hitArea.width*wt.a*sx+"px";div.style.height=hitArea.height*wt.d*sy+"px"}else{hitArea=child.getBounds();this.capHitArea(hitArea);div.style.left=hitArea.x*sx+"px";div.style.top=hitArea.y*sy+"px";div.style.width=hitArea.width*sx+"px";div.style.height=hitArea.height*sy+"px"}}}this.renderId++};AccessibilityManager.prototype.capHitArea=function(hitArea){if(hitArea.x<0){hitArea.width+=hitArea.x;hitArea.x=0}if(hitArea.y<0){hitArea.height+=hitArea.y;hitArea.y=0}if(hitArea.x+hitArea.width>this.renderer.width){hitArea.width=this.renderer.width-hitArea.x}if(hitArea.y+hitArea.height>this.renderer.height){hitArea.height=this.renderer.height-hitArea.y}};AccessibilityManager.prototype.addChild=function(displayObject){var div=this.pool.pop();if(!div){div=document.createElement("button");div.style.width=100+"px";div.style.height=100+"px";div.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent";div.style.position="absolute";div.style.zIndex=2;div.style.borderStyle="none";div.addEventListener("click",this._onClick.bind(this));div.addEventListener("focus",this._onFocus.bind(this));div.addEventListener("focusout",this._onFocusOut.bind(this))}div.title=displayObject.accessibleTitle||"displayObject "+this.tabIndex;displayObject._accessibleActive=true;displayObject._accessibleDiv=div;div.displayObject=displayObject;this.children.push(displayObject);this.div.appendChild(displayObject._accessibleDiv);displayObject._accessibleDiv.tabIndex=displayObject.tabIndex};AccessibilityManager.prototype._onClick=function(e){var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,"click",interactionManager.eventData)};AccessibilityManager.prototype._onFocus=function(e){var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,"mouseover",interactionManager.eventData)};AccessibilityManager.prototype._onFocusOut=function(e){var interactionManager=this.renderer.plugins.interaction;interactionManager.dispatchEvent(e.target.displayObject,"mouseout",interactionManager.eventData)};AccessibilityManager.prototype._onKeyDown=function(e){if(e.keyCode!==9){return}this.activate()};AccessibilityManager.prototype._onMouseMove=function(){this.deactivate()};AccessibilityManager.prototype.destroy=function(){this.div=null;for(var i=0;i<this.children.length;i++){this.children[i].div=null}window.document.removeEventListener("mousemove",this._onMouseMove);window.removeEventListener("keydown",this._onKeyDown);this.pool=null;this.children=null;this.renderer=null};core.WebGLRenderer.registerPlugin("accessibility",AccessibilityManager);core.CanvasRenderer.registerPlugin("accessibility",AccessibilityManager)},{"../core":29,"./accessibleTarget":20}],20:[function(require,module,exports){var accessibleTarget={accessible:false,accessibleTitle:null,tabIndex:0,_accessibleActive:false,_accessibleDiv:false};module.exports=accessibleTarget},{}],21:[function(require,module,exports){module.exports={accessibleTarget:require("./accessibleTarget"),AccessibilityManager:require("./AccessibilityManager")}},{"./AccessibilityManager":19,"./accessibleTarget":20}],22:[function(require,module,exports){var CONST={VERSION:"3.0.10",PI_2:Math.PI*2,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:false,forceFXAA:false,autoResize:false,transparent:false,backgroundColor:0,clearBeforeRender:true,preserveDrawingBuffer:false,roundPixels:false},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};module.exports=CONST},{}],23:[function(require,module,exports){var math=require("../math"),utils=require("../utils"),DisplayObject=require("./DisplayObject"),RenderTexture=require("../textures/RenderTexture"),_tempMatrix=new math.Matrix;function Container(){DisplayObject.call(this);this.children=[]}Container.prototype=Object.create(DisplayObject.prototype);Container.prototype.constructor=Container;module.exports=Container;Object.defineProperties(Container.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(value){var width=this.getLocalBounds().width;if(width!==0){this.scale.x=value/width}else{this.scale.x=1}this._width=value}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(value){var height=this.getLocalBounds().height;if(height!==0){this.scale.y=value/height}else{this.scale.y=1}this._height=value}}});Container.prototype.onChildrenChange=function(){};Container.prototype.addChild=function(child){var argumentsLength=arguments.length;if(argumentsLength>1){for(var i=0;i<argumentsLength;i++){this.addChild(arguments[i])}}else{if(child.parent){child.parent.removeChild(child)}child.parent=this;this.children.push(child);this.onChildrenChange(this.children.length-1);child.emit("added",this)}return child};Container.prototype.addChildAt=function(child,index){if(index>=0&&index<=this.children.length){if(child.parent){child.parent.removeChild(child)}child.parent=this;this.children.splice(index,0,child);this.onChildrenChange(index);child.emit("added",this);return child}else{throw new Error(child+"addChildAt: The index "+index+" supplied is out of bounds "+this.children.length)}};Container.prototype.swapChildren=function(child,child2){if(child===child2){return}var index1=this.getChildIndex(child);var index2=this.getChildIndex(child2);if(index1<0||index2<0){throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.")}this.children[index1]=child2;this.children[index2]=child;this.onChildrenChange(index1<index2?index1:index2)};Container.prototype.getChildIndex=function(child){var index=this.children.indexOf(child);if(index===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return index};Container.prototype.setChildIndex=function(child,index){if(index<0||index>=this.children.length){throw new Error("The supplied index is out of bounds")}var currentIndex=this.getChildIndex(child);utils.removeItems(this.children,currentIndex,1);this.children.splice(index,0,child);this.onChildrenChange(index)};Container.prototype.getChildAt=function(index){if(index<0||index>=this.children.length){throw new Error("getChildAt: Supplied index "+index+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller")}return this.children[index]};Container.prototype.removeChild=function(child){var argumentsLength=arguments.length;if(argumentsLength>1){for(var i=0;i<argumentsLength;i++){this.removeChild(arguments[i])}}else{var index=this.children.indexOf(child);if(index===-1){return}child.parent=null;utils.removeItems(this.children,index,1);this.onChildrenChange(index);child.emit("removed",this)}return child};Container.prototype.removeChildAt=function(index){var child=this.getChildAt(index);child.parent=null;utils.removeItems(this.children,index,1);this.onChildrenChange(index);child.emit("removed",this);return child};Container.prototype.removeChildren=function(beginIndex,endIndex){var begin=beginIndex||0;var end=typeof endIndex==="number"?endIndex:this.children.length;var range=end-begin;var removed,i;if(range>0&&range<=end){removed=this.children.splice(begin,range);for(i=0;i<removed.length;++i){removed[i].parent=null}this.onChildrenChange(beginIndex);for(i=0;i<removed.length;++i){removed[i].emit("removed",this)}return removed}else if(range===0&&this.children.length===0){return[]}else{throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}};Container.prototype.generateTexture=function(renderer,resolution,scaleMode){var bounds=this.getLocalBounds();var renderTexture=new RenderTexture(renderer,bounds.width|0,bounds.height|0,scaleMode,resolution);_tempMatrix.tx=-bounds.x;_tempMatrix.ty=-bounds.y;renderTexture.render(this,_tempMatrix);return renderTexture};Container.prototype.updateTransform=function(){if(!this.visible){return}this.displayObjectUpdateTransform();for(var i=0,j=this.children.length;i<j;++i){this.children[i].updateTransform()}};Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Container.prototype.getBounds=function(){if(!this._currentBounds){if(this.children.length===0){return math.Rectangle.EMPTY}var minX=Infinity;var minY=Infinity;var maxX=-Infinity;var maxY=-Infinity;var childBounds;var childMaxX;var childMaxY;var childVisible=false;for(var i=0,j=this.children.length;i<j;++i){var child=this.children[i];if(!child.visible){continue}childVisible=true;childBounds=this.children[i].getBounds();minX=minX<childBounds.x?minX:childBounds.x;minY=minY<childBounds.y?minY:childBounds.y;childMaxX=childBounds.width+childBounds.x;childMaxY=childBounds.height+childBounds.y;maxX=maxX>childMaxX?maxX:childMaxX;maxY=maxY>childMaxY?maxY:childMaxY}if(!childVisible){return math.Rectangle.EMPTY}var bounds=this._bounds;bounds.x=minX;bounds.y=minY;bounds.width=maxX-minX;bounds.height=maxY-minY;this._currentBounds=bounds}return this._currentBounds};Container.prototype.containerGetBounds=Container.prototype.getBounds;Container.prototype.getLocalBounds=function(){var matrixCache=this.worldTransform;this.worldTransform=math.Matrix.IDENTITY;for(var i=0,j=this.children.length;i<j;++i){this.children[i].updateTransform()}this.worldTransform=matrixCache;this._currentBounds=null;return this.getBounds(math.Matrix.IDENTITY)};Container.prototype.renderWebGL=function(renderer){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}var i,j;if(this._mask||this._filters){renderer.currentRenderer.flush();if(this._filters&&this._filters.length){renderer.filterManager.pushFilter(this,this._filters)}if(this._mask){renderer.maskManager.pushMask(this,this._mask)}renderer.currentRenderer.start();this._renderWebGL(renderer);for(i=0,j=this.children.length;i<j;i++){this.children[i].renderWebGL(renderer)}renderer.currentRenderer.flush();if(this._mask){renderer.maskManager.popMask(this,this._mask)}if(this._filters){renderer.filterManager.popFilter()}renderer.currentRenderer.start()}else{this._renderWebGL(renderer);for(i=0,j=this.children.length;i<j;++i){this.children[i].renderWebGL(renderer)}}};Container.prototype._renderWebGL=function(renderer){};Container.prototype._renderCanvas=function(renderer){};Container.prototype.renderCanvas=function(renderer){if(!this.visible||this.alpha<=0||!this.renderable){return}if(this._mask){renderer.maskManager.pushMask(this._mask,renderer)}this._renderCanvas(renderer);for(var i=0,j=this.children.length;i<j;++i){this.children[i].renderCanvas(renderer)}if(this._mask){renderer.maskManager.popMask(renderer)}};Container.prototype.destroy=function(destroyChildren){DisplayObject.prototype.destroy.call(this);if(destroyChildren){for(var i=0,j=this.children.length;i<j;++i){this.children[i].destroy(destroyChildren)}}this.removeChildren();this.children=null}},{"../math":33,"../textures/RenderTexture":71,"../utils":77,"./DisplayObject":24}],24:[function(require,module,exports){var math=require("../math"),RenderTexture=require("../textures/RenderTexture"),EventEmitter=require("eventemitter3"),CONST=require("../const"),_tempMatrix=new math.Matrix,_tempDisplayObjectParent={worldTransform:new math.Matrix,worldAlpha:1,children:[]};function DisplayObject(){EventEmitter.call(this);this.position=new math.Point;this.scale=new math.Point(1,1);this.pivot=new math.Point(0,0);this.skew=new math.Point(0,0);this.rotation=0;this.alpha=1;this.visible=true;this.renderable=true;this.parent=null;this.worldAlpha=1;this.worldTransform=new math.Matrix;this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new math.Rectangle(0,0,1,1);this._currentBounds=null;this._mask=null}DisplayObject.prototype=Object.create(EventEmitter.prototype);DisplayObject.prototype.constructor=DisplayObject;module.exports=DisplayObject;Object.defineProperties(DisplayObject.prototype,{x:{get:function(){return this.position.x},set:function(value){this.position.x=value}},y:{get:function(){return this.position.y},set:function(value){this.position.y=value}},worldVisible:{get:function(){var item=this;do{if(!item.visible){return false}item=item.parent}while(item);return true}},mask:{get:function(){return this._mask},set:function(value){if(this._mask){this._mask.renderable=true}this._mask=value;if(this._mask){this._mask.renderable=false}}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(value){this._filters=value&&value.slice()}}});DisplayObject.prototype.updateTransform=function(){var pt=this.parent.worldTransform;var wt=this.worldTransform;var a,b,c,d,tx,ty;if(this.skew.x||this.skew.y){_tempMatrix.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y);wt.a=_tempMatrix.a*pt.a+_tempMatrix.b*pt.c;wt.b=_tempMatrix.a*pt.b+_tempMatrix.b*pt.d;wt.c=_tempMatrix.c*pt.a+_tempMatrix.d*pt.c;wt.d=_tempMatrix.c*pt.b+_tempMatrix.d*pt.d;wt.tx=_tempMatrix.tx*pt.a+_tempMatrix.ty*pt.c+pt.tx;wt.ty=_tempMatrix.tx*pt.b+_tempMatrix.ty*pt.d+pt.ty}else{if(this.rotation%CONST.PI_2){if(this.rotation!==this.rotationCache){this.rotationCache=this.rotation;this._sr=Math.sin(this.rotation);this._cr=Math.cos(this.rotation)}a=this._cr*this.scale.x;b=this._sr*this.scale.x;c=-this._sr*this.scale.y;d=this._cr*this.scale.y;tx=this.position.x;ty=this.position.y;if(this.pivot.x||this.pivot.y){tx-=this.pivot.x*a+this.pivot.y*c;ty-=this.pivot.x*b+this.pivot.y*d}wt.a=a*pt.a+b*pt.c;wt.b=a*pt.b+b*pt.d;wt.c=c*pt.a+d*pt.c;wt.d=c*pt.b+d*pt.d;wt.tx=tx*pt.a+ty*pt.c+pt.tx;wt.ty=tx*pt.b+ty*pt.d+pt.ty}else{a=this.scale.x;d=this.scale.y;tx=this.position.x-this.pivot.x*a;ty=this.position.y-this.pivot.y*d;wt.a=a*pt.a;wt.b=a*pt.b;wt.c=d*pt.c;wt.d=d*pt.d;wt.tx=tx*pt.a+ty*pt.c+pt.tx;wt.ty=tx*pt.b+ty*pt.d+pt.ty}}this.worldAlpha=this.alpha*this.parent.worldAlpha;this._currentBounds=null};DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;DisplayObject.prototype.getBounds=function(matrix){return math.Rectangle.EMPTY};DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(math.Matrix.IDENTITY)};DisplayObject.prototype.toGlobal=function(position){if(!this.parent){this.parent=_tempDisplayObjectParent;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}return this.worldTransform.apply(position)};DisplayObject.prototype.toLocal=function(position,from,point){if(from){position=from.toGlobal(position)}if(!this.parent){this.parent=_tempDisplayObjectParent;this.displayObjectUpdateTransform();this.parent=null}else{this.displayObjectUpdateTransform()}return this.worldTransform.applyInverse(position,point)};DisplayObject.prototype.renderWebGL=function(renderer){};DisplayObject.prototype.renderCanvas=function(renderer){};DisplayObject.prototype.generateTexture=function(renderer,scaleMode,resolution){var bounds=this.getLocalBounds();var renderTexture=new RenderTexture(renderer,bounds.width|0,bounds.height|0,scaleMode,resolution);_tempMatrix.tx=-bounds.x;_tempMatrix.ty=-bounds.y;renderTexture.render(this,_tempMatrix);return renderTexture};DisplayObject.prototype.setParent=function(container){if(!container||!container.addChild){throw new Error("setParent: Argument must be a Container")}container.addChild(this);return container};DisplayObject.prototype.setTransform=function(x,y,scaleX,scaleY,rotation,skewX,skewY,pivotX,pivotY){this.position.x=x||0;this.position.y=y||0;this.scale.x=!scaleX?1:scaleX;this.scale.y=!scaleY?1:scaleY;this.rotation=rotation||0;this.skew.x=skewX||0;this.skew.y=skewY||0;this.pivot.x=pivotX||0;this.pivot.y=pivotY||0;return this};DisplayObject.prototype.destroy=function(){this.position=null;this.scale=null;this.pivot=null;this.skew=null;this.parent=null;this._bounds=null;this._currentBounds=null;this._mask=null;this.worldTransform=null;this.filterArea=null}},{"../const":22,"../math":33,"../textures/RenderTexture":71,eventemitter3:10}],25:[function(require,module,exports){var Container=require("../display/Container"),Texture=require("../textures/Texture"),CanvasBuffer=require("../renderers/canvas/utils/CanvasBuffer"),CanvasGraphics=require("../renderers/canvas/utils/CanvasGraphics"),GraphicsData=require("./GraphicsData"),math=require("../math"),CONST=require("../const"),tempPoint=new math.Point;function Graphics(){Container.call(this);this.fillAlpha=1;this.lineWidth=0;this.lineColor=0;this.graphicsData=[];this.tint=16777215;this._prevTint=16777215;this.blendMode=CONST.BLEND_MODES.NORMAL;this.currentPath=null;this._webGL={};this.isMask=false;this.boundsPadding=0;this._localBounds=new math.Rectangle(0,0,1,1);this.dirty=true;this.glDirty=false;this.boundsDirty=true;this.cachedSpriteDirty=false}Graphics.prototype=Object.create(Container.prototype);Graphics.prototype.constructor=Graphics;module.exports=Graphics;Graphics.prototype.clone=function(){var clone=new Graphics;clone.renderable=this.renderable;clone.fillAlpha=this.fillAlpha;clone.lineWidth=this.lineWidth;clone.lineColor=this.lineColor;clone.tint=this.tint;clone.blendMode=this.blendMode;clone.isMask=this.isMask;clone.boundsPadding=this.boundsPadding;clone.dirty=true;clone.glDirty=true;clone.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i){clone.graphicsData.push(this.graphicsData[i].clone())}clone.currentPath=clone.graphicsData[clone.graphicsData.length-1];clone.updateLocalBounds();return clone};Graphics.prototype.lineStyle=function(lineWidth,color,alpha){this.lineWidth=lineWidth||0;this.lineColor=color||0;this.lineAlpha=alpha===undefined?1:alpha;if(this.currentPath){if(this.currentPath.shape.points.length){var shape=new math.Polygon(this.currentPath.shape.points.slice(-2));shape.closed=false;this.drawShape(shape)}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha}}return this};Graphics.prototype.moveTo=function(x,y){var shape=new math.Polygon([x,y]);shape.closed=false;this.drawShape(shape);return this};Graphics.prototype.lineTo=function(x,y){this.currentPath.shape.points.push(x,y);this.dirty=true;return this};Graphics.prototype.quadraticCurveTo=function(cpX,cpY,toX,toY){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var xa,ya,n=20,points=this.currentPath.shape.points;if(points.length===0){this.moveTo(0,0)}var fromX=points[points.length-2];var fromY=points[points.length-1];var j=0;for(var i=1;i<=n;++i){j=i/n;xa=fromX+(cpX-fromX)*j;ya=fromY+(cpY-fromY)*j;points.push(xa+(cpX+(toX-cpX)*j-xa)*j,ya+(cpY+(toY-cpY)*j-ya)*j)}this.dirty=this.boundsDirty=true;return this};Graphics.prototype.bezierCurveTo=function(cpX,cpY,cpX2,cpY2,toX,toY){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var n=20,dt,dt2,dt3,t2,t3,points=this.currentPath.shape.points;var fromX=points[points.length-2];var fromY=points[points.length-1];var j=0;for(var i=1;i<=n;++i){j=i/n;dt=1-j;dt2=dt*dt;dt3=dt2*dt;t2=j*j;t3=t2*j;points.push(dt3*fromX+3*dt2*j*cpX+3*dt*t2*cpX2+t3*toX,dt3*fromY+3*dt2*j*cpY+3*dt*t2*cpY2+t3*toY)}this.dirty=this.boundsDirty=true;return this};Graphics.prototype.arcTo=function(x1,y1,x2,y2,radius){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(x1,y1)}}else{this.moveTo(x1,y1)}var points=this.currentPath.shape.points,fromX=points[points.length-2],fromY=points[points.length-1],a1=fromY-y1,b1=fromX-x1,a2=y2-y1,b2=x2-x1,mm=Math.abs(a1*b2-b1*a2);if(mm<1e-8||radius===0){if(points[points.length-2]!==x1||points[points.length-1]!==y1){points.push(x1,y1)}}else{var dd=a1*a1+b1*b1,cc=a2*a2+b2*b2,tt=a1*a2+b1*b2,k1=radius*Math.sqrt(dd)/mm,k2=radius*Math.sqrt(cc)/mm,j1=k1*tt/dd,j2=k2*tt/cc,cx=k1*b2+k2*b1,cy=k1*a2+k2*a1,px=b1*(k2+j1),py=a1*(k2+j1),qx=b2*(k1+j2),qy=a2*(k1+j2),startAngle=Math.atan2(py-cy,px-cx),endAngle=Math.atan2(qy-cy,qx-cx);this.arc(cx+x1,cy+y1,radius,startAngle,endAngle,b1*a2>b2*a1)}this.dirty=this.boundsDirty=true;return this};Graphics.prototype.arc=function(cx,cy,radius,startAngle,endAngle,anticlockwise){anticlockwise=anticlockwise||false;if(startAngle===endAngle){return this}if(!anticlockwise&&endAngle<=startAngle){endAngle+=Math.PI*2}else if(anticlockwise&&startAngle<=endAngle){startAngle+=Math.PI*2}var sweep=anticlockwise?(startAngle-endAngle)*-1:endAngle-startAngle;var segs=Math.ceil(Math.abs(sweep)/(Math.PI*2))*40;if(sweep===0){return this}var startX=cx+Math.cos(startAngle)*radius;var startY=cy+Math.sin(startAngle)*radius;if(this.currentPath){this.currentPath.shape.points.push(startX,startY)}else{this.moveTo(startX,startY)}var points=this.currentPath.shape.points;var theta=sweep/(segs*2);var theta2=theta*2;var cTheta=Math.cos(theta);var sTheta=Math.sin(theta);var segMinus=segs-1;var remainder=segMinus%1/segMinus;for(var i=0;i<=segMinus;i++){var real=i+remainder*i;var angle=theta+startAngle+theta2*real;var c=Math.cos(angle);var s=-Math.sin(angle);points.push((cTheta*c+sTheta*s)*radius+cx,(cTheta*-s+sTheta*c)*radius+cy)}this.dirty=this.boundsDirty=true;return this};Graphics.prototype.beginFill=function(color,alpha){this.filling=true;this.fillColor=color||0;this.fillAlpha=alpha===undefined?1:alpha;if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha}}return this};Graphics.prototype.endFill=function(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this};Graphics.prototype.drawRect=function(x,y,width,height){this.drawShape(new math.Rectangle(x,y,width,height));return this};Graphics.prototype.drawRoundedRect=function(x,y,width,height,radius){this.drawShape(new math.RoundedRectangle(x,y,width,height,radius));return this};Graphics.prototype.drawCircle=function(x,y,radius){this.drawShape(new math.Circle(x,y,radius));return this};Graphics.prototype.drawEllipse=function(x,y,width,height){this.drawShape(new math.Ellipse(x,y,width,height));return this};Graphics.prototype.drawPolygon=function(path){var points=path;var closed=true;if(points instanceof math.Polygon){closed=points.closed;points=points.points}if(!Array.isArray(points)){points=new Array(arguments.length);for(var i=0;i<points.length;++i){points[i]=arguments[i]}}var shape=new math.Polygon(points);shape.closed=closed;this.drawShape(shape);return this};Graphics.prototype.clear=function(){this.lineWidth=0;this.filling=false;this.dirty=true;this.clearDirty=true;this.graphicsData=[];return this};Graphics.prototype.generateTexture=function(renderer,resolution,scaleMode){resolution=resolution||1;var bounds=this.getLocalBounds();var canvasBuffer=new CanvasBuffer(bounds.width*resolution,bounds.height*resolution);var texture=Texture.fromCanvas(canvasBuffer.canvas,scaleMode);texture.baseTexture.resolution=resolution;canvasBuffer.context.scale(resolution,resolution);canvasBuffer.context.translate(-bounds.x,-bounds.y);CanvasGraphics.renderGraphics(this,canvasBuffer.context);return texture};Graphics.prototype._renderWebGL=function(renderer){if(this.glDirty){this.dirty=true;this.glDirty=false}renderer.setObjectRenderer(renderer.plugins.graphics);renderer.plugins.graphics.render(this)};Graphics.prototype._renderCanvas=function(renderer){if(this.isMask===true){return}if(this._prevTint!==this.tint){this.dirty=true}var context=renderer.context;var transform=this.worldTransform;var compositeOperation=renderer.blendModes[this.blendMode];if(compositeOperation!==context.globalCompositeOperation){context.globalCompositeOperation=compositeOperation}var resolution=renderer.resolution;context.setTransform(transform.a*resolution,transform.b*resolution,transform.c*resolution,transform.d*resolution,transform.tx*resolution,transform.ty*resolution);CanvasGraphics.renderGraphics(this,context)};Graphics.prototype.getBounds=function(matrix){if(!this._currentBounds){if(!this.renderable){return math.Rectangle.EMPTY}if(this.boundsDirty){this.updateLocalBounds();this.glDirty=true;this.cachedSpriteDirty=true;this.boundsDirty=false}var bounds=this._localBounds;var w0=bounds.x;var w1=bounds.width+bounds.x;var h0=bounds.y;var h1=bounds.height+bounds.y;var worldTransform=matrix||this.worldTransform;var a=worldTransform.a;var b=worldTransform.b;var c=worldTransform.c;var d=worldTransform.d;var tx=worldTransform.tx;var ty=worldTransform.ty;var x1=a*w1+c*h1+tx;var y1=d*h1+b*w1+ty;var x2=a*w0+c*h1+tx;var y2=d*h1+b*w0+ty;var x3=a*w0+c*h0+tx;var y3=d*h0+b*w0+ty;var x4=a*w1+c*h0+tx;var y4=d*h0+b*w1+ty;var maxX=x1;var maxY=y1;var minX=x1;var minY=y1;minX=x2<minX?x2:minX;minX=x3<minX?x3:minX;minX=x4<minX?x4:minX;minY=y2<minY?y2:minY;minY=y3<minY?y3:minY;minY=y4<minY?y4:minY;maxX=x2>maxX?x2:maxX;maxX=x3>maxX?x3:maxX;maxX=x4>maxX?x4:maxX;maxY=y2>maxY?y2:maxY;maxY=y3>maxY?y3:maxY;maxY=y4>maxY?y4:maxY;this._bounds.x=minX;this._bounds.width=maxX-minX;this._bounds.y=minY;this._bounds.height=maxY-minY;this._currentBounds=this._bounds}return this._currentBounds};Graphics.prototype.containsPoint=function(point){this.worldTransform.applyInverse(point,tempPoint);var graphicsData=this.graphicsData;for(var i=0;i<graphicsData.length;i++){var data=graphicsData[i];if(!data.fill){continue}if(data.shape){if(data.shape.contains(tempPoint.x,tempPoint.y)){return true}}}return false};Graphics.prototype.updateLocalBounds=function(){var minX=Infinity;var maxX=-Infinity;var minY=Infinity;var maxY=-Infinity;if(this.graphicsData.length){var shape,points,x,y,w,h;for(var i=0;i<this.graphicsData.length;i++){var data=this.graphicsData[i];var type=data.type;var lineWidth=data.lineWidth;shape=data.shape;if(type===CONST.SHAPES.RECT||type===CONST.SHAPES.RREC){x=shape.x-lineWidth/2;y=shape.y-lineWidth/2;w=shape.width+lineWidth;h=shape.height+lineWidth;minX=x<minX?x:minX;maxX=x+w>maxX?x+w:maxX;minY=y<minY?y:minY;maxY=y+h>maxY?y+h:maxY}else if(type===CONST.SHAPES.CIRC){x=shape.x;y=shape.y;w=shape.radius+lineWidth/2;h=shape.radius+lineWidth/2;minX=x-w<minX?x-w:minX;maxX=x+w>maxX?x+w:maxX;minY=y-h<minY?y-h:minY;maxY=y+h>maxY?y+h:maxY}else if(type===CONST.SHAPES.ELIP){x=shape.x;y=shape.y;w=shape.width+lineWidth/2;h=shape.height+lineWidth/2;minX=x-w<minX?x-w:minX;maxX=x+w>maxX?x+w:maxX;minY=y-h<minY?y-h:minY;maxY=y+h>maxY?y+h:maxY}else{points=shape.points;for(var j=0;j<points.length;j+=2){x=points[j];y=points[j+1];minX=x-lineWidth<minX?x-lineWidth:minX;maxX=x+lineWidth>maxX?x+lineWidth:maxX;minY=y-lineWidth<minY?y-lineWidth:minY;maxY=y+lineWidth>maxY?y+lineWidth:maxY}}}}else{minX=0;maxX=0;minY=0;maxY=0}var padding=this.boundsPadding;this._localBounds.x=minX-padding;this._localBounds.width=maxX-minX+padding*2;this._localBounds.y=minY-padding;this._localBounds.height=maxY-minY+padding*2};Graphics.prototype.drawShape=function(shape){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.currentPath=null;var data=new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,shape);this.graphicsData.push(data);if(data.type===CONST.SHAPES.POLY){data.shape.closed=data.shape.closed||this.filling;this.currentPath=data}this.dirty=this.boundsDirty=true;return data};Graphics.prototype.destroy=function(){Container.prototype.destroy.apply(this,arguments);for(var i=0;i<this.graphicsData.length;++i){this.graphicsData[i].destroy()}for(var id in this._webgl){for(var j=0;j<this._webgl[id].data.length;++j){this._webgl[id].data[j].destroy()}}this.graphicsData=null;this.currentPath=null;this._webgl=null;this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/canvas/utils/CanvasGraphics":46,"../textures/Texture":72,"./GraphicsData":26}],26:[function(require,module,exports){function GraphicsData(lineWidth,lineColor,lineAlpha,fillColor,fillAlpha,fill,shape){this.lineWidth=lineWidth;this.lineColor=lineColor;this.lineAlpha=lineAlpha;this._lineTint=lineColor;this.fillColor=fillColor;this.fillAlpha=fillAlpha;this._fillTint=fillColor;this.fill=fill;this.shape=shape;this.type=shape.type}GraphicsData.prototype.constructor=GraphicsData;module.exports=GraphicsData;GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};GraphicsData.prototype.destroy=function(){this.shape=null}},{}],27:[function(require,module,exports){var utils=require("../../utils"),math=require("../../math"),CONST=require("../../const"),ObjectRenderer=require("../../renderers/webgl/utils/ObjectRenderer"),WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),WebGLGraphicsData=require("./WebGLGraphicsData"),earcut=require("earcut");function GraphicsRenderer(renderer){ObjectRenderer.call(this,renderer);this.graphicsDataPool=[];this.primitiveShader=null;this.complexPrimitiveShader=null;this.maximumSimplePolySize=200}GraphicsRenderer.prototype=Object.create(ObjectRenderer.prototype);GraphicsRenderer.prototype.constructor=GraphicsRenderer;module.exports=GraphicsRenderer;WebGLRenderer.registerPlugin("graphics",GraphicsRenderer);GraphicsRenderer.prototype.onContextChange=function(){};GraphicsRenderer.prototype.destroy=function(){ObjectRenderer.prototype.destroy.call(this);for(var i=0;i<this.graphicsDataPool.length;++i){this.graphicsDataPool[i].destroy()}this.graphicsDataPool=null};GraphicsRenderer.prototype.render=function(graphics){var renderer=this.renderer;var gl=renderer.gl;var shader=renderer.shaderManager.plugins.primitiveShader,webGLData;if(graphics.dirty||!graphics._webGL[gl.id]){this.updateGraphics(graphics)}var webGL=graphics._webGL[gl.id];renderer.blendModeManager.setBlendMode(graphics.blendMode);for(var i=0,n=webGL.data.length;i<n;i++){webGLData=webGL.data[i];if(webGL.data[i].mode===1){renderer.stencilManager.pushStencil(graphics,webGLData);gl.uniform1f(renderer.shaderManager.complexPrimitiveShader.uniforms.alpha._location,graphics.worldAlpha*webGLData.alpha);gl.drawElements(gl.TRIANGLE_FAN,4,gl.UNSIGNED_SHORT,(webGLData.indices.length-4)*2);renderer.stencilManager.popStencil(graphics,webGLData)}else{shader=renderer.shaderManager.primitiveShader;renderer.shaderManager.setShader(shader);gl.uniformMatrix3fv(shader.uniforms.translationMatrix._location,false,graphics.worldTransform.toArray(true));gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location,false,renderer.currentRenderTarget.projectionMatrix.toArray(true));gl.uniform3fv(shader.uniforms.tint._location,utils.hex2rgb(graphics.tint));gl.uniform1f(shader.uniforms.alpha._location,graphics.worldAlpha);gl.bindBuffer(gl.ARRAY_BUFFER,webGLData.buffer);gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,false,4*6,0);gl.vertexAttribPointer(shader.attributes.aColor,4,gl.FLOAT,false,4*6,2*4);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,webGLData.indexBuffer);gl.drawElements(gl.TRIANGLE_STRIP,webGLData.indices.length,gl.UNSIGNED_SHORT,0)}renderer.drawCount++}};GraphicsRenderer.prototype.updateGraphics=function(graphics){var gl=this.renderer.gl;var webGL=graphics._webGL[gl.id];if(!webGL){webGL=graphics._webGL[gl.id]={lastIndex:0,data:[],gl:gl}}graphics.dirty=false;var i;if(graphics.clearDirty){
graphics.clearDirty=false;for(i=0;i<webGL.data.length;i++){var graphicsData=webGL.data[i];graphicsData.reset();this.graphicsDataPool.push(graphicsData)}webGL.data=[];webGL.lastIndex=0}var webGLData;for(i=webGL.lastIndex;i<graphics.graphicsData.length;i++){var data=graphics.graphicsData[i];if(data.type===CONST.SHAPES.POLY){data.points=data.shape.points.slice();if(data.shape.closed){if(data.points[0]!==data.points[data.points.length-2]||data.points[1]!==data.points[data.points.length-1]){data.points.push(data.points[0],data.points[1])}}if(data.fill){if(data.points.length>=6){if(data.points.length<this.maximumSimplePolySize*2){webGLData=this.switchMode(webGL,0);var canDrawUsingSimple=this.buildPoly(data,webGLData);if(!canDrawUsingSimple){webGLData=this.switchMode(webGL,1);this.buildComplexPoly(data,webGLData)}}else{webGLData=this.switchMode(webGL,1);this.buildComplexPoly(data,webGLData)}}}if(data.lineWidth>0){webGLData=this.switchMode(webGL,0);this.buildLine(data,webGLData)}}else{webGLData=this.switchMode(webGL,0);if(data.type===CONST.SHAPES.RECT){this.buildRectangle(data,webGLData)}else if(data.type===CONST.SHAPES.CIRC||data.type===CONST.SHAPES.ELIP){this.buildCircle(data,webGLData)}else if(data.type===CONST.SHAPES.RREC){this.buildRoundedRectangle(data,webGLData)}}webGL.lastIndex++}for(i=0;i<webGL.data.length;i++){webGLData=webGL.data[i];if(webGLData.dirty){webGLData.upload()}}};GraphicsRenderer.prototype.switchMode=function(webGL,type){var webGLData;if(!webGL.data.length){webGLData=this.graphicsDataPool.pop()||new WebGLGraphicsData(webGL.gl);webGLData.mode=type;webGL.data.push(webGLData)}else{webGLData=webGL.data[webGL.data.length-1];if(webGLData.points.length>32e4||webGLData.mode!==type||type===1){webGLData=this.graphicsDataPool.pop()||new WebGLGraphicsData(webGL.gl);webGLData.mode=type;webGL.data.push(webGLData)}}webGLData.dirty=true;return webGLData};GraphicsRenderer.prototype.buildRectangle=function(graphicsData,webGLData){var rectData=graphicsData.shape;var x=rectData.x;var y=rectData.y;var width=rectData.width;var height=rectData.height;if(graphicsData.fill){var color=utils.hex2rgb(graphicsData.fillColor);var alpha=graphicsData.fillAlpha;var r=color[0]*alpha;var g=color[1]*alpha;var b=color[2]*alpha;var verts=webGLData.points;var indices=webGLData.indices;var vertPos=verts.length/6;verts.push(x,y);verts.push(r,g,b,alpha);verts.push(x+width,y);verts.push(r,g,b,alpha);verts.push(x,y+height);verts.push(r,g,b,alpha);verts.push(x+width,y+height);verts.push(r,g,b,alpha);indices.push(vertPos,vertPos,vertPos+1,vertPos+2,vertPos+3,vertPos+3)}if(graphicsData.lineWidth){var tempPoints=graphicsData.points;graphicsData.points=[x,y,x+width,y,x+width,y+height,x,y+height,x,y];this.buildLine(graphicsData,webGLData);graphicsData.points=tempPoints}};GraphicsRenderer.prototype.buildRoundedRectangle=function(graphicsData,webGLData){var rrectData=graphicsData.shape;var x=rrectData.x;var y=rrectData.y;var width=rrectData.width;var height=rrectData.height;var radius=rrectData.radius;var recPoints=[];recPoints.push(x,y+radius);this.quadraticBezierCurve(x,y+height-radius,x,y+height,x+radius,y+height,recPoints);this.quadraticBezierCurve(x+width-radius,y+height,x+width,y+height,x+width,y+height-radius,recPoints);this.quadraticBezierCurve(x+width,y+radius,x+width,y,x+width-radius,y,recPoints);this.quadraticBezierCurve(x+radius,y,x,y,x,y+radius+1e-10,recPoints);if(graphicsData.fill){var color=utils.hex2rgb(graphicsData.fillColor);var alpha=graphicsData.fillAlpha;var r=color[0]*alpha;var g=color[1]*alpha;var b=color[2]*alpha;var verts=webGLData.points;var indices=webGLData.indices;var vecPos=verts.length/6;var triangles=earcut(recPoints,null,2);var i=0;for(i=0;i<triangles.length;i+=3){indices.push(triangles[i]+vecPos);indices.push(triangles[i]+vecPos);indices.push(triangles[i+1]+vecPos);indices.push(triangles[i+2]+vecPos);indices.push(triangles[i+2]+vecPos)}for(i=0;i<recPoints.length;i++){verts.push(recPoints[i],recPoints[++i],r,g,b,alpha)}}if(graphicsData.lineWidth){var tempPoints=graphicsData.points;graphicsData.points=recPoints;this.buildLine(graphicsData,webGLData);graphicsData.points=tempPoints}};GraphicsRenderer.prototype.quadraticBezierCurve=function(fromX,fromY,cpX,cpY,toX,toY,out){var xa,ya,xb,yb,x,y,n=20,points=out||[];function getPt(n1,n2,perc){var diff=n2-n1;return n1+diff*perc}var j=0;for(var i=0;i<=n;i++){j=i/n;xa=getPt(fromX,cpX,j);ya=getPt(fromY,cpY,j);xb=getPt(cpX,toX,j);yb=getPt(cpY,toY,j);x=getPt(xa,xb,j);y=getPt(ya,yb,j);points.push(x,y)}return points};GraphicsRenderer.prototype.buildCircle=function(graphicsData,webGLData){var circleData=graphicsData.shape;var x=circleData.x;var y=circleData.y;var width;var height;if(graphicsData.type===CONST.SHAPES.CIRC){width=circleData.radius;height=circleData.radius}else{width=circleData.width;height=circleData.height}var totalSegs=Math.floor(30*Math.sqrt(circleData.radius))||Math.floor(15*Math.sqrt(circleData.width+circleData.height));var seg=Math.PI*2/totalSegs;var i=0;if(graphicsData.fill){var color=utils.hex2rgb(graphicsData.fillColor);var alpha=graphicsData.fillAlpha;var r=color[0]*alpha;var g=color[1]*alpha;var b=color[2]*alpha;var verts=webGLData.points;var indices=webGLData.indices;var vecPos=verts.length/6;indices.push(vecPos);for(i=0;i<totalSegs+1;i++){verts.push(x,y,r,g,b,alpha);verts.push(x+Math.sin(seg*i)*width,y+Math.cos(seg*i)*height,r,g,b,alpha);indices.push(vecPos++,vecPos++)}indices.push(vecPos-1)}if(graphicsData.lineWidth){var tempPoints=graphicsData.points;graphicsData.points=[];for(i=0;i<totalSegs+1;i++){graphicsData.points.push(x+Math.sin(seg*i)*width,y+Math.cos(seg*i)*height)}this.buildLine(graphicsData,webGLData);graphicsData.points=tempPoints}};GraphicsRenderer.prototype.buildLine=function(graphicsData,webGLData){var i=0;var points=graphicsData.points;if(points.length===0){return}var firstPoint=new math.Point(points[0],points[1]);var lastPoint=new math.Point(points[points.length-2],points[points.length-1]);if(firstPoint.x===lastPoint.x&&firstPoint.y===lastPoint.y){points=points.slice();points.pop();points.pop();lastPoint=new math.Point(points[points.length-2],points[points.length-1]);var midPointX=lastPoint.x+(firstPoint.x-lastPoint.x)*.5;var midPointY=lastPoint.y+(firstPoint.y-lastPoint.y)*.5;points.unshift(midPointX,midPointY);points.push(midPointX,midPointY)}var verts=webGLData.points;var indices=webGLData.indices;var length=points.length/2;var indexCount=points.length;var indexStart=verts.length/6;var width=graphicsData.lineWidth/2;var color=utils.hex2rgb(graphicsData.lineColor);var alpha=graphicsData.lineAlpha;var r=color[0]*alpha;var g=color[1]*alpha;var b=color[2]*alpha;var px,py,p1x,p1y,p2x,p2y,p3x,p3y;var perpx,perpy,perp2x,perp2y,perp3x,perp3y;var a1,b1,c1,a2,b2,c2;var denom,pdist,dist;p1x=points[0];p1y=points[1];p2x=points[2];p2y=points[3];perpx=-(p1y-p2y);perpy=p1x-p2x;dist=Math.sqrt(perpx*perpx+perpy*perpy);perpx/=dist;perpy/=dist;perpx*=width;perpy*=width;verts.push(p1x-perpx,p1y-perpy,r,g,b,alpha);verts.push(p1x+perpx,p1y+perpy,r,g,b,alpha);for(i=1;i<length-1;i++){p1x=points[(i-1)*2];p1y=points[(i-1)*2+1];p2x=points[i*2];p2y=points[i*2+1];p3x=points[(i+1)*2];p3y=points[(i+1)*2+1];perpx=-(p1y-p2y);perpy=p1x-p2x;dist=Math.sqrt(perpx*perpx+perpy*perpy);perpx/=dist;perpy/=dist;perpx*=width;perpy*=width;perp2x=-(p2y-p3y);perp2y=p2x-p3x;dist=Math.sqrt(perp2x*perp2x+perp2y*perp2y);perp2x/=dist;perp2y/=dist;perp2x*=width;perp2y*=width;a1=-perpy+p1y-(-perpy+p2y);b1=-perpx+p2x-(-perpx+p1x);c1=(-perpx+p1x)*(-perpy+p2y)-(-perpx+p2x)*(-perpy+p1y);a2=-perp2y+p3y-(-perp2y+p2y);b2=-perp2x+p2x-(-perp2x+p3x);c2=(-perp2x+p3x)*(-perp2y+p2y)-(-perp2x+p2x)*(-perp2y+p3y);denom=a1*b2-a2*b1;if(Math.abs(denom)<.1){denom+=10.1;verts.push(p2x-perpx,p2y-perpy,r,g,b,alpha);verts.push(p2x+perpx,p2y+perpy,r,g,b,alpha);continue}px=(b1*c2-b2*c1)/denom;py=(a2*c1-a1*c2)/denom;pdist=(px-p2x)*(px-p2x)+(py-p2y)*(py-p2y);if(pdist>140*140){perp3x=perpx-perp2x;perp3y=perpy-perp2y;dist=Math.sqrt(perp3x*perp3x+perp3y*perp3y);perp3x/=dist;perp3y/=dist;perp3x*=width;perp3y*=width;verts.push(p2x-perp3x,p2y-perp3y);verts.push(r,g,b,alpha);verts.push(p2x+perp3x,p2y+perp3y);verts.push(r,g,b,alpha);verts.push(p2x-perp3x,p2y-perp3y);verts.push(r,g,b,alpha);indexCount++}else{verts.push(px,py);verts.push(r,g,b,alpha);verts.push(p2x-(px-p2x),p2y-(py-p2y));verts.push(r,g,b,alpha)}}p1x=points[(length-2)*2];p1y=points[(length-2)*2+1];p2x=points[(length-1)*2];p2y=points[(length-1)*2+1];perpx=-(p1y-p2y);perpy=p1x-p2x;dist=Math.sqrt(perpx*perpx+perpy*perpy);perpx/=dist;perpy/=dist;perpx*=width;perpy*=width;verts.push(p2x-perpx,p2y-perpy);verts.push(r,g,b,alpha);verts.push(p2x+perpx,p2y+perpy);verts.push(r,g,b,alpha);indices.push(indexStart);for(i=0;i<indexCount;i++){indices.push(indexStart++)}indices.push(indexStart-1)};GraphicsRenderer.prototype.buildComplexPoly=function(graphicsData,webGLData){var points=graphicsData.points.slice();if(points.length<6){return}var indices=webGLData.indices;webGLData.points=points;webGLData.alpha=graphicsData.fillAlpha;webGLData.color=utils.hex2rgb(graphicsData.fillColor);var minX=Infinity;var maxX=-Infinity;var minY=Infinity;var maxY=-Infinity;var x,y;for(var i=0;i<points.length;i+=2){x=points[i];y=points[i+1];minX=x<minX?x:minX;maxX=x>maxX?x:maxX;minY=y<minY?y:minY;maxY=y>maxY?y:maxY}points.push(minX,minY,maxX,minY,maxX,maxY,minX,maxY);var length=points.length/2;for(i=0;i<length;i++){indices.push(i)}};GraphicsRenderer.prototype.buildPoly=function(graphicsData,webGLData){var points=graphicsData.points;if(points.length<6){return}var verts=webGLData.points;var indices=webGLData.indices;var length=points.length/2;var color=utils.hex2rgb(graphicsData.fillColor);var alpha=graphicsData.fillAlpha;var r=color[0]*alpha;var g=color[1]*alpha;var b=color[2]*alpha;var triangles=earcut(points,null,2);if(!triangles){return false}var vertPos=verts.length/6;var i=0;for(i=0;i<triangles.length;i+=3){indices.push(triangles[i]+vertPos);indices.push(triangles[i]+vertPos);indices.push(triangles[i+1]+vertPos);indices.push(triangles[i+2]+vertPos);indices.push(triangles[i+2]+vertPos)}for(i=0;i<length;i++){verts.push(points[i*2],points[i*2+1],r,g,b,alpha)}return true}},{"../../const":22,"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"../../utils":77,"./WebGLGraphicsData":28,earcut:9}],28:[function(require,module,exports){function WebGLGraphicsData(gl){this.gl=gl;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=gl.createBuffer();this.indexBuffer=gl.createBuffer();this.mode=1;this.alpha=1;this.dirty=true;this.glPoints=null;this.glIndices=null}WebGLGraphicsData.prototype.constructor=WebGLGraphicsData;module.exports=WebGLGraphicsData;WebGLGraphicsData.prototype.reset=function(){this.points.length=0;this.indices.length=0};WebGLGraphicsData.prototype.upload=function(){var gl=this.gl;this.glPoints=new Float32Array(this.points);gl.bindBuffer(gl.ARRAY_BUFFER,this.buffer);gl.bufferData(gl.ARRAY_BUFFER,this.glPoints,gl.STATIC_DRAW);this.glIndices=new Uint16Array(this.indices);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.glIndices,gl.STATIC_DRAW);this.dirty=false};WebGLGraphicsData.prototype.destroy=function(){this.color=null;this.points=null;this.indices=null;this.gl.deleteBuffer(this.buffer);this.gl.deleteBuffer(this.indexBuffer);this.gl=null;this.buffer=null;this.indexBuffer=null;this.glPoints=null;this.glIndices=null}},{}],29:[function(require,module,exports){var core=module.exports=Object.assign(require("./const"),require("./math"),{utils:require("./utils"),ticker:require("./ticker"),DisplayObject:require("./display/DisplayObject"),Container:require("./display/Container"),Sprite:require("./sprites/Sprite"),ParticleContainer:require("./particles/ParticleContainer"),SpriteRenderer:require("./sprites/webgl/SpriteRenderer"),ParticleRenderer:require("./particles/webgl/ParticleRenderer"),Text:require("./text/Text"),Graphics:require("./graphics/Graphics"),GraphicsData:require("./graphics/GraphicsData"),GraphicsRenderer:require("./graphics/webgl/GraphicsRenderer"),Texture:require("./textures/Texture"),BaseTexture:require("./textures/BaseTexture"),RenderTexture:require("./textures/RenderTexture"),VideoBaseTexture:require("./textures/VideoBaseTexture"),TextureUvs:require("./textures/TextureUvs"),CanvasRenderer:require("./renderers/canvas/CanvasRenderer"),CanvasGraphics:require("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:require("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:require("./renderers/webgl/WebGLRenderer"),WebGLManager:require("./renderers/webgl/managers/WebGLManager"),ShaderManager:require("./renderers/webgl/managers/ShaderManager"),Shader:require("./renderers/webgl/shaders/Shader"),TextureShader:require("./renderers/webgl/shaders/TextureShader"),PrimitiveShader:require("./renderers/webgl/shaders/PrimitiveShader"),ComplexPrimitiveShader:require("./renderers/webgl/shaders/ComplexPrimitiveShader"),ObjectRenderer:require("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:require("./renderers/webgl/utils/RenderTarget"),AbstractFilter:require("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:require("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:require("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(width,height,options,noWebGL){width=width||800;height=height||600;if(!noWebGL&&core.utils.isWebGLSupported()){return new core.WebGLRenderer(width,height,options)}return new core.CanvasRenderer(width,height,options)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":33,"./particles/ParticleContainer":39,"./particles/webgl/ParticleRenderer":41,"./renderers/canvas/CanvasRenderer":44,"./renderers/canvas/utils/CanvasBuffer":45,"./renderers/canvas/utils/CanvasGraphics":46,"./renderers/webgl/WebGLRenderer":49,"./renderers/webgl/filters/AbstractFilter":50,"./renderers/webgl/filters/FXAAFilter":51,"./renderers/webgl/filters/SpriteMaskFilter":52,"./renderers/webgl/managers/ShaderManager":56,"./renderers/webgl/managers/WebGLManager":58,"./renderers/webgl/shaders/ComplexPrimitiveShader":59,"./renderers/webgl/shaders/PrimitiveShader":60,"./renderers/webgl/shaders/Shader":61,"./renderers/webgl/shaders/TextureShader":62,"./renderers/webgl/utils/ObjectRenderer":63,"./renderers/webgl/utils/RenderTarget":65,"./sprites/Sprite":67,"./sprites/webgl/SpriteRenderer":68,"./text/Text":69,"./textures/BaseTexture":70,"./textures/RenderTexture":71,"./textures/Texture":72,"./textures/TextureUvs":73,"./textures/VideoBaseTexture":74,"./ticker":76,"./utils":77}],30:[function(require,module,exports){var ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1];var uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1];var vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1];var vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1];var tempMatrices=[];var Matrix=require("./Matrix");var mul=[];function signum(x){if(x<0){return-1}if(x>0){return 1}return 0}function init(){for(var i=0;i<16;i++){var row=[];mul.push(row);for(var j=0;j<16;j++){var _ux=signum(ux[i]*ux[j]+vx[i]*uy[j]);var _uy=signum(uy[i]*ux[j]+vy[i]*uy[j]);var _vx=signum(ux[i]*vx[j]+vx[i]*vy[j]);var _vy=signum(uy[i]*vx[j]+vy[i]*vy[j]);for(var k=0;k<16;k++){if(ux[k]===_ux&&uy[k]===_uy&&vx[k]===_vx&&vy[k]===_vy){row.push(k);break}}}}for(i=0;i<16;i++){var mat=new Matrix;mat.set(ux[i],uy[i],vx[i],vy[i],0,0);tempMatrices.push(mat)}}init();var GroupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(ind){return ux[ind]},uY:function(ind){return uy[ind]},vX:function(ind){return vx[ind]},vY:function(ind){return vy[ind]},inv:function(rotation){if(rotation&8){return rotation&15}return-rotation&7},add:function(rotationSecond,rotationFirst){return mul[rotationSecond][rotationFirst]},sub:function(rotationSecond,rotationFirst){return mul[rotationSecond][GroupD8.inv(rotationFirst)]},rotate180:function(rotation){return rotation^4},isSwapWidthHeight:function(rotation){return(rotation&3)===2},byDirection:function(dx,dy){if(Math.abs(dx)*2<=Math.abs(dy)){if(dy>=0){return GroupD8.S}else{return GroupD8.N}}else if(Math.abs(dy)*2<=Math.abs(dx)){if(dx>0){return GroupD8.E}else{return GroupD8.W}}else{if(dy>0){if(dx>0){return GroupD8.SE}else{return GroupD8.SW}}else if(dx>0){return GroupD8.NE}else{return GroupD8.NW}}},matrixAppendRotationInv:function(matrix,rotation,tx,ty){var mat=tempMatrices[GroupD8.inv(rotation)];tx=tx||0;ty=ty||0;mat.tx=tx;mat.ty=ty;matrix.append(mat)}};module.exports=GroupD8},{"./Matrix":31}],31:[function(require,module,exports){var Point=require("./Point");function Matrix(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0}Matrix.prototype.constructor=Matrix;module.exports=Matrix;Matrix.prototype.fromArray=function(array){this.a=array[0];this.b=array[1];this.c=array[3];this.d=array[4];this.tx=array[2];this.ty=array[5]};Matrix.prototype.set=function(a,b,c,d,tx,ty){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=tx;this.ty=ty;return this};Matrix.prototype.toArray=function(transpose,out){if(!this.array){this.array=new Float32Array(9)}var array=out||this.array;if(transpose){array[0]=this.a;array[1]=this.b;array[2]=0;array[3]=this.c;array[4]=this.d;array[5]=0;array[6]=this.tx;array[7]=this.ty;array[8]=1}else{array[0]=this.a;array[1]=this.c;array[2]=this.tx;array[3]=this.b;array[4]=this.d;array[5]=this.ty;array[6]=0;array[7]=0;array[8]=1}return array};Matrix.prototype.apply=function(pos,newPos){newPos=newPos||new Point;var x=pos.x;var y=pos.y;newPos.x=this.a*x+this.c*y+this.tx;newPos.y=this.b*x+this.d*y+this.ty;return newPos};Matrix.prototype.applyInverse=function(pos,newPos){newPos=newPos||new Point;var id=1/(this.a*this.d+this.c*-this.b);var x=pos.x;var y=pos.y;newPos.x=this.d*id*x+-this.c*id*y+(this.ty*this.c-this.tx*this.d)*id;newPos.y=this.a*id*y+-this.b*id*x+(-this.ty*this.a+this.tx*this.b)*id;return newPos};Matrix.prototype.translate=function(x,y){this.tx+=x;this.ty+=y;return this};Matrix.prototype.scale=function(x,y){this.a*=x;this.d*=y;this.c*=x;this.b*=y;this.tx*=x;this.ty*=y;return this};Matrix.prototype.rotate=function(angle){var cos=Math.cos(angle);var sin=Math.sin(angle);var a1=this.a;var c1=this.c;var tx1=this.tx;this.a=a1*cos-this.b*sin;this.b=a1*sin+this.b*cos;this.c=c1*cos-this.d*sin;this.d=c1*sin+this.d*cos;this.tx=tx1*cos-this.ty*sin;this.ty=tx1*sin+this.ty*cos;return this};Matrix.prototype.append=function(matrix){var a1=this.a;var b1=this.b;var c1=this.c;var d1=this.d;this.a=matrix.a*a1+matrix.b*c1;this.b=matrix.a*b1+matrix.b*d1;this.c=matrix.c*a1+matrix.d*c1;this.d=matrix.c*b1+matrix.d*d1;this.tx=matrix.tx*a1+matrix.ty*c1+this.tx;this.ty=matrix.tx*b1+matrix.ty*d1+this.ty;return this};Matrix.prototype.setTransform=function(x,y,pivotX,pivotY,scaleX,scaleY,rotation,skewX,skewY){var a,b,c,d,sr,cr,cy,sy,nsx,cx;sr=Math.sin(rotation);cr=Math.cos(rotation);cy=Math.cos(skewY);sy=Math.sin(skewY);nsx=-Math.sin(skewX);cx=Math.cos(skewX);a=cr*scaleX;b=sr*scaleX;c=-sr*scaleY;d=cr*scaleY;this.a=cy*a+sy*c;this.b=cy*b+sy*d;this.c=nsx*a+cx*c;this.d=nsx*b+cx*d;this.tx=x+(pivotX*a+pivotY*c);this.ty=y+(pivotX*b+pivotY*d);return this};Matrix.prototype.prepend=function(matrix){var tx1=this.tx;if(matrix.a!==1||matrix.b!==0||matrix.c!==0||matrix.d!==1){var a1=this.a;var c1=this.c;this.a=a1*matrix.a+this.b*matrix.c;this.b=a1*matrix.b+this.b*matrix.d;this.c=c1*matrix.a+this.d*matrix.c;this.d=c1*matrix.b+this.d*matrix.d}this.tx=tx1*matrix.a+this.ty*matrix.c+matrix.tx;this.ty=tx1*matrix.b+this.ty*matrix.d+matrix.ty;return this};Matrix.prototype.invert=function(){var a1=this.a;var b1=this.b;var c1=this.c;var d1=this.d;var tx1=this.tx;var n=a1*d1-b1*c1;this.a=d1/n;this.b=-b1/n;this.c=-c1/n;this.d=a1/n;this.tx=(c1*this.ty-d1*tx1)/n;this.ty=-(a1*this.ty-b1*tx1)/n;return this};Matrix.prototype.identity=function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0;return this};Matrix.prototype.clone=function(){var matrix=new Matrix;matrix.a=this.a;matrix.b=this.b;matrix.c=this.c;matrix.d=this.d;matrix.tx=this.tx;matrix.ty=this.ty;return matrix};Matrix.prototype.copy=function(matrix){matrix.a=this.a;matrix.b=this.b;matrix.c=this.c;matrix.d=this.d;matrix.tx=this.tx;matrix.ty=this.ty;return matrix};Matrix.IDENTITY=new Matrix;Matrix.TEMP_MATRIX=new Matrix},{"./Point":32}],32:[function(require,module,exports){function Point(x,y){this.x=x||0;this.y=y||0}Point.prototype.constructor=Point;module.exports=Point;Point.prototype.clone=function(){return new Point(this.x,this.y)};Point.prototype.copy=function(p){this.set(p.x,p.y)};Point.prototype.equals=function(p){return p.x===this.x&&p.y===this.y};Point.prototype.set=function(x,y){this.x=x||0;this.y=y||(y!==0?this.x:0)}},{}],33:[function(require,module,exports){module.exports={Point:require("./Point"),Matrix:require("./Matrix"),GroupD8:require("./GroupD8"),Circle:require("./shapes/Circle"),Ellipse:require("./shapes/Ellipse"),Polygon:require("./shapes/Polygon"),Rectangle:require("./shapes/Rectangle"),RoundedRectangle:require("./shapes/RoundedRectangle")}},{"./GroupD8":30,"./Matrix":31,"./Point":32,"./shapes/Circle":34,"./shapes/Ellipse":35,"./shapes/Polygon":36,"./shapes/Rectangle":37,"./shapes/RoundedRectangle":38}],34:[function(require,module,exports){var Rectangle=require("./Rectangle"),CONST=require("../../const");function Circle(x,y,radius){this.x=x||0;this.y=y||0;this.radius=radius||0;this.type=CONST.SHAPES.CIRC}Circle.prototype.constructor=Circle;module.exports=Circle;Circle.prototype.clone=function(){return new Circle(this.x,this.y,this.radius)};Circle.prototype.contains=function(x,y){if(this.radius<=0){return false}var dx=this.x-x,dy=this.y-y,r2=this.radius*this.radius;dx*=dx;dy*=dy;return dx+dy<=r2};Circle.prototype.getBounds=function(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}},{"../../const":22,"./Rectangle":37}],35:[function(require,module,exports){var Rectangle=require("./Rectangle"),CONST=require("../../const");function Ellipse(x,y,width,height){this.x=x||0;this.y=y||0;this.width=width||0;this.height=height||0;this.type=CONST.SHAPES.ELIP}Ellipse.prototype.constructor=Ellipse;module.exports=Ellipse;Ellipse.prototype.clone=function(){return new Ellipse(this.x,this.y,this.width,this.height)};Ellipse.prototype.contains=function(x,y){if(this.width<=0||this.height<=0){return false}var normx=(x-this.x)/this.width,normy=(y-this.y)/this.height;normx*=normx;normy*=normy;return normx+normy<=1};Ellipse.prototype.getBounds=function(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":37}],36:[function(require,module,exports){var Point=require("../Point"),CONST=require("../../const");function Polygon(points_){var points=points_;if(!Array.isArray(points)){points=new Array(arguments.length);for(var a=0;a<points.length;++a){points[a]=arguments[a]}}if(points[0]instanceof Point){var p=[];for(var i=0,il=points.length;i<il;i++){p.push(points[i].x,points[i].y)}points=p}this.closed=true;this.points=points;this.type=CONST.SHAPES.POLY}Polygon.prototype.constructor=Polygon;module.exports=Polygon;Polygon.prototype.clone=function(){return new Polygon(this.points.slice())};Polygon.prototype.contains=function(x,y){var inside=false;var length=this.points.length/2;for(var i=0,j=length-1;i<length;j=i++){var xi=this.points[i*2],yi=this.points[i*2+1],xj=this.points[j*2],yj=this.points[j*2+1],intersect=yi>y!==yj>y&&x<(xj-xi)*(y-yi)/(yj-yi)+xi;if(intersect){inside=!inside}}return inside}},{"../../const":22,"../Point":32}],37:[function(require,module,exports){var CONST=require("../../const");function Rectangle(x,y,width,height){this.x=x||0;this.y=y||0;this.width=width||0;this.height=height||0;this.type=CONST.SHAPES.RECT}Rectangle.prototype.constructor=Rectangle;module.exports=Rectangle;Rectangle.EMPTY=new Rectangle(0,0,0,0);Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)};Rectangle.prototype.contains=function(x,y){if(this.width<=0||this.height<=0){return false}if(x>=this.x&&x<this.x+this.width){if(y>=this.y&&y<this.y+this.height){return true}}return false}},{"../../const":22}],38:[function(require,module,exports){var CONST=require("../../const");function RoundedRectangle(x,y,width,height,radius){this.x=x||0;this.y=y||0;this.width=width||0;this.height=height||0;this.radius=radius||20;this.type=CONST.SHAPES.RREC}RoundedRectangle.prototype.constructor=RoundedRectangle;module.exports=RoundedRectangle;RoundedRectangle.prototype.clone=function(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)};RoundedRectangle.prototype.contains=function(x,y){if(this.width<=0||this.height<=0){return false}if(x>=this.x&&x<=this.x+this.width){if(y>=this.y&&y<=this.y+this.height){return true}}return false}},{"../../const":22}],39:[function(require,module,exports){var Container=require("../display/Container"),CONST=require("../const");function ParticleContainer(maxSize,properties,batchSize){Container.call(this);batchSize=batchSize||15e3;maxSize=maxSize||15e3;var maxBatchSize=16384;if(batchSize>maxBatchSize){batchSize=maxBatchSize}if(batchSize>maxSize){batchSize=maxSize}this._properties=[false,true,false,false,false];this._maxSize=maxSize;this._batchSize=batchSize;this._buffers=null;this._bufferToUpdate=0;this.interactiveChildren=false;this.blendMode=CONST.BLEND_MODES.NORMAL;this.roundPixels=true;this.setProperties(properties)}ParticleContainer.prototype=Object.create(Container.prototype);ParticleContainer.prototype.constructor=ParticleContainer;module.exports=ParticleContainer;ParticleContainer.prototype.setProperties=function(properties){if(properties){this._properties[0]="scale"in properties?!!properties.scale:this._properties[0];this._properties[1]="position"in properties?!!properties.position:this._properties[1];this._properties[2]="rotation"in properties?!!properties.rotation:this._properties[2];this._properties[3]="uvs"in properties?!!properties.uvs:this._properties[3];this._properties[4]="alpha"in properties?!!properties.alpha:this._properties[4]}};ParticleContainer.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};ParticleContainer.prototype.renderWebGL=function(renderer){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}renderer.setObjectRenderer(renderer.plugins.particle);renderer.plugins.particle.render(this)};ParticleContainer.prototype.onChildrenChange=function(smallestChildIndex){var bufferIndex=Math.floor(smallestChildIndex/this._batchSize);if(bufferIndex<this._bufferToUpdate){this._bufferToUpdate=bufferIndex}};ParticleContainer.prototype.renderCanvas=function(renderer){if(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable){return}var context=renderer.context;var transform=this.worldTransform;var isRotated=true;var positionX=0;var positionY=0;var finalWidth=0;var finalHeight=0;var compositeOperation=renderer.blendModes[this.blendMode];if(compositeOperation!==context.globalCompositeOperation){context.globalCompositeOperation=compositeOperation}context.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();for(var i=0;i<this.children.length;++i){var child=this.children[i];if(!child.visible){continue}var frame=child.texture.frame;context.globalAlpha=this.worldAlpha*child.alpha;if(child.rotation%(Math.PI*2)===0){if(isRotated){context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty);isRotated=false}positionX=child.anchor.x*(-frame.width*child.scale.x)+child.position.x+.5;positionY=child.anchor.y*(-frame.height*child.scale.y)+child.position.y+.5;finalWidth=frame.width*child.scale.x;finalHeight=frame.height*child.scale.y}else{if(!isRotated){isRotated=true}child.displayObjectUpdateTransform();var childTransform=child.worldTransform;if(renderer.roundPixels){context.setTransform(childTransform.a,childTransform.b,childTransform.c,childTransform.d,childTransform.tx|0,childTransform.ty|0)}else{context.setTransform(childTransform.a,childTransform.b,childTransform.c,childTransform.d,childTransform.tx,childTransform.ty)}positionX=child.anchor.x*-frame.width+.5;positionY=child.anchor.y*-frame.height+.5;finalWidth=frame.width;finalHeight=frame.height}context.drawImage(child.texture.baseTexture.source,frame.x,frame.y,frame.width,frame.height,positionX,positionY,finalWidth,finalHeight)}};ParticleContainer.prototype.destroy=function(){Container.prototype.destroy.apply(this,arguments);if(this._buffers){for(var i=0;i<this._buffers.length;++i){this._buffers[i].destroy()}}this._properties=null;this._buffers=null}},{"../const":22,"../display/Container":23}],40:[function(require,module,exports){function ParticleBuffer(gl,properties,dynamicPropertyFlags,size){this.gl=gl;this.vertSize=2;this.vertByteSize=this.vertSize*4;this.size=size;this.dynamicProperties=[];this.staticProperties=[];for(var i=0;i<properties.length;i++){var property=properties[i];if(dynamicPropertyFlags[i]){this.dynamicProperties.push(property)}else{this.staticProperties.push(property)}}this.staticStride=0;this.staticBuffer=null;this.staticData=null;this.dynamicStride=0;this.dynamicBuffer=null;this.dynamicData=null;this.initBuffers()}ParticleBuffer.prototype.constructor=ParticleBuffer;module.exports=ParticleBuffer;ParticleBuffer.prototype.initBuffers=function(){var gl=this.gl;var i;var property;var dynamicOffset=0;this.dynamicStride=0;for(i=0;i<this.dynamicProperties.length;i++){property=this.dynamicProperties[i];property.offset=dynamicOffset;dynamicOffset+=property.size;this.dynamicStride+=property.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4);this.dynamicBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this.dynamicBuffer);gl.bufferData(gl.ARRAY_BUFFER,this.dynamicData,gl.DYNAMIC_DRAW);var staticOffset=0;this.staticStride=0;for(i=0;i<this.staticProperties.length;i++){property=this.staticProperties[i];property.offset=staticOffset;staticOffset+=property.size;this.staticStride+=property.size}this.staticData=new Float32Array(this.size*this.staticStride*4);this.staticBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this.staticBuffer);gl.bufferData(gl.ARRAY_BUFFER,this.staticData,gl.DYNAMIC_DRAW)};ParticleBuffer.prototype.uploadDynamic=function(children,startIndex,amount){var gl=this.gl;for(var i=0;i<this.dynamicProperties.length;i++){var property=this.dynamicProperties[i];property.uploadFunction(children,startIndex,amount,this.dynamicData,this.dynamicStride,property.offset)}gl.bindBuffer(gl.ARRAY_BUFFER,this.dynamicBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this.dynamicData)};ParticleBuffer.prototype.uploadStatic=function(children,startIndex,amount){var gl=this.gl;for(var i=0;i<this.staticProperties.length;i++){var property=this.staticProperties[i];property.uploadFunction(children,startIndex,amount,this.staticData,this.staticStride,property.offset)}gl.bindBuffer(gl.ARRAY_BUFFER,this.staticBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this.staticData)};ParticleBuffer.prototype.bind=function(){var gl=this.gl;var i,property;gl.bindBuffer(gl.ARRAY_BUFFER,this.dynamicBuffer);for(i=0;i<this.dynamicProperties.length;i++){property=this.dynamicProperties[i];gl.vertexAttribPointer(property.attribute,property.size,gl.FLOAT,false,this.dynamicStride*4,property.offset*4)}gl.bindBuffer(gl.ARRAY_BUFFER,this.staticBuffer);for(i=0;i<this.staticProperties.length;i++){property=this.staticProperties[i];gl.vertexAttribPointer(property.attribute,property.size,gl.FLOAT,false,this.staticStride*4,property.offset*4)}};ParticleBuffer.prototype.destroy=function(){this.dynamicProperties=null;this.dynamicData=null;this.gl.deleteBuffer(this.dynamicBuffer);this.staticProperties=null;this.staticData=null;this.gl.deleteBuffer(this.staticBuffer)}},{}],41:[function(require,module,exports){var ObjectRenderer=require("../../renderers/webgl/utils/ObjectRenderer"),WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),ParticleShader=require("./ParticleShader"),ParticleBuffer=require("./ParticleBuffer"),math=require("../../math");
function ParticleRenderer(renderer){ObjectRenderer.call(this,renderer);var numIndices=98304;this.indices=new Uint16Array(numIndices);for(var i=0,j=0;i<numIndices;i+=6,j+=4){this.indices[i+0]=j+0;this.indices[i+1]=j+1;this.indices[i+2]=j+2;this.indices[i+3]=j+0;this.indices[i+4]=j+2;this.indices[i+5]=j+3}this.shader=null;this.indexBuffer=null;this.properties=null;this.tempMatrix=new math.Matrix}ParticleRenderer.prototype=Object.create(ObjectRenderer.prototype);ParticleRenderer.prototype.constructor=ParticleRenderer;module.exports=ParticleRenderer;WebGLRenderer.registerPlugin("particle",ParticleRenderer);ParticleRenderer.prototype.onContextChange=function(){var gl=this.renderer.gl;this.shader=new ParticleShader(this.renderer.shaderManager);this.indexBuffer=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.indices,gl.STATIC_DRAW);this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]};ParticleRenderer.prototype.start=function(){var gl=this.renderer.gl;gl.activeTexture(gl.TEXTURE0);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var shader=this.shader;this.renderer.shaderManager.setShader(shader)};ParticleRenderer.prototype.render=function(container){var children=container.children,totalChildren=children.length,maxSize=container._maxSize,batchSize=container._batchSize;if(totalChildren===0){return}else if(totalChildren>maxSize){totalChildren=maxSize}if(!container._buffers){container._buffers=this.generateBuffers(container)}this.renderer.blendModeManager.setBlendMode(container.blendMode);var gl=this.renderer.gl;var m=container.worldTransform.copy(this.tempMatrix);m.prepend(this.renderer.currentRenderTarget.projectionMatrix);gl.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,false,m.toArray(true));gl.uniform1f(this.shader.uniforms.uAlpha._location,container.worldAlpha);var baseTexture=children[0]._texture.baseTexture;if(!baseTexture._glTextures[gl.id]){if(!this.renderer.updateTexture(baseTexture)){return}if(!container._properties[0]||!container._properties[3]){container._bufferToUpdate=0}}else{gl.bindTexture(gl.TEXTURE_2D,baseTexture._glTextures[gl.id])}for(var i=0,j=0;i<totalChildren;i+=batchSize,j+=1){var amount=totalChildren-i;if(amount>batchSize){amount=batchSize}var buffer=container._buffers[j];buffer.uploadDynamic(children,i,amount);if(container._bufferToUpdate===j){buffer.uploadStatic(children,i,amount);container._bufferToUpdate=j+1}buffer.bind(this.shader);gl.drawElements(gl.TRIANGLES,amount*6,gl.UNSIGNED_SHORT,0);this.renderer.drawCount++}};ParticleRenderer.prototype.generateBuffers=function(container){var gl=this.renderer.gl,buffers=[],size=container._maxSize,batchSize=container._batchSize,dynamicPropertyFlags=container._properties,i;for(i=0;i<size;i+=batchSize){buffers.push(new ParticleBuffer(gl,this.properties,dynamicPropertyFlags,batchSize))}return buffers};ParticleRenderer.prototype.uploadVertices=function(children,startIndex,amount,array,stride,offset){var sprite,texture,trim,sx,sy,w0,w1,h0,h1;for(var i=0;i<amount;i++){sprite=children[startIndex+i];texture=sprite._texture;sx=sprite.scale.x;sy=sprite.scale.y;if(texture.trim){trim=texture.trim;w1=trim.x-sprite.anchor.x*trim.width;w0=w1+texture.crop.width;h1=trim.y-sprite.anchor.y*trim.height;h0=h1+texture.crop.height}else{w0=texture._frame.width*(1-sprite.anchor.x);w1=texture._frame.width*-sprite.anchor.x;h0=texture._frame.height*(1-sprite.anchor.y);h1=texture._frame.height*-sprite.anchor.y}array[offset]=w1*sx;array[offset+1]=h1*sy;array[offset+stride]=w0*sx;array[offset+stride+1]=h1*sy;array[offset+stride*2]=w0*sx;array[offset+stride*2+1]=h0*sy;array[offset+stride*3]=w1*sx;array[offset+stride*3+1]=h0*sy;offset+=stride*4}};ParticleRenderer.prototype.uploadPosition=function(children,startIndex,amount,array,stride,offset){for(var i=0;i<amount;i++){var spritePosition=children[startIndex+i].position;array[offset]=spritePosition.x;array[offset+1]=spritePosition.y;array[offset+stride]=spritePosition.x;array[offset+stride+1]=spritePosition.y;array[offset+stride*2]=spritePosition.x;array[offset+stride*2+1]=spritePosition.y;array[offset+stride*3]=spritePosition.x;array[offset+stride*3+1]=spritePosition.y;offset+=stride*4}};ParticleRenderer.prototype.uploadRotation=function(children,startIndex,amount,array,stride,offset){for(var i=0;i<amount;i++){var spriteRotation=children[startIndex+i].rotation;array[offset]=spriteRotation;array[offset+stride]=spriteRotation;array[offset+stride*2]=spriteRotation;array[offset+stride*3]=spriteRotation;offset+=stride*4}};ParticleRenderer.prototype.uploadUvs=function(children,startIndex,amount,array,stride,offset){for(var i=0;i<amount;i++){var textureUvs=children[startIndex+i]._texture._uvs;if(textureUvs){array[offset]=textureUvs.x0;array[offset+1]=textureUvs.y0;array[offset+stride]=textureUvs.x1;array[offset+stride+1]=textureUvs.y1;array[offset+stride*2]=textureUvs.x2;array[offset+stride*2+1]=textureUvs.y2;array[offset+stride*3]=textureUvs.x3;array[offset+stride*3+1]=textureUvs.y3;offset+=stride*4}else{array[offset]=0;array[offset+1]=0;array[offset+stride]=0;array[offset+stride+1]=0;array[offset+stride*2]=0;array[offset+stride*2+1]=0;array[offset+stride*3]=0;array[offset+stride*3+1]=0;offset+=stride*4}}};ParticleRenderer.prototype.uploadAlpha=function(children,startIndex,amount,array,stride,offset){for(var i=0;i<amount;i++){var spriteAlpha=children[startIndex+i].alpha;array[offset]=spriteAlpha;array[offset+stride]=spriteAlpha;array[offset+stride*2]=spriteAlpha;array[offset+stride*3]=spriteAlpha;offset+=stride*4}};ParticleRenderer.prototype.destroy=function(){if(this.renderer.gl){this.renderer.gl.deleteBuffer(this.indexBuffer)}ObjectRenderer.prototype.destroy.apply(this,arguments);this.shader.destroy();this.indices=null;this.tempMatrix=null}},{"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"./ParticleBuffer":40,"./ParticleShader":42}],42:[function(require,module,exports){var TextureShader=require("../../renderers/webgl/shaders/TextureShader");function ParticleShader(shaderManager){TextureShader.call(this,shaderManager,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}ParticleShader.prototype=Object.create(TextureShader.prototype);ParticleShader.prototype.constructor=ParticleShader;module.exports=ParticleShader},{"../../renderers/webgl/shaders/TextureShader":62}],43:[function(require,module,exports){var utils=require("../utils"),math=require("../math"),CONST=require("../const"),EventEmitter=require("eventemitter3");function SystemRenderer(system,width,height,options){EventEmitter.call(this);utils.sayHello(system);if(options){for(var i in CONST.DEFAULT_RENDER_OPTIONS){if(typeof options[i]==="undefined"){options[i]=CONST.DEFAULT_RENDER_OPTIONS[i]}}}else{options=CONST.DEFAULT_RENDER_OPTIONS}this.type=CONST.RENDERER_TYPE.UNKNOWN;this.width=width||800;this.height=height||600;this.view=options.view||document.createElement("canvas");this.resolution=options.resolution;this.transparent=options.transparent;this.autoResize=options.autoResize||false;this.blendModes=null;this.preserveDrawingBuffer=options.preserveDrawingBuffer;this.clearBeforeRender=options.clearBeforeRender;this.roundPixels=options.roundPixels;this._backgroundColor=0;this._backgroundColorRgb=[0,0,0];this._backgroundColorString="#000000";this.backgroundColor=options.backgroundColor||this._backgroundColor;this._tempDisplayObjectParent={worldTransform:new math.Matrix,worldAlpha:1,children:[]};this._lastObjectRendered=this._tempDisplayObjectParent}SystemRenderer.prototype=Object.create(EventEmitter.prototype);SystemRenderer.prototype.constructor=SystemRenderer;module.exports=SystemRenderer;Object.defineProperties(SystemRenderer.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(val){this._backgroundColor=val;this._backgroundColorString=utils.hex2string(val);utils.hex2rgb(val,this._backgroundColorRgb)}}});SystemRenderer.prototype.resize=function(width,height){this.width=width*this.resolution;this.height=height*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}};SystemRenderer.prototype.destroy=function(removeView){if(removeView&&this.view.parentNode){this.view.parentNode.removeChild(this.view)}this.type=CONST.RENDERER_TYPE.UNKNOWN;this.width=0;this.height=0;this.view=null;this.resolution=0;this.transparent=false;this.autoResize=false;this.blendModes=null;this.preserveDrawingBuffer=false;this.clearBeforeRender=false;this.roundPixels=false;this._backgroundColor=0;this._backgroundColorRgb=null;this._backgroundColorString=null}},{"../const":22,"../math":33,"../utils":77,eventemitter3:10}],44:[function(require,module,exports){var SystemRenderer=require("../SystemRenderer"),CanvasMaskManager=require("./utils/CanvasMaskManager"),utils=require("../../utils"),math=require("../../math"),CONST=require("../../const");function CanvasRenderer(width,height,options){options=options||{};SystemRenderer.call(this,"Canvas",width,height,options);this.type=CONST.RENDERER_TYPE.CANVAS;this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=true;this.maskManager=new CanvasMaskManager;this.smoothProperty="imageSmoothingEnabled";if(!this.context.imageSmoothingEnabled){if(this.context.webkitImageSmoothingEnabled){this.smoothProperty="webkitImageSmoothingEnabled"}else if(this.context.mozImageSmoothingEnabled){this.smoothProperty="mozImageSmoothingEnabled"}else if(this.context.oImageSmoothingEnabled){this.smoothProperty="oImageSmoothingEnabled"}else if(this.context.msImageSmoothingEnabled){this.smoothProperty="msImageSmoothingEnabled"}}this.initPlugins();this._mapBlendModes();this._tempDisplayObjectParent={worldTransform:new math.Matrix,worldAlpha:1};this.resize(width,height)}CanvasRenderer.prototype=Object.create(SystemRenderer.prototype);CanvasRenderer.prototype.constructor=CanvasRenderer;module.exports=CanvasRenderer;utils.pluginTarget.mixin(CanvasRenderer);CanvasRenderer.prototype.render=function(object){this.emit("prerender");var cacheParent=object.parent;this._lastObjectRendered=object;object.parent=this._tempDisplayObjectParent;object.updateTransform();object.parent=cacheParent;this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;this.context.globalCompositeOperation=this.blendModes[CONST.BLEND_MODES.NORMAL];if(navigator.isCocoonJS&&this.view.screencanvas){this.context.fillStyle="black";this.context.clear()}if(this.clearBeforeRender){if(this.transparent){this.context.clearRect(0,0,this.width,this.height)}else{this.context.fillStyle=this._backgroundColorString;this.context.fillRect(0,0,this.width,this.height)}}this.renderDisplayObject(object,this.context);this.emit("postrender")};CanvasRenderer.prototype.destroy=function(removeView){this.destroyPlugins();SystemRenderer.prototype.destroy.call(this,removeView);this.context=null;this.refresh=true;this.maskManager.destroy();this.maskManager=null;this.smoothProperty=null};CanvasRenderer.prototype.renderDisplayObject=function(displayObject,context){var tempContext=this.context;this.context=context;displayObject.renderCanvas(this);this.context=tempContext};CanvasRenderer.prototype.resize=function(w,h){SystemRenderer.prototype.resize.call(this,w,h);if(this.smoothProperty){this.context[this.smoothProperty]=CONST.SCALE_MODES.DEFAULT===CONST.SCALE_MODES.LINEAR}};CanvasRenderer.prototype._mapBlendModes=function(){if(!this.blendModes){this.blendModes={};if(utils.canUseNewCanvasBlendModes()){this.blendModes[CONST.BLEND_MODES.NORMAL]="source-over";this.blendModes[CONST.BLEND_MODES.ADD]="lighter";this.blendModes[CONST.BLEND_MODES.MULTIPLY]="multiply";this.blendModes[CONST.BLEND_MODES.SCREEN]="screen";this.blendModes[CONST.BLEND_MODES.OVERLAY]="overlay";this.blendModes[CONST.BLEND_MODES.DARKEN]="darken";this.blendModes[CONST.BLEND_MODES.LIGHTEN]="lighten";this.blendModes[CONST.BLEND_MODES.COLOR_DODGE]="color-dodge";this.blendModes[CONST.BLEND_MODES.COLOR_BURN]="color-burn";this.blendModes[CONST.BLEND_MODES.HARD_LIGHT]="hard-light";this.blendModes[CONST.BLEND_MODES.SOFT_LIGHT]="soft-light";this.blendModes[CONST.BLEND_MODES.DIFFERENCE]="difference";this.blendModes[CONST.BLEND_MODES.EXCLUSION]="exclusion";this.blendModes[CONST.BLEND_MODES.HUE]="hue";this.blendModes[CONST.BLEND_MODES.SATURATION]="saturate";this.blendModes[CONST.BLEND_MODES.COLOR]="color";this.blendModes[CONST.BLEND_MODES.LUMINOSITY]="luminosity"}else{this.blendModes[CONST.BLEND_MODES.NORMAL]="source-over";this.blendModes[CONST.BLEND_MODES.ADD]="lighter";this.blendModes[CONST.BLEND_MODES.MULTIPLY]="source-over";this.blendModes[CONST.BLEND_MODES.SCREEN]="source-over";this.blendModes[CONST.BLEND_MODES.OVERLAY]="source-over";this.blendModes[CONST.BLEND_MODES.DARKEN]="source-over";this.blendModes[CONST.BLEND_MODES.LIGHTEN]="source-over";this.blendModes[CONST.BLEND_MODES.COLOR_DODGE]="source-over";this.blendModes[CONST.BLEND_MODES.COLOR_BURN]="source-over";this.blendModes[CONST.BLEND_MODES.HARD_LIGHT]="source-over";this.blendModes[CONST.BLEND_MODES.SOFT_LIGHT]="source-over";this.blendModes[CONST.BLEND_MODES.DIFFERENCE]="source-over";this.blendModes[CONST.BLEND_MODES.EXCLUSION]="source-over";this.blendModes[CONST.BLEND_MODES.HUE]="source-over";this.blendModes[CONST.BLEND_MODES.SATURATION]="source-over";this.blendModes[CONST.BLEND_MODES.COLOR]="source-over";this.blendModes[CONST.BLEND_MODES.LUMINOSITY]="source-over"}}}},{"../../const":22,"../../math":33,"../../utils":77,"../SystemRenderer":43,"./utils/CanvasMaskManager":47}],45:[function(require,module,exports){function CanvasBuffer(width,height){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.canvas.width=width;this.canvas.height=height}CanvasBuffer.prototype.constructor=CanvasBuffer;module.exports=CanvasBuffer;Object.defineProperties(CanvasBuffer.prototype,{width:{get:function(){return this.canvas.width},set:function(val){this.canvas.width=val}},height:{get:function(){return this.canvas.height},set:function(val){this.canvas.height=val}}});CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};CanvasBuffer.prototype.resize=function(width,height){this.canvas.width=width;this.canvas.height=height};CanvasBuffer.prototype.destroy=function(){this.context=null;this.canvas=null}},{}],46:[function(require,module,exports){var CONST=require("../../../const");var CanvasGraphics={};module.exports=CanvasGraphics;CanvasGraphics.renderGraphics=function(graphics,context){var worldAlpha=graphics.worldAlpha;if(graphics.dirty){this.updateGraphicsTint(graphics);graphics.dirty=false}for(var i=0;i<graphics.graphicsData.length;i++){var data=graphics.graphicsData[i];var shape=data.shape;var fillColor=data._fillTint;var lineColor=data._lineTint;context.lineWidth=data.lineWidth;if(data.type===CONST.SHAPES.POLY){context.beginPath();var points=shape.points;context.moveTo(points[0],points[1]);for(var j=1;j<points.length/2;j++){context.lineTo(points[j*2],points[j*2+1])}if(shape.closed){context.lineTo(points[0],points[1])}if(points[0]===points[points.length-2]&&points[1]===points[points.length-1]){context.closePath()}if(data.fill){context.globalAlpha=data.fillAlpha*worldAlpha;context.fillStyle="#"+("00000"+(fillColor|0).toString(16)).substr(-6);context.fill()}if(data.lineWidth){context.globalAlpha=data.lineAlpha*worldAlpha;context.strokeStyle="#"+("00000"+(lineColor|0).toString(16)).substr(-6);context.stroke()}}else if(data.type===CONST.SHAPES.RECT){if(data.fillColor||data.fillColor===0){context.globalAlpha=data.fillAlpha*worldAlpha;context.fillStyle="#"+("00000"+(fillColor|0).toString(16)).substr(-6);context.fillRect(shape.x,shape.y,shape.width,shape.height)}if(data.lineWidth){context.globalAlpha=data.lineAlpha*worldAlpha;context.strokeStyle="#"+("00000"+(lineColor|0).toString(16)).substr(-6);context.strokeRect(shape.x,shape.y,shape.width,shape.height)}}else if(data.type===CONST.SHAPES.CIRC){context.beginPath();context.arc(shape.x,shape.y,shape.radius,0,2*Math.PI);context.closePath();if(data.fill){context.globalAlpha=data.fillAlpha*worldAlpha;context.fillStyle="#"+("00000"+(fillColor|0).toString(16)).substr(-6);context.fill()}if(data.lineWidth){context.globalAlpha=data.lineAlpha*worldAlpha;context.strokeStyle="#"+("00000"+(lineColor|0).toString(16)).substr(-6);context.stroke()}}else if(data.type===CONST.SHAPES.ELIP){var w=shape.width*2;var h=shape.height*2;var x=shape.x-w/2;var y=shape.y-h/2;context.beginPath();var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;context.moveTo(x,ym);context.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);context.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);context.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);context.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);context.closePath();if(data.fill){context.globalAlpha=data.fillAlpha*worldAlpha;context.fillStyle="#"+("00000"+(fillColor|0).toString(16)).substr(-6);context.fill()}if(data.lineWidth){context.globalAlpha=data.lineAlpha*worldAlpha;context.strokeStyle="#"+("00000"+(lineColor|0).toString(16)).substr(-6);context.stroke()}}else if(data.type===CONST.SHAPES.RREC){var rx=shape.x;var ry=shape.y;var width=shape.width;var height=shape.height;var radius=shape.radius;var maxRadius=Math.min(width,height)/2|0;radius=radius>maxRadius?maxRadius:radius;context.beginPath();context.moveTo(rx,ry+radius);context.lineTo(rx,ry+height-radius);context.quadraticCurveTo(rx,ry+height,rx+radius,ry+height);context.lineTo(rx+width-radius,ry+height);context.quadraticCurveTo(rx+width,ry+height,rx+width,ry+height-radius);context.lineTo(rx+width,ry+radius);context.quadraticCurveTo(rx+width,ry,rx+width-radius,ry);context.lineTo(rx+radius,ry);context.quadraticCurveTo(rx,ry,rx,ry+radius);context.closePath();if(data.fillColor||data.fillColor===0){context.globalAlpha=data.fillAlpha*worldAlpha;context.fillStyle="#"+("00000"+(fillColor|0).toString(16)).substr(-6);context.fill()}if(data.lineWidth){context.globalAlpha=data.lineAlpha*worldAlpha;context.strokeStyle="#"+("00000"+(lineColor|0).toString(16)).substr(-6);context.stroke()}}}};CanvasGraphics.renderGraphicsMask=function(graphics,context){var len=graphics.graphicsData.length;if(len===0){return}context.beginPath();for(var i=0;i<len;i++){var data=graphics.graphicsData[i];var shape=data.shape;if(data.type===CONST.SHAPES.POLY){var points=shape.points;context.moveTo(points[0],points[1]);for(var j=1;j<points.length/2;j++){context.lineTo(points[j*2],points[j*2+1])}if(points[0]===points[points.length-2]&&points[1]===points[points.length-1]){context.closePath()}}else if(data.type===CONST.SHAPES.RECT){context.rect(shape.x,shape.y,shape.width,shape.height);context.closePath()}else if(data.type===CONST.SHAPES.CIRC){context.arc(shape.x,shape.y,shape.radius,0,2*Math.PI);context.closePath()}else if(data.type===CONST.SHAPES.ELIP){var w=shape.width*2;var h=shape.height*2;var x=shape.x-w/2;var y=shape.y-h/2;var kappa=.5522848,ox=w/2*kappa,oy=h/2*kappa,xe=x+w,ye=y+h,xm=x+w/2,ym=y+h/2;context.moveTo(x,ym);context.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);context.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);context.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);context.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);context.closePath()}else if(data.type===CONST.SHAPES.RREC){var rx=shape.x;var ry=shape.y;var width=shape.width;var height=shape.height;var radius=shape.radius;var maxRadius=Math.min(width,height)/2|0;radius=radius>maxRadius?maxRadius:radius;context.moveTo(rx,ry+radius);context.lineTo(rx,ry+height-radius);context.quadraticCurveTo(rx,ry+height,rx+radius,ry+height);context.lineTo(rx+width-radius,ry+height);context.quadraticCurveTo(rx+width,ry+height,rx+width,ry+height-radius);context.lineTo(rx+width,ry+radius);context.quadraticCurveTo(rx+width,ry,rx+width-radius,ry);context.lineTo(rx+radius,ry);context.quadraticCurveTo(rx,ry,rx,ry+radius);context.closePath()}}};CanvasGraphics.updateGraphicsTint=function(graphics){if(graphics.tint===16777215&&graphics._prevTint===graphics.tint){return}graphics._prevTint=graphics.tint;var tintR=(graphics.tint>>16&255)/255;var tintG=(graphics.tint>>8&255)/255;var tintB=(graphics.tint&255)/255;for(var i=0;i<graphics.graphicsData.length;i++){var data=graphics.graphicsData[i];var fillColor=data.fillColor|0;var lineColor=data.lineColor|0;data._fillTint=((fillColor>>16&255)/255*tintR*255<<16)+((fillColor>>8&255)/255*tintG*255<<8)+(fillColor&255)/255*tintB*255;data._lineTint=((lineColor>>16&255)/255*tintR*255<<16)+((lineColor>>8&255)/255*tintG*255<<8)+(lineColor&255)/255*tintB*255}}},{"../../../const":22}],47:[function(require,module,exports){var CanvasGraphics=require("./CanvasGraphics");function CanvasMaskManager(){}CanvasMaskManager.prototype.constructor=CanvasMaskManager;module.exports=CanvasMaskManager;CanvasMaskManager.prototype.pushMask=function(maskData,renderer){renderer.context.save();var cacheAlpha=maskData.alpha;var transform=maskData.worldTransform;var resolution=renderer.resolution;renderer.context.setTransform(transform.a*resolution,transform.b*resolution,transform.c*resolution,transform.d*resolution,transform.tx*resolution,transform.ty*resolution);if(!maskData.texture){CanvasGraphics.renderGraphicsMask(maskData,renderer.context);renderer.context.clip()}maskData.worldAlpha=cacheAlpha};CanvasMaskManager.prototype.popMask=function(renderer){renderer.context.restore()};CanvasMaskManager.prototype.destroy=function(){}},{"./CanvasGraphics":46}],48:[function(require,module,exports){var utils=require("../../../utils");var CanvasTinter={};module.exports=CanvasTinter;CanvasTinter.getTintedTexture=function(sprite,color){var texture=sprite.texture;color=CanvasTinter.roundColor(color);var stringColor="#"+("00000"+(color|0).toString(16)).substr(-6);texture.tintCache=texture.tintCache||{};if(texture.tintCache[stringColor]){return texture.tintCache[stringColor]}var canvas=CanvasTinter.canvas||document.createElement("canvas");CanvasTinter.tintMethod(texture,color,canvas);if(CanvasTinter.convertTintToImage){var tintImage=new Image;tintImage.src=canvas.toDataURL();texture.tintCache[stringColor]=tintImage}else{texture.tintCache[stringColor]=canvas;CanvasTinter.canvas=null}return canvas};CanvasTinter.tintWithMultiply=function(texture,color,canvas){var context=canvas.getContext("2d");var resolution=texture.baseTexture.resolution;var crop=texture.crop.clone();crop.x*=resolution;crop.y*=resolution;crop.width*=resolution;crop.height*=resolution;canvas.width=crop.width;canvas.height=crop.height;context.fillStyle="#"+("00000"+(color|0).toString(16)).substr(-6);context.fillRect(0,0,crop.width,crop.height);context.globalCompositeOperation="multiply";context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height);context.globalCompositeOperation="destination-atop";context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height)};CanvasTinter.tintWithOverlay=function(texture,color,canvas){var context=canvas.getContext("2d");var resolution=texture.baseTexture.resolution;var crop=texture.crop.clone();crop.x*=resolution;crop.y*=resolution;crop.width*=resolution;crop.height*=resolution;canvas.width=crop.width;canvas.height=crop.height;context.globalCompositeOperation="copy";context.fillStyle="#"+("00000"+(color|0).toString(16)).substr(-6);context.fillRect(0,0,crop.width,crop.height);context.globalCompositeOperation="destination-atop";context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height)};CanvasTinter.tintWithPerPixel=function(texture,color,canvas){var context=canvas.getContext("2d");var resolution=texture.baseTexture.resolution;var crop=texture.crop.clone();crop.x*=resolution;crop.y*=resolution;crop.width*=resolution;crop.height*=resolution;canvas.width=crop.width;canvas.height=crop.height;context.globalCompositeOperation="copy";context.drawImage(texture.baseTexture.source,crop.x,crop.y,crop.width,crop.height,0,0,crop.width,crop.height);var rgbValues=utils.hex2rgb(color);var r=rgbValues[0],g=rgbValues[1],b=rgbValues[2];var pixelData=context.getImageData(0,0,crop.width,crop.height);var pixels=pixelData.data;for(var i=0;i<pixels.length;i+=4){pixels[i+0]*=r;pixels[i+1]*=g;pixels[i+2]*=b}context.putImageData(pixelData,0,0)};CanvasTinter.roundColor=function(color){var step=CanvasTinter.cacheStepsPerColorChannel;var rgbValues=utils.hex2rgb(color);rgbValues[0]=Math.min(255,rgbValues[0]/step*step);rgbValues[1]=Math.min(255,rgbValues[1]/step*step);rgbValues[2]=Math.min(255,rgbValues[2]/step*step);return utils.rgb2hex(rgbValues)};CanvasTinter.cacheStepsPerColorChannel=8;CanvasTinter.convertTintToImage=false;CanvasTinter.canUseMultiply=utils.canUseNewCanvasBlendModes();CanvasTinter.tintMethod=CanvasTinter.canUseMultiply?CanvasTinter.tintWithMultiply:CanvasTinter.tintWithPerPixel},{"../../../utils":77}],49:[function(require,module,exports){var SystemRenderer=require("../SystemRenderer"),ShaderManager=require("./managers/ShaderManager"),MaskManager=require("./managers/MaskManager"),StencilManager=require("./managers/StencilManager"),FilterManager=require("./managers/FilterManager"),BlendModeManager=require("./managers/BlendModeManager"),RenderTarget=require("./utils/RenderTarget"),ObjectRenderer=require("./utils/ObjectRenderer"),FXAAFilter=require("./filters/FXAAFilter"),utils=require("../../utils"),CONST=require("../../const");function WebGLRenderer(width,height,options){options=options||{};SystemRenderer.call(this,"WebGL",width,height,options);this.type=CONST.RENDERER_TYPE.WEBGL;this.handleContextLost=this.handleContextLost.bind(this);this.handleContextRestored=this.handleContextRestored.bind(this);this.view.addEventListener("webglcontextlost",this.handleContextLost,false);this.view.addEventListener("webglcontextrestored",this.handleContextRestored,false);this._useFXAA=!!options.forceFXAA&&options.antialias;this._FXAAFilter=null;this._contextOptions={alpha:this.transparent,antialias:options.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:options.preserveDrawingBuffer};this.drawCount=0;this.shaderManager=new ShaderManager(this);this.maskManager=new MaskManager(this);this.stencilManager=new StencilManager(this);this.filterManager=new FilterManager(this);this.blendModeManager=new BlendModeManager(this);this.currentRenderTarget=null;this.currentRenderer=new ObjectRenderer(this);this.initPlugins();this._createContext();this._initContext();this._mapGlModes();this._managedTextures=[];this._renderTargetStack=[]}WebGLRenderer.prototype=Object.create(SystemRenderer.prototype);WebGLRenderer.prototype.constructor=WebGLRenderer;module.exports=WebGLRenderer;utils.pluginTarget.mixin(WebGLRenderer);WebGLRenderer.glContextId=0;WebGLRenderer.prototype._createContext=function(){var gl=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);this.gl=gl;if(!gl){throw new Error("This browser does not support webGL. Try using the canvas renderer")}this.glContextId=WebGLRenderer.glContextId++;gl.id=this.glContextId;gl.renderer=this};WebGLRenderer.prototype._initContext=function(){var gl=this.gl;gl.disable(gl.DEPTH_TEST);gl.disable(gl.CULL_FACE);gl.enable(gl.BLEND);this.renderTarget=new RenderTarget(gl,this.width,this.height,null,this.resolution,true);this.setRenderTarget(this.renderTarget);this.emit("context",gl);this.resize(this.width,this.height);if(!this._useFXAA){this._useFXAA=this._contextOptions.antialias&&!gl.getContextAttributes().antialias}if(this._useFXAA){window.console.warn("FXAA antialiasing being used instead of native antialiasing");this._FXAAFilter=[new FXAAFilter]}};WebGLRenderer.prototype.render=function(object){this.emit("prerender");if(this.gl.isContextLost()){return}this.drawCount=0;this._lastObjectRendered=object;if(this._useFXAA){this._FXAAFilter[0].uniforms.resolution.value.x=this.width;this._FXAAFilter[0].uniforms.resolution.value.y=this.height;object.filterArea=this.renderTarget.size;object.filters=this._FXAAFilter}var cacheParent=object.parent;object.parent=this._tempDisplayObjectParent;object.updateTransform();object.parent=cacheParent;var gl=this.gl;this.setRenderTarget(this.renderTarget);if(this.clearBeforeRender){if(this.transparent){gl.clearColor(0,0,0,0)}else{gl.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1)}gl.clear(gl.COLOR_BUFFER_BIT)}this.renderDisplayObject(object,this.renderTarget);this.emit("postrender")};WebGLRenderer.prototype.renderDisplayObject=function(displayObject,renderTarget,clear){this.setRenderTarget(renderTarget);if(clear){renderTarget.clear()}this.filterManager.setFilterStack(renderTarget.filterStack);displayObject.renderWebGL(this);this.currentRenderer.flush()};WebGLRenderer.prototype.setObjectRenderer=function(objectRenderer){if(this.currentRenderer===objectRenderer){return}this.currentRenderer.stop();this.currentRenderer=objectRenderer;this.currentRenderer.start()};WebGLRenderer.prototype.setRenderTarget=function(renderTarget){if(this.currentRenderTarget===renderTarget){return}this.currentRenderTarget=renderTarget;this.currentRenderTarget.activate();this.stencilManager.setMaskStack(renderTarget.stencilMaskStack)};WebGLRenderer.prototype.resize=function(width,height){SystemRenderer.prototype.resize.call(this,width,height);this.filterManager.resize(width,height);this.renderTarget.resize(width,height);if(this.currentRenderTarget===this.renderTarget){this.renderTarget.activate();this.gl.viewport(0,0,this.width,this.height)}};WebGLRenderer.prototype.updateTexture=function(texture){texture=texture.baseTexture||texture;if(!texture.hasLoaded){return}var gl=this.gl;if(!texture._glTextures[gl.id]){texture._glTextures[gl.id]=gl.createTexture();texture.on("update",this.updateTexture,this);texture.on("dispose",this.destroyTexture,this);this._managedTextures.push(texture)}gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id]);gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultipliedAlpha);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,texture.source);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,texture.scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST);if(texture.mipmap&&texture.isPowerOfTwo){gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,texture.scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR_MIPMAP_LINEAR:gl.NEAREST_MIPMAP_NEAREST);gl.generateMipmap(gl.TEXTURE_2D);
}else{gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,texture.scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST)}if(!texture.isPowerOfTwo){gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE)}else{gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT)}return texture._glTextures[gl.id]};WebGLRenderer.prototype.destroyTexture=function(texture,_skipRemove){texture=texture.baseTexture||texture;if(!texture.hasLoaded){return}if(texture._glTextures[this.gl.id]){this.gl.deleteTexture(texture._glTextures[this.gl.id]);delete texture._glTextures[this.gl.id];if(!_skipRemove){var i=this._managedTextures.indexOf(texture);if(i!==-1){utils.removeItems(this._managedTextures,i,1)}}}};WebGLRenderer.prototype.handleContextLost=function(event){event.preventDefault()};WebGLRenderer.prototype.handleContextRestored=function(){this._initContext();for(var i=0;i<this._managedTextures.length;++i){var texture=this._managedTextures[i];if(texture._glTextures[this.gl.id]){delete texture._glTextures[this.gl.id]}}};WebGLRenderer.prototype.destroy=function(removeView){this.destroyPlugins();this.view.removeEventListener("webglcontextlost",this.handleContextLost);this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var i=0;i<this._managedTextures.length;++i){var texture=this._managedTextures[i];this.destroyTexture(texture,true);texture.off("update",this.updateTexture,this);texture.off("dispose",this.destroyTexture,this)}SystemRenderer.prototype.destroy.call(this,removeView);this.uid=0;this.shaderManager.destroy();this.maskManager.destroy();this.stencilManager.destroy();this.filterManager.destroy();this.blendModeManager.destroy();this.shaderManager=null;this.maskManager=null;this.filterManager=null;this.blendModeManager=null;this.currentRenderer=null;this.handleContextLost=null;this.handleContextRestored=null;this._contextOptions=null;this._managedTextures=null;this.drawCount=0;this.gl.useProgram(null);this.gl=null};WebGLRenderer.prototype._mapGlModes=function(){var gl=this.gl;if(!this.blendModes){this.blendModes={};this.blendModes[CONST.BLEND_MODES.NORMAL]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.ADD]=[gl.ONE,gl.DST_ALPHA];this.blendModes[CONST.BLEND_MODES.MULTIPLY]=[gl.DST_COLOR,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.SCREEN]=[gl.ONE,gl.ONE_MINUS_SRC_COLOR];this.blendModes[CONST.BLEND_MODES.OVERLAY]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.DARKEN]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.LIGHTEN]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.COLOR_DODGE]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.COLOR_BURN]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.HARD_LIGHT]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.SOFT_LIGHT]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.DIFFERENCE]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.EXCLUSION]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.HUE]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.SATURATION]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.COLOR]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA];this.blendModes[CONST.BLEND_MODES.LUMINOSITY]=[gl.ONE,gl.ONE_MINUS_SRC_ALPHA]}if(!this.drawModes){this.drawModes={};this.drawModes[CONST.DRAW_MODES.POINTS]=gl.POINTS;this.drawModes[CONST.DRAW_MODES.LINES]=gl.LINES;this.drawModes[CONST.DRAW_MODES.LINE_LOOP]=gl.LINE_LOOP;this.drawModes[CONST.DRAW_MODES.LINE_STRIP]=gl.LINE_STRIP;this.drawModes[CONST.DRAW_MODES.TRIANGLES]=gl.TRIANGLES;this.drawModes[CONST.DRAW_MODES.TRIANGLE_STRIP]=gl.TRIANGLE_STRIP;this.drawModes[CONST.DRAW_MODES.TRIANGLE_FAN]=gl.TRIANGLE_FAN}}},{"../../const":22,"../../utils":77,"../SystemRenderer":43,"./filters/FXAAFilter":51,"./managers/BlendModeManager":53,"./managers/FilterManager":54,"./managers/MaskManager":55,"./managers/ShaderManager":56,"./managers/StencilManager":57,"./utils/ObjectRenderer":63,"./utils/RenderTarget":65}],50:[function(require,module,exports){var DefaultShader=require("../shaders/TextureShader");function AbstractFilter(vertexSrc,fragmentSrc,uniforms){this.shaders=[];this.padding=0;this.uniforms=uniforms||{};this.vertexSrc=vertexSrc||DefaultShader.defaultVertexSrc;this.fragmentSrc=fragmentSrc||DefaultShader.defaultFragmentSrc}AbstractFilter.prototype.constructor=AbstractFilter;module.exports=AbstractFilter;AbstractFilter.prototype.getShader=function(renderer){var gl=renderer.gl;var shader=this.shaders[gl.id];if(!shader){shader=new DefaultShader(renderer.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes);this.shaders[gl.id]=shader}return shader};AbstractFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);renderer.filterManager.applyFilter(shader,input,output,clear)};AbstractFilter.prototype.syncUniform=function(uniform){for(var i=0,j=this.shaders.length;i<j;++i){this.shaders[i].syncUniform(uniform)}}},{"../shaders/TextureShader":62}],51:[function(require,module,exports){var AbstractFilter=require("./AbstractFilter");function FXAAFilter(){AbstractFilter.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}FXAAFilter.prototype=Object.create(AbstractFilter.prototype);FXAAFilter.prototype.constructor=FXAAFilter;module.exports=FXAAFilter;FXAAFilter.prototype.applyFilter=function(renderer,input,output){var filterManager=renderer.filterManager;var shader=this.getShader(renderer);filterManager.applyFilter(shader,input,output)}},{"./AbstractFilter":50}],52:[function(require,module,exports){var AbstractFilter=require("./AbstractFilter"),math=require("../../../math");function SpriteMaskFilter(sprite){var maskMatrix=new math.Matrix;AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:sprite._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:maskMatrix.toArray(true)}});this.maskSprite=sprite;this.maskMatrix=maskMatrix}SpriteMaskFilter.prototype=Object.create(AbstractFilter.prototype);SpriteMaskFilter.prototype.constructor=SpriteMaskFilter;module.exports=SpriteMaskFilter;SpriteMaskFilter.prototype.applyFilter=function(renderer,input,output){var filterManager=renderer.filterManager;this.uniforms.mask.value=this.maskSprite._texture;filterManager.calculateMappedMatrix(input.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.alpha.value=this.maskSprite.worldAlpha;var shader=this.getShader(renderer);filterManager.applyFilter(shader,input,output)};Object.defineProperties(SpriteMaskFilter.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(value){this.uniforms.mask.value=value}},offset:{get:function(){return this.uniforms.offset.value},set:function(value){this.uniforms.offset.value=value}}})},{"../../../math":33,"./AbstractFilter":50}],53:[function(require,module,exports){var WebGLManager=require("./WebGLManager");function BlendModeManager(renderer){WebGLManager.call(this,renderer);this.currentBlendMode=99999}BlendModeManager.prototype=Object.create(WebGLManager.prototype);BlendModeManager.prototype.constructor=BlendModeManager;module.exports=BlendModeManager;BlendModeManager.prototype.setBlendMode=function(blendMode){if(this.currentBlendMode===blendMode){return false}this.currentBlendMode=blendMode;var mode=this.renderer.blendModes[this.currentBlendMode];this.renderer.gl.blendFunc(mode[0],mode[1]);return true}},{"./WebGLManager":58}],54:[function(require,module,exports){var WebGLManager=require("./WebGLManager"),RenderTarget=require("../utils/RenderTarget"),CONST=require("../../../const"),Quad=require("../utils/Quad"),math=require("../../../math");function FilterManager(renderer){WebGLManager.call(this,renderer);this.filterStack=[];this.filterStack.push({renderTarget:renderer.currentRenderTarget,filter:[],bounds:null});this.texturePool=[];this.textureSize=new math.Rectangle(0,0,renderer.width,renderer.height);this.currentFrame=null}FilterManager.prototype=Object.create(WebGLManager.prototype);FilterManager.prototype.constructor=FilterManager;module.exports=FilterManager;FilterManager.prototype.onContextChange=function(){this.texturePool.length=0;var gl=this.renderer.gl;this.quad=new Quad(gl)};FilterManager.prototype.setFilterStack=function(filterStack){this.filterStack=filterStack};FilterManager.prototype.pushFilter=function(target,filters){var bounds=target.filterArea?target.filterArea.clone():target.getBounds();bounds.x=bounds.x|0;bounds.y=bounds.y|0;bounds.width=bounds.width|0;bounds.height=bounds.height|0;var padding=filters[0].padding|0;bounds.x-=padding;bounds.y-=padding;bounds.width+=padding*2;bounds.height+=padding*2;if(this.renderer.currentRenderTarget.transform){var transform=this.renderer.currentRenderTarget.transform;bounds.x+=transform.tx;bounds.y+=transform.ty;this.capFilterArea(bounds);bounds.x-=transform.tx;bounds.y-=transform.ty}else{this.capFilterArea(bounds)}if(bounds.width>0&&bounds.height>0){this.currentFrame=bounds;var texture=this.getRenderTarget();this.renderer.setRenderTarget(texture);texture.clear();this.filterStack.push({renderTarget:texture,filter:filters})}else{this.filterStack.push({renderTarget:null,filter:filters})}};FilterManager.prototype.popFilter=function(){var filterData=this.filterStack.pop();var previousFilterData=this.filterStack[this.filterStack.length-1];var input=filterData.renderTarget;if(!filterData.renderTarget){return}var output=previousFilterData.renderTarget;var gl=this.renderer.gl;this.currentFrame=input.frame;this.quad.map(this.textureSize,input.frame);gl.bindBuffer(gl.ARRAY_BUFFER,this.quad.vertexBuffer);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var filters=filterData.filter;gl.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,gl.FLOAT,false,0,0);gl.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,gl.FLOAT,false,0,2*4*4);gl.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,gl.FLOAT,false,0,4*4*4);this.renderer.blendModeManager.setBlendMode(CONST.BLEND_MODES.NORMAL);if(filters.length===1){if(filters[0].uniforms.dimensions){filters[0].uniforms.dimensions.value[0]=this.renderer.width;filters[0].uniforms.dimensions.value[1]=this.renderer.height;filters[0].uniforms.dimensions.value[2]=this.quad.vertices[0];filters[0].uniforms.dimensions.value[3]=this.quad.vertices[5]}filters[0].applyFilter(this.renderer,input,output);this.returnRenderTarget(input)}else{var flipTexture=input;var flopTexture=this.getRenderTarget(true);for(var i=0;i<filters.length-1;i++){var filter=filters[i];if(filter.uniforms.dimensions){filter.uniforms.dimensions.value[0]=this.renderer.width;filter.uniforms.dimensions.value[1]=this.renderer.height;filter.uniforms.dimensions.value[2]=this.quad.vertices[0];filter.uniforms.dimensions.value[3]=this.quad.vertices[5]}filter.applyFilter(this.renderer,flipTexture,flopTexture);var temp=flipTexture;flipTexture=flopTexture;flopTexture=temp}filters[filters.length-1].applyFilter(this.renderer,flipTexture,output);this.returnRenderTarget(flipTexture);this.returnRenderTarget(flopTexture)}return filterData.filter};FilterManager.prototype.getRenderTarget=function(clear){var renderTarget=this.texturePool.pop()||new RenderTarget(this.renderer.gl,this.textureSize.width,this.textureSize.height,CONST.SCALE_MODES.LINEAR,this.renderer.resolution*CONST.FILTER_RESOLUTION);renderTarget.frame=this.currentFrame;if(clear){renderTarget.clear(true)}return renderTarget};FilterManager.prototype.returnRenderTarget=function(renderTarget){this.texturePool.push(renderTarget)};FilterManager.prototype.applyFilter=function(shader,inputTarget,outputTarget,clear){var gl=this.renderer.gl;this.renderer.setRenderTarget(outputTarget);if(clear){outputTarget.clear()}this.renderer.shaderManager.setShader(shader);shader.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);shader.syncUniforms();gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,inputTarget.texture);gl.drawElements(gl.TRIANGLES,6,gl.UNSIGNED_SHORT,0);this.renderer.drawCount++};FilterManager.prototype.calculateMappedMatrix=function(filterArea,sprite,outputMatrix){var worldTransform=sprite.worldTransform.copy(math.Matrix.TEMP_MATRIX),texture=sprite._texture.baseTexture;var mappedMatrix=outputMatrix.identity();var ratio=this.textureSize.height/this.textureSize.width;mappedMatrix.translate(filterArea.x/this.textureSize.width,filterArea.y/this.textureSize.height);mappedMatrix.scale(1,ratio);var translateScaleX=this.textureSize.width/texture.width;var translateScaleY=this.textureSize.height/texture.height;worldTransform.tx/=texture.width*translateScaleX;worldTransform.ty/=texture.width*translateScaleX;worldTransform.invert();mappedMatrix.prepend(worldTransform);mappedMatrix.scale(1,1/ratio);mappedMatrix.scale(translateScaleX,translateScaleY);mappedMatrix.translate(sprite.anchor.x,sprite.anchor.y);return mappedMatrix};FilterManager.prototype.capFilterArea=function(filterArea){if(filterArea.x<0){filterArea.width+=filterArea.x;filterArea.x=0}if(filterArea.y<0){filterArea.height+=filterArea.y;filterArea.y=0}if(filterArea.x+filterArea.width>this.textureSize.width){filterArea.width=this.textureSize.width-filterArea.x}if(filterArea.y+filterArea.height>this.textureSize.height){filterArea.height=this.textureSize.height-filterArea.y}};FilterManager.prototype.resize=function(width,height){this.textureSize.width=width;this.textureSize.height=height;for(var i=0;i<this.texturePool.length;i++){this.texturePool[i].resize(width,height)}};FilterManager.prototype.destroy=function(){this.quad.destroy();WebGLManager.prototype.destroy.call(this);this.filterStack=null;this.offsetY=0;for(var i=0;i<this.texturePool.length;i++){this.texturePool[i].destroy()}this.texturePool=null}},{"../../../const":22,"../../../math":33,"../utils/Quad":64,"../utils/RenderTarget":65,"./WebGLManager":58}],55:[function(require,module,exports){var WebGLManager=require("./WebGLManager"),AlphaMaskFilter=require("../filters/SpriteMaskFilter");function MaskManager(renderer){WebGLManager.call(this,renderer);this.stencilStack=[];this.reverse=true;this.count=0;this.alphaMaskPool=[]}MaskManager.prototype=Object.create(WebGLManager.prototype);MaskManager.prototype.constructor=MaskManager;module.exports=MaskManager;MaskManager.prototype.pushMask=function(target,maskData){if(maskData.texture){this.pushSpriteMask(target,maskData)}else{this.pushStencilMask(target,maskData)}};MaskManager.prototype.popMask=function(target,maskData){if(maskData.texture){this.popSpriteMask(target,maskData)}else{this.popStencilMask(target,maskData)}};MaskManager.prototype.pushSpriteMask=function(target,maskData){var alphaMaskFilter=this.alphaMaskPool.pop();if(!alphaMaskFilter){alphaMaskFilter=[new AlphaMaskFilter(maskData)]}alphaMaskFilter[0].maskSprite=maskData;this.renderer.filterManager.pushFilter(target,alphaMaskFilter)};MaskManager.prototype.popSpriteMask=function(){var filters=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(filters)};MaskManager.prototype.pushStencilMask=function(target,maskData){this.renderer.stencilManager.pushMask(maskData)};MaskManager.prototype.popStencilMask=function(target,maskData){this.renderer.stencilManager.popMask(maskData)}},{"../filters/SpriteMaskFilter":52,"./WebGLManager":58}],56:[function(require,module,exports){var WebGLManager=require("./WebGLManager"),TextureShader=require("../shaders/TextureShader"),ComplexPrimitiveShader=require("../shaders/ComplexPrimitiveShader"),PrimitiveShader=require("../shaders/PrimitiveShader"),utils=require("../../../utils");function ShaderManager(renderer){WebGLManager.call(this,renderer);this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];for(var i=0;i<this.maxAttibs;i++){this.attribState[i]=false}this.stack=[];this._currentId=-1;this.currentShader=null}ShaderManager.prototype=Object.create(WebGLManager.prototype);ShaderManager.prototype.constructor=ShaderManager;utils.pluginTarget.mixin(ShaderManager);module.exports=ShaderManager;ShaderManager.prototype.onContextChange=function(){this.initPlugins();var gl=this.renderer.gl;this.maxAttibs=gl.getParameter(gl.MAX_VERTEX_ATTRIBS);this.attribState=[];for(var i=0;i<this.maxAttibs;i++){this.attribState[i]=false}this.defaultShader=new TextureShader(this);this.primitiveShader=new PrimitiveShader(this);this.complexPrimitiveShader=new ComplexPrimitiveShader(this)};ShaderManager.prototype.setAttribs=function(attribs){var i;for(i=0;i<this.tempAttribState.length;i++){this.tempAttribState[i]=false}for(var a in attribs){this.tempAttribState[attribs[a]]=true}var gl=this.renderer.gl;for(i=0;i<this.attribState.length;i++){if(this.attribState[i]!==this.tempAttribState[i]){this.attribState[i]=this.tempAttribState[i];if(this.attribState[i]){gl.enableVertexAttribArray(i)}else{gl.disableVertexAttribArray(i)}}}};ShaderManager.prototype.setShader=function(shader){if(this._currentId===shader.uid){return false}this._currentId=shader.uid;this.currentShader=shader;this.renderer.gl.useProgram(shader.program);this.setAttribs(shader.attributes);return true};ShaderManager.prototype.destroy=function(){this.primitiveShader.destroy();this.complexPrimitiveShader.destroy();WebGLManager.prototype.destroy.call(this);this.destroyPlugins();this.attribState=null;this.tempAttribState=null}},{"../../../utils":77,"../shaders/ComplexPrimitiveShader":59,"../shaders/PrimitiveShader":60,"../shaders/TextureShader":62,"./WebGLManager":58}],57:[function(require,module,exports){var WebGLManager=require("./WebGLManager"),utils=require("../../../utils");function WebGLMaskManager(renderer){WebGLManager.call(this,renderer);this.stencilMaskStack=null}WebGLMaskManager.prototype=Object.create(WebGLManager.prototype);WebGLMaskManager.prototype.constructor=WebGLMaskManager;module.exports=WebGLMaskManager;WebGLMaskManager.prototype.setMaskStack=function(stencilMaskStack){this.stencilMaskStack=stencilMaskStack;var gl=this.renderer.gl;if(stencilMaskStack.stencilStack.length===0){gl.disable(gl.STENCIL_TEST)}else{gl.enable(gl.STENCIL_TEST)}};WebGLMaskManager.prototype.pushStencil=function(graphics,webGLData){this.renderer.currentRenderTarget.attachStencilBuffer();var gl=this.renderer.gl,sms=this.stencilMaskStack;this.bindGraphics(graphics,webGLData);if(sms.stencilStack.length===0){gl.enable(gl.STENCIL_TEST);gl.clear(gl.STENCIL_BUFFER_BIT);sms.reverse=true;sms.count=0}sms.stencilStack.push(webGLData);var level=sms.count;gl.colorMask(false,false,false,false);gl.stencilFunc(gl.ALWAYS,0,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.INVERT);if(webGLData.mode===1){gl.drawElements(gl.TRIANGLE_FAN,webGLData.indices.length-4,gl.UNSIGNED_SHORT,0);if(sms.reverse){gl.stencilFunc(gl.EQUAL,255-level,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)}else{gl.stencilFunc(gl.EQUAL,level,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)}gl.drawElements(gl.TRIANGLE_FAN,4,gl.UNSIGNED_SHORT,(webGLData.indices.length-4)*2);if(sms.reverse){gl.stencilFunc(gl.EQUAL,255-(level+1),255)}else{gl.stencilFunc(gl.EQUAL,level+1,255)}sms.reverse=!sms.reverse}else{if(!sms.reverse){gl.stencilFunc(gl.EQUAL,255-level,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)}else{gl.stencilFunc(gl.EQUAL,level,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)}gl.drawElements(gl.TRIANGLE_STRIP,webGLData.indices.length,gl.UNSIGNED_SHORT,0);if(!sms.reverse){gl.stencilFunc(gl.EQUAL,255-(level+1),255)}else{gl.stencilFunc(gl.EQUAL,level+1,255)}}gl.colorMask(true,true,true,true);gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP);sms.count++};WebGLMaskManager.prototype.bindGraphics=function(graphics,webGLData){var gl=this.renderer.gl;var shader;if(webGLData.mode===1){shader=this.renderer.shaderManager.complexPrimitiveShader;this.renderer.shaderManager.setShader(shader);gl.uniformMatrix3fv(shader.uniforms.translationMatrix._location,false,graphics.worldTransform.toArray(true));gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));gl.uniform3fv(shader.uniforms.tint._location,utils.hex2rgb(graphics.tint));gl.uniform3fv(shader.uniforms.color._location,webGLData.color);gl.uniform1f(shader.uniforms.alpha._location,graphics.worldAlpha);gl.bindBuffer(gl.ARRAY_BUFFER,webGLData.buffer);gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,false,4*2,0);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,webGLData.indexBuffer)}else{shader=this.renderer.shaderManager.primitiveShader;this.renderer.shaderManager.setShader(shader);gl.uniformMatrix3fv(shader.uniforms.translationMatrix._location,false,graphics.worldTransform.toArray(true));gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location,false,this.renderer.currentRenderTarget.projectionMatrix.toArray(true));gl.uniform3fv(shader.uniforms.tint._location,utils.hex2rgb(graphics.tint));gl.uniform1f(shader.uniforms.alpha._location,graphics.worldAlpha);gl.bindBuffer(gl.ARRAY_BUFFER,webGLData.buffer);gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,false,4*6,0);gl.vertexAttribPointer(shader.attributes.aColor,4,gl.FLOAT,false,4*6,2*4);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,webGLData.indexBuffer)}};WebGLMaskManager.prototype.popStencil=function(graphics,webGLData){var gl=this.renderer.gl,sms=this.stencilMaskStack;sms.stencilStack.pop();sms.count--;if(sms.stencilStack.length===0){gl.disable(gl.STENCIL_TEST)}else{var level=sms.count;this.bindGraphics(graphics,webGLData);gl.colorMask(false,false,false,false);if(webGLData.mode===1){sms.reverse=!sms.reverse;if(sms.reverse){gl.stencilFunc(gl.EQUAL,255-(level+1),255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)}else{gl.stencilFunc(gl.EQUAL,level+1,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)}gl.drawElements(gl.TRIANGLE_FAN,4,gl.UNSIGNED_SHORT,(webGLData.indices.length-4)*2);gl.stencilFunc(gl.ALWAYS,0,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.INVERT);gl.drawElements(gl.TRIANGLE_FAN,webGLData.indices.length-4,gl.UNSIGNED_SHORT,0);this.renderer.drawCount+=2;if(!sms.reverse){gl.stencilFunc(gl.EQUAL,255-level,255)}else{gl.stencilFunc(gl.EQUAL,level,255)}}else{if(!sms.reverse){gl.stencilFunc(gl.EQUAL,255-(level+1),255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.INCR)}else{gl.stencilFunc(gl.EQUAL,level+1,255);gl.stencilOp(gl.KEEP,gl.KEEP,gl.DECR)}gl.drawElements(gl.TRIANGLE_STRIP,webGLData.indices.length,gl.UNSIGNED_SHORT,0);this.renderer.drawCount++;if(!sms.reverse){gl.stencilFunc(gl.EQUAL,255-level,255)}else{gl.stencilFunc(gl.EQUAL,level,255)}}gl.colorMask(true,true,true,true);gl.stencilOp(gl.KEEP,gl.KEEP,gl.KEEP)}};WebGLMaskManager.prototype.destroy=function(){WebGLManager.prototype.destroy.call(this);this.stencilMaskStack.stencilStack=null};WebGLMaskManager.prototype.pushMask=function(maskData){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);if(maskData.dirty){this.renderer.plugins.graphics.updateGraphics(maskData,this.renderer.gl)}if(!maskData._webGL[this.renderer.gl.id].data.length){return}this.pushStencil(maskData,maskData._webGL[this.renderer.gl.id].data[0])};WebGLMaskManager.prototype.popMask=function(maskData){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);this.popStencil(maskData,maskData._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":77,"./WebGLManager":58}],58:[function(require,module,exports){function WebGLManager(renderer){this.renderer=renderer;this.renderer.on("context",this.onContextChange,this)}WebGLManager.prototype.constructor=WebGLManager;module.exports=WebGLManager;WebGLManager.prototype.onContextChange=function(){};WebGLManager.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this);this.renderer=null}},{}],59:[function(require,module,exports){var Shader=require("./Shader");function ComplexPrimitiveShader(shaderManager){Shader.call(this,shaderManager,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}ComplexPrimitiveShader.prototype=Object.create(Shader.prototype);ComplexPrimitiveShader.prototype.constructor=ComplexPrimitiveShader;module.exports=ComplexPrimitiveShader},{"./Shader":61}],60:[function(require,module,exports){var Shader=require("./Shader");function PrimitiveShader(shaderManager){Shader.call(this,shaderManager,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{
tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}PrimitiveShader.prototype=Object.create(Shader.prototype);PrimitiveShader.prototype.constructor=PrimitiveShader;module.exports=PrimitiveShader},{"./Shader":61}],61:[function(require,module,exports){var utils=require("../../../utils");function Shader(shaderManager,vertexSrc,fragmentSrc,uniforms,attributes){if(!vertexSrc||!fragmentSrc){throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc")}this.uid=utils.uid();this.gl=shaderManager.renderer.gl;this.shaderManager=shaderManager;this.program=null;this.uniforms=uniforms||{};this.attributes=attributes||{};this.textureCount=1;this.vertexSrc=vertexSrc;this.fragmentSrc=fragmentSrc;this.init()}Shader.prototype.constructor=Shader;module.exports=Shader;Shader.prototype.init=function(){this.compile();this.gl.useProgram(this.program);this.cacheUniformLocations(Object.keys(this.uniforms));this.cacheAttributeLocations(Object.keys(this.attributes))};Shader.prototype.cacheUniformLocations=function(keys){for(var i=0;i<keys.length;++i){this.uniforms[keys[i]]._location=this.gl.getUniformLocation(this.program,keys[i])}};Shader.prototype.cacheAttributeLocations=function(keys){for(var i=0;i<keys.length;++i){this.attributes[keys[i]]=this.gl.getAttribLocation(this.program,keys[i])}};Shader.prototype.compile=function(){var gl=this.gl;var glVertShader=this._glCompile(gl.VERTEX_SHADER,this.vertexSrc);var glFragShader=this._glCompile(gl.FRAGMENT_SHADER,this.fragmentSrc);var program=gl.createProgram();gl.attachShader(program,glVertShader);gl.attachShader(program,glFragShader);gl.linkProgram(program);if(!gl.getProgramParameter(program,gl.LINK_STATUS)){console.error("Pixi.js Error: Could not initialize shader.");console.error("gl.VALIDATE_STATUS",gl.getProgramParameter(program,gl.VALIDATE_STATUS));console.error("gl.getError()",gl.getError());if(gl.getProgramInfoLog(program)!==""){console.warn("Pixi.js Warning: gl.getProgramInfoLog()",gl.getProgramInfoLog(program))}gl.deleteProgram(program);program=null}gl.deleteShader(glVertShader);gl.deleteShader(glFragShader);return this.program=program};Shader.prototype.syncUniform=function(uniform){var location=uniform._location,value=uniform.value,gl=this.gl,i,il;switch(uniform.type){case"b":case"bool":case"boolean":gl.uniform1i(location,value?1:0);break;case"i":case"1i":gl.uniform1i(location,value);break;case"f":case"1f":gl.uniform1f(location,value);break;case"2f":gl.uniform2f(location,value[0],value[1]);break;case"3f":gl.uniform3f(location,value[0],value[1],value[2]);break;case"4f":gl.uniform4f(location,value[0],value[1],value[2],value[3]);break;case"v2":gl.uniform2f(location,value.x,value.y);break;case"v3":gl.uniform3f(location,value.x,value.y,value.z);break;case"v4":gl.uniform4f(location,value.x,value.y,value.z,value.w);break;case"1iv":gl.uniform1iv(location,value);break;case"2iv":gl.uniform2iv(location,value);break;case"3iv":gl.uniform3iv(location,value);break;case"4iv":gl.uniform4iv(location,value);break;case"1fv":gl.uniform1fv(location,value);break;case"2fv":gl.uniform2fv(location,value);break;case"3fv":gl.uniform3fv(location,value);break;case"4fv":gl.uniform4fv(location,value);break;case"m2":case"mat2":case"Matrix2fv":gl.uniformMatrix2fv(location,uniform.transpose,value);break;case"m3":case"mat3":case"Matrix3fv":gl.uniformMatrix3fv(location,uniform.transpose,value);break;case"m4":case"mat4":case"Matrix4fv":gl.uniformMatrix4fv(location,uniform.transpose,value);break;case"c":if(typeof value==="number"){value=utils.hex2rgb(value)}gl.uniform3f(location,value[0],value[1],value[2]);break;case"iv1":gl.uniform1iv(location,value);break;case"iv":gl.uniform3iv(location,value);break;case"fv1":gl.uniform1fv(location,value);break;case"fv":gl.uniform3fv(location,value);break;case"v2v":if(!uniform._array){uniform._array=new Float32Array(2*value.length)}for(i=0,il=value.length;i<il;++i){uniform._array[i*2]=value[i].x;uniform._array[i*2+1]=value[i].y}gl.uniform2fv(location,uniform._array);break;case"v3v":if(!uniform._array){uniform._array=new Float32Array(3*value.length)}for(i=0,il=value.length;i<il;++i){uniform._array[i*3]=value[i].x;uniform._array[i*3+1]=value[i].y;uniform._array[i*3+2]=value[i].z}gl.uniform3fv(location,uniform._array);break;case"v4v":if(!uniform._array){uniform._array=new Float32Array(4*value.length)}for(i=0,il=value.length;i<il;++i){uniform._array[i*4]=value[i].x;uniform._array[i*4+1]=value[i].y;uniform._array[i*4+2]=value[i].z;uniform._array[i*4+3]=value[i].w}gl.uniform4fv(location,uniform._array);break;case"t":case"sampler2D":if(!uniform.value||!uniform.value.baseTexture.hasLoaded){break}gl.activeTexture(gl["TEXTURE"+this.textureCount]);var texture=uniform.value.baseTexture._glTextures[gl.id];if(!texture){this.initSampler2D(uniform);texture=uniform.value.baseTexture._glTextures[gl.id]}gl.bindTexture(gl.TEXTURE_2D,texture);gl.uniform1i(uniform._location,this.textureCount);this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+uniform.type)}};Shader.prototype.syncUniforms=function(){this.textureCount=1;for(var key in this.uniforms){this.syncUniform(this.uniforms[key])}};Shader.prototype.initSampler2D=function(uniform){var gl=this.gl;var texture=uniform.value.baseTexture;if(!texture.hasLoaded){return}if(uniform.textureData){var data=uniform.textureData;texture._glTextures[gl.id]=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id]);gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultipliedAlpha);gl.texImage2D(gl.TEXTURE_2D,0,data.luminance?gl.LUMINANCE:gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,texture.source);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,data.magFilter?data.magFilter:gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,data.wrapS?data.wrapS:gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,data.wrapS?data.wrapS:gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,data.wrapT?data.wrapT:gl.CLAMP_TO_EDGE)}else{this.shaderManager.renderer.updateTexture(texture)}};Shader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.gl=null;this.uniforms=null;this.attributes=null;this.vertexSrc=null;this.fragmentSrc=null};Shader.prototype._glCompile=function(type,src){var shader=this.gl.createShader(type);this.gl.shaderSource(shader,src);this.gl.compileShader(shader);if(!this.gl.getShaderParameter(shader,this.gl.COMPILE_STATUS)){console.log(this.gl.getShaderInfoLog(shader));return null}return shader}},{"../../../utils":77}],62:[function(require,module,exports){var Shader=require("./Shader");function TextureShader(shaderManager,vertexSrc,fragmentSrc,customUniforms,customAttributes){var uniforms={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(customUniforms){for(var u in customUniforms){uniforms[u]=customUniforms[u]}}var attributes={aVertexPosition:0,aTextureCoord:0,aColor:0};if(customAttributes){for(var a in customAttributes){attributes[a]=customAttributes[a]}}vertexSrc=vertexSrc||TextureShader.defaultVertexSrc;fragmentSrc=fragmentSrc||TextureShader.defaultFragmentSrc;Shader.call(this,shaderManager,vertexSrc,fragmentSrc,uniforms,attributes)}TextureShader.prototype=Object.create(Shader.prototype);TextureShader.prototype.constructor=TextureShader;module.exports=TextureShader;TextureShader.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n");TextureShader.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":61}],63:[function(require,module,exports){var WebGLManager=require("../managers/WebGLManager");function ObjectRenderer(renderer){WebGLManager.call(this,renderer)}ObjectRenderer.prototype=Object.create(WebGLManager.prototype);ObjectRenderer.prototype.constructor=ObjectRenderer;module.exports=ObjectRenderer;ObjectRenderer.prototype.start=function(){};ObjectRenderer.prototype.stop=function(){this.flush()};ObjectRenderer.prototype.flush=function(){};ObjectRenderer.prototype.render=function(object){}},{"../managers/WebGLManager":58}],64:[function(require,module,exports){function Quad(gl){this.gl=gl;this.vertices=new Float32Array([0,0,200,0,200,200,0,200]);this.uvs=new Float32Array([0,0,1,0,1,1,0,1]);this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.indices=new Uint16Array([0,1,2,0,3,2]);this.vertexBuffer=gl.createBuffer();this.indexBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,(8+8+16)*4,gl.DYNAMIC_DRAW);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.indices,gl.STATIC_DRAW);this.upload()}Quad.prototype.constructor=Quad;Quad.prototype.map=function(rect,rect2){var x=0;var y=0;this.uvs[0]=x;this.uvs[1]=y;this.uvs[2]=x+rect2.width/rect.width;this.uvs[3]=y;this.uvs[4]=x+rect2.width/rect.width;this.uvs[5]=y+rect2.height/rect.height;this.uvs[6]=x;this.uvs[7]=y+rect2.height/rect.height;x=rect2.x;y=rect2.y;this.vertices[0]=x;this.vertices[1]=y;this.vertices[2]=x+rect2.width;this.vertices[3]=y;this.vertices[4]=x+rect2.width;this.vertices[5]=y+rect2.height;this.vertices[6]=x;this.vertices[7]=y+rect2.height;this.upload()};Quad.prototype.upload=function(){var gl=this.gl;gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,this.vertices);gl.bufferSubData(gl.ARRAY_BUFFER,8*4,this.uvs);gl.bufferSubData(gl.ARRAY_BUFFER,(8+8)*4,this.colors)};Quad.prototype.destroy=function(){var gl=this.gl;gl.deleteBuffer(this.vertexBuffer);gl.deleteBuffer(this.indexBuffer)};module.exports=Quad},{}],65:[function(require,module,exports){var math=require("../../../math"),utils=require("../../../utils"),CONST=require("../../../const"),StencilMaskStack=require("./StencilMaskStack");var RenderTarget=function(gl,width,height,scaleMode,resolution,root){this.gl=gl;this.frameBuffer=null;this.texture=null;this.size=new math.Rectangle(0,0,1,1);this.resolution=resolution||CONST.RESOLUTION;this.projectionMatrix=new math.Matrix;this.transform=null;this.frame=null;this.stencilBuffer=null;this.stencilMaskStack=new StencilMaskStack;this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}];this.scaleMode=scaleMode||CONST.SCALE_MODES.DEFAULT;this.root=root;if(!this.root){this.frameBuffer=gl.createFramebuffer();this.texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,this.texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,scaleMode===CONST.SCALE_MODES.LINEAR?gl.LINEAR:gl.NEAREST);var isPowerOfTwo=utils.isPowerOfTwo(width,height);if(!isPowerOfTwo){gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE)}else{gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT)}gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,this.texture,0)}this.resize(width,height)};RenderTarget.prototype.constructor=RenderTarget;module.exports=RenderTarget;RenderTarget.prototype.clear=function(bind){var gl=this.gl;if(bind){gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer)}gl.clearColor(0,0,0,0);gl.clear(gl.COLOR_BUFFER_BIT)};RenderTarget.prototype.attachStencilBuffer=function(){if(this.stencilBuffer){return}if(!this.root){var gl=this.gl;this.stencilBuffer=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,this.stencilBuffer);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,gl.RENDERBUFFER,this.stencilBuffer);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}};RenderTarget.prototype.activate=function(){var gl=this.gl;gl.bindFramebuffer(gl.FRAMEBUFFER,this.frameBuffer);var projectionFrame=this.frame||this.size;this.calculateProjection(projectionFrame);if(this.transform){this.projectionMatrix.append(this.transform)}gl.viewport(0,0,projectionFrame.width*this.resolution,projectionFrame.height*this.resolution)};RenderTarget.prototype.calculateProjection=function(projectionFrame){var pm=this.projectionMatrix;pm.identity();if(!this.root){pm.a=1/projectionFrame.width*2;pm.d=1/projectionFrame.height*2;pm.tx=-1-projectionFrame.x*pm.a;pm.ty=-1-projectionFrame.y*pm.d}else{pm.a=1/projectionFrame.width*2;pm.d=-1/projectionFrame.height*2;pm.tx=-1-projectionFrame.x*pm.a;pm.ty=1-projectionFrame.y*pm.d}};RenderTarget.prototype.resize=function(width,height){width=width|0;height=height|0;if(this.size.width===width&&this.size.height===height){return}this.size.width=width;this.size.height=height;if(!this.root){var gl=this.gl;gl.bindTexture(gl.TEXTURE_2D,this.texture);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,width*this.resolution,height*this.resolution,0,gl.RGBA,gl.UNSIGNED_BYTE,null);if(this.stencilBuffer){gl.bindRenderbuffer(gl.RENDERBUFFER,this.stencilBuffer);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_STENCIL,width*this.resolution,height*this.resolution)}}var projectionFrame=this.frame||this.size;this.calculateProjection(projectionFrame)};RenderTarget.prototype.destroy=function(){var gl=this.gl;gl.deleteRenderbuffer(this.stencilBuffer);gl.deleteFramebuffer(this.frameBuffer);gl.deleteTexture(this.texture);this.frameBuffer=null;this.texture=null}},{"../../../const":22,"../../../math":33,"../../../utils":77,"./StencilMaskStack":66}],66:[function(require,module,exports){function StencilMaskStack(){this.stencilStack=[];this.reverse=true;this.count=0}StencilMaskStack.prototype.constructor=StencilMaskStack;module.exports=StencilMaskStack},{}],67:[function(require,module,exports){var math=require("../math"),Texture=require("../textures/Texture"),Container=require("../display/Container"),CanvasTinter=require("../renderers/canvas/utils/CanvasTinter"),utils=require("../utils"),CONST=require("../const"),tempPoint=new math.Point,GroupD8=math.GroupD8,canvasRenderWorldTransform=new math.Matrix;function Sprite(texture){Container.call(this);this.anchor=new math.Point;this._texture=null;this._width=0;this._height=0;this.tint=16777215;this.blendMode=CONST.BLEND_MODES.NORMAL;this.shader=null;this.cachedTint=16777215;this.texture=texture||Texture.EMPTY}Sprite.prototype=Object.create(Container.prototype);Sprite.prototype.constructor=Sprite;module.exports=Sprite;Object.defineProperties(Sprite.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture._frame.width},set:function(value){var sign=utils.sign(this.scale.x)||1;this.scale.x=sign*value/this.texture._frame.width;this._width=value}},height:{get:function(){return Math.abs(this.scale.y)*this.texture._frame.height},set:function(value){var sign=utils.sign(this.scale.y)||1;this.scale.y=sign*value/this.texture._frame.height;this._height=value}},texture:{get:function(){return this._texture},set:function(value){if(this._texture===value){return}this._texture=value;this.cachedTint=16777215;if(value){if(value.baseTexture.hasLoaded){this._onTextureUpdate()}else{value.once("update",this._onTextureUpdate,this)}}}}});Sprite.prototype._onTextureUpdate=function(){if(this._width){this.scale.x=utils.sign(this.scale.x)*this._width/this.texture.frame.width}if(this._height){this.scale.y=utils.sign(this.scale.y)*this._height/this.texture.frame.height}};Sprite.prototype._renderWebGL=function(renderer){renderer.setObjectRenderer(renderer.plugins.sprite);renderer.plugins.sprite.render(this)};Sprite.prototype.getBounds=function(matrix){if(!this._currentBounds){var width=this._texture._frame.width;var height=this._texture._frame.height;var w0=width*(1-this.anchor.x);var w1=width*-this.anchor.x;var h0=height*(1-this.anchor.y);var h1=height*-this.anchor.y;var worldTransform=matrix||this.worldTransform;var a=worldTransform.a;var b=worldTransform.b;var c=worldTransform.c;var d=worldTransform.d;var tx=worldTransform.tx;var ty=worldTransform.ty;var minX,maxX,minY,maxY;var x1=a*w1+c*h1+tx;var y1=d*h1+b*w1+ty;var x2=a*w0+c*h1+tx;var y2=d*h1+b*w0+ty;var x3=a*w0+c*h0+tx;var y3=d*h0+b*w0+ty;var x4=a*w1+c*h0+tx;var y4=d*h0+b*w1+ty;minX=x1;minX=x2<minX?x2:minX;minX=x3<minX?x3:minX;minX=x4<minX?x4:minX;minY=y1;minY=y2<minY?y2:minY;minY=y3<minY?y3:minY;minY=y4<minY?y4:minY;maxX=x1;maxX=x2>maxX?x2:maxX;maxX=x3>maxX?x3:maxX;maxX=x4>maxX?x4:maxX;maxY=y1;maxY=y2>maxY?y2:maxY;maxY=y3>maxY?y3:maxY;maxY=y4>maxY?y4:maxY;if(this.children.length){var childBounds=this.containerGetBounds();w0=childBounds.x;w1=childBounds.x+childBounds.width;h0=childBounds.y;h1=childBounds.y+childBounds.height;minX=minX<w0?minX:w0;minY=minY<h0?minY:h0;maxX=maxX>w1?maxX:w1;maxY=maxY>h1?maxY:h1}var bounds=this._bounds;bounds.x=minX;bounds.width=maxX-minX;bounds.y=minY;bounds.height=maxY-minY;this._currentBounds=bounds}return this._currentBounds};Sprite.prototype.getLocalBounds=function(){this._bounds.x=-this._texture._frame.width*this.anchor.x;this._bounds.y=-this._texture._frame.height*this.anchor.y;this._bounds.width=this._texture._frame.width;this._bounds.height=this._texture._frame.height;return this._bounds};Sprite.prototype.containsPoint=function(point){this.worldTransform.applyInverse(point,tempPoint);var width=this._texture._frame.width;var height=this._texture._frame.height;var x1=-width*this.anchor.x;var y1;if(tempPoint.x>x1&&tempPoint.x<x1+width){y1=-height*this.anchor.y;if(tempPoint.y>y1&&tempPoint.y<y1+height){return true}}return false};Sprite.prototype._renderCanvas=function(renderer){if(this.texture.crop.width<=0||this.texture.crop.height<=0){return}var compositeOperation=renderer.blendModes[this.blendMode];if(compositeOperation!==renderer.context.globalCompositeOperation){renderer.context.globalCompositeOperation=compositeOperation}if(this.texture.valid){var texture=this._texture,wt=this.worldTransform,dx,dy,width=texture.crop.width,height=texture.crop.height;renderer.context.globalAlpha=this.worldAlpha;var smoothingEnabled=texture.baseTexture.scaleMode===CONST.SCALE_MODES.LINEAR;if(renderer.smoothProperty&&renderer.context[renderer.smoothProperty]!==smoothingEnabled){renderer.context[renderer.smoothProperty]=smoothingEnabled}if((texture.rotate&3)===2){width=texture.crop.height;height=texture.crop.width}if(texture.trim){dx=texture.crop.width/2+texture.trim.x-this.anchor.x*texture.trim.width;dy=texture.crop.height/2+texture.trim.y-this.anchor.y*texture.trim.height}else{dx=(.5-this.anchor.x)*texture._frame.width;dy=(.5-this.anchor.y)*texture._frame.height}if(texture.rotate){wt.copy(canvasRenderWorldTransform);wt=canvasRenderWorldTransform;GroupD8.matrixAppendRotationInv(wt,texture.rotate,dx,dy);dx=0;dy=0}dx-=width/2;dy-=height/2;if(renderer.roundPixels){renderer.context.setTransform(wt.a,wt.b,wt.c,wt.d,wt.tx*renderer.resolution|0,wt.ty*renderer.resolution|0);dx=dx|0;dy=dy|0}else{renderer.context.setTransform(wt.a,wt.b,wt.c,wt.d,wt.tx*renderer.resolution,wt.ty*renderer.resolution)}var resolution=texture.baseTexture.resolution;if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=CanvasTinter.getTintedTexture(this,this.tint)}renderer.context.drawImage(this.tintedTexture,0,0,width*resolution,height*resolution,dx*renderer.resolution,dy*renderer.resolution,width*renderer.resolution,height*renderer.resolution)}else{renderer.context.drawImage(texture.baseTexture.source,texture.crop.x*resolution,texture.crop.y*resolution,width*resolution,height*resolution,dx*renderer.resolution,dy*renderer.resolution,width*renderer.resolution,height*renderer.resolution)}}};Sprite.prototype.destroy=function(destroyTexture,destroyBaseTexture){Container.prototype.destroy.call(this);this.anchor=null;if(destroyTexture){this._texture.destroy(destroyBaseTexture)}this._texture=null;this.shader=null};Sprite.fromFrame=function(frameId){var texture=utils.TextureCache[frameId];if(!texture){throw new Error('The frameId "'+frameId+'" does not exist in the texture cache')}return new Sprite(texture)};Sprite.fromImage=function(imageId,crossorigin,scaleMode){return new Sprite(Texture.fromImage(imageId,crossorigin,scaleMode))}},{"../const":22,"../display/Container":23,"../math":33,"../renderers/canvas/utils/CanvasTinter":48,"../textures/Texture":72,"../utils":77}],68:[function(require,module,exports){var ObjectRenderer=require("../../renderers/webgl/utils/ObjectRenderer"),WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),CONST=require("../../const");function SpriteRenderer(renderer){ObjectRenderer.call(this,renderer);this.vertSize=5;this.vertByteSize=this.vertSize*4;this.size=CONST.SPRITE_BATCH_SIZE;var numVerts=this.size*4*this.vertByteSize;var numIndices=this.size*6;this.vertices=new ArrayBuffer(numVerts);this.positions=new Float32Array(this.vertices);this.colors=new Uint32Array(this.vertices);this.indices=new Uint16Array(numIndices);for(var i=0,j=0;i<numIndices;i+=6,j+=4){this.indices[i+0]=j+0;this.indices[i+1]=j+1;this.indices[i+2]=j+2;this.indices[i+3]=j+0;this.indices[i+4]=j+2;this.indices[i+5]=j+3}this.currentBatchSize=0;this.sprites=[];this.shader=null}SpriteRenderer.prototype=Object.create(ObjectRenderer.prototype);SpriteRenderer.prototype.constructor=SpriteRenderer;module.exports=SpriteRenderer;WebGLRenderer.registerPlugin("sprite",SpriteRenderer);SpriteRenderer.prototype.onContextChange=function(){var gl=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader;this.vertexBuffer=gl.createBuffer();this.indexBuffer=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,this.indices,gl.STATIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,this.vertices,gl.DYNAMIC_DRAW);this.currentBlendMode=99999};SpriteRenderer.prototype.render=function(sprite){var texture=sprite._texture;if(this.currentBatchSize>=this.size){this.flush()}var uvs=texture._uvs;if(!uvs){return}var aX=sprite.anchor.x;var aY=sprite.anchor.y;var w0,w1,h0,h1;if(texture.trim&&sprite.tileScale===undefined){var trim=texture.trim;w1=trim.x-aX*trim.width;w0=w1+texture.crop.width;h1=trim.y-aY*trim.height;h0=h1+texture.crop.height}else{w0=texture._frame.width*(1-aX);w1=texture._frame.width*-aX;h0=texture._frame.height*(1-aY);h1=texture._frame.height*-aY}var index=this.currentBatchSize*this.vertByteSize;var worldTransform=sprite.worldTransform;var a=worldTransform.a;var b=worldTransform.b;var c=worldTransform.c;var d=worldTransform.d;var tx=worldTransform.tx;var ty=worldTransform.ty;var colors=this.colors;var positions=this.positions;if(this.renderer.roundPixels){var resolution=this.renderer.resolution;positions[index]=((a*w1+c*h1+tx)*resolution|0)/resolution;positions[index+1]=((d*h1+b*w1+ty)*resolution|0)/resolution;positions[index+5]=((a*w0+c*h1+tx)*resolution|0)/resolution;positions[index+6]=((d*h1+b*w0+ty)*resolution|0)/resolution;positions[index+10]=((a*w0+c*h0+tx)*resolution|0)/resolution;positions[index+11]=((d*h0+b*w0+ty)*resolution|0)/resolution;positions[index+15]=((a*w1+c*h0+tx)*resolution|0)/resolution;positions[index+16]=((d*h0+b*w1+ty)*resolution|0)/resolution}else{positions[index]=a*w1+c*h1+tx;positions[index+1]=d*h1+b*w1+ty;positions[index+5]=a*w0+c*h1+tx;positions[index+6]=d*h1+b*w0+ty;positions[index+10]=a*w0+c*h0+tx;positions[index+11]=d*h0+b*w0+ty;positions[index+15]=a*w1+c*h0+tx;positions[index+16]=d*h0+b*w1+ty}positions[index+2]=uvs.x0;positions[index+3]=uvs.y0;positions[index+7]=uvs.x1;positions[index+8]=uvs.y1;positions[index+12]=uvs.x2;positions[index+13]=uvs.y2;positions[index+17]=uvs.x3;positions[index+18]=uvs.y3;var tint=sprite.tint;colors[index+4]=colors[index+9]=colors[index+14]=colors[index+19]=(tint>>16)+(tint&65280)+((tint&255)<<16)+(sprite.worldAlpha*255<<24);this.sprites[this.currentBatchSize++]=sprite};SpriteRenderer.prototype.flush=function(){if(this.currentBatchSize===0){return}var gl=this.renderer.gl;var shader;if(this.currentBatchSize>this.size*.5){gl.bufferSubData(gl.ARRAY_BUFFER,0,this.vertices)}else{var view=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);gl.bufferSubData(gl.ARRAY_BUFFER,0,view)}var nextTexture,nextBlendMode,nextShader;var batchSize=0;var start=0;var currentBaseTexture=null;var currentBlendMode=this.renderer.blendModeManager.currentBlendMode;var currentShader=null;var blendSwap=false;var shaderSwap=false;var sprite;for(var i=0,j=this.currentBatchSize;i<j;i++){sprite=this.sprites[i];nextTexture=sprite._texture.baseTexture;nextBlendMode=sprite.blendMode;nextShader=sprite.shader||this.shader;blendSwap=currentBlendMode!==nextBlendMode;shaderSwap=currentShader!==nextShader;if(currentBaseTexture!==nextTexture||blendSwap||shaderSwap){this.renderBatch(currentBaseTexture,batchSize,start);start=i;batchSize=0;currentBaseTexture=nextTexture;if(blendSwap){currentBlendMode=nextBlendMode;this.renderer.blendModeManager.setBlendMode(currentBlendMode)}if(shaderSwap){currentShader=nextShader;shader=currentShader.shaders?currentShader.shaders[gl.id]:currentShader;if(!shader){shader=currentShader.getShader(this.renderer)}this.renderer.shaderManager.setShader(shader);shader.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(true);shader.syncUniforms();gl.activeTexture(gl.TEXTURE0)}}batchSize++}this.renderBatch(currentBaseTexture,batchSize,start);this.currentBatchSize=0};SpriteRenderer.prototype.renderBatch=function(texture,size,startIndex){if(size===0){return}var gl=this.renderer.gl;if(!texture._glTextures[gl.id]){this.renderer.updateTexture(texture)}else{gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id])}gl.drawElements(gl.TRIANGLES,size*6,gl.UNSIGNED_SHORT,startIndex*6*2);this.renderer.drawCount++};SpriteRenderer.prototype.start=function(){var gl=this.renderer.gl;gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer);gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var stride=this.vertByteSize;gl.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,gl.FLOAT,false,stride,0);gl.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,gl.FLOAT,false,stride,2*4);gl.vertexAttribPointer(this.shader.attributes.aColor,4,gl.UNSIGNED_BYTE,true,stride,4*4)};SpriteRenderer.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer);this.renderer.gl.deleteBuffer(this.indexBuffer);ObjectRenderer.prototype.destroy.call(this);this.shader.destroy();this.renderer=null;this.vertices=null;this.positions=null;this.colors=null;this.indices=null;this.vertexBuffer=null;this.indexBuffer=null;this.sprites=null;this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63}],69:[function(require,module,exports){var Sprite=require("../sprites/Sprite"),Texture=require("../textures/Texture"),math=require("../math"),utils=require("../utils"),CONST=require("../const");function Text(text,style,resolution){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.resolution=resolution||CONST.RESOLUTION;this._text=null;this._style=null;var texture=Texture.fromCanvas(this.canvas);texture.trim=new math.Rectangle;Sprite.call(this,texture);this.text=text;this.style=style}Text.prototype=Object.create(Sprite.prototype);Text.prototype.constructor=Text;module.exports=Text;Text.fontPropertiesCache={};Text.fontPropertiesCanvas=document.createElement("canvas");Text.fontPropertiesContext=Text.fontPropertiesCanvas.getContext("2d");Object.defineProperties(Text.prototype,{width:{get:function(){if(this.dirty){this.updateText()}return this.scale.x*this._texture._frame.width},set:function(value){this.scale.x=value/this._texture._frame.width;this._width=value}},height:{get:function(){if(this.dirty){this.updateText()}return this.scale.y*this._texture._frame.height},set:function(value){this.scale.y=value/this._texture._frame.height;this._height=value}},style:{get:function(){return this._style},set:function(style){style=style||{};if(typeof style.fill==="number"){style.fill=utils.hex2string(style.fill)}if(typeof style.stroke==="number"){style.stroke=utils.hex2string(style.stroke)}if(typeof style.dropShadowColor==="number"){style.dropShadowColor=utils.hex2string(style.dropShadowColor)}style.font=style.font||"bold 20pt Arial";style.fill=style.fill||"black";style.align=style.align||"left";style.stroke=style.stroke||"black";style.strokeThickness=style.strokeThickness||0;style.wordWrap=style.wordWrap||false;style.wordWrapWidth=style.wordWrapWidth||100;style.dropShadow=style.dropShadow||false;style.dropShadowColor=style.dropShadowColor||"#000000";style.dropShadowAngle=style.dropShadowAngle!==undefined?style.dropShadowAngle:Math.PI/6;style.dropShadowDistance=style.dropShadowDistance!==undefined?style.dropShadowDistance:5;style.dropShadowBlur=style.dropShadowBlur!==undefined?style.dropShadowBlur:0;style.padding=style.padding||0;style.textBaseline=style.textBaseline||"alphabetic";style.lineJoin=style.lineJoin||"miter";style.miterLimit=style.miterLimit||10;this._style=style;this.dirty=true}},text:{get:function(){return this._text},set:function(text){text=text.toString()||" ";if(this._text===text){return}this._text=text;this.dirty=true}}});Text.prototype.updateText=function(){var style=this._style;this.context.font=style.font;var outputText=style.wordWrap?this.wordWrap(this._text):this._text;var lines=outputText.split(/(?:\r\n|\r|\n)/);var lineWidths=new Array(lines.length);var maxLineWidth=0;var fontProperties=this.determineFontProperties(style.font);for(var i=0;i<lines.length;i++){var lineWidth=this.context.measureText(lines[i]).width;lineWidths[i]=lineWidth;maxLineWidth=Math.max(maxLineWidth,lineWidth)}var width=maxLineWidth+style.strokeThickness;if(style.dropShadow){width+=style.dropShadowDistance}this.canvas.width=(width+this.context.lineWidth)*this.resolution;var lineHeight=this.style.lineHeight||fontProperties.fontSize+style.strokeThickness;var height=lineHeight*lines.length;if(style.dropShadow){height+=style.dropShadowDistance}this.canvas.height=(height+this._style.padding*2)*this.resolution;this.context.scale(this.resolution,this.resolution);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}this.context.font=style.font;this.context.strokeStyle=style.stroke;this.context.lineWidth=style.strokeThickness;this.context.textBaseline=style.textBaseline;this.context.lineJoin=style.lineJoin;this.context.miterLimit=style.miterLimit;var linePositionX;var linePositionY;if(style.dropShadow){if(style.dropShadowBlur>0){this.context.shadowColor=style.dropShadowColor;this.context.shadowBlur=style.dropShadowBlur}else{this.context.fillStyle=style.dropShadowColor}var xShadowOffset=Math.cos(style.dropShadowAngle)*style.dropShadowDistance;var yShadowOffset=Math.sin(style.dropShadowAngle)*style.dropShadowDistance;for(i=0;i<lines.length;i++){linePositionX=style.strokeThickness/2;linePositionY=style.strokeThickness/2+i*lineHeight+fontProperties.ascent;if(style.align==="right"){linePositionX+=maxLineWidth-lineWidths[i]}else if(style.align==="center"){linePositionX+=(maxLineWidth-lineWidths[i])/2}if(style.fill){this.context.fillText(lines[i],linePositionX+xShadowOffset,linePositionY+yShadowOffset+this._style.padding)}}}this.context.fillStyle=style.fill;for(i=0;i<lines.length;i++){linePositionX=style.strokeThickness/2;linePositionY=style.strokeThickness/2+i*lineHeight+fontProperties.ascent;if(style.align==="right"){
linePositionX+=maxLineWidth-lineWidths[i]}else if(style.align==="center"){linePositionX+=(maxLineWidth-lineWidths[i])/2}if(style.stroke&&style.strokeThickness){this.context.strokeText(lines[i],linePositionX,linePositionY+this._style.padding)}if(style.fill){this.context.fillText(lines[i],linePositionX,linePositionY+this._style.padding)}}this.updateTexture()};Text.prototype.updateTexture=function(){var texture=this._texture;texture.baseTexture.hasLoaded=true;texture.baseTexture.resolution=this.resolution;texture.baseTexture.width=this.canvas.width/this.resolution;texture.baseTexture.height=this.canvas.height/this.resolution;texture.crop.width=texture._frame.width=this.canvas.width/this.resolution;texture.crop.height=texture._frame.height=this.canvas.height/this.resolution;texture.trim.x=0;texture.trim.y=-this._style.padding;texture.trim.width=texture._frame.width;texture.trim.height=texture._frame.height-this._style.padding*2;this._width=this.canvas.width/this.resolution;this._height=this.canvas.height/this.resolution;texture.baseTexture.emit("update",texture.baseTexture);this.dirty=false};Text.prototype.renderWebGL=function(renderer){if(this.dirty){this.updateText()}Sprite.prototype.renderWebGL.call(this,renderer)};Text.prototype._renderCanvas=function(renderer){if(this.dirty){this.updateText()}Sprite.prototype._renderCanvas.call(this,renderer)};Text.prototype.determineFontProperties=function(fontStyle){var properties=Text.fontPropertiesCache[fontStyle];if(!properties){properties={};var canvas=Text.fontPropertiesCanvas;var context=Text.fontPropertiesContext;context.font=fontStyle;var width=Math.ceil(context.measureText("|MÉq").width);var baseline=Math.ceil(context.measureText("M").width);var height=2*baseline;baseline=baseline*1.4|0;canvas.width=width;canvas.height=height;context.fillStyle="#f00";context.fillRect(0,0,width,height);context.font=fontStyle;context.textBaseline="alphabetic";context.fillStyle="#000";context.fillText("|MÉq",0,baseline);var imagedata=context.getImageData(0,0,width,height).data;var pixels=imagedata.length;var line=width*4;var i,j;var idx=0;var stop=false;for(i=0;i<baseline;i++){for(j=0;j<line;j+=4){if(imagedata[idx+j]!==255){stop=true;break}}if(!stop){idx+=line}else{break}}properties.ascent=baseline-i;idx=pixels-line;stop=false;for(i=height;i>baseline;i--){for(j=0;j<line;j+=4){if(imagedata[idx+j]!==255){stop=true;break}}if(!stop){idx-=line}else{break}}properties.descent=i-baseline;properties.fontSize=properties.ascent+properties.descent;Text.fontPropertiesCache[fontStyle]=properties}return properties};Text.prototype.wordWrap=function(text){var result="";var lines=text.split("\n");var wordWrapWidth=this._style.wordWrapWidth;for(var i=0;i<lines.length;i++){var spaceLeft=wordWrapWidth;var words=lines[i].split(" ");for(var j=0;j<words.length;j++){var wordWidth=this.context.measureText(words[j]).width;var wordWidthWithSpace=wordWidth+this.context.measureText(" ").width;if(j===0||wordWidthWithSpace>spaceLeft){if(j>0){result+="\n"}result+=words[j];spaceLeft=wordWrapWidth-wordWidth}else{spaceLeft-=wordWidthWithSpace;result+=" "+words[j]}}if(i<lines.length-1){result+="\n"}}return result};Text.prototype.getBounds=function(matrix){if(this.dirty){this.updateText()}return Sprite.prototype.getBounds.call(this,matrix)};Text.prototype.destroy=function(destroyBaseTexture){this.context=null;this.canvas=null;this._style=null;this._texture.destroy(destroyBaseTexture===undefined?true:destroyBaseTexture)}},{"../const":22,"../math":33,"../sprites/Sprite":67,"../textures/Texture":72,"../utils":77}],70:[function(require,module,exports){var utils=require("../utils"),CONST=require("../const"),EventEmitter=require("eventemitter3");function BaseTexture(source,scaleMode,resolution){EventEmitter.call(this);this.uid=utils.uid();this.resolution=resolution||1;this.width=100;this.height=100;this.realWidth=100;this.realHeight=100;this.scaleMode=scaleMode||CONST.SCALE_MODES.DEFAULT;this.hasLoaded=false;this.isLoading=false;this.source=null;this.premultipliedAlpha=true;this.imageUrl=null;this.isPowerOfTwo=false;this.mipmap=false;this._glTextures={};if(source){this.loadSource(source)}}BaseTexture.prototype=Object.create(EventEmitter.prototype);BaseTexture.prototype.constructor=BaseTexture;module.exports=BaseTexture;BaseTexture.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width;this.realHeight=this.source.naturalHeight||this.source.height;this.width=this.realWidth/this.resolution;this.height=this.realHeight/this.resolution;this.isPowerOfTwo=utils.isPowerOfTwo(this.realWidth,this.realHeight);this.emit("update",this)};BaseTexture.prototype.loadSource=function(source){var wasLoading=this.isLoading;this.hasLoaded=false;this.isLoading=false;if(wasLoading&&this.source){this.source.onload=null;this.source.onerror=null}this.source=source;if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height){this._sourceLoaded()}else if(!source.getContext){this.isLoading=true;var scope=this;source.onload=function(){source.onload=null;source.onerror=null;if(!scope.isLoading){return}scope.isLoading=false;scope._sourceLoaded();scope.emit("loaded",scope)};source.onerror=function(){source.onload=null;source.onerror=null;if(!scope.isLoading){return}scope.isLoading=false;scope.emit("error",scope)};if(source.complete&&source.src){this.isLoading=false;source.onload=null;source.onerror=null;if(source.width&&source.height){this._sourceLoaded();if(wasLoading){this.emit("loaded",this)}}else{if(wasLoading){this.emit("error",this)}}}}};BaseTexture.prototype._sourceLoaded=function(){this.hasLoaded=true;this.update()};BaseTexture.prototype.destroy=function(){if(this.imageUrl){delete utils.BaseTextureCache[this.imageUrl];delete utils.TextureCache[this.imageUrl];this.imageUrl=null;if(!navigator.isCocoonJS){this.source.src=""}}else if(this.source&&this.source._pixiId){delete utils.BaseTextureCache[this.source._pixiId]}this.source=null;this.dispose()};BaseTexture.prototype.dispose=function(){this.emit("dispose",this)};BaseTexture.prototype.updateSourceImage=function(newSrc){this.source.src=newSrc;this.loadSource(this.source)};BaseTexture.fromImage=function(imageUrl,crossorigin,scaleMode){var baseTexture=utils.BaseTextureCache[imageUrl];if(crossorigin===undefined&&imageUrl.indexOf("data:")!==0){crossorigin=true}if(!baseTexture){var image=new Image;if(crossorigin){image.crossOrigin=""}baseTexture=new BaseTexture(image,scaleMode);baseTexture.imageUrl=imageUrl;image.src=imageUrl;utils.BaseTextureCache[imageUrl]=baseTexture;baseTexture.resolution=utils.getResolutionOfUrl(imageUrl)}return baseTexture};BaseTexture.fromCanvas=function(canvas,scaleMode){if(!canvas._pixiId){canvas._pixiId="canvas_"+utils.uid()}var baseTexture=utils.BaseTextureCache[canvas._pixiId];if(!baseTexture){baseTexture=new BaseTexture(canvas,scaleMode);utils.BaseTextureCache[canvas._pixiId]=baseTexture}return baseTexture}},{"../const":22,"../utils":77,eventemitter3:10}],71:[function(require,module,exports){var BaseTexture=require("./BaseTexture"),Texture=require("./Texture"),RenderTarget=require("../renderers/webgl/utils/RenderTarget"),FilterManager=require("../renderers/webgl/managers/FilterManager"),CanvasBuffer=require("../renderers/canvas/utils/CanvasBuffer"),math=require("../math"),CONST=require("../const"),tempMatrix=new math.Matrix;function RenderTexture(renderer,width,height,scaleMode,resolution){if(!renderer){throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.")}width=width||100;height=height||100;resolution=resolution||CONST.RESOLUTION;var baseTexture=new BaseTexture;baseTexture.width=width;baseTexture.height=height;baseTexture.resolution=resolution;baseTexture.scaleMode=scaleMode||CONST.SCALE_MODES.DEFAULT;baseTexture.hasLoaded=true;Texture.call(this,baseTexture,new math.Rectangle(0,0,width,height));this.width=width;this.height=height;this.resolution=resolution;this.render=null;this.renderer=renderer;if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl;this.textureBuffer=new RenderTarget(gl,this.width,this.height,baseTexture.scaleMode,this.resolution);this.baseTexture._glTextures[gl.id]=this.textureBuffer.texture;this.filterManager=new FilterManager(this.renderer);this.filterManager.onContextChange();this.filterManager.resize(width,height);this.render=this.renderWebGL;this.renderer.currentRenderer.start();this.renderer.currentRenderTarget.activate()}else{this.render=this.renderCanvas;this.textureBuffer=new CanvasBuffer(this.width*this.resolution,this.height*this.resolution);this.baseTexture.source=this.textureBuffer.canvas}this.valid=true;this._updateUvs()}RenderTexture.prototype=Object.create(Texture.prototype);RenderTexture.prototype.constructor=RenderTexture;module.exports=RenderTexture;RenderTexture.prototype.resize=function(width,height,updateBase){if(width===this.width&&height===this.height){return}this.valid=width>0&&height>0;this.width=this._frame.width=this.crop.width=width;this.height=this._frame.height=this.crop.height=height;if(updateBase){this.baseTexture.width=this.width;this.baseTexture.height=this.height}if(!this.valid){return}this.textureBuffer.resize(this.width,this.height);if(this.filterManager){this.filterManager.resize(this.width,this.height)}};RenderTexture.prototype.clear=function(){if(!this.valid){return}if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer)}this.textureBuffer.clear()};RenderTexture.prototype.renderWebGL=function(displayObject,matrix,clear,updateTransform){if(!this.valid){return}updateTransform=updateTransform!==undefined?updateTransform:true;this.textureBuffer.transform=matrix;this.textureBuffer.activate();displayObject.worldAlpha=1;if(updateTransform){displayObject.worldTransform.identity();displayObject.currentBounds=null;var children=displayObject.children;var i,j;for(i=0,j=children.length;i<j;++i){children[i].updateTransform()}}var temp=this.renderer.filterManager;this.renderer.filterManager=this.filterManager;this.renderer.renderDisplayObject(displayObject,this.textureBuffer,clear);this.renderer.filterManager=temp};RenderTexture.prototype.renderCanvas=function(displayObject,matrix,clear,updateTransform){if(!this.valid){return}updateTransform=!!updateTransform;var wt=tempMatrix;wt.identity();if(matrix){wt.append(matrix)}var cachedWt=displayObject.worldTransform;displayObject.worldTransform=wt;displayObject.worldAlpha=1;var children=displayObject.children;var i,j;for(i=0,j=children.length;i<j;++i){children[i].updateTransform()}if(clear){this.textureBuffer.clear()}var context=this.textureBuffer.context;var realResolution=this.renderer.resolution;this.renderer.resolution=this.resolution;this.renderer.renderDisplayObject(displayObject,context);this.renderer.resolution=realResolution;if(displayObject.worldTransform===wt){displayObject.worldTransform=cachedWt}};RenderTexture.prototype.destroy=function(){Texture.prototype.destroy.call(this,true);this.textureBuffer.destroy();if(this.filterManager){this.filterManager.destroy()}this.renderer=null};RenderTexture.prototype.getImage=function(){var image=new Image;image.src=this.getBase64();return image};RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()};RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl;var width=this.textureBuffer.size.width;var height=this.textureBuffer.size.height;var webGLPixels=new Uint8Array(4*width*height);gl.bindFramebuffer(gl.FRAMEBUFFER,this.textureBuffer.frameBuffer);gl.readPixels(0,0,width,height,gl.RGBA,gl.UNSIGNED_BYTE,webGLPixels);gl.bindFramebuffer(gl.FRAMEBUFFER,null);var tempCanvas=new CanvasBuffer(width,height);var canvasData=tempCanvas.context.getImageData(0,0,width,height);canvasData.data.set(webGLPixels);tempCanvas.context.putImageData(canvasData,0,0);return tempCanvas.canvas}else{return this.textureBuffer.canvas}};RenderTexture.prototype.getPixels=function(){var width,height;if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl;width=this.textureBuffer.size.width;height=this.textureBuffer.size.height;var webGLPixels=new Uint8Array(4*width*height);gl.bindFramebuffer(gl.FRAMEBUFFER,this.textureBuffer.frameBuffer);gl.readPixels(0,0,width,height,gl.RGBA,gl.UNSIGNED_BYTE,webGLPixels);gl.bindFramebuffer(gl.FRAMEBUFFER,null);return webGLPixels}else{width=this.textureBuffer.canvas.width;height=this.textureBuffer.canvas.height;return this.textureBuffer.canvas.getContext("2d").getImageData(0,0,width,height).data}};RenderTexture.prototype.getPixel=function(x,y){if(this.renderer.type===CONST.RENDERER_TYPE.WEBGL){var gl=this.renderer.gl;var webGLPixels=new Uint8Array(4);gl.bindFramebuffer(gl.FRAMEBUFFER,this.textureBuffer.frameBuffer);gl.readPixels(x,y,1,1,gl.RGBA,gl.UNSIGNED_BYTE,webGLPixels);gl.bindFramebuffer(gl.FRAMEBUFFER,null);return webGLPixels}else{return this.textureBuffer.canvas.getContext("2d").getImageData(x,y,1,1).data}}},{"../const":22,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/webgl/managers/FilterManager":54,"../renderers/webgl/utils/RenderTarget":65,"./BaseTexture":70,"./Texture":72}],72:[function(require,module,exports){var BaseTexture=require("./BaseTexture"),VideoBaseTexture=require("./VideoBaseTexture"),TextureUvs=require("./TextureUvs"),EventEmitter=require("eventemitter3"),math=require("../math"),utils=require("../utils");function Texture(baseTexture,frame,crop,trim,rotate){EventEmitter.call(this);this.noFrame=false;if(!frame){this.noFrame=true;frame=new math.Rectangle(0,0,1,1)}if(baseTexture instanceof Texture){baseTexture=baseTexture.baseTexture}this.baseTexture=baseTexture;this._frame=frame;this.trim=trim;this.valid=false;this.requiresUpdate=false;this._uvs=null;this.width=0;this.height=0;this.crop=crop||frame;this._rotate=+(rotate||0);if(rotate===true){this._rotate=2}else{if(this._rotate%2!==0){throw"attempt to use diamond-shaped UVs. If you are sure, set rotation manually"}}if(baseTexture.hasLoaded){if(this.noFrame){frame=new math.Rectangle(0,0,baseTexture.width,baseTexture.height);baseTexture.on("update",this.onBaseTextureUpdated,this)}this.frame=frame}else{baseTexture.once("loaded",this.onBaseTextureLoaded,this)}}Texture.prototype=Object.create(EventEmitter.prototype);Texture.prototype.constructor=Texture;module.exports=Texture;Object.defineProperties(Texture.prototype,{frame:{get:function(){return this._frame},set:function(frame){this._frame=frame;this.noFrame=false;this.width=frame.width;this.height=frame.height;if(!this.trim&&!this.rotate&&(frame.x+frame.width>this.baseTexture.width||frame.y+frame.height>this.baseTexture.height)){throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.valid=frame&&frame.width&&frame.height&&this.baseTexture.hasLoaded;if(this.trim){this.width=this.trim.width;this.height=this.trim.height;this._frame.width=this.trim.width;this._frame.height=this.trim.height}else{this.crop=frame}if(this.valid){this._updateUvs()}}},rotate:{get:function(){return this._rotate},set:function(rotate){this._rotate=rotate;if(this.valid){this._updateUvs()}}}});Texture.prototype.update=function(){this.baseTexture.update()};Texture.prototype.onBaseTextureLoaded=function(baseTexture){if(this.noFrame){this.frame=new math.Rectangle(0,0,baseTexture.width,baseTexture.height)}else{this.frame=this._frame}this.emit("update",this)};Texture.prototype.onBaseTextureUpdated=function(baseTexture){this._frame.width=baseTexture.width;this._frame.height=baseTexture.height;this.emit("update",this)};Texture.prototype.destroy=function(destroyBase){if(this.baseTexture){if(destroyBase){this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this);this.baseTexture.off("loaded",this.onBaseTextureLoaded,this);this.baseTexture=null}this._frame=null;this._uvs=null;this.trim=null;this.crop=null;this.valid=false;this.off("dispose",this.dispose,this);this.off("update",this.update,this)};Texture.prototype.clone=function(){return new Texture(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)};Texture.prototype._updateUvs=function(){if(!this._uvs){this._uvs=new TextureUvs}this._uvs.set(this.crop,this.baseTexture,this.rotate)};Texture.fromImage=function(imageUrl,crossorigin,scaleMode){var texture=utils.TextureCache[imageUrl];if(!texture){texture=new Texture(BaseTexture.fromImage(imageUrl,crossorigin,scaleMode));utils.TextureCache[imageUrl]=texture}return texture};Texture.fromFrame=function(frameId){var texture=utils.TextureCache[frameId];if(!texture){throw new Error('The frameId "'+frameId+'" does not exist in the texture cache')}return texture};Texture.fromCanvas=function(canvas,scaleMode){return new Texture(BaseTexture.fromCanvas(canvas,scaleMode))};Texture.fromVideo=function(video,scaleMode){if(typeof video==="string"){return Texture.fromVideoUrl(video,scaleMode)}else{return new Texture(VideoBaseTexture.fromVideo(video,scaleMode))}};Texture.fromVideoUrl=function(videoUrl,scaleMode){return new Texture(VideoBaseTexture.fromUrl(videoUrl,scaleMode))};Texture.addTextureToCache=function(texture,id){utils.TextureCache[id]=texture};Texture.removeTextureFromCache=function(id){var texture=utils.TextureCache[id];delete utils.TextureCache[id];delete utils.BaseTextureCache[id];return texture};Texture.EMPTY=new Texture(new BaseTexture)},{"../math":33,"../utils":77,"./BaseTexture":70,"./TextureUvs":73,"./VideoBaseTexture":74,eventemitter3:10}],73:[function(require,module,exports){function TextureUvs(){this.x0=0;this.y0=0;this.x1=1;this.y1=0;this.x2=1;this.y2=1;this.x3=0;this.y3=1}module.exports=TextureUvs;var GroupD8=require("../math/GroupD8");TextureUvs.prototype.set=function(frame,baseFrame,rotate){var tw=baseFrame.width;var th=baseFrame.height;if(rotate){var swapWidthHeight=GroupD8.isSwapWidthHeight(rotate);var w2=(swapWidthHeight?frame.height:frame.width)/2/tw;var h2=(swapWidthHeight?frame.width:frame.height)/2/th;var cX=frame.x/tw+w2;var cY=frame.y/th+h2;rotate=GroupD8.add(rotate,GroupD8.NW);this.x0=cX+w2*GroupD8.uX(rotate);this.y0=cY+h2*GroupD8.uY(rotate);rotate=GroupD8.add(rotate,2);this.x1=cX+w2*GroupD8.uX(rotate);this.y1=cY+h2*GroupD8.uY(rotate);rotate=GroupD8.add(rotate,2);this.x2=cX+w2*GroupD8.uX(rotate);this.y2=cY+h2*GroupD8.uY(rotate);rotate=GroupD8.add(rotate,2);this.x3=cX+w2*GroupD8.uX(rotate);this.y3=cY+h2*GroupD8.uY(rotate)}else{this.x0=frame.x/tw;this.y0=frame.y/th;this.x1=(frame.x+frame.width)/tw;this.y1=frame.y/th;this.x2=(frame.x+frame.width)/tw;this.y2=(frame.y+frame.height)/th;this.x3=frame.x/tw;this.y3=(frame.y+frame.height)/th}}},{"../math/GroupD8":30}],74:[function(require,module,exports){var BaseTexture=require("./BaseTexture"),utils=require("../utils");function VideoBaseTexture(source,scaleMode){if(!source){throw new Error("No video source element specified.")}if((source.readyState===source.HAVE_ENOUGH_DATA||source.readyState===source.HAVE_FUTURE_DATA)&&source.width&&source.height){source.complete=true}BaseTexture.call(this,source,scaleMode);this.autoUpdate=false;this._onUpdate=this._onUpdate.bind(this);this._onCanPlay=this._onCanPlay.bind(this);if(!source.complete){source.addEventListener("canplay",this._onCanPlay);source.addEventListener("canplaythrough",this._onCanPlay);source.addEventListener("play",this._onPlayStart.bind(this));source.addEventListener("pause",this._onPlayStop.bind(this))}this.__loaded=false}VideoBaseTexture.prototype=Object.create(BaseTexture.prototype);VideoBaseTexture.prototype.constructor=VideoBaseTexture;module.exports=VideoBaseTexture;VideoBaseTexture.prototype._onUpdate=function(){if(this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.update()}};VideoBaseTexture.prototype._onPlayStart=function(){if(!this.autoUpdate){window.requestAnimationFrame(this._onUpdate);this.autoUpdate=true}};VideoBaseTexture.prototype._onPlayStop=function(){this.autoUpdate=false};VideoBaseTexture.prototype._onCanPlay=function(){this.hasLoaded=true;if(this.source){this.source.removeEventListener("canplay",this._onCanPlay);this.source.removeEventListener("canplaythrough",this._onCanPlay);this.width=this.source.videoWidth;this.height=this.source.videoHeight;this.source.play();if(!this.__loaded){this.__loaded=true;this.emit("loaded",this)}}};VideoBaseTexture.prototype.destroy=function(){if(this.source&&this.source._pixiId){delete utils.BaseTextureCache[this.source._pixiId];delete this.source._pixiId}BaseTexture.prototype.destroy.call(this)};VideoBaseTexture.fromVideo=function(video,scaleMode){if(!video._pixiId){video._pixiId="video_"+utils.uid()}var baseTexture=utils.BaseTextureCache[video._pixiId];if(!baseTexture){baseTexture=new VideoBaseTexture(video,scaleMode);utils.BaseTextureCache[video._pixiId]=baseTexture}return baseTexture};VideoBaseTexture.fromUrl=function(videoSrc,scaleMode){var video=document.createElement("video");if(Array.isArray(videoSrc)){for(var i=0;i<videoSrc.length;++i){video.appendChild(createSource(videoSrc[i].src||videoSrc[i],videoSrc[i].mime))}}else{video.appendChild(createSource(videoSrc.src||videoSrc,videoSrc.mime))}video.load();video.play();return VideoBaseTexture.fromVideo(video,scaleMode)};VideoBaseTexture.fromUrls=VideoBaseTexture.fromUrl;function createSource(path,type){if(!type){type="video/"+path.substr(path.lastIndexOf(".")+1)}var source=document.createElement("source");source.src=path;source.type=type;return source}},{"../utils":77,"./BaseTexture":70}],75:[function(require,module,exports){var CONST=require("../const"),EventEmitter=require("eventemitter3"),TICK="tick";function Ticker(){var _this=this;this._tick=function _tick(time){_this._requestId=null;if(_this.started){_this.update(time);if(_this.started&&_this._requestId===null&&_this._emitter.listeners(TICK,true)){_this._requestId=requestAnimationFrame(_this._tick)}}};this._emitter=new EventEmitter;this._requestId=null;this._maxElapsedMS=100;this.autoStart=false;this.deltaTime=1;this.elapsedMS=1/CONST.TARGET_FPMS;this.lastTime=0;this.speed=1;this.started=false}Object.defineProperties(Ticker.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(fps){var minFPMS=Math.min(Math.max(0,fps)/1e3,CONST.TARGET_FPMS);this._maxElapsedMS=1/minFPMS}}});Ticker.prototype._requestIfNeeded=function _requestIfNeeded(){if(this._requestId===null&&this._emitter.listeners(TICK,true)){this.lastTime=performance.now();this._requestId=requestAnimationFrame(this._tick)}};Ticker.prototype._cancelIfNeeded=function _cancelIfNeeded(){if(this._requestId!==null){cancelAnimationFrame(this._requestId);this._requestId=null}};Ticker.prototype._startIfPossible=function _startIfPossible(){if(this.started){this._requestIfNeeded()}else if(this.autoStart){this.start()}};Ticker.prototype.add=function add(fn,context){this._emitter.on(TICK,fn,context);this._startIfPossible();return this};Ticker.prototype.addOnce=function addOnce(fn,context){this._emitter.once(TICK,fn,context);this._startIfPossible();return this};Ticker.prototype.remove=function remove(fn,context){this._emitter.off(TICK,fn,context);if(!this._emitter.listeners(TICK,true)){this._cancelIfNeeded()}return this};Ticker.prototype.start=function start(){if(!this.started){this.started=true;this._requestIfNeeded()}};Ticker.prototype.stop=function stop(){if(this.started){this.started=false;this._cancelIfNeeded()}};Ticker.prototype.update=function update(currentTime){var elapsedMS;currentTime=currentTime||performance.now();elapsedMS=this.elapsedMS=currentTime-this.lastTime;if(elapsedMS>this._maxElapsedMS){elapsedMS=this._maxElapsedMS}this.deltaTime=elapsedMS*CONST.TARGET_FPMS*this.speed;this._emitter.emit(TICK,this.deltaTime);this.lastTime=currentTime};module.exports=Ticker},{"../const":22,eventemitter3:10}],76:[function(require,module,exports){var Ticker=require("./Ticker");var shared=new Ticker;shared.autoStart=true;module.exports={shared:shared,Ticker:Ticker}},{"./Ticker":75}],77:[function(require,module,exports){var CONST=require("../const");var utils=module.exports={_uid:0,_saidHello:false,EventEmitter:require("eventemitter3"),pluginTarget:require("./pluginTarget"),async:require("async"),uid:function(){return++utils._uid},hex2rgb:function(hex,out){out=out||[];out[0]=(hex>>16&255)/255;out[1]=(hex>>8&255)/255;out[2]=(hex&255)/255;return out},hex2string:function(hex){hex=hex.toString(16);hex="000000".substr(0,6-hex.length)+hex;return"#"+hex},rgb2hex:function(rgb){return(rgb[0]*255<<16)+(rgb[1]*255<<8)+rgb[2]*255},canUseNewCanvasBlendModes:function(){if(typeof document==="undefined"){return false}var pngHead="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";var pngEnd="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var magenta=new Image;magenta.src=pngHead+"AP804Oa6"+pngEnd;var yellow=new Image;yellow.src=pngHead+"/wCKxvRF"+pngEnd;var canvas=document.createElement("canvas");canvas.width=6;canvas.height=1;var context=canvas.getContext("2d");context.globalCompositeOperation="multiply";context.drawImage(magenta,0,0);context.drawImage(yellow,2,0);var data=context.getImageData(2,0,1,1).data;return data[0]===255&&data[1]===0&&data[2]===0},getNextPowerOfTwo:function(number){if(number>0&&(number&number-1)===0){return number}else{var result=1;while(result<number){result<<=1}return result}},isPowerOfTwo:function(width,height){return width>0&&(width&width-1)===0&&height>0&&(height&height-1)===0},getResolutionOfUrl:function(url){var resolution=CONST.RETINA_PREFIX.exec(url);if(resolution){return parseFloat(resolution[1])}return 1},sayHello:function(type){if(utils._saidHello){return}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var args=["\n %c %c %c Pixi.js "+CONST.VERSION+" - ✰ "+type+" ✰  %c "+" %c "+" http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,args)}else if(window.console){window.console.log("Pixi.js "+CONST.VERSION+" - "+type+" - http://www.pixijs.com/")}utils._saidHello=true},isWebGLSupported:function(){var contextOptions={stencil:true};try{if(!window.WebGLRenderingContext){return false}var canvas=document.createElement("canvas"),gl=canvas.getContext("webgl",contextOptions)||canvas.getContext("experimental-webgl",contextOptions);return!!(gl&&gl.getContextAttributes().stencil)}catch(e){return false}},sign:function(n){return n?n<0?-1:1:0},removeItems:function(arr,startIdx,removeCount){var length=arr.length;if(startIdx>=length||removeCount===0){return}removeCount=startIdx+removeCount>length?length-startIdx:removeCount;for(var i=startIdx,len=length-removeCount;i<len;++i){arr[i]=arr[i+removeCount]}arr.length=len},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":78,async:1,eventemitter3:10}],78:[function(require,module,exports){function pluginTarget(obj){obj.__plugins={};obj.registerPlugin=function(pluginName,ctor){obj.__plugins[pluginName]=ctor};obj.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var o in obj.__plugins){this.plugins[o]=new obj.__plugins[o](this)}};obj.prototype.destroyPlugins=function(){for(var o in this.plugins){this.plugins[o].destroy();this.plugins[o]=null}this.plugins=null}}module.exports={mixin:function mixin(obj){pluginTarget(obj)}}},{}],79:[function(require,module,exports){var core=require("./core"),mesh=require("./mesh"),extras=require("./extras"),filters=require("./filters");core.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")};core.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")};Object.defineProperties(core,{Stage:{get:function(){console.warn("You do not need to use a PIXI Stage any more, you can simply render any container.");return core.Container}},DisplayObjectContainer:{get:function(){console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on.");return core.Container}},Strip:{get:function(){console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on.");return mesh.Mesh}},Rope:{get:function(){console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on.");return mesh.Rope}},MovieClip:{get:function(){console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on.");return extras.MovieClip}},TilingSprite:{get:function(){console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on.");return extras.TilingSprite}},BitmapText:{get:function(){console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on.");return extras.BitmapText}},blendModes:{get:function(){console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on.");return core.BLEND_MODES}},scaleModes:{get:function(){console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on.");return core.SCALE_MODES}},BaseTextureCache:{get:function(){console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on.");return core.utils.BaseTextureCache}},TextureCache:{get:function(){console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on.");return core.utils.TextureCache}},math:{get:function(){console.warn("The math namespace is deprecated, please access members already accessible on PIXI.");return core}}});core.Sprite.prototype.setTexture=function(texture){this.texture=texture;console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")};extras.BitmapText.prototype.setText=function(text){this.text=text;console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")};core.Text.prototype.setText=function(text){this.text=text;console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")};core.Text.prototype.setStyle=function(style){this.style=style;console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")};core.Texture.prototype.setFrame=function(frame){this.frame=frame;console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")};Object.defineProperties(filters,{AbstractFilter:{get:function(){console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on.");return core.AbstractFilter}},FXAAFilter:{get:function(){console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on.");return core.FXAAFilter}},SpriteMaskFilter:{get:function(){console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on.");return core.SpriteMaskFilter}}});core.utils.uuid=function(){console.warn("utils.uuid() is deprecated, please use utils.uid() from now on.");return core.utils.uid()}},{"./core":29,"./extras":86,"./filters":103,"./mesh":128}],80:[function(require,module,exports){var core=require("../core");function BitmapText(text,style){core.Container.call(this);style=style||{};this.textWidth=0;this.textHeight=0;this._glyphs=[];this._font={tint:style.tint!==undefined?style.tint:16777215,align:style.align||"left",name:null,size:0};this.font=style.font;this._text=text;this.maxWidth=0;this.maxLineHeight=0;
this.dirty=false;this.updateText()}BitmapText.prototype=Object.create(core.Container.prototype);BitmapText.prototype.constructor=BitmapText;module.exports=BitmapText;Object.defineProperties(BitmapText.prototype,{tint:{get:function(){return this._font.tint},set:function(value){this._font.tint=typeof value==="number"&&value>=0?value:16777215;this.dirty=true}},align:{get:function(){return this._font.align},set:function(value){this._font.align=value||"left";this.dirty=true}},font:{get:function(){return this._font},set:function(value){if(!value){return}if(typeof value==="string"){value=value.split(" ");this._font.name=value.length===1?value[0]:value.slice(1).join(" ");this._font.size=value.length>=2?parseInt(value[0],10):BitmapText.fonts[this._font.name].size}else{this._font.name=value.name;this._font.size=typeof value.size==="number"?value.size:parseInt(value.size,10)}this.dirty=true}},text:{get:function(){return this._text},set:function(value){value=value.toString()||" ";if(this._text===value){return}this._text=value;this.dirty=true}}});BitmapText.prototype.updateText=function(){var data=BitmapText.fonts[this._font.name];var pos=new core.Point;var prevCharCode=null;var chars=[];var lastLineWidth=0;var maxLineWidth=0;var lineWidths=[];var line=0;var scale=this._font.size/data.size;var lastSpace=-1;var maxLineHeight=0;for(var i=0;i<this.text.length;i++){var charCode=this.text.charCodeAt(i);lastSpace=/(\s)/.test(this.text.charAt(i))?i:lastSpace;if(/(?:\r\n|\r|\n)/.test(this.text.charAt(i))){lineWidths.push(lastLineWidth);maxLineWidth=Math.max(maxLineWidth,lastLineWidth);line++;pos.x=0;pos.y+=data.lineHeight;prevCharCode=null;continue}if(lastSpace!==-1&&this.maxWidth>0&&pos.x*scale>this.maxWidth){core.utils.removeItems(chars,lastSpace,i-lastSpace);i=lastSpace;lastSpace=-1;lineWidths.push(lastLineWidth);maxLineWidth=Math.max(maxLineWidth,lastLineWidth);line++;pos.x=0;pos.y+=data.lineHeight;prevCharCode=null;continue}var charData=data.chars[charCode];if(!charData){continue}if(prevCharCode&&charData.kerning[prevCharCode]){pos.x+=charData.kerning[prevCharCode]}chars.push({texture:charData.texture,line:line,charCode:charCode,position:new core.Point(pos.x+charData.xOffset,pos.y+charData.yOffset)});lastLineWidth=pos.x+(charData.texture.width+charData.xOffset);pos.x+=charData.xAdvance;maxLineHeight=Math.max(maxLineHeight,charData.yOffset+charData.texture.height);prevCharCode=charCode}lineWidths.push(lastLineWidth);maxLineWidth=Math.max(maxLineWidth,lastLineWidth);var lineAlignOffsets=[];for(i=0;i<=line;i++){var alignOffset=0;if(this._font.align==="right"){alignOffset=maxLineWidth-lineWidths[i]}else if(this._font.align==="center"){alignOffset=(maxLineWidth-lineWidths[i])/2}lineAlignOffsets.push(alignOffset)}var lenChars=chars.length;var tint=this.tint;for(i=0;i<lenChars;i++){var c=this._glyphs[i];if(c){c.texture=chars[i].texture}else{c=new core.Sprite(chars[i].texture);this._glyphs.push(c)}c.position.x=(chars[i].position.x+lineAlignOffsets[chars[i].line])*scale;c.position.y=chars[i].position.y*scale;c.scale.x=c.scale.y=scale;c.tint=tint;if(!c.parent){this.addChild(c)}}for(i=lenChars;i<this._glyphs.length;++i){this.removeChild(this._glyphs[i])}this.textWidth=maxLineWidth*scale;this.textHeight=(pos.y+data.lineHeight)*scale;this.maxLineHeight=maxLineHeight*scale};BitmapText.prototype.updateTransform=function(){this.validate();this.containerUpdateTransform()};BitmapText.prototype.getLocalBounds=function(){this.validate();return core.Container.prototype.getLocalBounds.call(this)};BitmapText.prototype.validate=function(){if(this.dirty){this.updateText();this.dirty=false}};BitmapText.fonts={}},{"../core":29}],81:[function(require,module,exports){var core=require("../core");function MovieClip(textures){core.Sprite.call(this,textures[0]instanceof core.Texture?textures[0]:textures[0].texture);this._textures=null;this._durations=null;this.textures=textures;this.animationSpeed=1;this.loop=true;this.onComplete=null;this._currentTime=0;this.playing=false}MovieClip.prototype=Object.create(core.Sprite.prototype);MovieClip.prototype.constructor=MovieClip;module.exports=MovieClip;Object.defineProperties(MovieClip.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(value){if(value[0]instanceof core.Texture){this._textures=value;this._durations=null}else{this._textures=[];this._durations=[];for(var i=0;i<value.length;i++){this._textures.push(value[i].texture);this._durations.push(value[i].time)}}}},currentFrame:{get:function(){var currentFrame=Math.floor(this._currentTime)%this._textures.length;if(currentFrame<0){currentFrame+=this._textures.length}return currentFrame}}});MovieClip.prototype.stop=function(){if(!this.playing){return}this.playing=false;core.ticker.shared.remove(this.update,this)};MovieClip.prototype.play=function(){if(this.playing){return}this.playing=true;core.ticker.shared.add(this.update,this)};MovieClip.prototype.gotoAndStop=function(frameNumber){this.stop();this._currentTime=frameNumber;this._texture=this._textures[this.currentFrame]};MovieClip.prototype.gotoAndPlay=function(frameNumber){this._currentTime=frameNumber;this.play()};MovieClip.prototype.update=function(deltaTime){var elapsed=this.animationSpeed*deltaTime;if(this._durations!==null){var lag=this._currentTime%1*this._durations[this.currentFrame];lag+=elapsed/60*1e3;while(lag<0){this._currentTime--;lag+=this._durations[this.currentFrame]}var sign=Math.sign(this.animationSpeed*deltaTime);this._currentTime=Math.floor(this._currentTime);while(lag>=this._durations[this.currentFrame]){lag-=this._durations[this.currentFrame]*sign;this._currentTime+=sign}this._currentTime+=lag/this._durations[this.currentFrame]}else{this._currentTime+=elapsed}if(this._currentTime<0&&!this.loop){this.gotoAndStop(0);if(this.onComplete){this.onComplete()}}else if(this._currentTime>=this._textures.length&&!this.loop){this.gotoAndStop(this._textures.length-1);if(this.onComplete){this.onComplete()}}else{this._texture=this._textures[this.currentFrame]}};MovieClip.prototype.destroy=function(){this.stop();core.Sprite.prototype.destroy.call(this)};MovieClip.fromFrames=function(frames){var textures=[];for(var i=0;i<frames.length;++i){textures.push(new core.Texture.fromFrame(frames[i]))}return new MovieClip(textures)};MovieClip.fromImages=function(images){var textures=[];for(var i=0;i<images.length;++i){textures.push(new core.Texture.fromImage(images[i]))}return new MovieClip(textures)}},{"../core":29}],82:[function(require,module,exports){var core=require("../core"),tempPoint=new core.Point,CanvasTinter=require("../core/renderers/canvas/utils/CanvasTinter");function TilingSprite(texture,width,height){core.Sprite.call(this,texture);this.tileScale=new core.Point(1,1);this.tilePosition=new core.Point(0,0);this._width=width||100;this._height=height||100;this._uvs=new core.TextureUvs;this._canvasPattern=null;this.shader=new core.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}TilingSprite.prototype=Object.create(core.Sprite.prototype);TilingSprite.prototype.constructor=TilingSprite;module.exports=TilingSprite;Object.defineProperties(TilingSprite.prototype,{width:{get:function(){return this._width},set:function(value){this._width=value}},height:{get:function(){return this._height},set:function(value){this._height=value}}});TilingSprite.prototype._onTextureUpdate=function(){return};TilingSprite.prototype._renderWebGL=function(renderer){var texture=this._texture;if(!texture||!texture._uvs){return}var tempUvs=texture._uvs,tempWidth=texture._frame.width,tempHeight=texture._frame.height,tw=texture.baseTexture.width,th=texture.baseTexture.height;texture._uvs=this._uvs;texture._frame.width=this.width;texture._frame.height=this.height;this.shader.uniforms.uPixelSize.value[0]=1/tw;this.shader.uniforms.uPixelSize.value[1]=1/th;this.shader.uniforms.uFrame.value[0]=tempUvs.x0;this.shader.uniforms.uFrame.value[1]=tempUvs.y0;this.shader.uniforms.uFrame.value[2]=tempUvs.x1-tempUvs.x0;this.shader.uniforms.uFrame.value[3]=tempUvs.y2-tempUvs.y0;this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(tempWidth*this.tileScale.x)/this._width;this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(tempHeight*this.tileScale.y)/this._height;this.shader.uniforms.uTransform.value[2]=tw/this._width*this.tileScale.x;this.shader.uniforms.uTransform.value[3]=th/this._height*this.tileScale.y;renderer.setObjectRenderer(renderer.plugins.sprite);renderer.plugins.sprite.render(this);texture._uvs=tempUvs;texture._frame.width=tempWidth;texture._frame.height=tempHeight};TilingSprite.prototype._renderCanvas=function(renderer){var texture=this._texture;if(!texture.baseTexture.hasLoaded){return}var context=renderer.context,transform=this.worldTransform,resolution=renderer.resolution,baseTexture=texture.baseTexture,modX=this.tilePosition.x/this.tileScale.x%texture._frame.width,modY=this.tilePosition.y/this.tileScale.y%texture._frame.height;if(!this._canvasPattern){var tempCanvas=new core.CanvasBuffer(texture._frame.width,texture._frame.height);if(this.tint!==16777215){if(this.cachedTint!==this.tint){this.cachedTint=this.tint;this.tintedTexture=CanvasTinter.getTintedTexture(this,this.tint)}tempCanvas.context.drawImage(this.tintedTexture,0,0)}else{tempCanvas.context.drawImage(baseTexture.source,-texture._frame.x,-texture._frame.y)}this._canvasPattern=tempCanvas.context.createPattern(tempCanvas.canvas,"repeat")}context.globalAlpha=this.worldAlpha;context.setTransform(transform.a*resolution,transform.b*resolution,transform.c*resolution,transform.d*resolution,transform.tx*resolution,transform.ty*resolution);context.scale(this.tileScale.x,this.tileScale.y);context.translate(modX+this.anchor.x*-this._width,modY+this.anchor.y*-this._height);var compositeOperation=renderer.blendModes[this.blendMode];if(compositeOperation!==renderer.context.globalCompositeOperation){context.globalCompositeOperation=compositeOperation}context.fillStyle=this._canvasPattern;context.fillRect(-modX,-modY,this._width/this.tileScale.x,this._height/this.tileScale.y)};TilingSprite.prototype.getBounds=function(){var width=this._width;var height=this._height;var w0=width*(1-this.anchor.x);var w1=width*-this.anchor.x;var h0=height*(1-this.anchor.y);var h1=height*-this.anchor.y;var worldTransform=this.worldTransform;var a=worldTransform.a;var b=worldTransform.b;var c=worldTransform.c;var d=worldTransform.d;var tx=worldTransform.tx;var ty=worldTransform.ty;var x1=a*w1+c*h1+tx;var y1=d*h1+b*w1+ty;var x2=a*w0+c*h1+tx;var y2=d*h1+b*w0+ty;var x3=a*w0+c*h0+tx;var y3=d*h0+b*w0+ty;var x4=a*w1+c*h0+tx;var y4=d*h0+b*w1+ty;var minX,maxX,minY,maxY;minX=x1;minX=x2<minX?x2:minX;minX=x3<minX?x3:minX;minX=x4<minX?x4:minX;minY=y1;minY=y2<minY?y2:minY;minY=y3<minY?y3:minY;minY=y4<minY?y4:minY;maxX=x1;maxX=x2>maxX?x2:maxX;maxX=x3>maxX?x3:maxX;maxX=x4>maxX?x4:maxX;maxY=y1;maxY=y2>maxY?y2:maxY;maxY=y3>maxY?y3:maxY;maxY=y4>maxY?y4:maxY;var bounds=this._bounds;bounds.x=minX;bounds.width=maxX-minX;bounds.y=minY;bounds.height=maxY-minY;this._currentBounds=bounds;return bounds};TilingSprite.prototype.containsPoint=function(point){this.worldTransform.applyInverse(point,tempPoint);var width=this._width;var height=this._height;var x1=-width*this.anchor.x;var y1;if(tempPoint.x>x1&&tempPoint.x<x1+width){y1=-height*this.anchor.y;if(tempPoint.y>y1&&tempPoint.y<y1+height){return true}}return false};TilingSprite.prototype.destroy=function(){core.Sprite.prototype.destroy.call(this);this.tileScale=null;this._tileScaleOffset=null;this.tilePosition=null;this._uvs=null};TilingSprite.fromFrame=function(frameId,width,height){var texture=core.utils.TextureCache[frameId];if(!texture){throw new Error('The frameId "'+frameId+'" does not exist in the texture cache '+this)}return new TilingSprite(texture,width,height)};TilingSprite.fromImage=function(imageId,width,height,crossorigin,scaleMode){return new TilingSprite(core.Texture.fromImage(imageId,crossorigin,scaleMode),width,height)}},{"../core":29,"../core/renderers/canvas/utils/CanvasTinter":48}],83:[function(require,module,exports){var core=require("../core"),DisplayObject=core.DisplayObject,_tempMatrix=new core.Matrix;DisplayObject.prototype._cacheAsBitmap=false;DisplayObject.prototype._originalRenderWebGL=null;DisplayObject.prototype._originalRenderCanvas=null;DisplayObject.prototype._originalUpdateTransform=null;DisplayObject.prototype._originalHitTest=null;DisplayObject.prototype._originalDestroy=null;DisplayObject.prototype._cachedSprite=null;Object.defineProperties(DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(value){if(this._cacheAsBitmap===value){return}this._cacheAsBitmap=value;if(value){this._originalRenderWebGL=this.renderWebGL;this._originalRenderCanvas=this.renderCanvas;this._originalUpdateTransform=this.updateTransform;this._originalGetBounds=this.getBounds;this._originalDestroy=this.destroy;this._originalContainsPoint=this.containsPoint;this.renderWebGL=this._renderCachedWebGL;this.renderCanvas=this._renderCachedCanvas;this.destroy=this._cacheAsBitmapDestroy}else{if(this._cachedSprite){this._destroyCachedDisplayObject()}this.renderWebGL=this._originalRenderWebGL;this.renderCanvas=this._originalRenderCanvas;this.getBounds=this._originalGetBounds;this.destroy=this._originalDestroy;this.updateTransform=this._originalUpdateTransform;this.containsPoint=this._originalContainsPoint}}}});DisplayObject.prototype._renderCachedWebGL=function(renderer){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObject(renderer);this._cachedSprite.worldAlpha=this.worldAlpha;renderer.setObjectRenderer(renderer.plugins.sprite);renderer.plugins.sprite.render(this._cachedSprite)};DisplayObject.prototype._initCachedDisplayObject=function(renderer){if(this._cachedSprite){return}renderer.currentRenderer.flush();var bounds=this.getLocalBounds().clone();if(this._filters){var padding=this._filters[0].padding;bounds.x-=padding;bounds.y-=padding;bounds.width+=padding*2;bounds.height+=padding*2}var cachedRenderTarget=renderer.currentRenderTarget;var stack=renderer.filterManager.filterStack;var renderTexture=new core.RenderTexture(renderer,bounds.width|0,bounds.height|0);var m=_tempMatrix;m.tx=-bounds.x;m.ty=-bounds.y;this.renderWebGL=this._originalRenderWebGL;renderTexture.render(this,m,true,true);renderer.setRenderTarget(cachedRenderTarget);renderer.filterManager.filterStack=stack;this.renderWebGL=this._renderCachedWebGL;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new core.Sprite(renderTexture);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(bounds.x/bounds.width);this._cachedSprite.anchor.y=-(bounds.y/bounds.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};DisplayObject.prototype._renderCachedCanvas=function(renderer){if(!this.visible||this.worldAlpha<=0||!this.renderable){return}this._initCachedDisplayObjectCanvas(renderer);this._cachedSprite.worldAlpha=this.worldAlpha;this._cachedSprite.renderCanvas(renderer)};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(renderer){if(this._cachedSprite){return}var bounds=this.getLocalBounds();var cachedRenderTarget=renderer.context;var renderTexture=new core.RenderTexture(renderer,bounds.width|0,bounds.height|0);var m=_tempMatrix;m.tx=-bounds.x;m.ty=-bounds.y;this.renderCanvas=this._originalRenderCanvas;renderTexture.render(this,m,true);renderer.context=cachedRenderTarget;this.renderCanvas=this._renderCachedCanvas;this.updateTransform=this.displayObjectUpdateTransform;this.getBounds=this._getCachedBounds;this._cachedSprite=new core.Sprite(renderTexture);this._cachedSprite.worldTransform=this.worldTransform;this._cachedSprite.anchor.x=-(bounds.x/bounds.width);this._cachedSprite.anchor.y=-(bounds.y/bounds.height);this.updateTransform();this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)};DisplayObject.prototype._getCachedBounds=function(){this._cachedSprite._currentBounds=null;return this._cachedSprite.getBounds()};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy();this._cachedSprite=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=false;this._originalDestroy()}},{"../core":29}],84:[function(require,module,exports){var core=require("../core");core.DisplayObject.prototype.name=null;core.Container.prototype.getChildByName=function(name){for(var i=0;i<this.children.length;i++){if(this.children[i].name===name){return this.children[i]}}return null}},{"../core":29}],85:[function(require,module,exports){var core=require("../core");core.DisplayObject.prototype.getGlobalPosition=function(point){point=point||new core.Point;if(this.parent){this.displayObjectUpdateTransform();point.x=this.worldTransform.tx;point.y=this.worldTransform.ty}else{point.x=this.position.x;point.y=this.position.y}return point}},{"../core":29}],86:[function(require,module,exports){require("./cacheAsBitmap");require("./getChildByName");require("./getGlobalPosition");module.exports={MovieClip:require("./MovieClip"),TilingSprite:require("./TilingSprite"),BitmapText:require("./BitmapText")}},{"./BitmapText":80,"./MovieClip":81,"./TilingSprite":82,"./cacheAsBitmap":83,"./getChildByName":84,"./getGlobalPosition":85}],87:[function(require,module,exports){var core=require("../../core");function AsciiFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}AsciiFilter.prototype=Object.create(core.AbstractFilter.prototype);AsciiFilter.prototype.constructor=AsciiFilter;module.exports=AsciiFilter;Object.defineProperties(AsciiFilter.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(value){this.uniforms.pixelSize.value=value}}})},{"../../core":29}],88:[function(require,module,exports){var core=require("../../core"),BlurXFilter=require("../blur/BlurXFilter"),BlurYFilter=require("../blur/BlurYFilter");function BloomFilter(){core.AbstractFilter.call(this);this.blurXFilter=new BlurXFilter;this.blurYFilter=new BlurYFilter;this.defaultFilter=new core.AbstractFilter}BloomFilter.prototype=Object.create(core.AbstractFilter.prototype);BloomFilter.prototype.constructor=BloomFilter;module.exports=BloomFilter;BloomFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(true);this.defaultFilter.applyFilter(renderer,input,output);this.blurXFilter.applyFilter(renderer,input,renderTarget);renderer.blendModeManager.setBlendMode(core.BLEND_MODES.SCREEN);this.blurYFilter.applyFilter(renderer,renderTarget,output);renderer.blendModeManager.setBlendMode(core.BLEND_MODES.NORMAL);renderer.filterManager.returnRenderTarget(renderTarget)};Object.defineProperties(BloomFilter.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=this.blurYFilter.blur=value}},blurX:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=value}},blurY:{get:function(){return this.blurYFilter.blur},set:function(value){this.blurYFilter.blur=value}}})},{"../../core":29,"../blur/BlurXFilter":91,"../blur/BlurYFilter":92}],89:[function(require,module,exports){var core=require("../../core");function BlurDirFilter(dirX,dirY){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:dirX||0},dirY:{type:"1f",value:dirY||0}});this.defaultFilter=new core.AbstractFilter;this.passes=1;this.dirX=dirX||0;this.dirY=dirY||0;this.strength=4}BlurDirFilter.prototype=Object.create(core.AbstractFilter.prototype);BlurDirFilter.prototype.constructor=BlurDirFilter;module.exports=BlurDirFilter;BlurDirFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);this.uniforms.strength.value=this.strength/4/this.passes*(input.frame.width/input.size.width);if(this.passes===1){renderer.filterManager.applyFilter(shader,input,output,clear)}else{var renderTarget=renderer.filterManager.getRenderTarget(true);renderer.filterManager.applyFilter(shader,input,renderTarget,clear);for(var i=0;i<this.passes-2;i++){renderer.filterManager.applyFilter(shader,renderTarget,renderTarget,clear)}renderer.filterManager.applyFilter(shader,renderTarget,output,clear);renderer.filterManager.returnRenderTarget(renderTarget)}};Object.defineProperties(BlurDirFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=value*.5;this.strength=value}},dirX:{get:function(){return this.dirX},set:function(value){this.uniforms.dirX.value=value}},dirY:{get:function(){return this.dirY},set:function(value){this.uniforms.dirY.value=value}}})},{"../../core":29}],90:[function(require,module,exports){var core=require("../../core"),BlurXFilter=require("./BlurXFilter"),BlurYFilter=require("./BlurYFilter");function BlurFilter(){core.AbstractFilter.call(this);this.blurXFilter=new BlurXFilter;this.blurYFilter=new BlurYFilter}BlurFilter.prototype=Object.create(core.AbstractFilter.prototype);BlurFilter.prototype.constructor=BlurFilter;module.exports=BlurFilter;BlurFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(true);this.blurXFilter.applyFilter(renderer,input,renderTarget);this.blurYFilter.applyFilter(renderer,renderTarget,output);renderer.filterManager.returnRenderTarget(renderTarget)};Object.defineProperties(BlurFilter.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(value){this.padding=Math.abs(value)*.5;this.blurXFilter.blur=this.blurYFilter.blur=value}},passes:{get:function(){return this.blurXFilter.passes},set:function(value){this.blurXFilter.passes=this.blurYFilter.passes=value}},blurX:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=value}},blurY:{get:function(){return this.blurYFilter.blur},set:function(value){this.blurYFilter.blur=value}}})},{"../../core":29,"./BlurXFilter":91,"./BlurYFilter":92}],91:[function(require,module,exports){var core=require("../../core");function BlurXFilter(){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}BlurXFilter.prototype=Object.create(core.AbstractFilter.prototype);BlurXFilter.prototype.constructor=BlurXFilter;module.exports=BlurXFilter;BlurXFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);this.uniforms.strength.value=this.strength/4/this.passes*(input.frame.width/input.size.width);if(this.passes===1){renderer.filterManager.applyFilter(shader,input,output,clear)}else{var renderTarget=renderer.filterManager.getRenderTarget(true);var flip=input;var flop=renderTarget;for(var i=0;i<this.passes-1;i++){renderer.filterManager.applyFilter(shader,flip,flop,true);var temp=flop;flop=flip;flip=temp}renderer.filterManager.applyFilter(shader,flip,output,clear);renderer.filterManager.returnRenderTarget(renderTarget)}};Object.defineProperties(BlurXFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=Math.abs(value)*.5;this.strength=value}}})},{"../../core":29}],92:[function(require,module,exports){var core=require("../../core");function BlurYFilter(){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}});this.passes=1;this.strength=4}BlurYFilter.prototype=Object.create(core.AbstractFilter.prototype);BlurYFilter.prototype.constructor=BlurYFilter;module.exports=BlurYFilter;BlurYFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(input.frame.height/input.size.height);if(this.passes===1){renderer.filterManager.applyFilter(shader,input,output,clear)}else{var renderTarget=renderer.filterManager.getRenderTarget(true);var flip=input;var flop=renderTarget;for(var i=0;i<this.passes-1;i++){renderer.filterManager.applyFilter(shader,flip,flop,true);var temp=flop;flop=flip;flip=temp}renderer.filterManager.applyFilter(shader,flip,output,clear);renderer.filterManager.returnRenderTarget(renderTarget)}};Object.defineProperties(BlurYFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=Math.abs(value)*.5;this.strength=value}}})},{"../../core":29}],93:[function(require,module,exports){var core=require("../../core");function SmartBlurFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{
delta:{type:"v2",value:{x:.1,y:0}}})}SmartBlurFilter.prototype=Object.create(core.AbstractFilter.prototype);SmartBlurFilter.prototype.constructor=SmartBlurFilter;module.exports=SmartBlurFilter},{"../../core":29}],94:[function(require,module,exports){var core=require("../../core");function ColorMatrixFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}ColorMatrixFilter.prototype=Object.create(core.AbstractFilter.prototype);ColorMatrixFilter.prototype.constructor=ColorMatrixFilter;module.exports=ColorMatrixFilter;ColorMatrixFilter.prototype._loadMatrix=function(matrix,multiply){multiply=!!multiply;var newMatrix=matrix;if(multiply){this._multiply(newMatrix,this.uniforms.m.value,matrix);newMatrix=this._colorMatrix(newMatrix)}this.uniforms.m.value=newMatrix};ColorMatrixFilter.prototype._multiply=function(out,a,b){out[0]=a[0]*b[0]+a[1]*b[5]+a[2]*b[10]+a[3]*b[15];out[1]=a[0]*b[1]+a[1]*b[6]+a[2]*b[11]+a[3]*b[16];out[2]=a[0]*b[2]+a[1]*b[7]+a[2]*b[12]+a[3]*b[17];out[3]=a[0]*b[3]+a[1]*b[8]+a[2]*b[13]+a[3]*b[18];out[4]=a[0]*b[4]+a[1]*b[9]+a[2]*b[14]+a[3]*b[19];out[5]=a[5]*b[0]+a[6]*b[5]+a[7]*b[10]+a[8]*b[15];out[6]=a[5]*b[1]+a[6]*b[6]+a[7]*b[11]+a[8]*b[16];out[7]=a[5]*b[2]+a[6]*b[7]+a[7]*b[12]+a[8]*b[17];out[8]=a[5]*b[3]+a[6]*b[8]+a[7]*b[13]+a[8]*b[18];out[9]=a[5]*b[4]+a[6]*b[9]+a[7]*b[14]+a[8]*b[19];out[10]=a[10]*b[0]+a[11]*b[5]+a[12]*b[10]+a[13]*b[15];out[11]=a[10]*b[1]+a[11]*b[6]+a[12]*b[11]+a[13]*b[16];out[12]=a[10]*b[2]+a[11]*b[7]+a[12]*b[12]+a[13]*b[17];out[13]=a[10]*b[3]+a[11]*b[8]+a[12]*b[13]+a[13]*b[18];out[14]=a[10]*b[4]+a[11]*b[9]+a[12]*b[14]+a[13]*b[19];out[15]=a[15]*b[0]+a[16]*b[5]+a[17]*b[10]+a[18]*b[15];out[16]=a[15]*b[1]+a[16]*b[6]+a[17]*b[11]+a[18]*b[16];out[17]=a[15]*b[2]+a[16]*b[7]+a[17]*b[12]+a[18]*b[17];out[18]=a[15]*b[3]+a[16]*b[8]+a[17]*b[13]+a[18]*b[18];out[19]=a[15]*b[4]+a[16]*b[9]+a[17]*b[14]+a[18]*b[19];return out};ColorMatrixFilter.prototype._colorMatrix=function(matrix){var m=new Float32Array(matrix);m[4]/=255;m[9]/=255;m[14]/=255;m[19]/=255;return m};ColorMatrixFilter.prototype.brightness=function(b,multiply){var matrix=[b,0,0,0,0,0,b,0,0,0,0,0,b,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.greyscale=function(scale,multiply){var matrix=[scale,scale,scale,0,0,scale,scale,scale,0,0,scale,scale,scale,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;ColorMatrixFilter.prototype.blackAndWhite=function(multiply){var matrix=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.hue=function(rotation,multiply){rotation=(rotation||0)/180*Math.PI;var cos=Math.cos(rotation),sin=Math.sin(rotation);var lumR=.213,lumG=.715,lumB=.072;var matrix=[lumR+cos*(1-lumR)+sin*-lumR,lumG+cos*-lumG+sin*-lumG,lumB+cos*-lumB+sin*(1-lumB),0,0,lumR+cos*-lumR+sin*.143,lumG+cos*(1-lumG)+sin*.14,lumB+cos*-lumB+sin*-.283,0,0,lumR+cos*-lumR+sin*-(1-lumR),lumG+cos*-lumG+sin*lumG,lumB+cos*(1-lumB)+sin*lumB,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.contrast=function(amount,multiply){var v=(amount||0)+1;var o=-128*(v-1);var matrix=[v,0,0,0,o,0,v,0,0,o,0,0,v,0,o,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.saturate=function(amount,multiply){var x=(amount||0)*2/3+1;var y=(x-1)*-.5;var matrix=[x,y,y,0,0,y,x,y,0,0,y,y,x,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.desaturate=function(multiply){this.saturate(-1)};ColorMatrixFilter.prototype.negative=function(multiply){var matrix=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.sepia=function(multiply){var matrix=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.technicolor=function(multiply){var matrix=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.polaroid=function(multiply){var matrix=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.toBGR=function(multiply){var matrix=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.kodachrome=function(multiply){var matrix=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.browni=function(multiply){var matrix=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.vintage=function(multiply){var matrix=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.colorTone=function(desaturation,toned,lightColor,darkColor,multiply){desaturation=desaturation||.2;toned=toned||.15;lightColor=lightColor||16770432;darkColor=darkColor||3375104;var lR=(lightColor>>16&255)/255;var lG=(lightColor>>8&255)/255;var lB=(lightColor&255)/255;var dR=(darkColor>>16&255)/255;var dG=(darkColor>>8&255)/255;var dB=(darkColor&255)/255;var matrix=[.3,.59,.11,0,0,lR,lG,lB,desaturation,0,dR,dG,dB,toned,0,lR-dR,lG-dG,lB-dB,0,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.night=function(intensity,multiply){intensity=intensity||.1;var matrix=[intensity*-2,-intensity,0,0,0,-intensity,0,intensity,0,0,0,intensity,intensity*2,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.predator=function(amount,multiply){var matrix=[11.224130630493164*amount,-4.794486999511719*amount,-2.8746118545532227*amount,0*amount,.40342438220977783*amount,-3.6330697536468506*amount,9.193157196044922*amount,-2.951810836791992*amount,0*amount,-1.316135048866272*amount,-3.2184197902679443*amount,-4.2375030517578125*amount,7.476448059082031*amount,0*amount,.8044459223747253*amount,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.lsd=function(multiply){var matrix=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(matrix,multiply)};ColorMatrixFilter.prototype.reset=function(){var matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(matrix,false)};Object.defineProperties(ColorMatrixFilter.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(value){this.uniforms.m.value=value}}})},{"../../core":29}],95:[function(require,module,exports){var core=require("../../core");function ColorStepFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}ColorStepFilter.prototype=Object.create(core.AbstractFilter.prototype);ColorStepFilter.prototype.constructor=ColorStepFilter;module.exports=ColorStepFilter;Object.defineProperties(ColorStepFilter.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(value){this.uniforms.step.value=value}}})},{"../../core":29}],96:[function(require,module,exports){var core=require("../../core");function ConvolutionFilter(matrix,width,height){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(matrix)},texelSize:{type:"v2",value:{x:1/width,y:1/height}}})}ConvolutionFilter.prototype=Object.create(core.AbstractFilter.prototype);ConvolutionFilter.prototype.constructor=ConvolutionFilter;module.exports=ConvolutionFilter;Object.defineProperties(ConvolutionFilter.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(value){this.uniforms.matrix.value=new Float32Array(value)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(value){this.uniforms.texelSize.value.x=1/value}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(value){this.uniforms.texelSize.value.y=1/value}}})},{"../../core":29}],97:[function(require,module,exports){var core=require("../../core");function CrossHatchFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}CrossHatchFilter.prototype=Object.create(core.AbstractFilter.prototype);CrossHatchFilter.prototype.constructor=CrossHatchFilter;module.exports=CrossHatchFilter},{"../../core":29}],98:[function(require,module,exports){var core=require("../../core");function DisplacementFilter(sprite,scale){var maskMatrix=new core.Matrix;sprite.renderable=false;core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:sprite.texture},otherMatrix:{type:"mat3",value:maskMatrix.toArray(true)},scale:{type:"v2",value:{x:1,y:1}}});this.maskSprite=sprite;this.maskMatrix=maskMatrix;if(scale===null||scale===undefined){scale=20}this.scale=new core.Point(scale,scale)}DisplacementFilter.prototype=Object.create(core.AbstractFilter.prototype);DisplacementFilter.prototype.constructor=DisplacementFilter;module.exports=DisplacementFilter;DisplacementFilter.prototype.applyFilter=function(renderer,input,output){var filterManager=renderer.filterManager;filterManager.calculateMappedMatrix(input.frame,this.maskSprite,this.maskMatrix);this.uniforms.otherMatrix.value=this.maskMatrix.toArray(true);this.uniforms.scale.value.x=this.scale.x*(1/input.frame.width);this.uniforms.scale.value.y=this.scale.y*(1/input.frame.height);var shader=this.getShader(renderer);filterManager.applyFilter(shader,input,output)};Object.defineProperties(DisplacementFilter.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(value){this.uniforms.mapSampler.value=value}}})},{"../../core":29}],99:[function(require,module,exports){var core=require("../../core");function DotScreenFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}DotScreenFilter.prototype=Object.create(core.AbstractFilter.prototype);DotScreenFilter.prototype.constructor=DotScreenFilter;module.exports=DotScreenFilter;Object.defineProperties(DotScreenFilter.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(value){this.uniforms.scale.value=value}},angle:{get:function(){return this.uniforms.angle.value},set:function(value){this.uniforms.angle.value=value}}})},{"../../core":29}],100:[function(require,module,exports){var core=require("../../core");function BlurYTintFilter(){core.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}});this.passes=1;this.strength=4}BlurYTintFilter.prototype=Object.create(core.AbstractFilter.prototype);BlurYTintFilter.prototype.constructor=BlurYTintFilter;module.exports=BlurYTintFilter;BlurYTintFilter.prototype.applyFilter=function(renderer,input,output,clear){var shader=this.getShader(renderer);this.uniforms.strength.value=this.strength/4/this.passes*(input.frame.height/input.size.height);if(this.passes===1){renderer.filterManager.applyFilter(shader,input,output,clear)}else{var renderTarget=renderer.filterManager.getRenderTarget(true);var flip=input;var flop=renderTarget;for(var i=0;i<this.passes-1;i++){renderer.filterManager.applyFilter(shader,flip,flop,clear);var temp=flop;flop=flip;flip=temp}renderer.filterManager.applyFilter(shader,flip,output,clear);renderer.filterManager.returnRenderTarget(renderTarget)}};Object.defineProperties(BlurYTintFilter.prototype,{blur:{get:function(){return this.strength},set:function(value){this.padding=value*.5;this.strength=value}}})},{"../../core":29}],101:[function(require,module,exports){var core=require("../../core"),BlurXFilter=require("../blur/BlurXFilter"),BlurYTintFilter=require("./BlurYTintFilter");function DropShadowFilter(){core.AbstractFilter.call(this);this.blurXFilter=new BlurXFilter;this.blurYTintFilter=new BlurYTintFilter;this.defaultFilter=new core.AbstractFilter;this.padding=30;this._dirtyPosition=true;this._angle=45*Math.PI/180;this._distance=10;this.alpha=.75;this.hideObject=false;this.blendMode=core.BLEND_MODES.MULTIPLY}DropShadowFilter.prototype=Object.create(core.AbstractFilter.prototype);DropShadowFilter.prototype.constructor=DropShadowFilter;module.exports=DropShadowFilter;DropShadowFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(true);if(this._dirtyPosition){this._dirtyPosition=false;this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance;this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance}this.blurXFilter.applyFilter(renderer,input,renderTarget);renderer.blendModeManager.setBlendMode(this.blendMode);this.blurYTintFilter.applyFilter(renderer,renderTarget,output);renderer.blendModeManager.setBlendMode(core.BLEND_MODES.NORMAL);if(!this.hideObject){this.defaultFilter.applyFilter(renderer,input,output)}renderer.filterManager.returnRenderTarget(renderTarget)};Object.defineProperties(DropShadowFilter.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=this.blurYTintFilter.blur=value}},blurX:{get:function(){return this.blurXFilter.blur},set:function(value){this.blurXFilter.blur=value}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(value){this.blurYTintFilter.blur=value}},color:{get:function(){return core.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(value){this.blurYTintFilter.uniforms.color.value=core.utils.hex2rgb(value)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(value){this.blurYTintFilter.uniforms.alpha.value=value}},distance:{get:function(){return this._distance},set:function(value){this._dirtyPosition=true;this._distance=value}},angle:{get:function(){return this._angle},set:function(value){this._dirtyPosition=true;this._angle=value}}})},{"../../core":29,"../blur/BlurXFilter":91,"./BlurYTintFilter":100}],102:[function(require,module,exports){var core=require("../../core");function GrayFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}GrayFilter.prototype=Object.create(core.AbstractFilter.prototype);GrayFilter.prototype.constructor=GrayFilter;module.exports=GrayFilter;Object.defineProperties(GrayFilter.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(value){this.uniforms.gray.value=value}}})},{"../../core":29}],103:[function(require,module,exports){module.exports={AsciiFilter:require("./ascii/AsciiFilter"),BloomFilter:require("./bloom/BloomFilter"),BlurFilter:require("./blur/BlurFilter"),BlurXFilter:require("./blur/BlurXFilter"),BlurYFilter:require("./blur/BlurYFilter"),BlurDirFilter:require("./blur/BlurDirFilter"),ColorMatrixFilter:require("./color/ColorMatrixFilter"),ColorStepFilter:require("./color/ColorStepFilter"),ConvolutionFilter:require("./convolution/ConvolutionFilter"),CrossHatchFilter:require("./crosshatch/CrossHatchFilter"),DisplacementFilter:require("./displacement/DisplacementFilter"),DotScreenFilter:require("./dot/DotScreenFilter"),GrayFilter:require("./gray/GrayFilter"),DropShadowFilter:require("./dropshadow/DropShadowFilter"),InvertFilter:require("./invert/InvertFilter"),NoiseFilter:require("./noise/NoiseFilter"),PixelateFilter:require("./pixelate/PixelateFilter"),RGBSplitFilter:require("./rgb/RGBSplitFilter"),ShockwaveFilter:require("./shockwave/ShockwaveFilter"),SepiaFilter:require("./sepia/SepiaFilter"),SmartBlurFilter:require("./blur/SmartBlurFilter"),TiltShiftFilter:require("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:require("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:require("./tiltshift/TiltShiftYFilter"),TwistFilter:require("./twist/TwistFilter")}},{"./ascii/AsciiFilter":87,"./bloom/BloomFilter":88,"./blur/BlurDirFilter":89,"./blur/BlurFilter":90,"./blur/BlurXFilter":91,"./blur/BlurYFilter":92,"./blur/SmartBlurFilter":93,"./color/ColorMatrixFilter":94,"./color/ColorStepFilter":95,"./convolution/ConvolutionFilter":96,"./crosshatch/CrossHatchFilter":97,"./displacement/DisplacementFilter":98,"./dot/DotScreenFilter":99,"./dropshadow/DropShadowFilter":101,"./gray/GrayFilter":102,"./invert/InvertFilter":104,"./noise/NoiseFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],104:[function(require,module,exports){var core=require("../../core");function InvertFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}InvertFilter.prototype=Object.create(core.AbstractFilter.prototype);InvertFilter.prototype.constructor=InvertFilter;module.exports=InvertFilter;Object.defineProperties(InvertFilter.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(value){this.uniforms.invert.value=value}}})},{"../../core":29}],105:[function(require,module,exports){var core=require("../../core");function NoiseFilter(){core.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}NoiseFilter.prototype=Object.create(core.AbstractFilter.prototype);NoiseFilter.prototype.constructor=NoiseFilter;module.exports=NoiseFilter;Object.defineProperties(NoiseFilter.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(value){this.uniforms.noise.value=value}}})},{"../../core":29}],106:[function(require,module,exports){var core=require("../../core");function PixelateFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}PixelateFilter.prototype=Object.create(core.AbstractFilter.prototype);PixelateFilter.prototype.constructor=PixelateFilter;module.exports=PixelateFilter;Object.defineProperties(PixelateFilter.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(value){this.uniforms.pixelSize.value=value}}})},{"../../core":29}],107:[function(require,module,exports){var core=require("../../core");function RGBSplitFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}RGBSplitFilter.prototype=Object.create(core.AbstractFilter.prototype);RGBSplitFilter.prototype.constructor=RGBSplitFilter;module.exports=RGBSplitFilter;Object.defineProperties(RGBSplitFilter.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(value){this.uniforms.red.value=value}},green:{get:function(){return this.uniforms.green.value},set:function(value){this.uniforms.green.value=value}},blue:{get:function(){return this.uniforms.blue.value},set:function(value){this.uniforms.blue.value=value}}})},{"../../core":29}],108:[function(require,module,exports){var core=require("../../core");function SepiaFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}SepiaFilter.prototype=Object.create(core.AbstractFilter.prototype);SepiaFilter.prototype.constructor=SepiaFilter;module.exports=SepiaFilter;Object.defineProperties(SepiaFilter.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(value){this.uniforms.sepia.value=value}}})},{"../../core":29}],109:[function(require,module,exports){var core=require("../../core");function ShockwaveFilter(){core.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}ShockwaveFilter.prototype=Object.create(core.AbstractFilter.prototype);ShockwaveFilter.prototype.constructor=ShockwaveFilter;module.exports=ShockwaveFilter;Object.defineProperties(ShockwaveFilter.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(value){this.uniforms.center.value=value}},params:{get:function(){return this.uniforms.params.value},set:function(value){this.uniforms.params.value=value}},time:{get:function(){return this.uniforms.time.value},set:function(value){this.uniforms.time.value=value}}})},{"../../core":29}],110:[function(require,module,exports){var core=require("../../core");function TiltShiftAxisFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,
y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}});this.updateDelta()}TiltShiftAxisFilter.prototype=Object.create(core.AbstractFilter.prototype);TiltShiftAxisFilter.prototype.constructor=TiltShiftAxisFilter;module.exports=TiltShiftAxisFilter;TiltShiftAxisFilter.prototype.updateDelta=function(){this.uniforms.delta.value.x=0;this.uniforms.delta.value.y=0};Object.defineProperties(TiltShiftAxisFilter.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(value){this.uniforms.blur.value=value}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(value){this.uniforms.gradientBlur.value=value}},start:{get:function(){return this.uniforms.start.value},set:function(value){this.uniforms.start.value=value;this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(value){this.uniforms.end.value=value;this.updateDelta()}}})},{"../../core":29}],111:[function(require,module,exports){var core=require("../../core"),TiltShiftXFilter=require("./TiltShiftXFilter"),TiltShiftYFilter=require("./TiltShiftYFilter");function TiltShiftFilter(){core.AbstractFilter.call(this);this.tiltShiftXFilter=new TiltShiftXFilter;this.tiltShiftYFilter=new TiltShiftYFilter}TiltShiftFilter.prototype=Object.create(core.AbstractFilter.prototype);TiltShiftFilter.prototype.constructor=TiltShiftFilter;module.exports=TiltShiftFilter;TiltShiftFilter.prototype.applyFilter=function(renderer,input,output){var renderTarget=renderer.filterManager.getRenderTarget(true);this.tiltShiftXFilter.applyFilter(renderer,input,renderTarget);this.tiltShiftYFilter.applyFilter(renderer,renderTarget,output);renderer.filterManager.returnRenderTarget(renderTarget)};Object.defineProperties(TiltShiftFilter.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(value){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=value}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(value){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=value}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(value){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=value}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(value){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=value}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(require,module,exports){var TiltShiftAxisFilter=require("./TiltShiftAxisFilter");function TiltShiftXFilter(){TiltShiftAxisFilter.call(this)}TiltShiftXFilter.prototype=Object.create(TiltShiftAxisFilter.prototype);TiltShiftXFilter.prototype.constructor=TiltShiftXFilter;module.exports=TiltShiftXFilter;TiltShiftXFilter.prototype.updateDelta=function(){var dx=this.uniforms.end.value.x-this.uniforms.start.value.x;var dy=this.uniforms.end.value.y-this.uniforms.start.value.y;var d=Math.sqrt(dx*dx+dy*dy);this.uniforms.delta.value.x=dx/d;this.uniforms.delta.value.y=dy/d}},{"./TiltShiftAxisFilter":110}],113:[function(require,module,exports){var TiltShiftAxisFilter=require("./TiltShiftAxisFilter");function TiltShiftYFilter(){TiltShiftAxisFilter.call(this)}TiltShiftYFilter.prototype=Object.create(TiltShiftAxisFilter.prototype);TiltShiftYFilter.prototype.constructor=TiltShiftYFilter;module.exports=TiltShiftYFilter;TiltShiftYFilter.prototype.updateDelta=function(){var dx=this.uniforms.end.value.x-this.uniforms.start.value.x;var dy=this.uniforms.end.value.y-this.uniforms.start.value.y;var d=Math.sqrt(dx*dx+dy*dy);this.uniforms.delta.value.x=-dy/d;this.uniforms.delta.value.y=dx/d}},{"./TiltShiftAxisFilter":110}],114:[function(require,module,exports){var core=require("../../core");function TwistFilter(){core.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}TwistFilter.prototype=Object.create(core.AbstractFilter.prototype);TwistFilter.prototype.constructor=TwistFilter;module.exports=TwistFilter;Object.defineProperties(TwistFilter.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(value){this.uniforms.offset.value=value}},radius:{get:function(){return this.uniforms.radius.value},set:function(value){this.uniforms.radius.value=value}},angle:{get:function(){return this.uniforms.angle.value},set:function(value){this.uniforms.angle.value=value}}})},{"../../core":29}],115:[function(require,module,exports){(function(global){require("./polyfill");var core=module.exports=require("./core");core.extras=require("./extras");core.filters=require("./filters");core.interaction=require("./interaction");core.loaders=require("./loaders");core.mesh=require("./mesh");core.accessibility=require("./accessibility");core.loader=new core.loaders.Loader;Object.assign(core,require("./deprecation"));global.PIXI=core}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./accessibility":21,"./core":29,"./deprecation":79,"./extras":86,"./filters":103,"./interaction":118,"./loaders":121,"./mesh":128,"./polyfill":133}],116:[function(require,module,exports){var core=require("../core");function InteractionData(){this.global=new core.Point;this.target=null;this.originalEvent=null}InteractionData.prototype.constructor=InteractionData;module.exports=InteractionData;InteractionData.prototype.getLocalPosition=function(displayObject,point,globalPos){return displayObject.worldTransform.applyInverse(globalPos||this.global,point)}},{"../core":29}],117:[function(require,module,exports){var core=require("../core"),InteractionData=require("./InteractionData");Object.assign(core.DisplayObject.prototype,require("./interactiveTarget"));function InteractionManager(renderer,options){options=options||{};this.renderer=renderer;this.autoPreventDefault=options.autoPreventDefault!==undefined?options.autoPreventDefault:true;this.interactionFrequency=options.interactionFrequency||10;this.mouse=new InteractionData;this.eventData={stopped:false,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=true}};this.interactiveDataPool=[];this.interactionDOMElement=null;this.moveWhenInside=false;this.eventsAdded=false;this.onMouseUp=this.onMouseUp.bind(this);this.processMouseUp=this.processMouseUp.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.processMouseDown=this.processMouseDown.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.processMouseMove=this.processMouseMove.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.processMouseOverOut=this.processMouseOverOut.bind(this);this.onTouchStart=this.onTouchStart.bind(this);this.processTouchStart=this.processTouchStart.bind(this);this.onTouchEnd=this.onTouchEnd.bind(this);this.processTouchEnd=this.processTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.processTouchMove=this.processTouchMove.bind(this);this.last=0;this.currentCursorStyle="inherit";this._tempPoint=new core.Point;this.resolution=1;this.setTargetElement(this.renderer.view,this.renderer.resolution)}InteractionManager.prototype.constructor=InteractionManager;module.exports=InteractionManager;InteractionManager.prototype.setTargetElement=function(element,resolution){this.removeEvents();this.interactionDOMElement=element;this.resolution=resolution||1;this.addEvents()};InteractionManager.prototype.addEvents=function(){if(!this.interactionDOMElement){return}core.ticker.shared.add(this.update,this);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="none";this.interactionDOMElement.style["-ms-touch-action"]="none"}window.document.addEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,true);window.addEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=true};InteractionManager.prototype.removeEvents=function(){if(!this.interactionDOMElement){return}core.ticker.shared.remove(this.update);if(window.navigator.msPointerEnabled){this.interactionDOMElement.style["-ms-content-zooming"]="";this.interactionDOMElement.style["-ms-touch-action"]=""}window.document.removeEventListener("mousemove",this.onMouseMove,true);this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,true);this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,true);this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,true);this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,true);this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,true);this.interactionDOMElement=null;window.removeEventListener("mouseup",this.onMouseUp,true);this.eventsAdded=false};InteractionManager.prototype.update=function(deltaTime){this._deltaTime+=deltaTime;if(this._deltaTime<this.interactionFrequency){return}this._deltaTime=0;if(!this.interactionDOMElement){return}if(this.didMove){this.didMove=false;return}this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};InteractionManager.prototype.dispatchEvent=function(displayObject,eventString,eventData){if(!eventData.stopped){eventData.target=displayObject;eventData.type=eventString;displayObject.emit(eventString,eventData);if(displayObject[eventString]){displayObject[eventString](eventData)}}};InteractionManager.prototype.mapPositionToPoint=function(point,x,y){var rect=this.interactionDOMElement.getBoundingClientRect();point.x=(x-rect.left)*(this.interactionDOMElement.width/rect.width)/this.resolution;point.y=(y-rect.top)*(this.interactionDOMElement.height/rect.height)/this.resolution};InteractionManager.prototype.processInteractive=function(point,displayObject,func,hitTest,interactive){if(!displayObject||!displayObject.visible){return false}var hit=false,interactiveParent=interactive=displayObject.interactive||interactive;if(displayObject.hitArea){interactiveParent=false}if(displayObject.interactiveChildren){var children=displayObject.children;for(var i=children.length-1;i>=0;i--){var child=children[i];if(this.processInteractive(point,child,func,hitTest,interactiveParent)){if(!child.parent){continue}hit=true;interactiveParent=false;if(child.interactive){hitTest=false}}}}if(interactive){if(hitTest&&!hit){if(displayObject.hitArea){displayObject.worldTransform.applyInverse(point,this._tempPoint);hit=displayObject.hitArea.contains(this._tempPoint.x,this._tempPoint.y)}else if(displayObject.containsPoint){hit=displayObject.containsPoint(point)}}if(displayObject.interactive){func(displayObject,hit)}}return hit};InteractionManager.prototype.onMouseDown=function(event){this.mouse.originalEvent=event;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY);if(this.autoPreventDefault){this.mouse.originalEvent.preventDefault()}this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,true)};InteractionManager.prototype.processMouseDown=function(displayObject,hit){var e=this.mouse.originalEvent;var isRightButton=e.button===2||e.which===3;if(hit){displayObject[isRightButton?"_isRightDown":"_isLeftDown"]=true;this.dispatchEvent(displayObject,isRightButton?"rightdown":"mousedown",this.eventData)}};InteractionManager.prototype.onMouseUp=function(event){this.mouse.originalEvent=event;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,true)};InteractionManager.prototype.processMouseUp=function(displayObject,hit){var e=this.mouse.originalEvent;var isRightButton=e.button===2||e.which===3;var isDown=isRightButton?"_isRightDown":"_isLeftDown";if(hit){this.dispatchEvent(displayObject,isRightButton?"rightup":"mouseup",this.eventData);if(displayObject[isDown]){displayObject[isDown]=false;this.dispatchEvent(displayObject,isRightButton?"rightclick":"click",this.eventData)}}else{if(displayObject[isDown]){displayObject[isDown]=false;this.dispatchEvent(displayObject,isRightButton?"rightupoutside":"mouseupoutside",this.eventData)}}};InteractionManager.prototype.onMouseMove=function(event){this.mouse.originalEvent=event;this.eventData.data=this.mouse;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY);this.didMove=true;this.cursor="inherit";this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,true);if(this.currentCursorStyle!==this.cursor){this.currentCursorStyle=this.cursor;this.interactionDOMElement.style.cursor=this.cursor}};InteractionManager.prototype.processMouseMove=function(displayObject,hit){this.processMouseOverOut(displayObject,hit);if(!this.moveWhenInside||hit){this.dispatchEvent(displayObject,"mousemove",this.eventData)}};InteractionManager.prototype.onMouseOut=function(event){this.mouse.originalEvent=event;this.eventData.stopped=false;this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY);this.interactionDOMElement.style.cursor="inherit";this.mapPositionToPoint(this.mouse.global,event.clientX,event.clientY);this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,false)};InteractionManager.prototype.processMouseOverOut=function(displayObject,hit){if(hit){if(!displayObject._over){displayObject._over=true;this.dispatchEvent(displayObject,"mouseover",this.eventData)}if(displayObject.buttonMode){this.cursor=displayObject.defaultCursor}}else{if(displayObject._over){displayObject._over=false;this.dispatchEvent(displayObject,"mouseout",this.eventData)}}};InteractionManager.prototype.onTouchStart=function(event){if(this.autoPreventDefault){event.preventDefault()}var changedTouches=event.changedTouches;var cLength=changedTouches.length;for(var i=0;i<cLength;i++){var touchEvent=changedTouches[i];var touchData=this.getTouchData(touchEvent);touchData.originalEvent=event;this.eventData.data=touchData;this.eventData.stopped=false;this.processInteractive(touchData.global,this.renderer._lastObjectRendered,this.processTouchStart,true);this.returnTouchData(touchData)}};InteractionManager.prototype.processTouchStart=function(displayObject,hit){if(hit){displayObject._touchDown=true;this.dispatchEvent(displayObject,"touchstart",this.eventData)}};InteractionManager.prototype.onTouchEnd=function(event){if(this.autoPreventDefault){event.preventDefault()}var changedTouches=event.changedTouches;var cLength=changedTouches.length;for(var i=0;i<cLength;i++){var touchEvent=changedTouches[i];var touchData=this.getTouchData(touchEvent);touchData.originalEvent=event;this.eventData.data=touchData;this.eventData.stopped=false;this.processInteractive(touchData.global,this.renderer._lastObjectRendered,this.processTouchEnd,true);this.returnTouchData(touchData)}};InteractionManager.prototype.processTouchEnd=function(displayObject,hit){if(hit){this.dispatchEvent(displayObject,"touchend",this.eventData);if(displayObject._touchDown){displayObject._touchDown=false;this.dispatchEvent(displayObject,"tap",this.eventData)}}else{if(displayObject._touchDown){displayObject._touchDown=false;this.dispatchEvent(displayObject,"touchendoutside",this.eventData)}}};InteractionManager.prototype.onTouchMove=function(event){if(this.autoPreventDefault){event.preventDefault()}var changedTouches=event.changedTouches;var cLength=changedTouches.length;for(var i=0;i<cLength;i++){var touchEvent=changedTouches[i];var touchData=this.getTouchData(touchEvent);touchData.originalEvent=event;this.eventData.data=touchData;this.eventData.stopped=false;this.processInteractive(touchData.global,this.renderer._lastObjectRendered,this.processTouchMove,this.moveWhenInside);this.returnTouchData(touchData)}};InteractionManager.prototype.processTouchMove=function(displayObject,hit){if(!this.moveWhenInside||hit){this.dispatchEvent(displayObject,"touchmove",this.eventData)}};InteractionManager.prototype.getTouchData=function(touchEvent){var touchData=this.interactiveDataPool.pop();if(!touchData){touchData=new InteractionData}touchData.identifier=touchEvent.identifier;this.mapPositionToPoint(touchData.global,touchEvent.clientX,touchEvent.clientY);if(navigator.isCocoonJS){touchData.global.x=touchData.global.x/this.resolution;touchData.global.y=touchData.global.y/this.resolution}touchEvent.globalX=touchData.global.x;touchEvent.globalY=touchData.global.y;return touchData};InteractionManager.prototype.returnTouchData=function(touchData){this.interactiveDataPool.push(touchData)};InteractionManager.prototype.destroy=function(){this.removeEvents();this.renderer=null;this.mouse=null;this.eventData=null;this.interactiveDataPool=null;this.interactionDOMElement=null;this.onMouseUp=null;this.processMouseUp=null;this.onMouseDown=null;this.processMouseDown=null;this.onMouseMove=null;this.processMouseMove=null;this.onMouseOut=null;this.processMouseOverOut=null;this.onTouchStart=null;this.processTouchStart=null;this.onTouchEnd=null;this.processTouchEnd=null;this.onTouchMove=null;this.processTouchMove=null;this._tempPoint=null};core.WebGLRenderer.registerPlugin("interaction",InteractionManager);core.CanvasRenderer.registerPlugin("interaction",InteractionManager)},{"../core":29,"./InteractionData":116,"./interactiveTarget":119}],118:[function(require,module,exports){module.exports={InteractionData:require("./InteractionData"),InteractionManager:require("./InteractionManager"),interactiveTarget:require("./interactiveTarget")}},{"./InteractionData":116,"./InteractionManager":117,"./interactiveTarget":119}],119:[function(require,module,exports){var interactiveTarget={interactive:false,buttonMode:false,interactiveChildren:true,defaultCursor:"pointer",_over:false,_touchDown:false};module.exports=interactiveTarget},{}],120:[function(require,module,exports){var Resource=require("resource-loader").Resource,core=require("../core"),extras=require("../extras"),path=require("path");function parse(resource,texture){var data={};var info=resource.data.getElementsByTagName("info")[0];var common=resource.data.getElementsByTagName("common")[0];data.font=info.getAttribute("face");data.size=parseInt(info.getAttribute("size"),10);data.lineHeight=parseInt(common.getAttribute("lineHeight"),10);data.chars={};var letters=resource.data.getElementsByTagName("char");for(var i=0;i<letters.length;i++){var charCode=parseInt(letters[i].getAttribute("id"),10);var textureRect=new core.Rectangle(parseInt(letters[i].getAttribute("x"),10)+texture.frame.x,parseInt(letters[i].getAttribute("y"),10)+texture.frame.y,parseInt(letters[i].getAttribute("width"),10),parseInt(letters[i].getAttribute("height"),10));data.chars[charCode]={xOffset:parseInt(letters[i].getAttribute("xoffset"),10),yOffset:parseInt(letters[i].getAttribute("yoffset"),10),xAdvance:parseInt(letters[i].getAttribute("xadvance"),10),kerning:{},texture:new core.Texture(texture.baseTexture,textureRect)}}var kernings=resource.data.getElementsByTagName("kerning");for(i=0;i<kernings.length;i++){var first=parseInt(kernings[i].getAttribute("first"),10);var second=parseInt(kernings[i].getAttribute("second"),10);var amount=parseInt(kernings[i].getAttribute("amount"),10);if(data.chars[second]){data.chars[second].kerning[first]=amount}}resource.bitmapFont=data;extras.BitmapText.fonts[data.font]=data}module.exports=function(){return function(resource,next){if(!resource.data||!resource.isXml){return next()}if(resource.data.getElementsByTagName("page").length===0||resource.data.getElementsByTagName("info").length===0||resource.data.getElementsByTagName("info")[0].getAttribute("face")===null){return next()}var xmlUrl=path.dirname(resource.url);if(xmlUrl==="."){xmlUrl=""}if(this.baseUrl&&xmlUrl){if(this.baseUrl.charAt(this.baseUrl.length-1)==="/"){xmlUrl+="/"}xmlUrl=xmlUrl.replace(this.baseUrl,"")}if(xmlUrl&&xmlUrl.charAt(xmlUrl.length-1)!=="/"){xmlUrl+="/"}var textureUrl=xmlUrl+resource.data.getElementsByTagName("page")[0].getAttribute("file");if(core.utils.TextureCache[textureUrl]){parse(resource,core.utils.TextureCache[textureUrl]);next()}else{var loadOptions={crossOrigin:resource.crossOrigin,loadType:Resource.LOAD_TYPE.IMAGE,metadata:resource.metadata.imageMetadata};this.add(resource.name+"_image",textureUrl,loadOptions,function(res){parse(resource,res.texture);next()})}}}},{"../core":29,"../extras":86,path:2,"resource-loader":16}],121:[function(require,module,exports){module.exports={Loader:require("./loader"),bitmapFontParser:require("./bitmapFontParser"),spritesheetParser:require("./spritesheetParser"),textureParser:require("./textureParser"),Resource:require("resource-loader").Resource}},{"./bitmapFontParser":120,"./loader":122,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],122:[function(require,module,exports){var ResourceLoader=require("resource-loader"),textureParser=require("./textureParser"),spritesheetParser=require("./spritesheetParser"),bitmapFontParser=require("./bitmapFontParser");function Loader(baseUrl,concurrency){ResourceLoader.call(this,baseUrl,concurrency);for(var i=0;i<Loader._pixiMiddleware.length;++i){this.use(Loader._pixiMiddleware[i]())}}Loader.prototype=Object.create(ResourceLoader.prototype);Loader.prototype.constructor=Loader;module.exports=Loader;Loader._pixiMiddleware=[ResourceLoader.middleware.parsing.blob,textureParser,spritesheetParser,bitmapFontParser];Loader.addPixiMiddleware=function(fn){Loader._pixiMiddleware.push(fn)};var Resource=ResourceLoader.Resource;Resource.setExtensionXhrType("fnt",Resource.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":120,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],123:[function(require,module,exports){var Resource=require("resource-loader").Resource,path=require("path"),core=require("../core");module.exports=function(){return function(resource,next){if(!resource.data||!resource.isJson||!resource.data.frames){return next()}var loadOptions={crossOrigin:resource.crossOrigin,loadType:Resource.LOAD_TYPE.IMAGE,metadata:resource.metadata.imageMetadata};var route=path.dirname(resource.url.replace(this.baseUrl,""));var resolution=core.utils.getResolutionOfUrl(resource.url);this.add(resource.name+"_image",route+"/"+resource.data.meta.image,loadOptions,function(res){resource.textures={};var frames=resource.data.frames;for(var i in frames){var rect=frames[i].frame;if(rect){var size=null;var trim=null;if(frames[i].rotated){size=new core.Rectangle(rect.x,rect.y,rect.h,rect.w)}else{size=new core.Rectangle(rect.x,rect.y,rect.w,rect.h)}if(frames[i].trimmed){trim=new core.Rectangle(frames[i].spriteSourceSize.x/resolution,frames[i].spriteSourceSize.y/resolution,frames[i].sourceSize.w/resolution,frames[i].sourceSize.h/resolution)}if(frames[i].rotated){var temp=size.width;size.width=size.height;size.height=temp}size.x/=resolution;size.y/=resolution;size.width/=resolution;size.height/=resolution;resource.textures[i]=new core.Texture(res.texture.baseTexture,size,size.clone(),trim,frames[i].rotated?2:0);core.utils.TextureCache[i]=resource.textures[i]}}next()})}}},{"../core":29,path:2,"resource-loader":16}],124:[function(require,module,exports){var core=require("../core");module.exports=function(){return function(resource,next){if(resource.data&&resource.isImage){var baseTexture=new core.BaseTexture(resource.data,null,core.utils.getResolutionOfUrl(resource.url));baseTexture.imageUrl=resource.url;resource.texture=new core.Texture(baseTexture);core.utils.BaseTextureCache[resource.url]=baseTexture;core.utils.TextureCache[resource.url]=resource.texture}next()}}},{"../core":29}],125:[function(require,module,exports){var core=require("../core"),tempPoint=new core.Point,tempPolygon=new core.Polygon;function Mesh(texture,vertices,uvs,indices,drawMode){core.Container.call(this);this._texture=null;this.uvs=uvs||new Float32Array([0,0,1,0,1,1,0,1]);this.vertices=vertices||new Float32Array([0,0,100,0,100,100,0,100]);this.indices=indices||new Uint16Array([0,1,3,2]);this.dirty=true;this.blendMode=core.BLEND_MODES.NORMAL;this.canvasPadding=0;this.drawMode=drawMode||Mesh.DRAW_MODES.TRIANGLE_MESH;this.texture=texture;this.shader=null}Mesh.prototype=Object.create(core.Container.prototype);Mesh.prototype.constructor=Mesh;module.exports=Mesh;Object.defineProperties(Mesh.prototype,{texture:{get:function(){return this._texture},set:function(value){if(this._texture===value){return}this._texture=value;if(value){if(value.baseTexture.hasLoaded){this._onTextureUpdate()}else{value.once("update",this._onTextureUpdate,this)}}}}});Mesh.prototype._renderWebGL=function(renderer){renderer.setObjectRenderer(renderer.plugins.mesh);renderer.plugins.mesh.render(this)};Mesh.prototype._renderCanvas=function(renderer){var context=renderer.context;var transform=this.worldTransform;if(renderer.roundPixels){context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx|0,transform.ty|0)}else{context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty)}if(this.drawMode===Mesh.DRAW_MODES.TRIANGLE_MESH){this._renderCanvasTriangleMesh(context)}else{this._renderCanvasTriangles(context)}};Mesh.prototype._renderCanvasTriangleMesh=function(context){var vertices=this.vertices;var uvs=this.uvs;var length=vertices.length/2;for(var i=0;i<length-2;i++){var index=i*2;this._renderCanvasDrawTriangle(context,vertices,uvs,index,index+2,index+4)}};Mesh.prototype._renderCanvasTriangles=function(context){var vertices=this.vertices;var uvs=this.uvs;var indices=this.indices;var length=indices.length;for(var i=0;i<length;i+=3){var index0=indices[i]*2,index1=indices[i+1]*2,index2=indices[i+2]*2;this._renderCanvasDrawTriangle(context,vertices,uvs,index0,index1,index2)}};Mesh.prototype._renderCanvasDrawTriangle=function(context,vertices,uvs,index0,index1,index2){var textureSource=this._texture.baseTexture.source;var textureWidth=this._texture.baseTexture.width;var textureHeight=this._texture.baseTexture.height;var x0=vertices[index0],x1=vertices[index1],x2=vertices[index2];var y0=vertices[index0+1],y1=vertices[index1+1],y2=vertices[index2+1];var u0=uvs[index0]*textureWidth,u1=uvs[index1]*textureWidth,u2=uvs[index2]*textureWidth;var v0=uvs[index0+1]*textureHeight,v1=uvs[index1+1]*textureHeight,v2=uvs[index2+1]*textureHeight;if(this.canvasPadding>0){var paddingX=this.canvasPadding/this.worldTransform.a;var paddingY=this.canvasPadding/this.worldTransform.d;var centerX=(x0+x1+x2)/3;var centerY=(y0+y1+y2)/3;var normX=x0-centerX;var normY=y0-centerY;var dist=Math.sqrt(normX*normX+normY*normY);x0=centerX+normX/dist*(dist+paddingX);y0=centerY+normY/dist*(dist+paddingY);normX=x1-centerX;normY=y1-centerY;dist=Math.sqrt(normX*normX+normY*normY);x1=centerX+normX/dist*(dist+paddingX);y1=centerY+normY/dist*(dist+paddingY);normX=x2-centerX;normY=y2-centerY;dist=Math.sqrt(normX*normX+normY*normY);x2=centerX+normX/dist*(dist+paddingX);y2=centerY+normY/dist*(dist+paddingY)}context.save();context.beginPath();context.moveTo(x0,y0);context.lineTo(x1,y1);context.lineTo(x2,y2);context.closePath();context.clip();var delta=u0*v1+v0*u2+u1*v2-v1*u2-v0*u1-u0*v2;var deltaA=x0*v1+v0*x2+x1*v2-v1*x2-v0*x1-x0*v2;var deltaB=u0*x1+x0*u2+u1*x2-x1*u2-x0*u1-u0*x2;var deltaC=u0*v1*x2+v0*x1*u2+x0*u1*v2-x0*v1*u2-v0*u1*x2-u0*x1*v2;var deltaD=y0*v1+v0*y2+y1*v2-v1*y2-v0*y1-y0*v2;var deltaE=u0*y1+y0*u2+u1*y2-y1*u2-y0*u1-u0*y2;var deltaF=u0*v1*y2+v0*y1*u2+y0*u1*v2-y0*v1*u2-v0*u1*y2-u0*y1*v2;context.transform(deltaA/delta,deltaD/delta,deltaB/delta,deltaE/delta,deltaC/delta,deltaF/delta);context.drawImage(textureSource,0,0);context.restore()};Mesh.prototype.renderMeshFlat=function(Mesh){var context=this.context;var vertices=Mesh.vertices;var length=vertices.length/2;context.beginPath();for(var i=1;i<length-2;i++){var index=i*2;var x0=vertices[index],x1=vertices[index+2],x2=vertices[index+4];var y0=vertices[index+1],y1=vertices[index+3],y2=vertices[index+5];context.moveTo(x0,y0);context.lineTo(x1,y1);context.lineTo(x2,y2)}context.fillStyle="#FF0000";context.fill();context.closePath()};Mesh.prototype._onTextureUpdate=function(){this.updateFrame=true};Mesh.prototype.getBounds=function(matrix){if(!this._currentBounds){var worldTransform=matrix||this.worldTransform;var a=worldTransform.a;var b=worldTransform.b;var c=worldTransform.c;var d=worldTransform.d;var tx=worldTransform.tx;var ty=worldTransform.ty;var maxX=-Infinity;var maxY=-Infinity;var minX=Infinity;var minY=Infinity;var vertices=this.vertices;for(var i=0,n=vertices.length;i<n;i+=2){var rawX=vertices[i],rawY=vertices[i+1];var x=a*rawX+c*rawY+tx;var y=d*rawY+b*rawX+ty;minX=x<minX?x:minX;minY=y<minY?y:minY;maxX=x>maxX?x:maxX;maxY=y>maxY?y:maxY}if(minX===-Infinity||maxY===Infinity){return core.Rectangle.EMPTY}var bounds=this._bounds;bounds.x=minX;bounds.width=maxX-minX;bounds.y=minY;bounds.height=maxY-minY;this._currentBounds=bounds}return this._currentBounds};Mesh.prototype.containsPoint=function(point){if(!this.getBounds().contains(point.x,point.y)){return false}this.worldTransform.applyInverse(point,tempPoint);var vertices=this.vertices;var points=tempPolygon.points;var i,len;if(this.drawMode===Mesh.DRAW_MODES.TRIANGLES){var indices=this.indices;len=this.indices.length;for(i=0;i<len;i+=3){var ind0=indices[i]*2,ind1=indices[i+1]*2,ind2=indices[i+2]*2;points[0]=vertices[ind0];points[1]=vertices[ind0+1];points[2]=vertices[ind1];points[3]=vertices[ind1+1];points[4]=vertices[ind2];points[5]=vertices[ind2+1];if(tempPolygon.contains(tempPoint.x,tempPoint.y)){return true}}}else{len=vertices.length;for(i=0;i<len;i+=6){points[0]=vertices[i];points[1]=vertices[i+1];points[2]=vertices[i+2];points[3]=vertices[i+3];points[4]=vertices[i+4];points[5]=vertices[i+5];if(tempPolygon.contains(tempPoint.x,tempPoint.y)){return true}}}return false};Mesh.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],126:[function(require,module,exports){var Mesh=require("./Mesh");function Plane(texture,segmentsX,segmentsY){Mesh.call(this,texture);this._ready=true;this.segmentsX=segmentsX||10;this.segmentsY=segmentsY||10;this.drawMode=Mesh.DRAW_MODES.TRIANGLES;this.refresh()}Plane.prototype=Object.create(Mesh.prototype);Plane.prototype.constructor=Plane;module.exports=Plane;Plane.prototype.refresh=function(){var total=this.segmentsX*this.segmentsY;var verts=[];var colors=[];var uvs=[];var indices=[];var texture=this.texture;var segmentsXSub=this.segmentsX-1;var segmentsYSub=this.segmentsY-1;var i=0;var sizeX=texture.width/segmentsXSub;var sizeY=texture.height/segmentsYSub;for(i=0;i<total;i++){var x=i%this.segmentsX;var y=i/this.segmentsX|0;verts.push(x*sizeX,y*sizeY);uvs.push(texture._uvs.x0+(texture._uvs.x1-texture._uvs.x0)*(x/(this.segmentsX-1)),texture._uvs.y0+(texture._uvs.y3-texture._uvs.y0)*(y/(this.segmentsY-1)))}var totalSub=segmentsXSub*segmentsYSub;for(i=0;i<totalSub;i++){var xpos=i%segmentsXSub;var ypos=i/segmentsXSub|0;var value=ypos*this.segmentsX+xpos;
var value2=ypos*this.segmentsX+xpos+1;var value3=(ypos+1)*this.segmentsX+xpos;var value4=(ypos+1)*this.segmentsX+xpos+1;indices.push(value,value2,value3);indices.push(value2,value4,value3)}this.vertices=new Float32Array(verts);this.uvs=new Float32Array(uvs);this.colors=new Float32Array(colors);this.indices=new Uint16Array(indices)};Plane.prototype._onTextureUpdate=function(){Mesh.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}}},{"./Mesh":125}],127:[function(require,module,exports){var Mesh=require("./Mesh");var core=require("../core");function Rope(texture,points){Mesh.call(this,texture);this.points=points;this.vertices=new Float32Array(points.length*4);this.uvs=new Float32Array(points.length*4);this.colors=new Float32Array(points.length*2);this.indices=new Uint16Array(points.length*2);this._ready=true;this.refresh()}Rope.prototype=Object.create(Mesh.prototype);Rope.prototype.constructor=Rope;module.exports=Rope;Rope.prototype.refresh=function(){var points=this.points;if(points.length<1||!this._texture._uvs){return}var uvs=this.uvs;var indices=this.indices;var colors=this.colors;var textureUvs=this._texture._uvs;var offset=new core.Point(textureUvs.x0,textureUvs.y0);var factor=new core.Point(textureUvs.x2-textureUvs.x0,textureUvs.y2-textureUvs.y0);uvs[0]=0+offset.x;uvs[1]=0+offset.y;uvs[2]=0+offset.x;uvs[3]=1*factor.y+offset.y;colors[0]=1;colors[1]=1;indices[0]=0;indices[1]=1;var total=points.length,point,index,amount;for(var i=1;i<total;i++){point=points[i];index=i*4;amount=i/(total-1);uvs[index]=amount*factor.x+offset.x;uvs[index+1]=0+offset.y;uvs[index+2]=amount*factor.x+offset.x;uvs[index+3]=1*factor.y+offset.y;index=i*2;colors[index]=1;colors[index+1]=1;index=i*2;indices[index]=index;indices[index+1]=index+1}this.dirty=true};Rope.prototype._onTextureUpdate=function(){Mesh.prototype._onTextureUpdate.call(this);if(this._ready){this.refresh()}};Rope.prototype.updateTransform=function(){var points=this.points;if(points.length<1){return}var lastPoint=points[0];var nextPoint;var perpX=0;var perpY=0;var vertices=this.vertices;var total=points.length,point,index,ratio,perpLength,num;for(var i=0;i<total;i++){point=points[i];index=i*4;if(i<points.length-1){nextPoint=points[i+1]}else{nextPoint=point}perpY=-(nextPoint.x-lastPoint.x);perpX=nextPoint.y-lastPoint.y;ratio=(1-i/(total-1))*10;if(ratio>1){ratio=1}perpLength=Math.sqrt(perpX*perpX+perpY*perpY);num=this._texture.height/2;perpX/=perpLength;perpY/=perpLength;perpX*=num;perpY*=num;vertices[index]=point.x+perpX;vertices[index+1]=point.y+perpY;vertices[index+2]=point.x-perpX;vertices[index+3]=point.y-perpY;lastPoint=point}this.containerUpdateTransform()}},{"../core":29,"./Mesh":125}],128:[function(require,module,exports){module.exports={Mesh:require("./Mesh"),Plane:require("./Plane"),Rope:require("./Rope"),MeshRenderer:require("./webgl/MeshRenderer"),MeshShader:require("./webgl/MeshShader")}},{"./Mesh":125,"./Plane":126,"./Rope":127,"./webgl/MeshRenderer":129,"./webgl/MeshShader":130}],129:[function(require,module,exports){var core=require("../../core"),Mesh=require("../Mesh");function MeshRenderer(renderer){core.ObjectRenderer.call(this,renderer);this.indices=new Uint16Array(15e3);for(var i=0,j=0;i<15e3;i+=6,j+=4){this.indices[i+0]=j+0;this.indices[i+1]=j+1;this.indices[i+2]=j+2;this.indices[i+3]=j+0;this.indices[i+4]=j+2;this.indices[i+5]=j+3}this.currentShader=null}MeshRenderer.prototype=Object.create(core.ObjectRenderer.prototype);MeshRenderer.prototype.constructor=MeshRenderer;module.exports=MeshRenderer;core.WebGLRenderer.registerPlugin("mesh",MeshRenderer);MeshRenderer.prototype.onContextChange=function(){};MeshRenderer.prototype.render=function(mesh){if(!mesh._vertexBuffer){this._initWebGL(mesh)}var renderer=this.renderer,gl=renderer.gl,texture=mesh._texture.baseTexture,shader=mesh.shader;var drawMode=mesh.drawMode===Mesh.DRAW_MODES.TRIANGLE_MESH?gl.TRIANGLE_STRIP:gl.TRIANGLES;renderer.blendModeManager.setBlendMode(mesh.blendMode);if(!shader){shader=renderer.shaderManager.plugins.meshShader}else{shader=shader.shaders[gl.id]||shader.getShader(renderer)}this.renderer.shaderManager.setShader(shader);shader.uniforms.translationMatrix.value=mesh.worldTransform.toArray(true);shader.uniforms.projectionMatrix.value=renderer.currentRenderTarget.projectionMatrix.toArray(true);shader.uniforms.alpha.value=mesh.worldAlpha;shader.syncUniforms();if(!mesh.dirty){gl.bindBuffer(gl.ARRAY_BUFFER,mesh._vertexBuffer);gl.bufferSubData(gl.ARRAY_BUFFER,0,mesh.vertices);gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,false,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,mesh._uvBuffer);gl.vertexAttribPointer(shader.attributes.aTextureCoord,2,gl.FLOAT,false,0,0);gl.activeTexture(gl.TEXTURE0);if(!texture._glTextures[gl.id]){this.renderer.updateTexture(texture)}else{gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id])}gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,mesh._indexBuffer);gl.bufferSubData(gl.ELEMENT_ARRAY_BUFFER,0,mesh.indices)}else{mesh.dirty=false;gl.bindBuffer(gl.ARRAY_BUFFER,mesh._vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,mesh.vertices,gl.STATIC_DRAW);gl.vertexAttribPointer(shader.attributes.aVertexPosition,2,gl.FLOAT,false,0,0);gl.bindBuffer(gl.ARRAY_BUFFER,mesh._uvBuffer);gl.bufferData(gl.ARRAY_BUFFER,mesh.uvs,gl.STATIC_DRAW);gl.vertexAttribPointer(shader.attributes.aTextureCoord,2,gl.FLOAT,false,0,0);gl.activeTexture(gl.TEXTURE0);if(!texture._glTextures[gl.id]){this.renderer.updateTexture(texture)}else{gl.bindTexture(gl.TEXTURE_2D,texture._glTextures[gl.id])}gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,mesh._indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,mesh.indices,gl.STATIC_DRAW)}gl.drawElements(drawMode,mesh.indices.length,gl.UNSIGNED_SHORT,0)};MeshRenderer.prototype._initWebGL=function(mesh){var gl=this.renderer.gl;mesh._vertexBuffer=gl.createBuffer();mesh._indexBuffer=gl.createBuffer();mesh._uvBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,mesh._vertexBuffer);gl.bufferData(gl.ARRAY_BUFFER,mesh.vertices,gl.DYNAMIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,mesh._uvBuffer);gl.bufferData(gl.ARRAY_BUFFER,mesh.uvs,gl.STATIC_DRAW);if(mesh.colors){mesh._colorBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,mesh._colorBuffer);gl.bufferData(gl.ARRAY_BUFFER,mesh.colors,gl.STATIC_DRAW)}gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,mesh._indexBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,mesh.indices,gl.STATIC_DRAW)};MeshRenderer.prototype.flush=function(){};MeshRenderer.prototype.start=function(){this.currentShader=null};MeshRenderer.prototype.destroy=function(){core.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":29,"../Mesh":125}],130:[function(require,module,exports){var core=require("../../core");function MeshShader(shaderManager){core.Shader.call(this,shaderManager,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}MeshShader.prototype=Object.create(core.Shader.prototype);MeshShader.prototype.constructor=MeshShader;module.exports=MeshShader;core.ShaderManager.registerPlugin("meshShader",MeshShader)},{"../../core":29}],131:[function(require,module,exports){if(!Math.sign){Math.sign=function(x){x=+x;if(x===0||isNaN(x)){return x}return x>0?1:-1}}},{}],132:[function(require,module,exports){if(!Object.assign){Object.assign=require("object-assign")}},{"object-assign":11}],133:[function(require,module,exports){require("./Object.assign");require("./requestAnimationFrame");require("./Math.sign")},{"./Math.sign":131,"./Object.assign":132,"./requestAnimationFrame":134}],134:[function(require,module,exports){(function(global){if(!(Date.now&&Date.prototype.getTime)){Date.now=function now(){return(new Date).getTime()}}if(!(global.performance&&global.performance.now)){var startTime=Date.now();if(!global.performance){global.performance={}}global.performance.now=function(){return Date.now()-startTime}}var lastTime=Date.now();var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!global.requestAnimationFrame;++x){global.requestAnimationFrame=global[vendors[x]+"RequestAnimationFrame"];global.cancelAnimationFrame=global[vendors[x]+"CancelAnimationFrame"]||global[vendors[x]+"CancelRequestAnimationFrame"]}if(!global.requestAnimationFrame){global.requestAnimationFrame=function(callback){if(typeof callback!=="function"){throw new TypeError(callback+"is not a function")}var currentTime=Date.now(),delay=16+lastTime-currentTime;if(delay<0){delay=0}lastTime=currentTime;return setTimeout(function(){lastTime=Date.now();callback(performance.now())},delay)}}if(!global.cancelAnimationFrame){global.cancelAnimationFrame=function(id){clearTimeout(id)}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[115])(115)});"use strict";function _typeof(obj){return obj&&typeof Symbol!=="undefined"&&obj.constructor===Symbol?"symbol":typeof obj}(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){var VNode=require("./vnode");var is=require("./is");function addNS(data,children){data.ns="http://www.w3.org/2000/svg";if(children!==undefined){for(var i=0;i<children.length;++i){addNS(children[i].data,children[i].children)}}}module.exports=function h(sel,b,c){var data={},children,text,i;if(arguments.length===3){data=b;if(is.array(c)){children=c}else if(is.primitive(c)){text=c}}else if(arguments.length===2){if(is.array(b)){children=b}else if(is.primitive(b)){text=b}else{data=b}}if(is.array(children)){for(i=0;i<children.length;++i){if(is.primitive(children[i]))children[i]=VNode(undefined,undefined,undefined,children[i])}}if(sel[0]==="s"&&sel[1]==="v"&&sel[2]==="g"){addNS(data,children)}return VNode(sel,data,children,text,undefined)}},{"./is":3,"./vnode":5}],2:[function(require,module,exports){function createElement(tagName){return document.createElement(tagName)}function createElementNS(namespaceURI,qualifiedName){return document.createElementNS(namespaceURI,qualifiedName)}function createTextNode(text){return document.createTextNode(text)}function insertBefore(parentNode,newNode,referenceNode){parentNode.insertBefore(newNode,referenceNode)}function removeChild(node,child){node.removeChild(child)}function appendChild(node,child){node.appendChild(child)}function parentNode(node){return node.parentElement}function nextSibling(node){return node.nextSibling}function tagName(node){return node.tagName}function setTextContent(node,text){node.textContent=text}module.exports={createElement:createElement,createElementNS:createElementNS,createTextNode:createTextNode,appendChild:appendChild,removeChild:removeChild,insertBefore:insertBefore,parentNode:parentNode,nextSibling:nextSibling,tagName:tagName,setTextContent:setTextContent}},{}],3:[function(require,module,exports){module.exports={array:Array.isArray,primitive:function primitive(s){return typeof s==="string"||typeof s==="number"}}},{}],4:[function(require,module,exports){"use strict";var VNode=require("./vnode");var is=require("./is");var domApi=require("./htmldomapi.js");function isUndef(s){return s===undefined}function isDef(s){return s!==undefined}var emptyNode=VNode("",{},[],undefined,undefined);function sameVnode(vnode1,vnode2){return vnode1.key===vnode2.key&&vnode1.sel===vnode2.sel}function createKeyToOldIdx(children,beginIdx,endIdx){var i,map={},key;for(i=beginIdx;i<=endIdx;++i){key=children[i].key;if(isDef(key))map[key]=i}return map}var hooks=["create","update","remove","destroy","pre","post"];function init(modules,api){var i,j,cbs={};if(isUndef(api))api=domApi;for(i=0;i<hooks.length;++i){cbs[hooks[i]]=[];for(j=0;j<modules.length;++j){if(modules[j][hooks[i]]!==undefined)cbs[hooks[i]].push(modules[j][hooks[i]])}}function emptyNodeAt(elm){return VNode(api.tagName(elm).toLowerCase(),{},[],undefined,elm)}function createRmCb(childElm,listeners){return function(){if(--listeners===0){var parent=api.parentNode(childElm);api.removeChild(parent,childElm)}}}function createElm(vnode,insertedVnodeQueue){var i,thunk,data=vnode.data;if(isDef(data)){if(isDef(i=data.hook)&&isDef(i=i.init))i(vnode);if(isDef(i=data.vnode)){thunk=vnode;vnode=i}}var elm,children=vnode.children,sel=vnode.sel;if(isDef(sel)){var hashIdx=sel.indexOf("#");var dotIdx=sel.indexOf(".",hashIdx);var hash=hashIdx>0?hashIdx:sel.length;var dot=dotIdx>0?dotIdx:sel.length;var tag=hashIdx!==-1||dotIdx!==-1?sel.slice(0,Math.min(hash,dot)):sel;elm=vnode.elm=isDef(data)&&isDef(i=data.ns)?api.createElementNS(i,tag):api.createElement(tag);if(hash<dot)elm.id=sel.slice(hash+1,dot);if(dotIdx>0)elm.className=sel.slice(dot+1).replace(/\./g," ");if(is.array(children)){for(i=0;i<children.length;++i){api.appendChild(elm,createElm(children[i],insertedVnodeQueue))}}else if(is.primitive(vnode.text)){api.appendChild(elm,api.createTextNode(vnode.text))}for(i=0;i<cbs.create.length;++i){cbs.create[i](emptyNode,vnode)}i=vnode.data.hook;if(isDef(i)){if(i.create)i.create(emptyNode,vnode);if(i.insert)insertedVnodeQueue.push(vnode)}}else{elm=vnode.elm=api.createTextNode(vnode.text)}if(isDef(thunk))thunk.elm=vnode.elm;return vnode.elm}function addVnodes(parentElm,before,vnodes,startIdx,endIdx,insertedVnodeQueue){for(;startIdx<=endIdx;++startIdx){api.insertBefore(parentElm,createElm(vnodes[startIdx],insertedVnodeQueue),before)}}function invokeDestroyHook(vnode){var i,j,data=vnode.data;if(isDef(data)){if(isDef(i=data.hook)&&isDef(i=i.destroy))i(vnode);for(i=0;i<cbs.destroy.length;++i){cbs.destroy[i](vnode)}if(isDef(i=vnode.children)){for(j=0;j<vnode.children.length;++j){invokeDestroyHook(vnode.children[j])}}if(isDef(i=data.vnode))invokeDestroyHook(i)}}function removeVnodes(parentElm,vnodes,startIdx,endIdx){for(;startIdx<=endIdx;++startIdx){var i,listeners,rm,ch=vnodes[startIdx];if(isDef(ch)){if(isDef(ch.sel)){invokeDestroyHook(ch);listeners=cbs.remove.length+1;rm=createRmCb(ch.elm,listeners);for(i=0;i<cbs.remove.length;++i){cbs.remove[i](ch,rm)}if(isDef(i=ch.data)&&isDef(i=i.hook)&&isDef(i=i.remove)){i(ch,rm)}else{rm()}}else{api.removeChild(parentElm,ch.elm)}}}}function updateChildren(parentElm,oldCh,newCh,insertedVnodeQueue){var oldStartIdx=0,newStartIdx=0;var oldEndIdx=oldCh.length-1;var oldStartVnode=oldCh[0];var oldEndVnode=oldCh[oldEndIdx];var newEndIdx=newCh.length-1;var newStartVnode=newCh[0];var newEndVnode=newCh[newEndIdx];var oldKeyToIdx,idxInOld,elmToMove,before;while(oldStartIdx<=oldEndIdx&&newStartIdx<=newEndIdx){if(isUndef(oldStartVnode)){oldStartVnode=oldCh[++oldStartIdx]}else if(isUndef(oldEndVnode)){oldEndVnode=oldCh[--oldEndIdx]}else if(sameVnode(oldStartVnode,newStartVnode)){patchVnode(oldStartVnode,newStartVnode,insertedVnodeQueue);oldStartVnode=oldCh[++oldStartIdx];newStartVnode=newCh[++newStartIdx]}else if(sameVnode(oldEndVnode,newEndVnode)){patchVnode(oldEndVnode,newEndVnode,insertedVnodeQueue);oldEndVnode=oldCh[--oldEndIdx];newEndVnode=newCh[--newEndIdx]}else if(sameVnode(oldStartVnode,newEndVnode)){patchVnode(oldStartVnode,newEndVnode,insertedVnodeQueue);api.insertBefore(parentElm,oldStartVnode.elm,api.nextSibling(oldEndVnode.elm));oldStartVnode=oldCh[++oldStartIdx];newEndVnode=newCh[--newEndIdx]}else if(sameVnode(oldEndVnode,newStartVnode)){patchVnode(oldEndVnode,newStartVnode,insertedVnodeQueue);api.insertBefore(parentElm,oldEndVnode.elm,oldStartVnode.elm);oldEndVnode=oldCh[--oldEndIdx];newStartVnode=newCh[++newStartIdx]}else{if(isUndef(oldKeyToIdx))oldKeyToIdx=createKeyToOldIdx(oldCh,oldStartIdx,oldEndIdx);idxInOld=oldKeyToIdx[newStartVnode.key];if(isUndef(idxInOld)){api.insertBefore(parentElm,createElm(newStartVnode,insertedVnodeQueue),oldStartVnode.elm);newStartVnode=newCh[++newStartIdx]}else{elmToMove=oldCh[idxInOld];patchVnode(elmToMove,newStartVnode,insertedVnodeQueue);oldCh[idxInOld]=undefined;api.insertBefore(parentElm,elmToMove.elm,oldStartVnode.elm);newStartVnode=newCh[++newStartIdx]}}}if(oldStartIdx>oldEndIdx){before=isUndef(newCh[newEndIdx+1])?null:newCh[newEndIdx+1].elm;addVnodes(parentElm,before,newCh,newStartIdx,newEndIdx,insertedVnodeQueue)}else if(newStartIdx>newEndIdx){removeVnodes(parentElm,oldCh,oldStartIdx,oldEndIdx)}}function patchVnode(oldVnode,vnode,insertedVnodeQueue){var i,hook;if(isDef(i=vnode.data)&&isDef(hook=i.hook)&&isDef(i=hook.prepatch)){i(oldVnode,vnode)}if(isDef(i=oldVnode.data)&&isDef(i=i.vnode))oldVnode=i;if(isDef(i=vnode.data)&&isDef(i=i.vnode)){patchVnode(oldVnode,i,insertedVnodeQueue);vnode.elm=i.elm;return}var elm=vnode.elm=oldVnode.elm,oldCh=oldVnode.children,ch=vnode.children;if(oldVnode===vnode)return;if(!sameVnode(oldVnode,vnode)){var parentElm=api.parentNode(oldVnode.elm);elm=createElm(vnode,insertedVnodeQueue);api.insertBefore(parentElm,elm,oldVnode.elm);removeVnodes(parentElm,[oldVnode],0,0);return}if(isDef(vnode.data)){for(i=0;i<cbs.update.length;++i){cbs.update[i](oldVnode,vnode)}i=vnode.data.hook;if(isDef(i)&&isDef(i=i.update))i(oldVnode,vnode)}if(isUndef(vnode.text)){if(isDef(oldCh)&&isDef(ch)){if(oldCh!==ch)updateChildren(elm,oldCh,ch,insertedVnodeQueue)}else if(isDef(ch)){if(isDef(oldVnode.text))api.setTextContent(elm,"");addVnodes(elm,null,ch,0,ch.length-1,insertedVnodeQueue)}else if(isDef(oldCh)){removeVnodes(elm,oldCh,0,oldCh.length-1)}else if(isDef(oldVnode.text)){api.setTextContent(elm,"")}}else if(oldVnode.text!==vnode.text){api.setTextContent(elm,vnode.text)}if(isDef(hook)&&isDef(i=hook.postpatch)){i(oldVnode,vnode)}}return function(oldVnode,vnode){var i,elm,parent;var insertedVnodeQueue=[];for(i=0;i<cbs.pre.length;++i){cbs.pre[i]()}if(isUndef(oldVnode.sel)){oldVnode=emptyNodeAt(oldVnode)}if(sameVnode(oldVnode,vnode)){patchVnode(oldVnode,vnode,insertedVnodeQueue)}else{elm=oldVnode.elm;parent=api.parentNode(elm);createElm(vnode,insertedVnodeQueue);if(parent!==null){api.insertBefore(parent,vnode.elm,api.nextSibling(elm));removeVnodes(parent,[oldVnode],0,0)}}for(i=0;i<insertedVnodeQueue.length;++i){insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i])}for(i=0;i<cbs.post.length;++i){cbs.post[i]()}return vnode}}module.exports={init:init}},{"./htmldomapi.js":2,"./is":3,"./vnode":5}],5:[function(require,module,exports){module.exports=function(sel,data,children,text,elm){var key=data===undefined?undefined:data.key;return{sel:sel,data:data,children:children,text:text,elm:elm,key:key}}},{}],6:[function(require,module,exports){function updateEventListeners(oldVnode,vnode){var elm=vnode.elm;var on=vnode.data.on||{};elm.removeAllListeners();elm.interactive=false;Object.keys(on).forEach(function(name){elm.interactive=true;elm.on(name,function(event){event.stopPropagation();on[name]()})})}module.exports={create:updateEventListeners,update:updateEventListeners}},{}],7:[function(require,module,exports){var mt=Mousetrap;function updateKeys(oldVnode,vnode){var oldKeyboard=oldVnode.data.keyboard||{};var keyboard=vnode.data.keyboard||{};var keys=Object.keys(oldKeyboard).concat(Object.keys(keyboard));keys.forEach(function(key){var isOld=oldKeyboard[key];var isNew=keyboard[key];if(!isOld||!isNew){if(isOld){mt.unbind(key)}if(isNew){mt.bind(key,function(event){isNew.callback();return false},isNew.action)}}})}module.exports={create:updateKeys,update:updateKeys}},{}],8:[function(require,module,exports){function updateProps(oldVnode,vnode){var elm=vnode.elm;var oldProps=oldVnode.data.props||{};var props=vnode.data.props||{};for(key in oldProps){if(!props[key]){if(typeof oldProps[key]=="number"){elm[key]=0}else{delete elm[key]}}}for(var key in props){var cur=props[key];var old=oldProps[key];if(old!==cur){elm[key]=cur}}}module.exports={create:updateProps,update:updateProps}},{}],9:[function(require,module,exports){var elmKey="elm";function stopTweens(elm){if(elm.vptweens){elm.vptweens.forEach(function(x){return x.stop()})}}function createTween(elm,td){stopTweens(elm);var props=getPropsToTween(td);elm.vptweens=[];var first=true;for(var key in props){var tween=createKeyTween(elm,props[key],td,key);elm.vptweens.push(tween);if(first){var onComplete=function onComplete(){delete elm.vptweens;if(td.onComplete)td.onComplete()};tween.onComplete(onComplete);tween.onStop(onComplete);first=false}}elm.vptweens.forEach(function(x){return x.start()})}function createKeyTween(elm,obj,td,key){var tween=new TWEEN.Tween(obj.from);tween.to(obj.to,td.duration);if(td.easing){tween.easing(td.easing)}if(td.repeat){tween.repeat(td.repeat)}if(td.yoyo){tween.yoyo(td.yoyo)}tween.onUpdate(function(){updateProps(key==elmKey?elm:elm[key],this)});return tween}function isObject(obj){return(typeof obj==="undefined"?"undefined":_typeof(obj))==="object"}function getPropsToTween(tween){var from=tween.from;var to=tween.to;var props={};for(var key in from){var v=from[key];if(isObject(v)){props[key]={from:v,to:to[key]};delete from[key];delete to[key]}}if(!isEmpty(from)){props[elmKey]={from:from,to:to}}return props}function cloneObject(obj){if(!isObject(obj))return obj;var result={};for(var key in obj){if(obj.hasOwnProperty(key))result[key]=cloneObject(obj[key])}return result}function getPropsFromObject(obj,props){var result={};var keys=Array.isArray(props)?props:Object.keys(props);keys.forEach(function(key){result[key]=cloneObject(obj[key])});return result}function updateProps(elm,props){for(var key in props){elm[key]=cloneObject(props[key])}}function isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop))return false}return true}function updateTweenProps(tween,vnode,oldVnode){tween=cloneObject(tween);var elm=vnode.elm;var toIsEmpty=isEmpty(tween.to);var fromIsEmpty=isEmpty(tween.from);if(toIsEmpty&&fromIsEmpty){throw"both to and from are undefined"}else{if(!toIsEmpty&&!fromIsEmpty){return tween}if(toIsEmpty){tween.to=getPropsFromObject(elm,tween.from);updateProps(elm,tween.from)}if(fromIsEmpty){tween.from=getPropsFromObject(elm,tween.to)}}return tween}function update(oldVnode,vnode){if(!oldVnode.sel||!vnode.data.tween)return;var elm=vnode.elm;var tween=vnode.data.tween.update;if(tween){tween=updateTweenProps(tween,vnode,oldVnode);createTween(elm,tween)}}function remove(vnode,cb){var elm=vnode.elm;var tween=(vnode.data.tween||{}).remove;if(!tween){stopTweens(elm);cb()}else{tween=updateTweenProps(tween,vnode);var tweenOnComplete=tween.onComplete;tween.onComplete=function(){cb();if(tweenOnComplete)tweenOnComplete()};createTween(elm,tween)}}function create(empty,vnode){if(!vnode.data.tween)return;var elm=vnode.elm;var tween=vnode.data.tween.create;if(tween){tween=updateTweenProps(tween,vnode);createTween(elm,tween)}}module.exports={create:create,update:update,remove:remove}},{}],10:[function(require,module,exports){var px=PIXI;var nodeTypes={};nodeTypes.text=function(){return new px.Text("",{font:"14px Verdana",fill:"silver"})};nodeTypes.group=function(){return new px.Container};nodeTypes.sprite=function(){return new px.Sprite(px.Texture.EMPTY)};function createElement(tagName){var nodeType=nodeTypes[tagName];if(nodeType){var node=nodeType();node.tagName=tagName;return node}return null}function insertBefore(parentNode,newNode,referenceNode){if(referenceNode){var i=parentNode.getChildIndex(referenceNode);parentNode.addChildAt(newNode,i)}else{parentNode.addChild(newNode)}}function removeChild(node,child){node.removeChild(child);child.destroy()}function appendChild(node,child){node.addChild(child)}function parentNode(node){return node.parent}function nextSibling(node){var parent=node.parent;var i=parent.getChildIndex(node);var sublingIndex=i+1;if(parent.children.length<=sublingIndex)return null;return parent.getChildAt(sublingIndex)}function tagName(node){return node.tagName}module.exports={createElement:createElement,appendChild:appendChild,removeChild:removeChild,insertBefore:insertBefore,parentNode:parentNode,nextSibling:nextSibling,tagName:tagName,nodeTypes:nodeTypes}},{}],11:[function(require,module,exports){var h=require("../bower_components/snabbdom/h");function init(thunk){var cur=thunk.data;cur.vnode=cur.fn.call(undefined,cur.arg)}function prepatch(oldThunk,thunk){var old=oldThunk.data;var cur=thunk.data;var oldArg=old.arg;var arg=cur.arg;cur.vnode=old.vnode;var isEqual=cur.compare?cur.compare(arg,oldArg):arg===oldArg;if(!isEqual){cur.vnode=cur.fn.call(undefined,arg);return}}module.exports=function(name,fn,arg,compare){return h("thunk-"+name,{hook:{init:init,prepatch:prepatch},fn:fn,arg:arg,compare:compare})}},{"../bower_components/snabbdom/h":1}],12:[function(require,module,exports){(function(global){var px=PIXI;var snabbdom=require("../bower_components/snabbdom/snabbdom");var h=require("../bower_components/snabbdom/h");var thunk=require("./thunk");var api=require("./pixidomapi");var emptyPoint=new px.Point(0,0);function patchPixi(){Object.defineProperty(px.Sprite.prototype,"src",{get:function get(){return this.baseTexture.imageUrl},set:function set(v){this.texture=v?px.utils.TextureCache[v]:px.Texture.EMPTY}});Object.defineProperty(px.Container.prototype,"pivotAnchor",{get:function get(){if(this.anchor){return this.anchor}return emptyPoint},set:function set(v){if(this.anchor){this.anchor=v}else{var bounds=this.getLocalBounds();this.pivot.x=bounds.width*v.x;this.pivot.y=bounds.height*v.y}}})}patchPixi();var patch=snabbdom.init([require("./modules/props"),require("./modules/events"),require("./modules/tweens"),require("./modules/keyboard")],api);global.virtualPixi={h:h,patch:patch,api:api,thunk:thunk};exports.h=h;exports.thunk=thunk;exports.api=api;exports.patch=patch}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../bower_components/snabbdom/h":1,"../bower_components/snabbdom/snabbdom":4,"./modules/events":6,"./modules/keyboard":7,"./modules/props":8,"./modules/tweens":9,"./pixidomapi":10,"./thunk":11}]},{},[12]);"use strict";(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o])}return s})({1:[function(require,module,exports){var id="JBDQHSGS9WBYNMC6TSK6";var next=Date.now()+18e4;var loaded=false;function prepare(){var fa=window.FlurryAds;if(fa==undefined)return;if(loaded)return;fa.prepareInterstitial({adId:id,autoShow:false},function(){loaded=true},function(){})}function show(){var fa=window.FlurryAds;if(fa==undefined)return;var now=Date.now();if(!loaded||now<next)return;next=now+3e5;loaded=false;fa.showInterstitial()}exports.prepare=prepare;exports.show=show},{}],2:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Function_Eff=require("Data.Function.Eff");module.exports={show:$foreign.show,prepare:$foreign.prepare}},{"./foreign":1,"Control.Monad.Eff":26,"Data.Function.Eff":63,Prelude:146}],3:[function(require,module,exports){function emptyFunction(){}var ga=window.ga||emptyFunction;function fnOrEmpty(name){return window.FlurryAgent?window.FlurryAgent[name]:emptyFunction}function event(category,action,label,value){ga("send","event",category,action,label,value)}function pageView(url){ga("send","pageview",url)}function set(name,value){ga("set",name,value)}exports._event=event;exports._pageView=pageView;exports._set=set},{}],4:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Function_Eff=require("Data.Function.Eff");var Cnst=require("Cnst");var set=Data_Function_Eff.runEffFn2($foreign._set);var setVersion=set("dimension1")(Cnst.fullVersion);var pageView=Data_Function_Eff.runEffFn1($foreign._pageView);var event=Data_Function_Eff.runEffFn4($foreign._event);module.exports={setVersion:setVersion,event:event,pageView:pageView,set:set,_event:$foreign._event,_pageView:$foreign._pageView,_set:$foreign._set}},{"./foreign":3,Cnst:6,"Control.Monad.Eff":26,"Data.Function.Eff":63,Prelude:146}],5:[function(require,module,exports){function openUrl(url){window.open(url)}var lang=window.navigator.userLanguage||window.navigator.language;var isRuLang=lang.toLowerCase().indexOf("ru")>=0;exports.isMobile=window.pixiIsMobile==true;exports.isRu=isRuLang;exports._openUrl=openUrl},{}],6:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Preluder=require("Preluder");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Function_Eff=require("Data.Function.Eff");var Prelude=require("Prelude");var Utls=require("Utls");var wrongEatScore=50;var version="1.0.1";var starCoefs=[.8,.6,.4];var snakeCount=3;var openUrl=Data_Function_Eff.runEffFn1($foreign._openUrl);var minScore=0;var maxStars=3;var maxScore=100;var lifes=3;var itemCount=84;var hiddingModelShowInterval=1e3;var hiddingModeMaxLength=20;var fullVersion=Prelude["++"](Prelude.semigroupString)(Utls.bool("mobile-")("web-")($foreign.isMobile))(version);var firstLockIndex=3;var distancePlus=4;var container=function(){var $0=$foreign.isMobile;if($0){return""}if(!$0){return"convolution-block"}throw new Error("Failed pattern match at Cnst line 39, column 13 - line 39, column 38: "+[$0.constructor.name])}();var androidUrl="https://play.google.com/store/apps/details?id=com.brainexer.convolution";module.exports={container:container,openUrl:openUrl,distancePlus:distancePlus,starCoefs:starCoefs,minScore:minScore,maxScore:maxScore,firstLockIndex:firstLockIndex,maxStars:maxStars,lifes:lifes,hiddingModelShowInterval:hiddingModelShowInterval,hiddingModeMaxLength:hiddingModeMaxLength,wrongEatScore:wrongEatScore,snakeCount:snakeCount,itemCount:itemCount,fullVersion:fullVersion,androidUrl:androidUrl,version:version,isRu:$foreign.isRu,isMobile:$foreign.isMobile,_openUrl:$foreign._openUrl}},{"./foreign":5,"Control.Monad.Eff":26,"Data.Function.Eff":63,Prelude:146,Preluder:147,Utls:169}],7:[function(require,module,exports){"use strict";var Preluder=require("Preluder");var Data_Array_Unsafe=require("Data.Array.Unsafe");var Utils=require("Utils");var Data_Int=require("Data.Int");var Prelude=require("Prelude");var Data_Maybe=require("Data.Maybe");var Cnst=require("Cnst");var Txt=require("Txt");var Utls=require("Utls");var Data_Tuple=require("Data.Tuple");var Data_Array=require("Data.Array");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var Data_String=require("Data.String");var Data_Foldable=require("Data.Foldable");var shortLength=function shortLength(x){return Prelude["/"](Prelude.moduloSemiringInt)(Prelude["*"](Prelude.semiringInt)(Prelude["+"](Prelude.semiringInt)(1)(x))(x))(2)};var newLevelData=function newLevelData(maxLength){return function(roundCount){return function(isHidding){return function(){var maxRound=Prelude["<#>"](Data_Maybe.functorMaybe)(roundCount)(function(x){return function(){var $4=isHidding;if($4){return shortLength(x)}if(!$4){return x}throw new Error("Failed pattern match at Common line 40, column 39 - line 40, column 77: "+[$4.constructor.name]);
}()});var lvl={name:"",id:"",maxLifes:3,maxLength:maxLength,maxRound:maxRound,roundCount:roundCount,maxWrongFood:new Data_Maybe.Just(1),hiddingMode:isHidding,snakeCount:1};return lvl}()}}};var shorts=Prelude["<#>"](Prelude.functorArray)([5,7,9])(function(x){return newLevelData(Data_Maybe.Nothing.value)(Prelude["$"](Data_Maybe.Just.create)(x))(true)});var triples=Prelude["<#>"](Prelude.functorArray)([1,2,3])(function(x){return function(){var $5={};for(var $6 in newLevelData(new Data_Maybe.Just(x))(Prelude["$"](Data_Maybe.Just.create)(Prelude["*"](Prelude.semiringInt)(15)(x)))(false)){if(newLevelData(new Data_Maybe.Just(x))(Prelude["$"](Data_Maybe.Just.create)(Prelude["*"](Prelude.semiringInt)(15)(x)))(false).hasOwnProperty($6)){$5[$6]=newLevelData(new Data_Maybe.Just(x))(Prelude["$"](Data_Maybe.Just.create)(Prelude["*"](Prelude.semiringInt)(15)(x)))(false)[$6]}}$5.snakeCount=3;return $5}()});var nbacks=Prelude["<#>"](Prelude.functorArray)([2,4,6])(function(x){return newLevelData(new Data_Maybe.Just(x))(Prelude["$"](Data_Maybe.Just.create)(Prelude["*"](Prelude.semiringInt)(5)(x)))(false)});var nbackMaxRounds=15;var maxScore=function maxScore(lvl){return Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(lvl.roundCount)(function(x){return Prelude["*"](Prelude.semiringInt)(Cnst.maxScore)(x)}))(Data_Maybe.fromMaybe(0))};var longs=Prelude["<#>"](Prelude.functorArray)([10,30,50])(function(x){return newLevelData(Data_Maybe.Nothing.value)(new Data_Maybe.Just(x))(false)});var lang=function(){var $7=Cnst.isRu;if($7){return Txt.russian}if(!$7){return Txt.english}throw new Error("Failed pattern match at Common line 80, column 8 - line 80, column 47: "+[$7.constructor.name])}();var getStarScores=function getStarScores(lvl){return function(){var max=Prelude["#"](maxScore(lvl))(Data_Int.toNumber);return Prelude["#"](Cnst.starCoefs)(Utls.zipWithIndex(function(x){return function(i){return new Data_Tuple.Tuple(Prelude["#"](Prelude["*"](Prelude.semiringNumber)(x)(max))(Utils.toInt),Prelude["-"](Prelude.ringInt)(3)(i))}}))}()};var getStars=function getStars(score){return function(lvl){return function(){var scores=getStarScores(lvl);return Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(Prelude["#"](Prelude["#"](scores)(Data_Array.filter(function(x){return Prelude["<="](Prelude.ordInt)(Data_Tuple.fst(x))(score)})))(Data_Array.head))(Data_Tuple.snd))(Data_Maybe.fromMaybe(0))}()}};var getName=function getName(lvl){return function(){var ri=Prelude["#"](lvl.roundCount)(Data_Maybe.fromMaybe(0));return function(){var $8=lvl.hiddingMode;if($8){return Prelude["++"](Prelude.semigroupString)(lang.shortTerm)(Prelude["++"](Prelude.semigroupString)(" ")(Prelude.show(Prelude.showInt)(ri)))}if(!$8){return function(){var $9=Data_Maybe.isNothing(lvl.maxWrongFood);if($9){return Prelude["++"](Prelude.semigroupString)(lang.all)(Prelude["++"](Prelude.semigroupString)(" ")(Prelude.show(Prelude.showInt)(ri)))}if(!$9){return function(){var $10=Prelude["=="](Prelude.eqInt)(lvl.snakeCount)(2);if($10){return Prelude["++"](Prelude.semigroupString)(lang["double"])(Prelude["++"](Prelude.semigroupString)(" ")(Prelude["$"](Prelude.show(Prelude.showInt))(Prelude["#"](lvl.maxLength)(Data_Maybe_Unsafe.fromJust))))}if(!$10){return function(){var $11=Prelude["=="](Prelude.eqInt)(lvl.snakeCount)(3);if($11){return Prelude["++"](Prelude.semigroupString)(lang.triple)(Prelude["++"](Prelude.semigroupString)(" ")(Prelude["$"](Prelude.show(Prelude.showInt))(Prelude["#"](lvl.maxLength)(Data_Maybe_Unsafe.fromJust))))}if(!$11){return function(){var $12=Data_Maybe.isNothing(lvl.maxLength);if($12){return Prelude["++"](Prelude.semigroupString)(lang.longTerm)(Prelude["++"](Prelude.semigroupString)(" ")(Prelude.show(Prelude.showInt)(ri)))}if(!$12){return function(){var $13=Data_Maybe.isJust(lvl.maxLength);if($13){return Prelude["++"](Prelude.semigroupString)(lang.nback)(Prelude["++"](Prelude.semigroupString)(" ")(Prelude["$"](Prelude.show(Prelude.showInt))(Prelude["#"](lvl.maxLength)(Data_Maybe_Unsafe.fromJust))))}if(!$13){return""}throw new Error("Failed pattern match at Common line 49, column 8 - line 51, column 3: "+[$13.constructor.name])}()}throw new Error("Failed pattern match at Common line 48, column 8 - line 51, column 3: "+[$12.constructor.name])}()}throw new Error("Failed pattern match at Common line 47, column 8 - line 51, column 3: "+[$11.constructor.name])}()}throw new Error("Failed pattern match at Common line 46, column 8 - line 51, column 3: "+[$10.constructor.name])}()}throw new Error("Failed pattern match at Common line 45, column 8 - line 51, column 3: "+[$9.constructor.name])}()}throw new Error("Failed pattern match at Common line 44, column 3 - line 51, column 3: "+[$8.constructor.name])}()}()};var doubles=Prelude["<#>"](Prelude.functorArray)([1,2,3])(function(x){return function(){var $14={};for(var $15 in newLevelData(new Data_Maybe.Just(x))(Prelude["$"](Data_Maybe.Just.create)(Prelude["*"](Prelude.semiringInt)(10)(x)))(false)){if(newLevelData(new Data_Maybe.Just(x))(Prelude["$"](Data_Maybe.Just.create)(Prelude["*"](Prelude.semiringInt)(10)(x)))(false).hasOwnProperty($15)){$14[$15]=newLevelData(new Data_Maybe.Just(x))(Prelude["$"](Data_Maybe.Just.create)(Prelude["*"](Prelude.semiringInt)(10)(x)))(false)[$15]}}$14.snakeCount=2;return $14}()});var b2i=function b2i(b){return function(){var $16=b;if($16){return 1}if(!$16){return 0}throw new Error("Failed pattern match at Common line 34, column 9 - line 35, column 1: "+[$16.constructor.name])}()};var getLevelId=function getLevelId(lvl){return Prelude["#"](Prelude["#"](Prelude["<#>"](Prelude.functorArray)([lvl.maxLength,lvl.roundCount,lvl.maxWrongFood,new Data_Maybe.Just(lvl.snakeCount),Prelude["$"](Data_Maybe.Just.create)(b2i(lvl.hiddingMode))])(Prelude[">>>"](Prelude.semigroupoidFn)(Data_Maybe.fromMaybe(0))(Prelude.show(Prelude.showInt))))(Data_Array[":"]("l")))(Data_String.joinWith("-"))};var alls=Prelude["<#>"](Prelude.functorArray)([10,20,30])(function(x){return function(){var $17={};for(var $18 in newLevelData(Data_Maybe.Nothing.value)(new Data_Maybe.Just(x))(false)){if(newLevelData(Data_Maybe.Nothing.value)(new Data_Maybe.Just(x))(false).hasOwnProperty($18)){$17[$18]=newLevelData(Data_Maybe.Nothing.value)(new Data_Maybe.Just(x))(false)[$18]}}$17.maxWrongFood=Data_Maybe.Nothing.value;return $17}()});var all=[longs,nbacks,shorts,doubles,alls,triples];var allLevels=Prelude["<#>"](Prelude.functorArray)(Prelude["#"](Data_Array[".."](0)(2))(Data_Array.concatMap(function(i){return Prelude["<#>"](Prelude.functorArray)(all)(function(a){return Data_Array_Unsafe.unsafeIndex(a)(i)})})))(function(x){return function(){var $19={};for(var $20 in x){if(x.hasOwnProperty($20)){$19[$20]=x[$20]}}$19.id=getLevelId(x);$19.name=getName(x);return $19}()});var levelById=function levelById(levelId){return Prelude["#"](Prelude["#"](allLevels)(Data_Foldable.find(Data_Foldable.foldableArray)(Prelude[">>>"](Prelude.semigroupoidFn)(function(v){return v.id})(function(v){return Prelude["=="](Prelude.eqString)(v)(levelId)}))))(Data_Maybe_Unsafe.fromJust)};var levels=Prelude["#"](allLevels)(Data_Array.filter(Prelude[">>>"](Prelude.semigroupoidFn)(function(v){return v.maxRound})(Data_Maybe.isJust)));var scoreAttacks=Prelude["#"](allLevels)(Data_Array.filter(Prelude[">>>"](Prelude.semigroupoidFn)(function(v){return v.maxRound})(Data_Maybe.isNothing)));module.exports={lang:lang,levelById:levelById,scoreAttacks:scoreAttacks,levels:levels,allLevels:allLevels,all:all,triples:triples,alls:alls,doubles:doubles,shorts:shorts,nbacks:nbacks,longs:longs,nbackMaxRounds:nbackMaxRounds,shortLength:shortLength,getName:getName,newLevelData:newLevelData,getLevelId:getLevelId,b2i:b2i,getStars:getStars,getStarScores:getStarScores,maxScore:maxScore}},{Cnst:6,"Data.Array":48,"Data.Array.Unsafe":46,"Data.Foldable":61,"Data.Int":74,"Data.Maybe":107,"Data.Maybe.Unsafe":106,"Data.String":130,"Data.Tuple":134,Prelude:146,Preluder:147,Txt:164,Utils:167,Utls:169}],8:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Alt=function Alt(__superclass_Prelude$dotFunctor_0,alt){this["__superclass_Prelude.Functor_0"]=__superclass_Prelude$dotFunctor_0;this.alt=alt};var altArray=new Alt(function(){return Prelude.functorArray},Prelude.append(Prelude.semigroupArray));var alt=function alt(dict){return dict.alt};var $less$bar$greater=function $less$bar$greater(dictAlt){return alt(dictAlt)};module.exports={Alt:Alt,"<|>":$less$bar$greater,alt:alt,altArray:altArray}},{Prelude:146}],9:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Plus=require("Control.Plus");var Alternative=function Alternative(__superclass_Control$dotPlus$dotPlus_1,__superclass_Prelude$dotApplicative_0){this["__superclass_Control.Plus.Plus_1"]=__superclass_Control$dotPlus$dotPlus_1;this["__superclass_Prelude.Applicative_0"]=__superclass_Prelude$dotApplicative_0};var alternativeArray=new Alternative(function(){return Control_Plus.plusArray},function(){return Prelude.applicativeArray});module.exports={Alternative:Alternative,alternativeArray:alternativeArray}},{"Control.Plus":39,Prelude:146}],10:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var $less$times=function $less$times(dictApply){return function(a){return function(b){return Prelude["<*>"](dictApply)(Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(Prelude["const"])(a))(b)}}};var $times$greater=function $times$greater(dictApply){return function(a){return function(b){return Prelude["<*>"](dictApply)(Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(Prelude["const"](Prelude.id(Prelude.categoryFn)))(a))(b)}}};var lift5=function lift5(dictApply){return function(f){return function(a){return function(b){return function(c){return function(d){return function(e){return Prelude["<*>"](dictApply)(Prelude["<*>"](dictApply)(Prelude["<*>"](dictApply)(Prelude["<*>"](dictApply)(Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(f)(a))(b))(c))(d))(e)}}}}}}};var lift4=function lift4(dictApply){return function(f){return function(a){return function(b){return function(c){return function(d){return Prelude["<*>"](dictApply)(Prelude["<*>"](dictApply)(Prelude["<*>"](dictApply)(Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(f)(a))(b))(c))(d)}}}}}};var lift3=function lift3(dictApply){return function(f){return function(a){return function(b){return function(c){return Prelude["<*>"](dictApply)(Prelude["<*>"](dictApply)(Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(f)(a))(b))(c)}}}}};var lift2=function lift2(dictApply){return function(f){return function(a){return function(b){return Prelude["<*>"](dictApply)(Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(f)(a))(b)}}}};module.exports={lift5:lift5,lift4:lift4,lift3:lift3,lift2:lift2,"*>":$times$greater,"<*":$less$times}},{Prelude:146}],11:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Biapply=require("Control.Biapply");var Biapplicative=function Biapplicative(__superclass_Control$dotBiapply$dotBiapply_0,bipure){this["__superclass_Control.Biapply.Biapply_0"]=__superclass_Control$dotBiapply$dotBiapply_0;this.bipure=bipure};var bipure=function bipure(dict){return dict.bipure};module.exports={Biapplicative:Biapplicative,bipure:bipure}},{"Control.Biapply":12,Prelude:146}],12:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Bifunctor=require("Data.Bifunctor");var Biapply=function Biapply(__superclass_Data$dotBifunctor$dotBifunctor_0,biapply){this["__superclass_Data.Bifunctor.Bifunctor_0"]=__superclass_Data$dotBifunctor$dotBifunctor_0;this.biapply=biapply};var $less$less$dollar$greater$greater=Prelude.id(Prelude.categoryFn);var biapply=function biapply(dict){return dict.biapply};var $less$less$times$greater$greater=function $less$less$times$greater$greater(dictBiapply){return biapply(dictBiapply)};var bilift2=function bilift2(dictBiapply){return function(f){return function(g){return function(a){return function(b){return $less$less$times$greater$greater(dictBiapply)($less$less$dollar$greater$greater(Data_Bifunctor.bimap(dictBiapply["__superclass_Data.Bifunctor.Bifunctor_0"]())(f)(g))(a))(b)}}}}};var bilift3=function bilift3(dictBiapply){return function(f){return function(g){return function(a){return function(b){return function(c){return $less$less$times$greater$greater(dictBiapply)($less$less$times$greater$greater(dictBiapply)($less$less$dollar$greater$greater(Data_Bifunctor.bimap(dictBiapply["__superclass_Data.Bifunctor.Bifunctor_0"]())(f)(g))(a))(b))(c)}}}}}};var $times$greater$greater=function $times$greater$greater(dictBiapply){return function(a){return function(b){return $less$less$times$greater$greater(dictBiapply)($less$less$dollar$greater$greater(Data_Bifunctor.bimap(dictBiapply["__superclass_Data.Bifunctor.Bifunctor_0"]())(Prelude["const"](Prelude.id(Prelude.categoryFn)))(Prelude["const"](Prelude.id(Prelude.categoryFn))))(a))(b)}}};var $less$less$times=function $less$less$times(dictBiapply){return function(a){return function(b){return $less$less$times$greater$greater(dictBiapply)($less$less$dollar$greater$greater(Data_Bifunctor.bimap(dictBiapply["__superclass_Data.Bifunctor.Bifunctor_0"]())(Prelude["const"])(Prelude["const"]))(a))(b)}}};module.exports={Biapply:Biapply,bilift3:bilift3,bilift2:bilift2,"<<*":$less$less$times,"*>>":$times$greater$greater,"<<*>>":$less$less$times$greater$greater,biapply:biapply,"<<$>>":$less$less$dollar$greater$greater}},{"Data.Bifunctor":50,Prelude:146}],13:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var $greater$eq$greater=function $greater$eq$greater(dictBind){return function(f){return function(g){return function(a){return Prelude[">>="](dictBind)(f(a))(g)}}}};var $eq$less$less=function $eq$less$less(dictBind){return function(f){return function(m){return Prelude[">>="](dictBind)(m)(f)}}};var $less$eq$less=function $less$eq$less(dictBind){return function(f){return function(g){return function(a){return $eq$less$less(dictBind)(f)(g(a))}}}};var join=function join(dictBind){return function(m){return Prelude[">>="](dictBind)(m)(Prelude.id(Prelude.categoryFn))}};var ifM=function ifM(dictBind){return function(cond){return function(t){return function(f){return Prelude[">>="](dictBind)(cond)(function(cond$prime){if(cond$prime){return t}if(!cond$prime){return f}throw new Error("Failed pattern match at Control.Bind line 45, column 35 - line 45, column 56: "+[cond$prime.constructor.name])})}}}};module.exports={ifM:ifM,join:join,"<=<":$less$eq$less,">=>":$greater$eq$greater,"=<<":$eq$less$less}},{Prelude:146}],14:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Extend=require("Control.Extend");var Comonad=function Comonad(__superclass_Control$dotExtend$dotExtend_0,extract){this["__superclass_Control.Extend.Extend_0"]=__superclass_Control$dotExtend$dotExtend_0;this.extract=extract};var extract=function extract(dict){return dict.extract};module.exports={Comonad:Comonad,extract:extract}},{"Control.Extend":15,Prelude:146}],15:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Extend=function Extend(__superclass_Prelude$dotFunctor_0,extend){this["__superclass_Prelude.Functor_0"]=__superclass_Prelude$dotFunctor_0;this.extend=extend};var extendFn=function extendFn(dictSemigroup){return new Extend(function(){return Prelude.functorFn},function(f){return function(g){return function(w){return f(function(w$prime){return g(Prelude["<>"](dictSemigroup)(w)(w$prime))})}}})};var extend=function extend(dict){return dict.extend};var $less$less$eq=function $less$less$eq(dictExtend){return extend(dictExtend)};var $eq$less$eq=function $eq$less$eq(dictExtend){return function(f){return function(g){return function(w){return f($less$less$eq(dictExtend)(g)(w))}}}};var $eq$greater$eq=function $eq$greater$eq(dictExtend){return function(f){return function(g){return function(w){return g($less$less$eq(dictExtend)(f)(w))}}}};var $eq$greater$greater=function $eq$greater$greater(dictExtend){return function(w){return function(f){return $less$less$eq(dictExtend)(f)(w)}}};var duplicate=function duplicate(dictExtend){return extend(dictExtend)(Prelude.id(Prelude.categoryFn))};module.exports={Extend:Extend,duplicate:duplicate,"=<=":$eq$less$eq,"=>=":$eq$greater$eq,"=>>":$eq$greater$greater,"<<=":$less$less$eq,extend:extend,extendFn:extendFn}},{Prelude:146}],16:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Lazy=function Lazy(defer){this.defer=defer};var defer=function defer(dict){return dict.defer};var fix=function fix(dictLazy){return function(f){return defer(dictLazy)(function(v){return f(fix(dictLazy)(f))})}};module.exports={Lazy:Lazy,fix:fix,defer:defer}},{Prelude:146}],17:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var MonadCont=function MonadCont(__superclass_Prelude$dotMonad_0,callCC){this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0;this.callCC=callCC};var callCC=function callCC(dict){return dict.callCC};module.exports={MonadCont:MonadCont,callCC:callCC}},{Prelude:146}],18:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var MonadEff=function MonadEff(__superclass_Prelude$dotMonad_0,liftEff){this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0;this.liftEff=liftEff};var monadEffEff=new MonadEff(function(){return Control_Monad_Eff.monadEff},Prelude.id(Prelude.categoryFn));var liftEff=function liftEff(dict){return dict.liftEff};module.exports={MonadEff:MonadEff,liftEff:liftEff,monadEffEff:monadEffEff}},{"Control.Monad.Eff":26,Prelude:146}],19:[function(require,module,exports){"use strict";exports.random=Math.random},{}],20:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Int=require("Data.Int");var randomRange=function randomRange(min){return function(max){return function __do(){var v=$foreign.random();return v*(max-min)+min}}};var randomInt=function randomInt(low){return function(high){return function __do(){var v=$foreign.random();var asNumber=(Data_Int.toNumber(high)-Data_Int.toNumber(low)+1)*v+Data_Int.toNumber(low);return Data_Int.floor(asNumber)}}};var randomBool=Prelude["<$>"](Control_Monad_Eff.functorEff)(function(v){return v<.5})($foreign.random);module.exports={randomBool:randomBool,randomRange:randomRange,randomInt:randomInt,random:$foreign.random}},{"./foreign":19,"Control.Monad.Eff":26,"Data.Int":74,Prelude:146}],21:[function(require,module,exports){"use strict";exports.newRef=function(val){return function(){return{value:val}}};exports.readRef=function(ref){return function(){return ref.value}};exports["modifyRef'"]=function(ref){return function(f){return function(){var t=f(ref.value);ref.value=t.state;return t.value}}};exports.writeRef=function(ref){return function(val){return function(){ref.value=val;return{}}}}},{}],22:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var modifyRef=function modifyRef(ref){return function(f){return $foreign["modifyRef'"](ref)(function(s){return{state:f(s),value:Prelude.unit}})}};module.exports={modifyRef:modifyRef,writeRef:$foreign.writeRef,"modifyRef'":$foreign["modifyRef'"],readRef:$foreign.readRef,newRef:$foreign.newRef}},{"./foreign":21,"Control.Monad.Eff":26,Prelude:146}],23:[function(require,module,exports){"use strict";exports.unsafeInterleaveEff=function(f){return f}},{}],24:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var unsafePerformEff=function unsafePerformEff($0){return Control_Monad_Eff.runPure($foreign.unsafeInterleaveEff($0))};module.exports={unsafePerformEff:unsafePerformEff,unsafeInterleaveEff:$foreign.unsafeInterleaveEff}},{"./foreign":23,"Control.Monad.Eff":26,Prelude:146}],25:[function(require,module,exports){"use strict";exports.returnE=function(a){return function(){return a}};exports.bindE=function(a){return function(f){return function(){return f(a())()}}};exports.runPure=function(f){return f()};exports.untilE=function(f){return function(){while(!f()){}return{}}};exports.whileE=function(f){return function(a){return function(){while(f()){a()}return{}}}};exports.forE=function(lo){return function(hi){return function(f){return function(){for(var i=lo;i<hi;i++){f(i)()}}}}};exports.foreachE=function(as){return function(f){return function(){for(var i=0,l=as.length;i<l;i++){f(as[i])()}}}}},{}],26:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var monadEff=new Prelude.Monad(function(){return applicativeEff},function(){return bindEff});var bindEff=new Prelude.Bind(function(){return applyEff},$foreign.bindE);var applyEff=new Prelude.Apply(function(){return functorEff},Prelude.ap(monadEff));var applicativeEff=new Prelude.Applicative(function(){return applyEff},$foreign.returnE);var functorEff=new Prelude.Functor(Prelude.liftA1(applicativeEff));module.exports={functorEff:functorEff,applyEff:applyEff,applicativeEff:applicativeEff,bindEff:bindEff,monadEff:monadEff,foreachE:$foreign.foreachE,forE:$foreign.forE,whileE:$foreign.whileE,untilE:$foreign.untilE,runPure:$foreign.runPure}},{"./foreign":25,Prelude:146}],27:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Maybe=require("Data.Maybe");var Data_Either=require("Data.Either");var MonadError=function MonadError(__superclass_Prelude$dotMonad_0,catchError,throwError){this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0;this.catchError=catchError;this.throwError=throwError};var throwError=function throwError(dict){return dict.throwError};var monadErrorMaybe=new MonadError(function(){return Data_Maybe.monadMaybe},function(v){return function(v1){if(v instanceof Data_Maybe.Nothing){return v1(Prelude.unit)}if(v instanceof Data_Maybe.Just){return new Data_Maybe.Just(v.value0)}throw new Error("Failed pattern match at Control.Monad.Error.Class line 53, column 3 - line 54, column 3: "+[v.constructor.name,v1.constructor.name])}},Prelude["const"](Data_Maybe.Nothing.value));var monadErrorEither=new MonadError(function(){return Data_Either.monadEither},function(v){return function(v1){if(v instanceof Data_Either.Left){return v1(v.value0)}if(v instanceof Data_Either.Right){return new Data_Either.Right(v.value0)}throw new Error("Failed pattern match at Control.Monad.Error.Class line 48, column 3 - line 49, column 3: "+[v.constructor.name,v1.constructor.name])}},Data_Either.Left.create);var catchError=function catchError(dict){return dict.catchError};var catchJust=function catchJust(dictMonadError){return function(p){return function(act){return function(handler){var handle=function handle(e){var $12=p(e);if($12 instanceof Data_Maybe.Nothing){return throwError(dictMonadError)(e)}if($12 instanceof Data_Maybe.Just){return handler($12.value0)}throw new Error("Failed pattern match at Control.Monad.Error.Class line 42, column 5 - line 46, column 1: "+[$12.constructor.name])};return catchError(dictMonadError)(act)(handle)}}}};module.exports={MonadError:MonadError,catchJust:catchJust,catchError:catchError,throwError:throwError,monadErrorEither:monadErrorEither,monadErrorMaybe:monadErrorMaybe}},{"Data.Either":57,"Data.Maybe":107,Prelude:146}],28:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var MonadReader=function MonadReader(__superclass_Prelude$dotMonad_0,ask,local){this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0;this.ask=ask;this.local=local};var monadReaderFun=new MonadReader(function(){return Prelude.monadFn},Prelude.id(Prelude.categoryFn),Prelude[">>>"](Prelude.semigroupoidFn));var local=function local(dict){return dict.local};var ask=function ask(dict){return dict.ask};var reader=function reader(dictMonadReader){return function(f){return Prelude[">>="](dictMonadReader["__superclass_Prelude.Monad_0"]()["__superclass_Prelude.Bind_1"]())(ask(dictMonadReader))(function($1){return Prelude["return"](dictMonadReader["__superclass_Prelude.Monad_0"]()["__superclass_Prelude.Applicative_0"]())(f($1))})}};module.exports={MonadReader:MonadReader,reader:reader,local:local,ask:ask,monadReaderFun:monadReaderFun}},{Prelude:146}],29:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Monad_ST=require("Control.Monad.ST");var Data_Either=require("Data.Either");var Data_Functor=require("Data.Functor");var Data_Identity=require("Data.Identity");var Control_Monad_Eff_Unsafe=require("Control.Monad.Eff.Unsafe");var Data_Either_Unsafe=require("Data.Either.Unsafe");var MonadRec=function MonadRec(__superclass_Prelude$dotMonad_0,tailRecM){this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0;this.tailRecM=tailRecM};var tailRecM=function tailRecM(dict){return dict.tailRecM};var tailRecM2=function tailRecM2(dictMonadRec){return function(f){return function(a){return function(b){return tailRecM(dictMonadRec)(function(o){return f(o.a)(o.b)})({a:a,b:b})}}}};var tailRecM3=function tailRecM3(dictMonadRec){return function(f){return function(a){return function(b){return function(c){return tailRecM(dictMonadRec)(function(o){return f(o.a)(o.b)(o.c)})({a:a,b:b,c:c})}}}}};var tailRecEff=function tailRecEff(f){return function(a){var f$prime=function f$prime($18){return Control_Monad_Eff_Unsafe.unsafeInterleaveEff(f($18))};return function __do(){var v=f$prime(a)();var v1={value:v};(function(){while(!function __do(){var v2=v1.value;if(v2 instanceof Data_Either.Left){var v3=f$prime(v2.value0)();v1.value=v3;return false}if(v2 instanceof Data_Either.Right){return true}throw new Error("Failed pattern match at Control.Monad.Rec.Class line 81, column 5 - line 86, column 3: "+[v2.constructor.name])}()){}return{}})();return Prelude["<$>"](Control_Monad_Eff.functorEff)(Data_Either_Unsafe.fromRight)(Control_Monad_ST.readSTRef(v1))()}}};var tailRec=function tailRec(f){return function(a){var go=function go(__copy_v){var v=__copy_v;tco:while(true){if(v instanceof Data_Either.Left){var __tco_v=f(v.value0);v=__tco_v;continue tco}if(v instanceof Data_Either.Right){return v.value0}throw new Error("Failed pattern match at Control.Monad.Rec.Class line 64, column 1 - line 69, column 1: "+[v.constructor.name])}};return go(f(a))}};var monadRecIdentity=new MonadRec(function(){return Data_Identity.monadIdentity},function(f){return function($19){return Data_Identity.Identity(tailRec(function($20){return Data_Identity.runIdentity(f($20))})($19))}});var monadRecEff=new MonadRec(function(){return Control_Monad_Eff.monadEff},tailRecEff);var forever=function forever(dictMonadRec){return function(ma){return tailRecM(dictMonadRec)(function(u){return Data_Functor["<$"](dictMonadRec["__superclass_Prelude.Monad_0"]()["__superclass_Prelude.Bind_1"]()["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(new Data_Either.Left(u))(ma)})(Prelude.unit)}};module.exports={MonadRec:MonadRec,forever:forever,tailRecM3:tailRecM3,tailRecM2:tailRecM2,tailRecM:tailRecM,tailRec:tailRec,monadRecIdentity:monadRecIdentity,monadRecEff:monadRecEff}},{"Control.Monad.Eff":26,"Control.Monad.Eff.Unsafe":24,"Control.Monad.ST":31,"Data.Either":57,"Data.Either.Unsafe":56,"Data.Functor":69,"Data.Identity":70,Prelude:146}],30:[function(require,module,exports){"use strict";exports.newSTRef=function(val){return function(){return{value:val}}};exports.readSTRef=function(ref){return function(){return ref.value}};exports.modifySTRef=function(ref){return function(f){return function(){return ref.value=f(ref.value)}}};exports.writeSTRef=function(ref){return function(a){return function(){return ref.value=a}}};exports.runST=function(f){return f}},{}],31:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var pureST=function pureST(st){return Control_Monad_Eff.runPure($foreign.runST(st))};module.exports={pureST:pureST,runST:$foreign.runST,writeSTRef:$foreign.writeSTRef,modifySTRef:$foreign.modifySTRef,readSTRef:$foreign.readSTRef,newSTRef:$foreign.newSTRef}},{"./foreign":30,"Control.Monad.Eff":26,Prelude:146}],32:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Tuple=require("Data.Tuple");var MonadState=function MonadState(__superclass_Prelude$dotMonad_0,state){this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0;this.state=state};var state=function state(dict){return dict.state};var put=function put(dictMonadState){return function(s){return state(dictMonadState)(function(v){return new Data_Tuple.Tuple(Prelude.unit,s)})}};var modify=function modify(dictMonadState){return function(f){return state(dictMonadState)(function(s){return new Data_Tuple.Tuple(Prelude.unit,f(s))})}};var gets=function gets(dictMonadState){return function(f){return state(dictMonadState)(function(s){return new Data_Tuple.Tuple(f(s),s)})}};var get=function get(dictMonadState){return state(dictMonadState)(function(s){return new Data_Tuple.Tuple(s,s)})};module.exports={MonadState:MonadState,modify:modify,put:put,gets:gets,get:get,state:state}},{"Data.Tuple":134,Prelude:146}],33:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Tuple=require("Data.Tuple");var Data_Either=require("Data.Either");var Control_Alt=require("Control.Alt");var Control_Alternative=require("Control.Alternative");var Control_Lazy=require("Control.Lazy");var Control_Monad_Cont_Class=require("Control.Monad.Cont.Class");var Control_Monad_Eff_Class=require("Control.Monad.Eff.Class");var Control_Monad_Error_Class=require("Control.Monad.Error.Class");var Control_Monad_Reader_Class=require("Control.Monad.Reader.Class");var Control_Monad_Rec_Class=require("Control.Monad.Rec.Class");var Control_Monad_State_Class=require("Control.Monad.State.Class");var Control_Monad_Trans=require("Control.Monad.Trans");var Control_Monad_Writer_Class=require("Control.Monad.Writer.Class");var Control_MonadPlus=require("Control.MonadPlus");var Control_Plus=require("Control.Plus");var StateT=function StateT(x){return x};var runStateT=function runStateT(v){return v};var withStateT=function withStateT(f){return function(s){return StateT(function($60){return runStateT(s)(f($60))})}};var monadTransStateT=new Control_Monad_Trans.MonadTrans(function(dictMonad){return function(m){return function(s){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(m)(function(v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(new Data_Tuple.Tuple(v,s))})}}});var mapStateT=function mapStateT(f){return function(m){return StateT(function($61){return f(runStateT(m)($61))})}};var lazyStateT=new Control_Lazy.Lazy(function(f){return StateT(function(s){return runStateT(f(Prelude.unit))(s)})});var execStateT=function execStateT(dictApply){return function(m){return function(s){return Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(Data_Tuple.snd)(runStateT(m)(s))}}};var evalStateT=function evalStateT(dictApply){return function(m){return function(s){return Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(Data_Tuple.fst)(runStateT(m)(s))}}};var monadStateT=function monadStateT(dictMonad){return new Prelude.Monad(function(){return applicativeStateT(dictMonad)},function(){return bindStateT(dictMonad)})};var functorStateT=function functorStateT(dictMonad){return new Prelude.Functor(Prelude.liftM1(monadStateT(dictMonad)))};var bindStateT=function bindStateT(dictMonad){return new Prelude.Bind(function(){return applyStateT(dictMonad)},function(v){
return function(f){return function(s){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(v(s))(function(v1){return runStateT(f(v1.value0))(v1.value1)})}}})};var applyStateT=function applyStateT(dictMonad){return new Prelude.Apply(function(){return functorStateT(dictMonad)},Prelude.ap(monadStateT(dictMonad)))};var applicativeStateT=function applicativeStateT(dictMonad){return new Prelude.Applicative(function(){return applyStateT(dictMonad)},function(a){return StateT(function(s){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(new Data_Tuple.Tuple(a,s))})})};var monadContStateT=function monadContStateT(dictMonadCont){return new Control_Monad_Cont_Class.MonadCont(function(){return monadStateT(dictMonadCont["__superclass_Prelude.Monad_0"]())},function(f){return StateT(function(s){return Control_Monad_Cont_Class.callCC(dictMonadCont)(function(c){return runStateT(f(function(a){return StateT(function(s$prime){return c(new Data_Tuple.Tuple(a,s$prime))})}))(s)})})})};var monadEffState=function monadEffState(dictMonad){return function(dictMonadEff){return new Control_Monad_Eff_Class.MonadEff(function(){return monadStateT(dictMonad)},function($62){return Control_Monad_Trans.lift(monadTransStateT)(dictMonad)(Control_Monad_Eff_Class.liftEff(dictMonadEff)($62))})}};var monadErrorStateT=function monadErrorStateT(dictMonadError){return new Control_Monad_Error_Class.MonadError(function(){return monadStateT(dictMonadError["__superclass_Prelude.Monad_0"]())},function(m){return function(h){return StateT(function(s){return Control_Monad_Error_Class.catchError(dictMonadError)(runStateT(m)(s))(function(e){return runStateT(h(e))(s)})})}},function(e){return Control_Monad_Trans.lift(monadTransStateT)(dictMonadError["__superclass_Prelude.Monad_0"]())(Control_Monad_Error_Class.throwError(dictMonadError)(e))})};var monadReaderStateT=function monadReaderStateT(dictMonadReader){return new Control_Monad_Reader_Class.MonadReader(function(){return monadStateT(dictMonadReader["__superclass_Prelude.Monad_0"]())},Control_Monad_Trans.lift(monadTransStateT)(dictMonadReader["__superclass_Prelude.Monad_0"]())(Control_Monad_Reader_Class.ask(dictMonadReader)),function(f){return mapStateT(Control_Monad_Reader_Class.local(dictMonadReader)(f))})};var monadRecStateT=function monadRecStateT(dictMonadRec){return new Control_Monad_Rec_Class.MonadRec(function(){return monadStateT(dictMonadRec["__superclass_Prelude.Monad_0"]())},function(f){return function(a){var f$prime=function f$prime(v){return Prelude.bind(dictMonadRec["__superclass_Prelude.Monad_0"]()["__superclass_Prelude.Bind_1"]())(runStateT(f(v.value0))(v.value1))(function(v1){return Prelude["return"](dictMonadRec["__superclass_Prelude.Monad_0"]()["__superclass_Prelude.Applicative_0"]())(function(){if(v1.value0 instanceof Data_Either.Left){return new Data_Either.Left(new Data_Tuple.Tuple(v1.value0.value0,v1.value1))}if(v1.value0 instanceof Data_Either.Right){return new Data_Either.Right(new Data_Tuple.Tuple(v1.value0.value0,v1.value1))}throw new Error("Failed pattern match at Control.Monad.State.Trans line 85, column 7 - line 89, column 1: "+[v1.value0.constructor.name])}())})};return function(s){return Control_Monad_Rec_Class.tailRecM(dictMonadRec)(f$prime)(new Data_Tuple.Tuple(a,s))}}})};var monadStateStateT=function monadStateStateT(dictMonad){return new Control_Monad_State_Class.MonadState(function(){return monadStateT(dictMonad)},function(f){return StateT(function($63){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(f($63))})})};var monadWriterStateT=function monadWriterStateT(dictMonad){return function(dictMonadWriter){return new Control_Monad_Writer_Class.MonadWriter(function(){return monadStateT(dictMonad)},function(m){return StateT(function(s){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(Control_Monad_Writer_Class.listen(dictMonadWriter)(runStateT(m)(s)))(function(v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(new Data_Tuple.Tuple(new Data_Tuple.Tuple(v.value0.value0,v.value1),v.value0.value1))})})},function(m){return StateT(function(s){return Control_Monad_Writer_Class.pass(dictMonadWriter)(Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(runStateT(m)(s))(function(v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(new Data_Tuple.Tuple(new Data_Tuple.Tuple(v.value0.value0,v.value1),v.value0.value1))}))})},function(wd){return Control_Monad_Trans.lift(monadTransStateT)(dictMonad)(Control_Monad_Writer_Class.writer(dictMonadWriter)(wd))})}};var altStateT=function altStateT(dictMonad){return function(dictAlt){return new Control_Alt.Alt(function(){return functorStateT(dictMonad)},function(x){return function(y){return StateT(function(s){return Control_Alt["<|>"](dictAlt)(runStateT(x)(s))(runStateT(y)(s))})}})}};var plusStateT=function plusStateT(dictMonad){return function(dictPlus){return new Control_Plus.Plus(function(){return altStateT(dictMonad)(dictPlus["__superclass_Control.Alt.Alt_0"]())},StateT(function(v){return Control_Plus.empty(dictPlus)}))}};var alternativeStateT=function alternativeStateT(dictMonad){return function(dictAlternative){return new Control_Alternative.Alternative(function(){return plusStateT(dictMonad)(dictAlternative["__superclass_Control.Plus.Plus_1"]())},function(){return applicativeStateT(dictMonad)})}};var monadPlusStateT=function monadPlusStateT(dictMonadPlus){return new Control_MonadPlus.MonadPlus(function(){return alternativeStateT(dictMonadPlus["__superclass_Prelude.Monad_0"]())(dictMonadPlus["__superclass_Control.Alternative.Alternative_1"]())},function(){return monadStateT(dictMonadPlus["__superclass_Prelude.Monad_0"]())})};module.exports={StateT:StateT,withStateT:withStateT,mapStateT:mapStateT,execStateT:execStateT,evalStateT:evalStateT,runStateT:runStateT,functorStateT:functorStateT,applyStateT:applyStateT,applicativeStateT:applicativeStateT,altStateT:altStateT,plusStateT:plusStateT,alternativeStateT:alternativeStateT,bindStateT:bindStateT,monadStateT:monadStateT,monadRecStateT:monadRecStateT,monadPlusStateT:monadPlusStateT,monadTransStateT:monadTransStateT,lazyStateT:lazyStateT,monadEffState:monadEffState,monadContStateT:monadContStateT,monadErrorStateT:monadErrorStateT,monadReaderStateT:monadReaderStateT,monadStateStateT:monadStateStateT,monadWriterStateT:monadWriterStateT}},{"Control.Alt":8,"Control.Alternative":9,"Control.Lazy":16,"Control.Monad.Cont.Class":17,"Control.Monad.Eff.Class":18,"Control.Monad.Error.Class":27,"Control.Monad.Reader.Class":28,"Control.Monad.Rec.Class":29,"Control.Monad.State.Class":32,"Control.Monad.Trans":35,"Control.Monad.Writer.Class":36,"Control.MonadPlus":37,"Control.Plus":39,"Data.Either":57,"Data.Tuple":134,Prelude:146}],34:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Monad_State_Class=require("Control.Monad.State.Class");var Control_Monad_State_Trans=require("Control.Monad.State.Trans");var Data_Identity=require("Data.Identity");var Data_Tuple=require("Data.Tuple");var withState=Control_Monad_State_Trans.withStateT;var runState=function runState(s){return function($0){return Data_Identity.runIdentity(Control_Monad_State_Trans.runStateT(s)($0))}};var mapState=function mapState(f){return Control_Monad_State_Trans.mapStateT(function($1){return Data_Identity.Identity(f(Data_Identity.runIdentity($1)))})};var execState=function execState(m){return function(s){return Data_Tuple.snd(runState(m)(s))}};var evalState=function evalState(m){return function(s){return Data_Tuple.fst(runState(m)(s))}};module.exports={withState:withState,mapState:mapState,execState:execState,evalState:evalState,runState:runState}},{"Control.Monad.State.Class":32,"Control.Monad.State.Trans":33,"Data.Identity":70,"Data.Tuple":134,Prelude:146}],35:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var MonadTrans=function MonadTrans(lift){this.lift=lift};var lift=function lift(dict){return dict.lift};module.exports={MonadTrans:MonadTrans,lift:lift}},{Prelude:146}],36:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Monoid=require("Data.Monoid");var Data_Tuple=require("Data.Tuple");var MonadWriter=function MonadWriter(__superclass_Prelude$dotMonad_0,listen,pass,writer){this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0;this.listen=listen;this.pass=pass;this.writer=writer};var writer=function writer(dict){return dict.writer};var tell=function tell(dictMonoid){return function(dictMonad){return function(dictMonadWriter){return function(w){return writer(dictMonadWriter)(new Data_Tuple.Tuple(Prelude.unit,w))}}}};var pass=function pass(dict){return dict.pass};var listen=function listen(dict){return dict.listen};var listens=function listens(dictMonoid){return function(dictMonad){return function(dictMonadWriter){return function(f){return function(m){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(listen(dictMonadWriter)(m))(function(v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(new Data_Tuple.Tuple(v.value0,f(v.value1)))})}}}}};var censor=function censor(dictMonoid){return function(dictMonad){return function(dictMonadWriter){return function(f){return function(m){return pass(dictMonadWriter)(Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(m)(function(v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(new Data_Tuple.Tuple(v,f))}))}}}}};module.exports={MonadWriter:MonadWriter,censor:censor,listens:listens,tell:tell,pass:pass,listen:listen,writer:writer}},{"Data.Monoid":114,"Data.Tuple":134,Prelude:146}],37:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Alternative=require("Control.Alternative");var Control_Plus=require("Control.Plus");var MonadPlus=function MonadPlus(__superclass_Control$dotAlternative$dotAlternative_1,__superclass_Prelude$dotMonad_0){this["__superclass_Control.Alternative.Alternative_1"]=__superclass_Control$dotAlternative$dotAlternative_1;this["__superclass_Prelude.Monad_0"]=__superclass_Prelude$dotMonad_0};var monadPlusArray=new MonadPlus(function(){return Control_Alternative.alternativeArray},function(){return Prelude.monadArray});var guard=function guard(dictMonadPlus){return function(v){if(v){return Prelude["return"](dictMonadPlus["__superclass_Control.Alternative.Alternative_1"]()["__superclass_Prelude.Applicative_0"]())(Prelude.unit)}if(!v){return Control_Plus.empty(dictMonadPlus["__superclass_Control.Alternative.Alternative_1"]()["__superclass_Control.Plus.Plus_1"]())}throw new Error("Failed pattern match at Control.MonadPlus line 36, column 1 - line 37, column 1: "+[v.constructor.name])}};module.exports={MonadPlus:MonadPlus,guard:guard,monadPlusArray:monadPlusArray}},{"Control.Alternative":9,"Control.Plus":39,Prelude:146}],38:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var when=function when(dictMonad){return function(v){return function(v1){if(v){return v1}if(!v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(Prelude.unit)}throw new Error("Failed pattern match at Control.Monad line 9, column 1 - line 10, column 1: "+[v.constructor.name,v1.constructor.name])}}};var unless=function unless(dictMonad){return function(v){return function(v1){if(!v){return v1}if(v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(Prelude.unit)}throw new Error("Failed pattern match at Control.Monad line 14, column 1 - line 15, column 1: "+[v.constructor.name,v1.constructor.name])}}};module.exports={unless:unless,when:when}},{Prelude:146}],39:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Alt=require("Control.Alt");var Plus=function Plus(__superclass_Control$dotAlt$dotAlt_0,empty){this["__superclass_Control.Alt.Alt_0"]=__superclass_Control$dotAlt$dotAlt_0;this.empty=empty};var plusArray=new Plus(function(){return Control_Alt.altArray},[]);var empty=function empty(dict){return dict.empty};module.exports={Plus:Plus,empty:empty,plusArray:plusArray}},{"Control.Alt":8,Prelude:146}],40:[function(require,module,exports){"use strict";var Preluder=require("Preluder");var Sigment_Dom=require("Sigment.Dom");var Sigment_Dom_Props=require("Sigment.Dom.Props");var Sigment_Dom_Tweens=require("Sigment.Dom.Tweens");var Prelude=require("Prelude");var Utls=require("Utls");var Sprites=require("Sprites");var Data_Array=require("Data.Array");var Cnst=require("Cnst");var Data_Maybe=require("Data.Maybe");var width=1920;var widthH=Prelude["/"](Prelude.moduloSemiringInt)(width)(2);var tutorialStyle=Sigment_Dom_Props.style({font:"40px Verdana",fill:"#686868",wordWrap:true,wordWrapWidth:900});var titleStyle=Sigment_Dom_Props.style({font:"120px Verdana",fill:"#686868"});var title=function title(txt2){return Sigment_Dom.text([titleStyle,Sigment_Dom_Props.txt(txt2),Sigment_Dom_Props.anchorCenter,Sigment_Dom_Props.x(Prelude.ringInt)(widthH),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(90)])};var stackV=function stackV(distance){return function(list){return Prelude["#"](list)(Utls.zipWithIndex(function(x){return function(i){return Sigment_Dom.setProps([Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["*"](Prelude.semiringInt)(i)(distance))])(x)}}))}};var stackH=function stackH(distance){return function(list){return Prelude["#"](list)(Utls.zipWithIndex(function(x){return function(i){return Sigment_Dom.setProps([Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["*"](Prelude.semiringInt)(i)(distance))])(x)}}))}};var scoreStyle=Sigment_Dom_Props.style({font:"60px Verdana",fill:"#686868"});var scoreBigStyle=Sigment_Dom_Props.style({font:"100px Verdana",fill:"#686868"});var renderStars2=function renderStars2(props){return function(count){return function(horizontal){return function(){var scale=function(){var $0=horizontal;if($0){return 1}if(!$0){return.4}throw new Error("Failed pattern match at Controls line 33, column 13 - line 35, column 1: "+[$0.constructor.name])}();var renderStar=function renderStar(index){return Sigment_Dom.sprite([Sigment_Dom_Props.scale1(scale),Sigment_Dom_Props.src(function(){var $1=Prelude["<="](Prelude.ordInt)(index)(count);if($1){return Sprites.star}if(!$1){return Sprites.starOut}throw new Error("Failed pattern match at Controls line 31, column 57 - line 31, column 113: "+[$1.constructor.name])}())])};var distance=function(){var $2=horizontal;if($2){return 120}if(!$2){return 35}throw new Error("Failed pattern match at Controls line 32, column 16 - line 33, column 5: "+[$2.constructor.name])}();return Prelude["$"](Sigment_Dom["group'"](props))(Prelude["#"](Prelude["<#>"](Prelude.functorArray)(Data_Array[".."](1)(Cnst.maxStars))(renderStar))(function(){var $3=horizontal;if($3){return stackH}if(!$3){return stackV}throw new Error("Failed pattern match at Controls line 29, column 57 - line 29, column 94: "+[$3.constructor.name])}()(distance)))}()}}};var scoreWithStars=function scoreWithStars(props){return function(count){return function(score){return Sigment_Dom["group'"](props)([renderStars2([Sigment_Dom_Props.y(Prelude.ringInt)(15)])(count)(true),Sigment_Dom.text([Prelude["$"](Sigment_Dom_Props.txt)(Prelude.show(Prelude.showInt)(score)),Sigment_Dom_Props.x(Prelude.ringInt)(400),scoreBigStyle])])}}};var renderStars=function renderStars(props){return function(count){return function(style){return Sigment_Dom["group'"](props)([Sigment_Dom.sprite([Sigment_Dom_Props.src(Sprites.star)]),Sigment_Dom.text([Sigment_Dom_Props.anchorCenter,Sigment_Dom_Props.y(Prelude.ringInt)(45),Sigment_Dom_Props.x(Prelude.ringInt)(150),Prelude["$"](Sigment_Dom_Props.txt)(Prelude["++"](Prelude.semigroupString)(" × ")(Prelude.show(Prelude.showInt)(count))),style])])}}};var me=function me(f){return function(x){return Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(x)(f))(Data_Maybe.fromMaybe(Sigment_Dom.empty))}};var img=function img(src){return function(props){return Prelude["$"](Sigment_Dom.sprite)(Prelude["++"](Prelude.semigroupArray)([Sigment_Dom_Props.src(src)])(props))}};var img1=function img1(str){return img(str)([])};var height=1080;var heightH=Prelude["/"](Prelude.moduloSemiringInt)(height)(2);var stageTween=Sigment_Dom_Tweens.creating([Sigment_Dom_Tweens.from([Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude.negate(Prelude.ringInt)(height))]),Sigment_Dom_Tweens.duration(500),Sigment_Dom_Tweens.easingExponential.out]);var stage=function stage(key){return function(props){return function(children){return Sigment_Dom["group'"](Prelude["++"](Prelude.semigroupArray)([Prelude["$"](Sigment_Dom_Props.key)(Prelude["++"](Prelude.semigroupString)(key)("-stage")),stageTween])(props))(children)}}};var defaultStyle=Sigment_Dom_Props.style({font:"40px Verdana",fill:"#686868"});var txt=function txt(str){return function(props){return Prelude["$"](Sigment_Dom.text)(Prelude["++"](Prelude.semigroupArray)([defaultStyle,Sigment_Dom_Props.txt(str)])(props))}};var txt1=function txt1(str){return txt(str)([])};var centerXY=[Sigment_Dom_Props.pivotCenter,Sigment_Dom_Props.x(Prelude.ringInt)(widthH),Sigment_Dom_Props.y(Prelude.ringInt)(heightH)];var centerX=[Sigment_Dom_Props.pivotCenterX,Sigment_Dom_Props.x(Prelude.ringInt)(widthH)];var buttonWidth=450;var buttonStarStyle=Sigment_Dom_Props.style({font:"bold 40px Verdana",fill:"White"});var buttonHeight=120;var buttonFontSize=function(){var $4=Cnst.isRu;if($4){return"30"}if(!$4){return"40"}throw new Error("Failed pattern match at Controls line 17, column 18 - line 18, column 1: "+[$4.constructor.name])}();var buttonStyle=Sigment_Dom_Props.style({font:Prelude["++"](Prelude.semigroupString)("bold ")(Prelude["++"](Prelude.semigroupString)(buttonFontSize)("px Verdana")),fill:"White"});var button3=function button3(props){return function(control){return function(click){return Sigment_Dom["sprite'"](Prelude["++"](Prelude.semigroupArray)(props)([Sigment_Dom_Props.src(Sprites.button),Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(click)(Sigment_Dom_Props.onMouseOrTouchStart))(Data_Maybe.fromMaybe(Sigment_Dom_Props.none))]))([Prelude["#"](control)(Sigment_Dom.setProps([Sigment_Dom_Props.pivotCenter,Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["/"](Prelude.moduloSemiringInt)(buttonWidth)(2)),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["/"](Prelude.moduloSemiringInt)(buttonHeight)(2))]))])}}};var button=function button(props){return function(txt2){return function(click){return button3(props)(Sigment_Dom.text([buttonStyle,Sigment_Dom_Props.txt(txt2)]))(new Data_Maybe.Just(click))}}};module.exports={me:me,stackV:stackV,stackH:stackH,centerXY:centerXY,centerX:centerX,img1:img1,img:img,txt1:txt1,txt:txt,title:title,button3:button3,button:button,buttonHeight:buttonHeight,buttonWidth:buttonWidth,stage:stage,stageTween:stageTween,renderStars2:renderStars2,scoreWithStars:scoreWithStars,renderStars:renderStars,scoreBigStyle:scoreBigStyle,scoreStyle:scoreStyle,buttonStarStyle:buttonStarStyle,buttonStyle:buttonStyle,buttonFontSize:buttonFontSize,tutorialStyle:tutorialStyle,defaultStyle:defaultStyle,titleStyle:titleStyle,heightH:heightH,widthH:widthH,height:height,width:width}},{Cnst:6,"Data.Array":48,"Data.Maybe":107,Prelude:146,Preluder:147,"Sigment.Dom":157,"Sigment.Dom.Props":153,"Sigment.Dom.Tweens":155,Sprites:161,Utls:169}],41:[function(require,module,exports){"use strict";exports.timeout=function(time){return function(fn){return function(){return setTimeout(function(){fn()},time)}}};exports.clearTimeout=function(timer){return function(){return clearTimeout(timer)}};exports.interval=function(time){return function(fn){return function(){return setInterval(function(){fn()},time)}}};exports.clearInterval=function(timer){return function(){return clearInterval(timer)}}},{}],42:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var delay=function delay(x){return function(cb){return function(a){return $foreign.timeout(x)(cb(a))}}};module.exports={delay:delay,clearInterval:$foreign.clearInterval,interval:$foreign.interval,clearTimeout:$foreign.clearTimeout,timeout:$foreign.timeout}},{"./foreign":41,"Control.Monad.Eff":26,Prelude:146}],43:[function(require,module,exports){"use strict";exports.runSTArray=function(f){return f};exports.emptySTArray=function(){return[]};exports.peekSTArrayImpl=function(just){return function(nothing){return function(xs){return function(i){return function(){return i>=0&&i<xs.length?just(xs[i]):nothing}}}}};exports.pokeSTArray=function(xs){return function(i){return function(a){return function(){var ret=i>=0&&i<xs.length;if(ret)xs[i]=a;return ret}}}};exports.pushAllSTArray=function(xs){return function(as){return function(){return xs.push.apply(xs,as)}}};exports.spliceSTArray=function(xs){return function(i){return function(howMany){return function(bs){return function(){return xs.splice.apply(xs,[i,howMany].concat(bs))}}}}};exports.copyImpl=function(xs){return function(){return xs.slice()}};exports.toAssocArray=function(xs){return function(){var n=xs.length;var as=new Array(n);for(var i=0;i<n;i++){as[i]={value:xs[i],index:i}}return as}}},{}],44:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Monad_ST=require("Control.Monad.ST");var Data_Maybe=require("Data.Maybe");var thaw=$foreign.copyImpl;var pushSTArray=function pushSTArray(arr){return function(a){return $foreign.pushAllSTArray(arr)([a])}};var peekSTArray=$foreign.peekSTArrayImpl(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var freeze=$foreign.copyImpl;module.exports={thaw:thaw,freeze:freeze,pushSTArray:pushSTArray,peekSTArray:peekSTArray,toAssocArray:$foreign.toAssocArray,spliceSTArray:$foreign.spliceSTArray,pushAllSTArray:$foreign.pushAllSTArray,pokeSTArray:$foreign.pokeSTArray,emptySTArray:$foreign.emptySTArray,runSTArray:$foreign.runSTArray}},{"./foreign":43,"Control.Monad.Eff":26,"Control.Monad.ST":31,"Data.Maybe":107,Prelude:146}],45:[function(require,module,exports){"use strict";exports.unsafeIndex=function(xs){return function(n){if(xs.length<=n){throw"unsafeIndex "+n}return xs[n]}}},{}],46:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Data_Array=require("Data.Array");var tail=function tail(xs){return Data_Array.slice(1)(Data_Array.length(xs))(xs)};var last=function last(xs){return $foreign.unsafeIndex(xs)(Prelude["-"](Prelude.ringInt)(Data_Array.length(xs))(1))};var init=function init(xs){return Data_Array.slice(0)(Prelude["-"](Prelude.ringInt)(Data_Array.length(xs))(1))(xs)};var head=function head(xs){return $foreign.unsafeIndex(xs)(0)};module.exports={init:init,last:last,tail:tail,head:head,unsafeIndex:$foreign.unsafeIndex}},{"./foreign":45,"Data.Array":48,Prelude:146}],47:[function(require,module,exports){"use strict";exports.range=function(start){return function(end){var step=start>end?-1:1;var result=[];for(var i=start,n=0;i!==end;i+=step){result[n++]=i}result[n]=i;return result}};exports.replicate=function(n){return function(v){if(n<1)return[];var r=new Array(n);for(var i=0;i<n;i++){r[i]=v}return r}};exports.length=function(xs){return xs.length};exports.cons=function(e){return function(l){return[e].concat(l)}};exports.snoc=function(l){return function(e){var l1=l.slice();l1.push(e);return l1}};exports["uncons'"]=function(empty){return function(next){return function(xs){return xs.length===0?empty({}):next(xs[0])(xs.slice(1))}}};exports.indexImpl=function(just){return function(nothing){return function(xs){return function(i){return i<0||i>=xs.length?nothing:just(xs[i])}}}};exports.findIndexImpl=function(just){return function(nothing){return function(f){return function(xs){for(var i=0,l=xs.length;i<l;i++){if(f(xs[i]))return just(i)}return nothing}}}};exports.findLastIndexImpl=function(just){return function(nothing){return function(f){return function(xs){for(var i=xs.length-1;i>=0;i--){if(f(xs[i]))return just(i)}return nothing}}}};exports._insertAt=function(just){return function(nothing){return function(i){return function(a){return function(l){if(i<0||i>l.length)return nothing;var l1=l.slice();l1.splice(i,0,a);return just(l1)}}}}};exports._deleteAt=function(just){return function(nothing){return function(i){return function(l){if(i<0||i>=l.length)return nothing;var l1=l.slice();l1.splice(i,1);return just(l1)}}}};exports._updateAt=function(just){return function(nothing){return function(i){return function(a){return function(l){if(i<0||i>=l.length)return nothing;var l1=l.slice();l1[i]=a;return just(l1)}}}}};exports.reverse=function(l){return l.slice().reverse()};exports.concat=function(xss){var result=[];for(var i=0,l=xss.length;i<l;i++){var xs=xss[i];for(var j=0,m=xs.length;j<m;j++){result.push(xs[j])}}return result};exports.filter=function(f){return function(xs){return xs.filter(f)}};exports.partition=function(f){return function(xs){var yes=[];var no=[];for(var i=0;i<xs.length;i++){var x=xs[i];if(f(x))yes.push(x);else no.push(x)}return{yes:yes,no:no}}};exports.sortImpl=function(f){return function(l){return l.slice().sort(function(x,y){return f(x)(y)})}};exports.slice=function(s){return function(e){return function(l){return l.slice(s,e)}}};exports.drop=function(n){return function(l){return n<1?l:l.slice(n)}};exports.zipWith=function(f){return function(xs){return function(ys){var l=xs.length<ys.length?xs.length:ys.length;var result=new Array(l);for(var i=0;i<l;i++){result[i]=f(xs[i])(ys[i])}return result}}}},{}],48:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Alt=require("Control.Alt");var Control_Alternative=require("Control.Alternative");var Control_Lazy=require("Control.Lazy");var Control_MonadPlus=require("Control.MonadPlus");var Control_Plus=require("Control.Plus");var Data_Foldable=require("Data.Foldable");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Maybe=require("Data.Maybe");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Data_Tuple=require("Data.Tuple");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var $colon=$foreign.cons;var $dot$dot=$foreign.range;var zipWithA=function zipWithA(dictApplicative){return function(f){return function(xs){return function(ys){return Data_Traversable.sequence(Data_Traversable.traversableArray)(dictApplicative)($foreign.zipWith(f)(xs)(ys))}}}};var zip=$foreign.zipWith(Data_Tuple.Tuple.create);var updateAt=$foreign._updateAt(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var unzip=$foreign["uncons'"](function(v){return new Data_Tuple.Tuple([],[])})(function(v){return function(ts){var $36=unzip(ts);return new Data_Tuple.Tuple($colon(v.value0)($36.value0),$colon(v.value1)($36.value1))}});var uncons=$foreign["uncons'"](Prelude["const"](Data_Maybe.Nothing.value))(function(x){return function(xs){return new Data_Maybe.Just({head:x,tail:xs})}});var take=$foreign.slice(0);var tail=$foreign["uncons'"](Prelude["const"](Data_Maybe.Nothing.value))(function(v){return function(xs){return new Data_Maybe.Just(xs)}});var span=function span(p){var go=function go(__copy_acc){return function(__copy_xs){var acc=__copy_acc;var xs=__copy_xs;tco:while(true){var $42=uncons(xs);if($42 instanceof Data_Maybe.Just&&p($42.value0.head)){var __tco_acc=$colon($42.value0.head)(acc);acc=__tco_acc;xs=$42.value0.tail;continue tco}return{init:$foreign.reverse(acc),rest:xs}}}};return go([])};var takeWhile=function takeWhile(p){return function(xs){return span(p)(xs).init}};var sortBy=function sortBy(comp){return function(xs){var comp$prime=function comp$prime(x){return function(y){var $46=comp(x)(y);if($46 instanceof Prelude.GT){return 1}if($46 instanceof Prelude.EQ){return 0}if($46 instanceof Prelude.LT){return-1}throw new Error("Failed pattern match at Data.Array line 417, column 15 - line 422, column 1: "+[$46.constructor.name])}};return $foreign.sortImpl(comp$prime)(xs)}};var sort=function sort(dictOrd){return function(xs){return sortBy(Prelude.compare(dictOrd))(xs)}};var singleton=function singleton(a){return[a]};var replicateM=function replicateM(dictMonad){return function(n){return function(m){if(n<1){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())([])}if(Prelude.otherwise){return Data_Traversable.sequence(Data_Traversable.traversableArray)(dictMonad["__superclass_Prelude.Applicative_0"]())($foreign.replicate(n)(m))}throw new Error("Failed pattern match at Data.Array line 138, column 1 - line 145, column 1: "+[n.constructor.name,m.constructor.name])}}};var $$null=function $$null(xs){return $foreign.length(xs)===0};var nubBy=function nubBy(eq){return function(xs){var $49=uncons(xs);if($49 instanceof Data_Maybe.Just){return $colon($49.value0.head)(nubBy(eq)($foreign.filter(function(y){return!eq($49.value0.head)(y)})($49.value0.tail)))}if($49 instanceof Data_Maybe.Nothing){return[]}throw new Error("Failed pattern match at Data.Array line 500, column 15 - line 507, column 1: "+[$49.constructor.name])}};var nub=function nub(dictEq){return nubBy(Prelude.eq(dictEq))};var some=function some(dictAlternative){return function(dictLazy){return function(v){return Prelude["<*>"](dictAlternative["__superclass_Prelude.Applicative_0"]()["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictAlternative["__superclass_Control.Plus.Plus_1"]()["__superclass_Control.Alt.Alt_0"]()["__superclass_Prelude.Functor_0"]())($colon)(v))(Control_Lazy.defer(dictLazy)(function(v1){return many(dictAlternative)(dictLazy)(v)}))}}};var many=function many(dictAlternative){return function(dictLazy){return function(v){return Control_Alt["<|>"](dictAlternative["__superclass_Control.Plus.Plus_1"]()["__superclass_Control.Alt.Alt_0"]())(some(dictAlternative)(dictLazy)(v))(Prelude.pure(dictAlternative["__superclass_Prelude.Applicative_0"]())([]))}}};var insertAt=$foreign._insertAt(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var init=function init(xs){if($$null(xs)){return Data_Maybe.Nothing.value}if(Prelude.otherwise){return new Data_Maybe.Just($foreign.slice(0)($foreign.length(xs)-1)(xs))}throw new Error("Failed pattern match at Data.Array line 228, column 1 - line 245, column 1: "+[xs.constructor.name])};var index=$foreign.indexImpl(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var $bang$bang=index;var last=function last(xs){return $bang$bang(xs)($foreign.length(xs)-1)};var modifyAt=function modifyAt(i){return function(f){return function(xs){var go=function go(x){return updateAt(i)(f(x))(xs)};return Data_Maybe.maybe(Data_Maybe.Nothing.value)(go)($bang$bang(xs)(i))}}};var head=$foreign["uncons'"](Prelude["const"](Data_Maybe.Nothing.value))(function(x){return function(v){return new Data_Maybe.Just(x)}});var groupBy=function groupBy(op){var go=function go(__copy_acc){return function(__copy_xs){var acc=__copy_acc;var xs=__copy_xs;tco:while(true){var $54=uncons(xs);if($54 instanceof Data_Maybe.Just){var sp=span(op($54.value0.head))($54.value0.tail);var __tco_acc=$colon($colon($54.value0.head)(sp.init))(acc);acc=__tco_acc;xs=sp.rest;continue tco}if($54 instanceof Data_Maybe.Nothing){return $foreign.reverse(acc)}throw new Error("Failed pattern match at Data.Array line 488, column 15 - line 494, column 1: "+[$54.constructor.name])}}};return go([])};var group=function group(dictEq){return function(xs){return groupBy(Prelude.eq(dictEq))(xs)}};var group$prime=function group$prime(dictOrd){return function($68){return group(dictOrd["__superclass_Prelude.Eq_0"]())(sort(dictOrd)($68))}};var foldM=function foldM(dictMonad){return function(f){return function(a){return $foreign["uncons'"](function(v){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(a)})(function(b){return function(bs){return Prelude[">>="](dictMonad["__superclass_Prelude.Bind_1"]())(f(a)(b))(function(a$prime){
return foldM(dictMonad)(f)(a$prime)(bs)})}})}}};var findLastIndex=$foreign.findLastIndexImpl(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var insertBy=function insertBy(cmp){return function(x){return function(ys){var i=Data_Maybe.maybe(0)(function(v){return v+1|0})(findLastIndex(function(y){return Prelude["=="](Prelude.eqOrdering)(cmp(x)(y))(Prelude.GT.value)})(ys));return Data_Maybe_Unsafe.fromJust(insertAt(i)(x)(ys))}}};var insert=function insert(dictOrd){return insertBy(Prelude.compare(dictOrd))};var findIndex=$foreign.findIndexImpl(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var intersectBy=function intersectBy(eq){return function(xs){return function(ys){return $foreign.filter(function(x){return Data_Maybe.isJust(findIndex(eq(x))(ys))})(xs)}}};var intersect=function intersect(dictEq){return intersectBy(Prelude.eq(dictEq))};var filterM=function filterM(dictMonad){return function(p){return $foreign["uncons'"](function(v){return Prelude.pure(dictMonad["__superclass_Prelude.Applicative_0"]())([])})(function(x){return function(xs){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(p(x))(function(v){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(filterM(dictMonad)(p)(xs))(function(v1){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(function(){if(v){return $colon(x)(v1)}if(!v){return v1}throw new Error("Failed pattern match at Data.Array line 390, column 5 - line 396, column 1: "+[v.constructor.name])}())})})}})}};var elemLastIndex=function elemLastIndex(dictEq){return function(x){return findLastIndex(function(v){return Prelude["=="](dictEq)(v)(x)})}};var elemIndex=function elemIndex(dictEq){return function(x){return findIndex(function(v){return Prelude["=="](dictEq)(v)(x)})}};var dropWhile=function dropWhile(p){return function(xs){return span(p)(xs).rest}};var deleteAt=$foreign._deleteAt(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var deleteBy=function deleteBy(v){return function(v1){return function(v2){if(v2.length===0){return[]}return Data_Maybe.maybe(v2)(function(i){return Data_Maybe_Unsafe.fromJust(deleteAt(i)(v2))})(findIndex(v(v1))(v2))}}};var unionBy=function unionBy(eq){return function(xs){return function(ys){return Prelude["++"](Prelude.semigroupArray)(xs)(Data_Foldable.foldl(Data_Foldable.foldableArray)(Prelude.flip(deleteBy(eq)))(nubBy(eq)(ys))(xs))}}};var union=function union(dictEq){return unionBy(Prelude["=="](dictEq))};var $$delete=function $$delete(dictEq){return deleteBy(Prelude.eq(dictEq))};var $bslash$bslash=function $bslash$bslash(dictEq){return function(xs){return function(ys){if($$null(xs)){return[]}if(Prelude.otherwise){return $foreign["uncons'"](Prelude["const"](xs))(function(y){return function(ys2){return $bslash$bslash(dictEq)($$delete(dictEq)(y)(xs))(ys2)}})(ys)}throw new Error("Failed pattern match at Data.Array line 532, column 1 - line 536, column 1: "+[xs.constructor.name,ys.constructor.name])}}};var concatMap=Prelude.flip(Prelude.bind(Prelude.bindArray));var mapMaybe=function mapMaybe(f){return concatMap(function($69){return Data_Maybe.maybe([])(singleton)(f($69))})};var catMaybes=mapMaybe(Prelude.id(Prelude.categoryFn));var alterAt=function alterAt(i){return function(f){return function(xs){var go=function go(x){var $66=f(x);if($66 instanceof Data_Maybe.Nothing){return deleteAt(i)(xs)}if($66 instanceof Data_Maybe.Just){return updateAt(i)($66.value0)(xs)}throw new Error("Failed pattern match at Data.Array line 350, column 10 - line 359, column 1: "+[$66.constructor.name])};return Data_Maybe.maybe(Data_Maybe.Nothing.value)(go)($bang$bang(xs)(i))}}};module.exports={foldM:foldM,unzip:unzip,zip:zip,zipWithA:zipWithA,intersectBy:intersectBy,intersect:intersect,"\\\\":$bslash$bslash,deleteBy:deleteBy,"delete":$$delete,unionBy:unionBy,union:union,nubBy:nubBy,nub:nub,groupBy:groupBy,"group'":group$prime,group:group,span:span,dropWhile:dropWhile,takeWhile:takeWhile,take:take,sortBy:sortBy,sort:sort,catMaybes:catMaybes,mapMaybe:mapMaybe,filterM:filterM,concatMap:concatMap,alterAt:alterAt,modifyAt:modifyAt,updateAt:updateAt,deleteAt:deleteAt,insertAt:insertAt,findLastIndex:findLastIndex,findIndex:findIndex,elemLastIndex:elemLastIndex,elemIndex:elemIndex,index:index,"!!":$bang$bang,uncons:uncons,init:init,tail:tail,last:last,head:head,insertBy:insertBy,insert:insert,":":$colon,"null":$$null,many:many,some:some,replicateM:replicateM,"..":$dot$dot,singleton:singleton,zipWith:$foreign.zipWith,drop:$foreign.drop,slice:$foreign.slice,partition:$foreign.partition,filter:$foreign.filter,concat:$foreign.concat,reverse:$foreign.reverse,snoc:$foreign.snoc,cons:$foreign.cons,length:$foreign.length,replicate:$foreign.replicate,range:$foreign.range}},{"./foreign":47,"Control.Alt":8,"Control.Alternative":9,"Control.Lazy":16,"Control.MonadPlus":37,"Control.Plus":39,"Data.Foldable":61,"Data.Functor.Invariant":68,"Data.Maybe":107,"Data.Maybe.Unsafe":106,"Data.Monoid":114,"Data.Traversable":132,"Data.Tuple":134,Prelude:146}],49:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Apply=require("Control.Apply");var Data_Monoid=require("Data.Monoid");var Data_Monoid_Disj=require("Data.Monoid.Disj");var Data_Monoid_Conj=require("Data.Monoid.Conj");var Data_Monoid_Endo=require("Data.Monoid.Endo");var Data_Monoid_Dual=require("Data.Monoid.Dual");var Bifoldable=function Bifoldable(bifoldMap,bifoldl,bifoldr){this.bifoldMap=bifoldMap;this.bifoldl=bifoldl;this.bifoldr=bifoldr};var bifoldr=function bifoldr(dict){return dict.bifoldr};var bitraverse_=function bitraverse_(dictBifoldable){return function(dictApplicative){return function(f){return function(g){return bifoldr(dictBifoldable)(function($18){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(f($18))})(function($19){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(g($19))})(Prelude.pure(dictApplicative)(Prelude.unit))}}}};var bifor_=function bifor_(dictBifoldable){return function(dictApplicative){return function(t){return function(f){return function(g){return bitraverse_(dictBifoldable)(dictApplicative)(f)(g)(t)}}}}};var bisequence_=function bisequence_(dictBifoldable){return function(dictApplicative){return bitraverse_(dictBifoldable)(dictApplicative)(Prelude.id(Prelude.categoryFn))(Prelude.id(Prelude.categoryFn))}};var bifoldl=function bifoldl(dict){return dict.bifoldl};var bifoldMapDefaultR=function bifoldMapDefaultR(dictBifoldable){return function(dictMonoid){return function(f){return function(g){return function(p){return bifoldr(dictBifoldable)(function($20){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(f($20))})(function($21){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(g($21))})(Data_Monoid.mempty(dictMonoid))(p)}}}}};var bifoldMapDefaultL=function bifoldMapDefaultL(dictBifoldable){return function(dictMonoid){return function(f){return function(g){return function(p){return bifoldl(dictBifoldable)(function(m){return function(a){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(m)(f(a))}})(function(m){return function(b){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(m)(g(b))}})(Data_Monoid.mempty(dictMonoid))(p)}}}}};var bifoldMap=function bifoldMap(dict){return dict.bifoldMap};var bifoldlDefault=function bifoldlDefault(dictBifoldable){return function(f){return function(g){return function(z){return function(p){return Data_Monoid_Endo.runEndo(Data_Monoid_Dual.runDual(bifoldMap(dictBifoldable)(Data_Monoid_Dual.monoidDual(Data_Monoid_Endo.monoidEndo))(function($22){return Data_Monoid_Dual.Dual(Data_Monoid_Endo.Endo(Prelude.flip(f)($22)))})(function($23){return Data_Monoid_Dual.Dual(Data_Monoid_Endo.Endo(Prelude.flip(g)($23)))})(p)))(z)}}}}};var bifoldrDefault=function bifoldrDefault(dictBifoldable){return function(f){return function(g){return function(z){return function(p){return Data_Monoid_Endo.runEndo(bifoldMap(dictBifoldable)(Data_Monoid_Endo.monoidEndo)(function($24){return Data_Monoid_Endo.Endo(f($24))})(function($25){return Data_Monoid_Endo.Endo(g($25))})(p))(z)}}}}};var bifold=function bifold(dictBifoldable){return function(dictMonoid){return bifoldMap(dictBifoldable)(dictMonoid)(Prelude.id(Prelude.categoryFn))(Prelude.id(Prelude.categoryFn))}};var biany=function biany(dictBifoldable){return function(dictBooleanAlgebra){return function(p){return function(q){return function($26){return Data_Monoid_Disj.runDisj(bifoldMap(dictBifoldable)(Data_Monoid_Disj.monoidDisj(dictBooleanAlgebra))(function($27){return Data_Monoid_Disj.Disj(p($27))})(function($28){return Data_Monoid_Disj.Disj(q($28))})($26))}}}}};var biall=function biall(dictBifoldable){return function(dictBooleanAlgebra){return function(p){return function(q){return function($29){return Data_Monoid_Conj.runConj(bifoldMap(dictBifoldable)(Data_Monoid_Conj.monoidConj(dictBooleanAlgebra))(function($30){return Data_Monoid_Conj.Conj(p($30))})(function($31){return Data_Monoid_Conj.Conj(q($31))})($29))}}}}};module.exports={Bifoldable:Bifoldable,biall:biall,biany:biany,bisequence_:bisequence_,bifor_:bifor_,bitraverse_:bitraverse_,bifold:bifold,bifoldMapDefaultL:bifoldMapDefaultL,bifoldMapDefaultR:bifoldMapDefaultR,bifoldlDefault:bifoldlDefault,bifoldrDefault:bifoldrDefault,bifoldMap:bifoldMap,bifoldl:bifoldl,bifoldr:bifoldr}},{"Control.Apply":10,"Data.Monoid":114,"Data.Monoid.Conj":109,"Data.Monoid.Disj":110,"Data.Monoid.Dual":111,"Data.Monoid.Endo":112,Prelude:146}],50:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Bifunctor=function Bifunctor(bimap){this.bimap=bimap};var bimap=function bimap(dict){return dict.bimap};var lmap=function lmap(dictBifunctor){return function(f){return bimap(dictBifunctor)(f)(Prelude.id(Prelude.categoryFn))}};var rmap=function rmap(dictBifunctor){return bimap(dictBifunctor)(Prelude.id(Prelude.categoryFn))};module.exports={Bifunctor:Bifunctor,rmap:rmap,lmap:lmap,bimap:bimap}},{Prelude:146}],51:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Bifoldable=require("Data.Bifoldable");var Data_Bifunctor=require("Data.Bifunctor");var Bitraversable=function Bitraversable(__superclass_Data$dotBifoldable$dotBifoldable_1,__superclass_Data$dotBifunctor$dotBifunctor_0,bisequence,bitraverse){this["__superclass_Data.Bifoldable.Bifoldable_1"]=__superclass_Data$dotBifoldable$dotBifoldable_1;this["__superclass_Data.Bifunctor.Bifunctor_0"]=__superclass_Data$dotBifunctor$dotBifunctor_0;this.bisequence=bisequence;this.bitraverse=bitraverse};var bitraverse=function bitraverse(dict){return dict.bitraverse};var bisequenceDefault=function bisequenceDefault(dictBitraversable){return function(dictApplicative){return function(t){return bitraverse(dictBitraversable)(dictApplicative)(Prelude.id(Prelude.categoryFn))(Prelude.id(Prelude.categoryFn))(t)}}};var bisequence=function bisequence(dict){return dict.bisequence};var bitraverseDefault=function bitraverseDefault(dictBitraversable){return function(dictApplicative){return function(f){return function(g){return function(t){return bisequence(dictBitraversable)(dictApplicative)(Data_Bifunctor.bimap(dictBitraversable["__superclass_Data.Bifunctor.Bifunctor_0"]())(f)(g)(t))}}}}};var bifor=function bifor(dictBitraversable){return function(dictApplicative){return function(t){return function(f){return function(g){return bitraverse(dictBitraversable)(dictApplicative)(f)(g)(t)}}}}};module.exports={Bitraversable:Bitraversable,bifor:bifor,bisequenceDefault:bisequenceDefault,bitraverseDefault:bitraverseDefault,bisequence:bisequence,bitraverse:bitraverse}},{"Data.Bifoldable":49,"Data.Bifunctor":50,Prelude:146}],52:[function(require,module,exports){"use strict";exports.toString=function(c){return c};exports.toCharCode=function(c){return c.charCodeAt(0)};exports.fromCharCode=function(c){return String.fromCharCode(c)};exports.toLower=function(c){return c.toLowerCase()};exports.toUpper=function(c){return c.toUpperCase()}},{}],53:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");module.exports={toUpper:$foreign.toUpper,toLower:$foreign.toLower,toCharCode:$foreign.toCharCode,fromCharCode:$foreign.fromCharCode,toString:$foreign.toString}},{"./foreign":52,Prelude:146}],54:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Bifoldable=require("Data.Bifoldable");var Data_Foldable=require("Data.Foldable");var Data_Functor_Contravariant=require("Data.Functor.Contravariant");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Const=function Const(x){return x};var showConst=function showConst(dictShow){return new Prelude.Show(function(v){return"Const ("+(Prelude.show(dictShow)(v)+")")})};var semigroupoidConst=new Prelude.Semigroupoid(function(v){return function(v1){return v1}});var semigroupConst=function semigroupConst(dictSemigroup){return new Prelude.Semigroup(function(v){return function(v1){return Prelude["<>"](dictSemigroup)(v)(v1)}})};var monoidConst=function monoidConst(dictMonoid){return new Data_Monoid.Monoid(function(){return semigroupConst(dictMonoid["__superclass_Prelude.Semigroup_0"]())},Data_Monoid.mempty(dictMonoid))};var getConst=function getConst(v){return v};var functorConst=new Prelude.Functor(function(v){return function(v1){return v1}});var invariantConst=new Data_Functor_Invariant.Invariant(Data_Functor_Invariant.imapF(functorConst));var foldableConst=new Data_Foldable.Foldable(function(dictMonoid){return function(v){return function(v1){return Data_Monoid.mempty(dictMonoid)}}},function(v){return function(z){return function(v1){return z}}},function(v){return function(z){return function(v1){return z}}});var traversableConst=new Data_Traversable.Traversable(function(){return foldableConst},function(){return functorConst},function(dictApplicative){return function(v){return Prelude.pure(dictApplicative)(v)}},function(dictApplicative){return function(v){return function(v1){return Prelude.pure(dictApplicative)(v1)}}});var eqConst=function eqConst(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v)(v1)}})};var ordConst=function ordConst(dictOrd){return new Prelude.Ord(function(){return eqConst(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v)(v1)}})};var contravariantConst=new Data_Functor_Contravariant.Contravariant(function(v){return function(v1){return v1}});var boundedConst=function boundedConst(dictBounded){return new Prelude.Bounded(Prelude.bottom(dictBounded),Prelude.top(dictBounded))};var applyConst=function applyConst(dictSemigroup){return new Prelude.Apply(function(){return functorConst},function(v){return function(v1){return Prelude["<>"](dictSemigroup)(v)(v1)}})};var bindConst=function bindConst(dictSemigroup){return new Prelude.Bind(function(){return applyConst(dictSemigroup)},function(v){return function(v1){return v}})};var applicativeConst=function applicativeConst(dictMonoid){return new Prelude.Applicative(function(){return applyConst(dictMonoid["__superclass_Prelude.Semigroup_0"]())},function(v){return Data_Monoid.mempty(dictMonoid)})};module.exports={Const:Const,getConst:getConst,eqConst:eqConst,ordConst:ordConst,boundedConst:boundedConst,showConst:showConst,semigroupoidConst:semigroupoidConst,semigroupConst:semigroupConst,monoidConst:monoidConst,functorConst:functorConst,invariantConst:invariantConst,applyConst:applyConst,bindConst:bindConst,applicativeConst:applicativeConst,contravariantConst:contravariantConst,foldableConst:foldableConst,traversableConst:traversableConst}},{"Data.Bifoldable":49,"Data.Foldable":61,"Data.Functor.Contravariant":67,"Data.Functor.Invariant":68,"Data.Monoid":114,"Data.Traversable":132,Prelude:146}],55:[function(require,module,exports){"use strict";exports.unsafeThrow=function(msg){throw new Error(msg)}},{}],56:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Data_Either=require("Data.Either");var fromRight=function fromRight(v){if(v instanceof Data_Either.Right){return v.value0}return $foreign.unsafeThrow("Data.Either.Unsafe.fromRight called on Left value")};var fromLeft=function fromLeft(v){if(v instanceof Data_Either.Left){return v.value0}return $foreign.unsafeThrow("Data.Either.Unsafe.fromLeft called on Right value")};module.exports={fromRight:fromRight,fromLeft:fromLeft}},{"./foreign":55,"Data.Either":57,Prelude:146}],57:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Alt=require("Control.Alt");var Control_Extend=require("Control.Extend");var Data_Bifoldable=require("Data.Bifoldable");var Data_Bifunctor=require("Data.Bifunctor");var Data_Bitraversable=require("Data.Bitraversable");var Data_Foldable=require("Data.Foldable");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Left=function(){function Left(value0){this.value0=value0}Left.create=function(value0){return new Left(value0)};return Left}();var Right=function(){function Right(value0){this.value0=value0}Right.create=function(value0){return new Right(value0)};return Right}();var showEither=function showEither(dictShow){return function(dictShow1){return new Prelude.Show(function(v){if(v instanceof Left){return"Left ("+(Prelude.show(dictShow)(v.value0)+")")}if(v instanceof Right){return"Right ("+(Prelude.show(dictShow1)(v.value0)+")")}throw new Error("Failed pattern match at Data.Either line 175, column 3 - line 176, column 3: "+[v.constructor.name])})}};var functorEither=new Prelude.Functor(function(v){return function(v1){if(v1 instanceof Left){return new Left(v1.value0)}if(v1 instanceof Right){return new Right(v(v1.value0))}throw new Error("Failed pattern match at Data.Either line 53, column 3 - line 54, column 3: "+[v.constructor.name,v1.constructor.name])}});var foldableEither=new Data_Foldable.Foldable(function(dictMonoid){return function(f){return function(v){if(v instanceof Left){return Data_Monoid.mempty(dictMonoid)}if(v instanceof Right){return f(v.value0)}throw new Error("Failed pattern match at Data.Either line 206, column 3 - line 207, column 3: "+[f.constructor.name,v.constructor.name])}}},function(v){return function(z){return function(v1){if(v1 instanceof Left){return z}if(v1 instanceof Right){return v(z)(v1.value0)}throw new Error("Failed pattern match at Data.Either line 204, column 3 - line 205, column 3: "+[v.constructor.name,z.constructor.name,v1.constructor.name])}}},function(v){return function(z){return function(v1){if(v1 instanceof Left){return z}if(v1 instanceof Right){return v(v1.value0)(z)}throw new Error("Failed pattern match at Data.Either line 202, column 3 - line 203, column 3: "+[v.constructor.name,z.constructor.name,v1.constructor.name])}}});var traversableEither=new Data_Traversable.Traversable(function(){return foldableEither},function(){return functorEither},function(dictApplicative){return function(v){if(v instanceof Left){return Prelude.pure(dictApplicative)(new Left(v.value0))}if(v instanceof Right){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Right.create)(v.value0)}throw new Error("Failed pattern match at Data.Either line 220, column 3 - line 221, column 3: "+[v.constructor.name])}},function(dictApplicative){return function(v){return function(v1){if(v1 instanceof Left){return Prelude.pure(dictApplicative)(new Left(v1.value0))}if(v1 instanceof Right){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Right.create)(v(v1.value0))}throw new Error("Failed pattern match at Data.Either line 218, column 3 - line 219, column 3: "+[v.constructor.name,v1.constructor.name])}}});var extendEither=new Control_Extend.Extend(function(){return functorEither},function(v){return function(v1){if(v1 instanceof Left){return new Left(v1.value0)}return new Right(v(v1))}});var eqEither=function eqEither(dictEq){return function(dictEq1){return new Prelude.Eq(function(v){return function(v1){if(v instanceof Left&&v1 instanceof Left){return Prelude["=="](dictEq)(v.value0)(v1.value0)}if(v instanceof Right&&v1 instanceof Right){return Prelude["=="](dictEq1)(v.value0)(v1.value0)}return false}})}};var ordEither=function ordEither(dictOrd){return function(dictOrd1){return new Prelude.Ord(function(){return eqEither(dictOrd["__superclass_Prelude.Eq_0"]())(dictOrd1["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){if(v instanceof Left&&v1 instanceof Left){return Prelude.compare(dictOrd)(v.value0)(v1.value0)}if(v instanceof Right&&v1 instanceof Right){return Prelude.compare(dictOrd1)(v.value0)(v1.value0)}if(v instanceof Left){return Prelude.LT.value}if(v1 instanceof Left){return Prelude.GT.value}throw new Error("Failed pattern match at Data.Either line 192, column 3 - line 193, column 3: "+[v.constructor.name,v1.constructor.name])}})}};var either=function either(v){return function(v1){return function(v2){if(v2 instanceof Left){return v(v2.value0)}if(v2 instanceof Right){return v1(v2.value0)}throw new Error("Failed pattern match at Data.Either line 29, column 1 - line 30, column 1: "+[v.constructor.name,v1.constructor.name,v2.constructor.name])}}};var isLeft=either(Prelude["const"](true))(Prelude["const"](false));var isRight=either(Prelude["const"](false))(Prelude["const"](true));var boundedEither=function boundedEither(dictBounded){return function(dictBounded1){return new Prelude.Bounded(new Left(Prelude.bottom(dictBounded)),new Right(Prelude.top(dictBounded1)))}};var bifunctorEither=new Data_Bifunctor.Bifunctor(function(v){return function(v1){return function(v2){if(v2 instanceof Left){return new Left(v(v2.value0))}if(v2 instanceof Right){return new Right(v1(v2.value0))}throw new Error("Failed pattern match at Data.Either line 57, column 3 - line 58, column 3: "+[v.constructor.name,v1.constructor.name,v2.constructor.name])}}});var bifoldableEither=new Data_Bifoldable.Bifoldable(function(dictMonoid){return function(v){return function(v1){return function(v2){if(v2 instanceof Left){return v(v2.value0)}if(v2 instanceof Right){return v1(v2.value0)}throw new Error("Failed pattern match at Data.Either line 214, column 3 - line 215, column 3: "+[v.constructor.name,v1.constructor.name,v2.constructor.name])}}}},function(v){return function(v1){return function(z){return function(v2){if(v2 instanceof Left){return v(z)(v2.value0)}if(v2 instanceof Right){return v1(z)(v2.value0)}throw new Error("Failed pattern match at Data.Either line 212, column 3 - line 213, column 3: "+[v.constructor.name,v1.constructor.name,z.constructor.name,v2.constructor.name])}}}},function(v){return function(v1){return function(z){return function(v2){if(v2 instanceof Left){return v(v2.value0)(z)}if(v2 instanceof Right){return v1(v2.value0)(z)}throw new Error("Failed pattern match at Data.Either line 210, column 3 - line 211, column 3: "+[v.constructor.name,v1.constructor.name,z.constructor.name,v2.constructor.name])}}}});var bitraversableEither=new Data_Bitraversable.Bitraversable(function(){return bifoldableEither},function(){return bifunctorEither},function(dictApplicative){return function(v){if(v instanceof Left){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Left.create)(v.value0)}if(v instanceof Right){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Right.create)(v.value0)}throw new Error("Failed pattern match at Data.Either line 226, column 3 - line 227, column 3: "+[v.constructor.name])}},function(dictApplicative){return function(v){return function(v1){return function(v2){if(v2 instanceof Left){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Left.create)(v(v2.value0))}if(v2 instanceof Right){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Right.create)(v1(v2.value0))}throw new Error("Failed pattern match at Data.Either line 224, column 3 - line 225, column 3: "+[v.constructor.name,v1.constructor.name,v2.constructor.name])}}}});var applyEither=new Prelude.Apply(function(){return functorEither},function(v){return function(v1){if(v instanceof Left){return new Left(v.value0)}if(v instanceof Right){return Prelude["<$>"](functorEither)(v.value0)(v1)}throw new Error("Failed pattern match at Data.Either line 93, column 3 - line 94, column 3: "+[v.constructor.name,v1.constructor.name])}});var bindEither=new Prelude.Bind(function(){return applyEither},either(function(e){return function(v){return new Left(e)}})(function(a){return function(f){return f(a)}}));var semigroupEither=function semigroupEither(dictSemigroup){return new Prelude.Semigroup(function(x){return function(y){return Prelude["<*>"](applyEither)(Prelude["<$>"](functorEither)(Prelude.append(dictSemigroup))(x))(y)}})};var semiringEither=function semiringEither(dictSemiring){return new Prelude.Semiring(function(x){return function(y){return Prelude["<*>"](applyEither)(Prelude["<$>"](functorEither)(Prelude.add(dictSemiring))(x))(y)}},function(x){return function(y){return Prelude["<*>"](applyEither)(Prelude["<$>"](functorEither)(Prelude.mul(dictSemiring))(x))(y)}},new Right(Prelude.one(dictSemiring)),new Right(Prelude.zero(dictSemiring)))};var applicativeEither=new Prelude.Applicative(function(){return applyEither},Right.create);var monadEither=new Prelude.Monad(function(){return applicativeEither},function(){return bindEither});var altEither=new Control_Alt.Alt(function(){return functorEither},function(v){return function(v1){if(v instanceof Left){return v1}return v}});module.exports={Left:Left,Right:Right,isRight:isRight,isLeft:isLeft,either:either,functorEither:functorEither,bifunctorEither:bifunctorEither,applyEither:applyEither,applicativeEither:applicativeEither,altEither:altEither,bindEither:bindEither,monadEither:monadEither,extendEither:extendEither,showEither:showEither,eqEither:eqEither,ordEither:ordEither,boundedEither:boundedEither,foldableEither:foldableEither,bifoldableEither:bifoldableEither,traversableEither:traversableEither,bitraversableEither:bitraversableEither,semiringEither:semiringEither,semigroupEither:semigroupEither}},{"Control.Alt":8,"Control.Extend":15,"Data.Bifoldable":49,"Data.Bifunctor":50,"Data.Bitraversable":51,"Data.Foldable":61,"Data.Monoid":114,"Data.Traversable":132,Prelude:146}],58:[function(require,module,exports){"use strict";exports.mkExists=function(fa){return fa};exports.runExists=function(f){return function(fa){return f(fa)}}},{}],59:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");module.exports={runExists:$foreign.runExists,mkExists:$foreign.mkExists}},{"./foreign":58,Prelude:146}],60:[function(require,module,exports){"use strict";exports.foldrArray=function(f){return function(init){return function(xs){var acc=init;var len=xs.length;for(var i=len-1;i>=0;i--){acc=f(xs[i])(acc)}return acc}}};exports.foldlArray=function(f){return function(init){return function(xs){var acc=init;var len=xs.length;for(var i=0;i<len;i++){acc=f(acc)(xs[i])}return acc}}}},{}],61:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Apply=require("Control.Apply");var Data_Maybe=require("Data.Maybe");var Data_Maybe_First=require("Data.Maybe.First");var Data_Maybe_Last=require("Data.Maybe.Last");var Data_Monoid=require("Data.Monoid");var Data_Monoid_Additive=require("Data.Monoid.Additive");var Data_Monoid_Conj=require("Data.Monoid.Conj");var Data_Monoid_Disj=require("Data.Monoid.Disj");var Data_Monoid_Dual=require("Data.Monoid.Dual");var Data_Monoid_Endo=require("Data.Monoid.Endo");var Data_Monoid_Multiplicative=require("Data.Monoid.Multiplicative");var Foldable=function Foldable(foldMap,foldl,foldr){this.foldMap=foldMap;this.foldl=foldl;this.foldr=foldr};var foldr=function foldr(dict){return dict.foldr};var traverse_=function traverse_(dictApplicative){return function(dictFoldable){return function(f){return foldr(dictFoldable)(function($161){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(f($161))})(Prelude.pure(dictApplicative)(Prelude.unit))}}};var for_=function for_(dictApplicative){return function(dictFoldable){return Prelude.flip(traverse_(dictApplicative)(dictFoldable))}};var sequence_=function sequence_(dictApplicative){return function(dictFoldable){return traverse_(dictApplicative)(dictFoldable)(Prelude.id(Prelude.categoryFn))}};var foldl=function foldl(dict){return dict.foldl};var intercalate=function intercalate(dictFoldable){return function(dictMonoid){return function(sep){return function(xs){var go=function go(v){return function(x){if(v.init){return{init:false,acc:x}}return{init:false,acc:Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(v.acc)(Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(sep)(x))}}};return foldl(dictFoldable)(go)({init:true,acc:Data_Monoid.mempty(dictMonoid)})(xs).acc}}}};var maximumBy=function maximumBy(dictFoldable){return function(cmp){var max$prime=function max$prime(v){return function(v1){if(v instanceof Data_Maybe.Nothing){return new Data_Maybe.Just(v1)}if(v instanceof Data_Maybe.Just){return new Data_Maybe.Just(function(){var $87=cmp(v.value0)(v1);if($87 instanceof Prelude.GT){return v.value0}return v1}())}throw new Error("Failed pattern match at Data.Foldable line 246, column 3 - line 247, column 3: "+[v.constructor.name,v1.constructor.name])}};return foldl(dictFoldable)(max$prime)(Data_Maybe.Nothing.value)}};var maximum=function maximum(dictOrd){return function(dictFoldable){return maximumBy(dictFoldable)(Prelude.compare(dictOrd))}};var mconcat=function mconcat(dictFoldable){return function(dictMonoid){return foldl(dictFoldable)(Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]()))(Data_Monoid.mempty(dictMonoid))}};var minimumBy=function minimumBy(dictFoldable){return function(cmp){var min$prime=function min$prime(v){return function(v1){if(v instanceof Data_Maybe.Nothing){return new Data_Maybe.Just(v1)}if(v instanceof Data_Maybe.Just){return new Data_Maybe.Just(function(){var $91=cmp(v.value0)(v1);if($91 instanceof Prelude.LT){return v.value0}return v1}())}throw new Error("Failed pattern match at Data.Foldable line 261, column 3 - line 262, column 3: "+[v.constructor.name,v1.constructor.name])}};return foldl(dictFoldable)(min$prime)(Data_Maybe.Nothing.value)}};var minimum=function minimum(dictOrd){return function(dictFoldable){return minimumBy(dictFoldable)(Prelude.compare(dictOrd))}};var product=function product(dictFoldable){return function(dictSemiring){return foldl(dictFoldable)(Prelude["*"](dictSemiring))(Prelude.one(dictSemiring))}};var sum=function sum(dictFoldable){return function(dictSemiring){return foldl(dictFoldable)(Prelude["+"](dictSemiring))(Prelude.zero(dictSemiring))}};var foldableMultiplicative=new Foldable(function(dictMonoid){return function(f){return function(v){return f(v)}}},function(f){return function(z){return function(v){return f(z)(v)}}},function(f){return function(z){return function(v){return f(v)(z)}}});var foldableMaybe=new Foldable(function(dictMonoid){return function(f){return function(v){if(v instanceof Data_Maybe.Nothing){return Data_Monoid.mempty(dictMonoid)}if(v instanceof Data_Maybe.Just){return f(v.value0)}throw new Error("Failed pattern match at Data.Foldable line 108, column 3 - line 109, column 3: "+[f.constructor.name,v.constructor.name])}}},function(v){return function(z){return function(v1){if(v1 instanceof Data_Maybe.Nothing){return z}if(v1 instanceof Data_Maybe.Just){return v(z)(v1.value0)}throw new Error("Failed pattern match at Data.Foldable line 106, column 3 - line 107, column 3: "+[v.constructor.name,z.constructor.name,v1.constructor.name]);
}}},function(v){return function(z){return function(v1){if(v1 instanceof Data_Maybe.Nothing){return z}if(v1 instanceof Data_Maybe.Just){return v(v1.value0)(z)}throw new Error("Failed pattern match at Data.Foldable line 104, column 3 - line 105, column 3: "+[v.constructor.name,z.constructor.name,v1.constructor.name])}}});var foldableDual=new Foldable(function(dictMonoid){return function(f){return function(v){return f(v)}}},function(f){return function(z){return function(v){return f(z)(v)}}},function(f){return function(z){return function(v){return f(v)(z)}}});var foldableDisj=new Foldable(function(dictMonoid){return function(f){return function(v){return f(v)}}},function(f){return function(z){return function(v){return f(z)(v)}}},function(f){return function(z){return function(v){return f(v)(z)}}});var foldableConj=new Foldable(function(dictMonoid){return function(f){return function(v){return f(v)}}},function(f){return function(z){return function(v){return f(z)(v)}}},function(f){return function(z){return function(v){return f(v)(z)}}});var foldableAdditive=new Foldable(function(dictMonoid){return function(f){return function(v){return f(v)}}},function(f){return function(z){return function(v){return f(z)(v)}}},function(f){return function(z){return function(v){return f(v)(z)}}});var foldMapDefaultR=function foldMapDefaultR(dictFoldable){return function(dictMonoid){return function(f){return function(xs){return foldr(dictFoldable)(function(x){return function(acc){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(f(x))(acc)}})(Data_Monoid.mempty(dictMonoid))(xs)}}}};var foldableArray=new Foldable(function(dictMonoid){return foldMapDefaultR(foldableArray)(dictMonoid)},$foreign.foldlArray,$foreign.foldrArray);var foldMapDefaultL=function foldMapDefaultL(dictFoldable){return function(dictMonoid){return function(f){return function(xs){return foldl(dictFoldable)(function(acc){return function(x){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(f(x))(acc)}})(Data_Monoid.mempty(dictMonoid))(xs)}}}};var foldMap=function foldMap(dict){return dict.foldMap};var foldableFirst=new Foldable(function(dictMonoid){return function(f){return function(v){return foldMap(foldableMaybe)(dictMonoid)(f)(v)}}},function(f){return function(z){return function(v){return foldl(foldableMaybe)(f)(z)(v)}}},function(f){return function(z){return function(v){return foldr(foldableMaybe)(f)(z)(v)}}});var foldableLast=new Foldable(function(dictMonoid){return function(f){return function(v){return foldMap(foldableMaybe)(dictMonoid)(f)(v)}}},function(f){return function(z){return function(v){return foldl(foldableMaybe)(f)(z)(v)}}},function(f){return function(z){return function(v){return foldr(foldableMaybe)(f)(z)(v)}}});var foldlDefault=function foldlDefault(dictFoldable){return function(c){return function(u){return function(xs){return Data_Monoid_Endo.runEndo(Data_Monoid_Dual.runDual(foldMap(dictFoldable)(Data_Monoid_Dual.monoidDual(Data_Monoid_Endo.monoidEndo))(function($162){return Data_Monoid_Dual.Dual(Data_Monoid_Endo.Endo(Prelude.flip(c)($162)))})(xs)))(u)}}}};var foldrDefault=function foldrDefault(dictFoldable){return function(c){return function(u){return function(xs){return Data_Monoid_Endo.runEndo(foldMap(dictFoldable)(Data_Monoid_Endo.monoidEndo)(function($163){return Data_Monoid_Endo.Endo(c($163))})(xs))(u)}}}};var fold=function fold(dictFoldable){return function(dictMonoid){return foldMap(dictFoldable)(dictMonoid)(Prelude.id(Prelude.categoryFn))}};var find=function find(dictFoldable){return function(p){return foldl(dictFoldable)(function(r){return function(x){var $160=p(x);if($160){return new Data_Maybe.Just(x)}if(!$160){return r}throw new Error("Failed pattern match at Data.Foldable line 234, column 25 - line 234, column 50: "+[$160.constructor.name])}})(Data_Maybe.Nothing.value)}};var any=function any(dictFoldable){return function(dictBooleanAlgebra){return function(p){return function($164){return Data_Monoid_Disj.runDisj(foldMap(dictFoldable)(Data_Monoid_Disj.monoidDisj(dictBooleanAlgebra))(function($165){return Data_Monoid_Disj.Disj(p($165))})($164))}}}};var elem=function elem(dictFoldable){return function(dictEq){return function($166){return any(dictFoldable)(Prelude.booleanAlgebraBoolean)(Prelude["=="](dictEq)($166))}}};var notElem=function notElem(dictFoldable){return function(dictEq){return function(x){return function($167){return!elem(dictFoldable)(dictEq)(x)($167)}}}};var or=function or(dictFoldable){return function(dictBooleanAlgebra){return any(dictFoldable)(dictBooleanAlgebra)(Prelude.id(Prelude.categoryFn))}};var all=function all(dictFoldable){return function(dictBooleanAlgebra){return function(p){return function($168){return Data_Monoid_Conj.runConj(foldMap(dictFoldable)(Data_Monoid_Conj.monoidConj(dictBooleanAlgebra))(function($169){return Data_Monoid_Conj.Conj(p($169))})($168))}}}};var and=function and(dictFoldable){return function(dictBooleanAlgebra){return all(dictFoldable)(dictBooleanAlgebra)(Prelude.id(Prelude.categoryFn))}};module.exports={Foldable:Foldable,minimumBy:minimumBy,minimum:minimum,maximumBy:maximumBy,maximum:maximum,find:find,notElem:notElem,elem:elem,product:product,sum:sum,all:all,any:any,or:or,and:and,intercalate:intercalate,mconcat:mconcat,sequence_:sequence_,for_:for_,traverse_:traverse_,fold:fold,foldMapDefaultR:foldMapDefaultR,foldMapDefaultL:foldMapDefaultL,foldlDefault:foldlDefault,foldrDefault:foldrDefault,foldMap:foldMap,foldl:foldl,foldr:foldr,foldableArray:foldableArray,foldableMaybe:foldableMaybe,foldableFirst:foldableFirst,foldableLast:foldableLast,foldableAdditive:foldableAdditive,foldableDual:foldableDual,foldableDisj:foldableDisj,foldableConj:foldableConj,foldableMultiplicative:foldableMultiplicative}},{"./foreign":60,"Control.Apply":10,"Data.Maybe":107,"Data.Maybe.First":103,"Data.Maybe.Last":104,"Data.Monoid":114,"Data.Monoid.Additive":108,"Data.Monoid.Conj":109,"Data.Monoid.Disj":110,"Data.Monoid.Dual":111,"Data.Monoid.Endo":112,"Data.Monoid.Multiplicative":113,Prelude:146}],62:[function(require,module,exports){exports.mkEffFn1=function mkEffFn1(fn){return function(x){return fn(x)()}};exports.mkEffFn2=function mkEffFn2(fn){return function(a,b){return fn(a)(b)()}};exports.mkEffFn3=function mkEffFn3(fn){return function(a,b,c){return fn(a)(b)(c)()}};exports.mkEffFn4=function mkEffFn4(fn){return function(a,b,c,d){return fn(a)(b)(c)(d)()}};exports.mkEffFn5=function mkEffFn5(fn){return function(a,b,c,d,e){return fn(a)(b)(c)(d)(e)()}};exports.mkEffFn6=function mkEffFn6(fn){return function(a,b,c,d,e,f){return fn(a)(b)(c)(d)(e)(f)()}};exports.mkEffFn7=function mkEffFn7(fn){return function(a,b,c,d,e,f,g){return fn(a)(b)(c)(d)(e)(f)(g)()}};exports.mkEffFn8=function mkEffFn8(fn){return function(a,b,c,d,e,f,g,h){return fn(a)(b)(c)(d)(e)(f)(g)(h)()}};exports.mkEffFn9=function mkEffFn9(fn){return function(a,b,c,d,e,f,g,h,i){return fn(a)(b)(c)(d)(e)(f)(g)(h)(i)()}};exports.mkEffFn10=function mkEffFn10(fn){return function(a,b,c,d,e,f,g,h,i,j){return fn(a)(b)(c)(d)(e)(f)(g)(h)(i)(j)()}};exports.runEffFn1=function runEffFn1(fn){return function(a){return function(){return fn(a)}}};exports.runEffFn2=function runEffFn2(fn){return function(a){return function(b){return function(){return fn(a,b)}}}};exports.runEffFn3=function runEffFn3(fn){return function(a){return function(b){return function(c){return function(){return fn(a,b,c)}}}}};exports.runEffFn4=function runEffFn4(fn){return function(a){return function(b){return function(c){return function(d){return function(){return fn(a,b,c,d)}}}}}};exports.runEffFn5=function runEffFn5(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(){return fn(a,b,c,d,e)}}}}}}};exports.runEffFn6=function runEffFn6(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(){return fn(a,b,c,d,e,f)}}}}}}}};exports.runEffFn7=function runEffFn7(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(){return fn(a,b,c,d,e,f,g)}}}}}}}}};exports.runEffFn8=function runEffFn8(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(){return fn(a,b,c,d,e,f,g,h)}}}}}}}}}};exports.runEffFn9=function runEffFn9(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return function(){return fn(a,b,c,d,e,f,g,h,i)}}}}}}}}}}};exports.runEffFn10=function runEffFn10(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return function(j){return function(){return fn(a,b,c,d,e,f,g,h,i,j)}}}}}}}}}}}}},{}],63:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Control_Monad_Eff=require("Control.Monad.Eff");module.exports={runEffFn10:$foreign.runEffFn10,runEffFn9:$foreign.runEffFn9,runEffFn8:$foreign.runEffFn8,runEffFn7:$foreign.runEffFn7,runEffFn6:$foreign.runEffFn6,runEffFn5:$foreign.runEffFn5,runEffFn4:$foreign.runEffFn4,runEffFn3:$foreign.runEffFn3,runEffFn2:$foreign.runEffFn2,runEffFn1:$foreign.runEffFn1,mkEffFn10:$foreign.mkEffFn10,mkEffFn9:$foreign.mkEffFn9,mkEffFn8:$foreign.mkEffFn8,mkEffFn7:$foreign.mkEffFn7,mkEffFn6:$foreign.mkEffFn6,mkEffFn5:$foreign.mkEffFn5,mkEffFn4:$foreign.mkEffFn4,mkEffFn3:$foreign.mkEffFn3,mkEffFn2:$foreign.mkEffFn2,mkEffFn1:$foreign.mkEffFn1}},{"./foreign":62,"Control.Monad.Eff":26}],64:[function(require,module,exports){"use strict";exports.mkFn0=function(fn){return function(){return fn({})}};exports.mkFn1=function(fn){return function(a){return fn(a)}};exports.mkFn2=function(fn){return function(a,b){return fn(a)(b)}};exports.mkFn3=function(fn){return function(a,b,c){return fn(a)(b)(c)}};exports.mkFn4=function(fn){return function(a,b,c,d){return fn(a)(b)(c)(d)}};exports.mkFn5=function(fn){return function(a,b,c,d,e){return fn(a)(b)(c)(d)(e)}};exports.mkFn6=function(fn){return function(a,b,c,d,e,f){return fn(a)(b)(c)(d)(e)(f)}};exports.mkFn7=function(fn){return function(a,b,c,d,e,f,g){return fn(a)(b)(c)(d)(e)(f)(g)}};exports.mkFn8=function(fn){return function(a,b,c,d,e,f,g,h){return fn(a)(b)(c)(d)(e)(f)(g)(h)}};exports.mkFn9=function(fn){return function(a,b,c,d,e,f,g,h,i){return fn(a)(b)(c)(d)(e)(f)(g)(h)(i)}};exports.mkFn10=function(fn){return function(a,b,c,d,e,f,g,h,i,j){return fn(a)(b)(c)(d)(e)(f)(g)(h)(i)(j)}};exports.runFn0=function(fn){return fn()};exports.runFn1=function(fn){return function(a){return fn(a)}};exports.runFn2=function(fn){return function(a){return function(b){return fn(a,b)}}};exports.runFn3=function(fn){return function(a){return function(b){return function(c){return fn(a,b,c)}}}};exports.runFn4=function(fn){return function(a){return function(b){return function(c){return function(d){return fn(a,b,c,d)}}}}};exports.runFn5=function(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return fn(a,b,c,d,e)}}}}}};exports.runFn6=function(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return fn(a,b,c,d,e,f)}}}}}}};exports.runFn7=function(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return fn(a,b,c,d,e,f,g)}}}}}}}};exports.runFn8=function(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return fn(a,b,c,d,e,f,g,h)}}}}}}}}};exports.runFn9=function(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return fn(a,b,c,d,e,f,g,h,i)}}}}}}}}}};exports.runFn10=function(fn){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return function(j){return fn(a,b,c,d,e,f,g,h,i,j)}}}}}}}}}}}},{}],65:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var on=function on(f){return function(g){return function(x){return function(y){return f(g(x))(g(y))}}}};module.exports={on:on,runFn10:$foreign.runFn10,runFn9:$foreign.runFn9,runFn8:$foreign.runFn8,runFn7:$foreign.runFn7,runFn6:$foreign.runFn6,runFn5:$foreign.runFn5,runFn4:$foreign.runFn4,runFn3:$foreign.runFn3,runFn2:$foreign.runFn2,runFn1:$foreign.runFn1,runFn0:$foreign.runFn0,mkFn10:$foreign.mkFn10,mkFn9:$foreign.mkFn9,mkFn8:$foreign.mkFn8,mkFn7:$foreign.mkFn7,mkFn6:$foreign.mkFn6,mkFn5:$foreign.mkFn5,mkFn4:$foreign.mkFn4,mkFn3:$foreign.mkFn3,mkFn2:$foreign.mkFn2,mkFn1:$foreign.mkFn1,mkFn0:$foreign.mkFn0}},{"./foreign":64,Prelude:146}],66:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Alt=require("Control.Alt");var Control_Plus=require("Control.Plus");var Control_Alternative=require("Control.Alternative");var Data_Foldable=require("Data.Foldable");var Data_Traversable=require("Data.Traversable");var Compose=function(){function Compose(value0){this.value0=value0}Compose.create=function(value0){return new Compose(value0)};return Compose}();var eqCompose=function eqCompose(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v.value0)(v1.value0)}})};var ordCompose=function ordCompose(dictOrd){return new Prelude.Ord(function(){return eqCompose(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v.value0)(v1.value0)}})};var decompose=function decompose(v){return v.value0};var foldableCompose=function foldableCompose(dictFoldable){return function(dictFoldable1){return new Data_Foldable.Foldable(function(dictMonoid){return function(f){return function($49){return Data_Foldable.foldMap(dictFoldable)(dictMonoid)(Data_Foldable.foldMap(dictFoldable1)(dictMonoid)(f))(decompose($49))}}},function(f){return function(i){return function($50){return Data_Foldable.foldl(dictFoldable)(Data_Foldable.foldl(dictFoldable1)(f))(i)(decompose($50))}}},function(f){return function(i){return function($51){return Data_Foldable.foldr(dictFoldable)(Prelude.flip(Data_Foldable.foldr(dictFoldable1)(f)))(i)(decompose($51))}}})}};var functorCompose=function functorCompose(dictFunctor){return function(dictFunctor1){return new Prelude.Functor(function(f){return function($52){return Compose.create(Prelude.map(dictFunctor)(Prelude.map(dictFunctor1)(f))(decompose($52)))}})}};var showCompose=function showCompose(dictShow){return new Prelude.Show(function($53){return Prelude.show(dictShow)(decompose($53))})};var traversableCompose=function traversableCompose(dictTraversable){return function(dictTraversable1){return new Data_Traversable.Traversable(function(){return foldableCompose(dictTraversable["__superclass_Data.Foldable.Foldable_1"]())(dictTraversable1["__superclass_Data.Foldable.Foldable_1"]())},function(){return functorCompose(dictTraversable["__superclass_Prelude.Functor_0"]())(dictTraversable1["__superclass_Prelude.Functor_0"]())},function(dictApplicative){return Data_Traversable.traverse(traversableCompose(dictTraversable)(dictTraversable1))(dictApplicative)(Prelude.id(Prelude.categoryFn))},function(dictApplicative){return function(f){return function($54){return Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Compose.create)(Data_Traversable.traverse(dictTraversable)(dictApplicative)(Data_Traversable.traverse(dictTraversable1)(dictApplicative)(f))(decompose($54)))}}})}};var applyCompose=function applyCompose(dictApply){return function(dictApply1){return new Prelude.Apply(function(){return functorCompose(dictApply["__superclass_Prelude.Functor_0"]())(dictApply1["__superclass_Prelude.Functor_0"]())},function(v){return function(v1){return Compose.create(Prelude["<*>"](dictApply)(Prelude["<$>"](dictApply["__superclass_Prelude.Functor_0"]())(Prelude.apply(dictApply1))(v.value0))(v1.value0))}})}};var applicativeCompose=function applicativeCompose(dictApplicative){return function(dictApplicative1){return new Prelude.Applicative(function(){return applyCompose(dictApplicative["__superclass_Prelude.Apply_0"]())(dictApplicative1["__superclass_Prelude.Apply_0"]())},function($55){return Compose.create(Prelude.pure(dictApplicative)(Prelude.pure(dictApplicative1)($55)))})}};var altCompose=function altCompose(dictAlt){return function(dictFunctor){return new Control_Alt.Alt(function(){return functorCompose(dictAlt["__superclass_Prelude.Functor_0"]())(dictFunctor)},function(v){return function(v1){return Compose.create(Control_Alt.alt(dictAlt)(v.value0)(v1.value0))}})}};var plusCompose=function plusCompose(dictPlus){return function(dictFunctor){return new Control_Plus.Plus(function(){return altCompose(dictPlus["__superclass_Control.Alt.Alt_0"]())(dictFunctor)},new Compose(Control_Plus.empty(dictPlus)))}};var alternativeCompose=function alternativeCompose(dictAlternative){return function(dictApplicative){return new Control_Alternative.Alternative(function(){return plusCompose(dictAlternative["__superclass_Control.Plus.Plus_1"]())(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())},function(){return applicativeCompose(dictAlternative["__superclass_Prelude.Applicative_0"]())(dictApplicative)})}};module.exports={Compose:Compose,decompose:decompose,showCompose:showCompose,eqCompose:eqCompose,ordCompose:ordCompose,functorCompose:functorCompose,applyCompose:applyCompose,applicativeCompose:applicativeCompose,foldableCompose:foldableCompose,traversableCompose:traversableCompose,altCompose:altCompose,plusCompose:plusCompose,alternativeCompose:alternativeCompose}},{"Control.Alt":8,"Control.Alternative":9,"Control.Plus":39,"Data.Foldable":61,"Data.Traversable":132,Prelude:146}],67:[function(require,module,exports){"use strict";var Contravariant=function Contravariant(cmap){this.cmap=cmap};var cmap=function cmap(dict){return dict.cmap};var $greater$dollar$less=function $greater$dollar$less(dictContravariant){return cmap(dictContravariant)};var $greater$hash$less=function $greater$hash$less(dictContravariant){return function(x){return function(f){return $greater$dollar$less(dictContravariant)(f)(x)}}};module.exports={Contravariant:Contravariant,">#<":$greater$hash$less,">$<":$greater$dollar$less,cmap:cmap}},{}],68:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Invariant=function Invariant(imap){this.imap=imap};var imapF=function imapF(dictFunctor){return function($1){return Prelude["const"](Prelude.map(dictFunctor)($1))}};var invariantArray=new Invariant(imapF(Prelude.functorArray));var invariantFn=new Invariant(imapF(Prelude.functorFn));var imap=function imap(dict){return dict.imap};module.exports={Invariant:Invariant,imapF:imapF,imap:imap,invariantFn:invariantFn,invariantArray:invariantArray}},{Prelude:146}],69:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var $less$dollar=function $less$dollar(dictFunctor){return function(x){return function(f){return Prelude["<$>"](dictFunctor)(Prelude["const"](x))(f)}}};var $dollar$greater=function $dollar$greater(dictFunctor){return function(f){return function(x){return Prelude["<$>"](dictFunctor)(Prelude["const"](x))(f)}}};module.exports={"$>":$dollar$greater,"<$":$less$dollar}},{Prelude:146}],70:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Foldable=require("Data.Foldable");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Identity=function Identity(x){return x};var showIdentity=function showIdentity(dictShow){return new Prelude.Show(function(v){return"Identity ("+(Prelude.show(dictShow)(v)+")")})};var semiringIdentity=function semiringIdentity(dictSemiring){return new Prelude.Semiring(function(v){return function(v1){return Prelude["+"](dictSemiring)(v)(v1)}},function(v){return function(v1){return Prelude["*"](dictSemiring)(v)(v1)}},Prelude.one(dictSemiring),Prelude.zero(dictSemiring))};var semigroupIdenity=function semigroupIdenity(dictSemigroup){return new Prelude.Semigroup(function(v){return function(v1){return Prelude["<>"](dictSemigroup)(v)(v1)}})};var runIdentity=function runIdentity(v){return v};var ringIdentity=function ringIdentity(dictRing){return new Prelude.Ring(function(){return semiringIdentity(dictRing["__superclass_Prelude.Semiring_0"]())},function(v){return function(v1){return Prelude["-"](dictRing)(v)(v1)}})};var monoidIdentity=function monoidIdentity(dictMonoid){return new Data_Monoid.Monoid(function(){return semigroupIdenity(dictMonoid["__superclass_Prelude.Semigroup_0"]())},Data_Monoid.mempty(dictMonoid))};var moduloSemiringIdentity=function moduloSemiringIdentity(dictModuloSemiring){return new Prelude.ModuloSemiring(function(){return semiringIdentity(dictModuloSemiring["__superclass_Prelude.Semiring_0"]())},function(v){return function(v1){return Prelude["/"](dictModuloSemiring)(v)(v1)}},function(v){return function(v1){return Prelude.mod(dictModuloSemiring)(v)(v1)}})};var functorIdentity=new Prelude.Functor(function(f){return function(v){return f(v)}});var invariantIdentity=new Data_Functor_Invariant.Invariant(Data_Functor_Invariant.imapF(functorIdentity));var foldableIdentity=new Data_Foldable.Foldable(function(dictMonoid){return function(f){return function(v){return f(v)}}},function(f){return function(z){return function(v){return f(z)(v)}}},function(f){return function(z){return function(v){return f(v)(z)}}});var traversableIdentity=new Data_Traversable.Traversable(function(){return foldableIdentity},function(){return functorIdentity},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Identity)(v)}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Identity)(f(v))}}});var extendIdentity=new Control_Extend.Extend(function(){return functorIdentity},function(f){return function(m){return f(m)}});var eqIdentity=function eqIdentity(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v)(v1)}})};var ordIdentity=function ordIdentity(dictOrd){return new Prelude.Ord(function(){return eqIdentity(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v)(v1)}})};var divisionRingIdentity=function divisionRingIdentity(dictDivisionRing){return new Prelude.DivisionRing(function(){return moduloSemiringIdentity(dictDivisionRing["__superclass_Prelude.ModuloSemiring_1"]())},function(){return ringIdentity(dictDivisionRing["__superclass_Prelude.Ring_0"]())})};var numIdentity=function numIdentity(dictNum){return new Prelude.Num(function(){return divisionRingIdentity(dictNum["__superclass_Prelude.DivisionRing_0"]())})};var comonadIdentity=new Control_Comonad.Comonad(function(){return extendIdentity},function(v){return v});var boundedIdentity=function boundedIdentity(dictBounded){return new Prelude.Bounded(Prelude.bottom(dictBounded),Prelude.top(dictBounded))};var boundedOrdIdentity=function boundedOrdIdentity(dictBoundedOrd){return new Prelude.BoundedOrd(function(){return boundedIdentity(dictBoundedOrd["__superclass_Prelude.Bounded_0"]())},function(){return ordIdentity(dictBoundedOrd["__superclass_Prelude.Ord_1"]())})};var booleanAlgebraIdentity=function booleanAlgebraIdentity(dictBooleanAlgebra){return new Prelude.BooleanAlgebra(function(){return boundedIdentity(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())},function(v){return function(v1){return Prelude.conj(dictBooleanAlgebra)(v)(v1)}},function(v){return function(v1){return Prelude.disj(dictBooleanAlgebra)(v)(v1)}},function(v){return Prelude.not(dictBooleanAlgebra)(v)})};var applyIdentity=new Prelude.Apply(function(){return functorIdentity},function(v){return function(v1){return v(v1)}});var bindIdentity=new Prelude.Bind(function(){return applyIdentity},function(v){return function(f){return f(v)}});var applicativeIdentity=new Prelude.Applicative(function(){return applyIdentity},Identity);var monadIdentity=new Prelude.Monad(function(){return applicativeIdentity},function(){return bindIdentity});module.exports={Identity:Identity,runIdentity:runIdentity,eqIdentity:eqIdentity,ordIdentity:ordIdentity,boundedIdentity:boundedIdentity,boundedOrdIdentity:boundedOrdIdentity,booleanAlgebraIdentity:booleanAlgebraIdentity,semigroupIdenity:semigroupIdenity,monoidIdentity:monoidIdentity,semiringIdentity:semiringIdentity,moduloSemiringIdentity:moduloSemiringIdentity,ringIdentity:ringIdentity,divisionRingIdentity:divisionRingIdentity,numIdentity:numIdentity,showIdentity:showIdentity,functorIdentity:functorIdentity,invariantIdentity:invariantIdentity,applyIdentity:applyIdentity,applicativeIdentity:applicativeIdentity,bindIdentity:bindIdentity,monadIdentity:monadIdentity,extendIdentity:extendIdentity,comonadIdentity:comonadIdentity,foldableIdentity:foldableIdentity,traversableIdentity:traversableIdentity}},{"Control.Comonad":14,"Control.Extend":15,"Data.Foldable":61,"Data.Functor.Invariant":68,"Data.Monoid":114,"Data.Traversable":132,Prelude:146}],71:[function(require,module,exports){"use strict";exports.andImpl=function(n1){return function(n2){return n1&n2}};exports.orImpl=function(n1){return function(n2){return n1|n2}};exports.xorImpl=function(n1){return function(n2){return n1^n2}};exports.shl=function(n1){return function(n2){return n1<<n2}};exports.shr=function(n1){return function(n2){return n1>>n2}};exports.zshr=function(n1){return function(n2){return n1>>>n2}};exports.complement=function(n){return~n}},{}],72:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var $dot$bar$dot=$foreign.orImpl;var $dot$up$dot=$foreign.xorImpl;var $dot$amp$dot=$foreign.andImpl;module.exports={".^.":$dot$up$dot,".|.":$dot$bar$dot,".&.":$dot$amp$dot,complement:$foreign.complement,zshr:$foreign.zshr,shr:$foreign.shr,shl:$foreign.shl}},{"./foreign":71}],73:[function(require,module,exports){"use strict";exports.fromNumberImpl=function(just){return function(nothing){return function(n){return(n|0)===n?just(n):nothing}}};exports.toNumber=function(n){return n};exports.fromStringImpl=function(just){return function(nothing){return function(s){var i=parseFloat(s);return(i|0)===i?just(i):nothing}}}},{}],74:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Data_Int_Bits=require("Data.Int.Bits");var Data_Maybe=require("Data.Maybe");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var $$Math=require("Math");var odd=function odd(x){return(x&1)!==0};var fromString=$foreign.fromStringImpl(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var fromNumber=$foreign.fromNumberImpl(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var unsafeClamp=function unsafeClamp(x){if(x>=$foreign.toNumber(Prelude.top(Prelude.boundedInt))){return Prelude.top(Prelude.boundedInt)}if(x<=$foreign.toNumber(Prelude.bottom(Prelude.boundedInt))){return Prelude.bottom(Prelude.boundedInt)}if(Prelude.otherwise){return Data_Maybe_Unsafe.fromJust(fromNumber(x))}throw new Error("Failed pattern match at Data.Int line 49, column 1 - line 56, column 1: "+[x.constructor.name])};var round=function round($1){return unsafeClamp($$Math.round($1))};var floor=function floor($2){return unsafeClamp($$Math.floor($2))};var even=function even(x){return(x&1)===0};var ceil=function ceil($3){return unsafeClamp($$Math.ceil($3))};module.exports={odd:odd,even:even,fromString:fromString,round:round,floor:floor,ceil:ceil,fromNumber:fromNumber,toNumber:$foreign.toNumber}},{"./foreign":73,"Data.Int.Bits":72,"Data.Maybe":107,"Data.Maybe.Unsafe":106,Math:144,Prelude:146}],75:[function(require,module,exports){"use strict";var Data_Lens_Lens_Tuple=require("Data.Lens.Lens.Tuple");var Data_Lens_Lens_Unit=require("Data.Lens.Lens.Unit");var Data_Lens_Lens_Void=require("Data.Lens.Lens.Void");var Data_Lens_Prism_Either=require("Data.Lens.Prism.Either");var Data_Lens_Prism_Maybe=require("Data.Lens.Prism.Maybe");module.exports={}},{"Data.Lens.Lens.Tuple":90,"Data.Lens.Lens.Unit":91,"Data.Lens.Lens.Void":92,"Data.Lens.Prism.Either":94,"Data.Lens.Prism.Maybe":95}],76:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Apply=require("Control.Apply");var Data_Either=require("Data.Either");var Data_Foldable=require("Data.Foldable");var Data_Functor_Contravariant=require("Data.Functor.Contravariant");var Data_List=require("Data.List");var Data_Maybe=require("Data.Maybe");var Data_Maybe_First=require("Data.Maybe.First");var Data_Maybe_Last=require("Data.Maybe.Last");var Data_Monoid_Additive=require("Data.Monoid.Additive");var Data_Monoid_Conj=require("Data.Monoid.Conj");var Data_Monoid_Disj=require("Data.Monoid.Disj");var Data_Monoid_Dual=require("Data.Monoid.Dual");var Data_Monoid_Endo=require("Data.Monoid.Endo");var Data_Monoid_Multiplicative=require("Data.Monoid.Multiplicative");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Profunctor_Star=require("Data.Profunctor.Star");var Data_Tuple=require("Data.Tuple");var Data_Lens_Internal_Void=require("Data.Lens.Internal.Void");var Data_Lens_Internal_Forget=require("Data.Lens.Internal.Forget");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Internal_Indexed=require("Data.Lens.Internal.Indexed");var unfolded=function unfolded(dictApplicative){return function(dictContravariant){return function(f){return function(p){var go=function go($39){return Data_Maybe.maybe(Data_Lens_Internal_Void.coerce(dictContravariant)(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Prelude.pure(dictApplicative)(Prelude.unit)))(function(v){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Data_Profunctor_Star.runStar(p)(v.value0))(go(v.value1))})(f($39))};return go}}}};var replicated=function replicated(dictApplicative){return function(dictContravariant){return function(n){return function(p){var go=function go(x){return function(v){if(v===0){return Data_Lens_Internal_Void.coerce(dictContravariant)(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Prelude.pure(dictApplicative)(Prelude.unit))}return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(x)(go(x)(v-1))}};return function($40){return Prelude.flip(go)(n)(Data_Profunctor_Star.runStar(p)($40))}}}}};var ifoldMapOf=function ifoldMapOf(p){return function(f){return Data_Lens_Internal_Forget.runForget(p(Data_Lens_Internal_Indexed.Indexed(Data_Tuple.uncurry(f))))}};var ifoldlOf=function ifoldlOf(p){return function(f){return function(r){return function($41){return Prelude.flip(Data_Monoid_Endo.runEndo)(r)(Data_Monoid_Dual.runDual(ifoldMapOf(p)(function(i){return function($42){return Data_Monoid_Dual.Dual(Data_Monoid_Endo.Endo(Prelude.flip(f(i))($42)))}})($41)))}}}};var ifoldrOf=function ifoldrOf(p){return function(f){return function(r){return function($43){return Prelude.flip(Data_Monoid_Endo.runEndo)(r)(ifoldMapOf(p)(function(i){return function($44){return Data_Monoid_Endo.Endo(f(i)($44))}})($43))}}}};var itoListOf=function itoListOf(p){
return ifoldrOf(p)(function(i){return function(x){return function(xs){return Data_List[":"](new Data_Tuple.Tuple(i,x))(xs)}}})(Data_List.Nil.value)};var itraverseOf_=function itraverseOf_(dictApplicative){return function(p){return function(f){return ifoldrOf(p)(function(i){return function(a){return function(fu){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["void"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(f(i)(a)))(fu)}}})(Prelude.pure(dictApplicative)(Prelude.unit))}}};var ifindOf=function ifindOf(p){return function(f){return ifoldrOf(p)(function(i){return function(a){return Data_Maybe.maybe(function(){var $34=f(i)(a);if($34){return new Data_Maybe.Just(a)}if(!$34){return Data_Maybe.Nothing.value}throw new Error("Failed pattern match at Data.Lens.Fold line 197, column 42 - line 197, column 75: "+[$34.constructor.name])}())(Data_Maybe.Just.create)}})(Data_Maybe.Nothing.value)}};var ianyOf=function ianyOf(dictBooleanAlgebra){return function(p){return function(f){return function($45){return Data_Monoid_Disj.runDisj(ifoldMapOf(p)(function(i){return function($46){return Data_Monoid_Disj.Disj(f(i)($46))}})($45))}}}};var iallOf=function iallOf(dictBooleanAlgebra){return function(p){return function(f){return function($47){return Data_Monoid_Conj.runConj(ifoldMapOf(p)(function(i){return function($48){return Data_Monoid_Conj.Conj(f(i)($48))}})($47))}}}};var folded=function folded(dictApplicative){return function(dictContravariant){return function(dictFoldable){return function(p){return Data_Profunctor_Star.Star(Data_Foldable.foldr(dictFoldable)(function(a){return function(r){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Data_Profunctor_Star.runStar(p)(a))(r)}})(Data_Lens_Internal_Void.coerce(dictContravariant)(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Prelude.pure(dictApplicative)(Prelude.unit))))}}}};var foldOf=function foldOf(p){return Data_Lens_Internal_Forget.runForget(p(Prelude.id(Prelude.categoryFn)))};var foldMapOf=function foldMapOf(p){return function(f){return Data_Lens_Internal_Forget.runForget(p(f))}};var foldlOf=function foldlOf(p){return function(f){return function(r){return function($49){return Prelude.flip(Data_Monoid_Endo.runEndo)(r)(Data_Monoid_Dual.runDual(foldMapOf(p)(function($50){return Data_Monoid_Dual.Dual(Data_Monoid_Endo.Endo(Prelude.flip(f)($50)))})($49)))}}}};var foldrOf=function foldrOf(p){return function(f){return function(r){return function($51){return Prelude.flip(Data_Monoid_Endo.runEndo)(r)(foldMapOf(p)(function($52){return Data_Monoid_Endo.Endo(f($52))})($51))}}}};var maximumOf=function maximumOf(dictOrd){return function(p){var max=function max(a){return function(b){var $35=Prelude[">"](dictOrd)(a)(b);if($35){return a}if(!$35){return b}throw new Error("Failed pattern match at Data.Lens.Fold line 114, column 13 - line 117, column 1: "+[$35.constructor.name])}};return foldrOf(p)(function(a){return function($53){return Data_Maybe.Just.create(Data_Maybe.maybe(a)(max(a))($53))}})(Data_Maybe.Nothing.value)}};var minimumOf=function minimumOf(dictOrd){return function(p){var min=function min(a){return function(b){var $36=Prelude["<"](dictOrd)(a)(b);if($36){return a}if(!$36){return b}throw new Error("Failed pattern match at Data.Lens.Fold line 119, column 13 - line 122, column 1: "+[$36.constructor.name])}};return foldrOf(p)(function(a){return function($54){return Data_Maybe.Just.create(Data_Maybe.maybe(a)(min(a))($54))}})(Data_Maybe.Nothing.value)}};var toListOf=function toListOf(p){return foldrOf(p)(Data_List[":"])(Data_List.Nil.value)};var $up$dot$dot=function $up$dot$dot(s){return function(p){return toListOf(p)(s)}};var traverseOf_=function traverseOf_(dictApplicative){return function(p){return function(f){return foldrOf(p)(function(a){return function(fu){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["void"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(f(a)))(fu)}})(Prelude.pure(dictApplicative)(Prelude.unit))}}};var has=function has(dictBooleanAlgebra){return function(p){return function($55){return Data_Monoid_Disj.runDisj(foldMapOf(p)(Prelude["const"](Prelude.top(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())))($55))}}};var hasn$primet=function hasn$primet(dictBooleanAlgebra){return function(p){return function($56){return Data_Monoid_Conj.runConj(foldMapOf(p)(Prelude["const"](Prelude.bottom(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())))($56))}}};var lastOf=function lastOf(p){return function($57){return Data_Maybe_Last.runLast(foldMapOf(p)(function($58){return Data_Maybe_Last.Last(Data_Maybe.Just.create($58))})($57))}};var lengthOf=function lengthOf(p){return function($59){return Data_Monoid_Additive.runAdditive(foldMapOf(p)(Prelude["const"](1))($59))}};var preview=function preview(p){return function($60){return Data_Maybe_First.runFirst(foldMapOf(p)(function($61){return Data_Maybe_First.First(Data_Maybe.Just.create($61))})($60))}};var $up$qmark=function $up$qmark(s){return function(p){return preview(p)(s)}};var productOf=function productOf(dictSemiring){return function(p){return function($62){return Data_Monoid_Multiplicative.runMultiplicative(foldMapOf(p)(Data_Monoid_Multiplicative.Multiplicative)($62))}}};var sequenceOf_=function sequenceOf_(dictApplicative){return function(p){return function($63){return Prelude.flip(Data_Monoid_Endo.runEndo)(Prelude.pure(dictApplicative)(Prelude.unit))(foldMapOf(p)(function(f){return Control_Apply["*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(f)})($63))}}};var sumOf=function sumOf(dictSemiring){return function(p){return function($64){return Data_Monoid_Additive.runAdditive(foldMapOf(p)(Data_Monoid_Additive.Additive)($64))}}};var firstOf=function firstOf(p){return function($65){return Data_Maybe_First.runFirst(foldMapOf(p)(function($66){return Data_Maybe_First.First(Data_Maybe.Just.create($66))})($65))}};var findOf=function findOf(p){return function(f){return foldrOf(p)(function(a){return Data_Maybe.maybe(function(){var $37=f(a);if($37){return new Data_Maybe.Just(a)}if(!$37){return Data_Maybe.Nothing.value}throw new Error("Failed pattern match at Data.Lens.Fold line 123, column 38 - line 123, column 69: "+[$37.constructor.name])}())(Data_Maybe.Just.create)})(Data_Maybe.Nothing.value)}};var filtered=function filtered(dictChoice){return function(f){return function($67){return Data_Profunctor.dimap(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())(function(x){var $38=f(x);if($38){return new Data_Either.Right(x)}if(!$38){return new Data_Either.Left(x)}throw new Error("Failed pattern match at Data.Lens.Fold line 152, column 27 - line 152, column 58: "+[$38.constructor.name])})(Data_Either.either(Prelude.id(Prelude.categoryFn))(Prelude.id(Prelude.categoryFn)))(Data_Profunctor_Choice.right(dictChoice)($67))}}};var anyOf=function anyOf(dictBooleanAlgebra){return function(p){return function(f){return function($68){return Data_Monoid_Disj.runDisj(foldMapOf(p)(function($69){return Data_Monoid_Disj.Disj(f($69))})($68))}}}};var elemOf=function elemOf(dictEq){return function(p){return function(a){return anyOf(Prelude.booleanAlgebraBoolean)(p)(function(v){return Prelude["=="](dictEq)(v)(a)})}}};var orOf=function orOf(dictBooleanAlgebra){return function(p){return anyOf(dictBooleanAlgebra)(p)(Prelude.id(Prelude.categoryFn))}};var allOf=function allOf(dictBooleanAlgebra){return function(p){return function(f){return function($70){return Data_Monoid_Conj.runConj(foldMapOf(p)(function($71){return Data_Monoid_Conj.Conj(f($71))})($70))}}}};var andOf=function andOf(dictBooleanAlgebra){return function(p){return allOf(dictBooleanAlgebra)(p)(Prelude.id(Prelude.categoryFn))}};var notElemOf=function notElemOf(dictEq){return function(p){return function(a){return allOf(Prelude.booleanAlgebraBoolean)(p)(function(v){return Prelude["/="](dictEq)(v)(a)})}}};module.exports={itraverseOf_:itraverseOf_,itoListOf:itoListOf,ianyOf:ianyOf,iallOf:iallOf,ifoldlOf:ifoldlOf,ifoldrOf:ifoldrOf,ifoldMapOf:ifoldMapOf,filtered:filtered,replicated:replicated,"hasn't":hasn$primet,has:has,sequenceOf_:sequenceOf_,findOf:findOf,lengthOf:lengthOf,productOf:productOf,sumOf:sumOf,notElemOf:notElemOf,elemOf:elemOf,orOf:orOf,andOf:andOf,anyOf:anyOf,allOf:allOf,minimumOf:minimumOf,maximumOf:maximumOf,lastOf:lastOf,firstOf:firstOf,toListOf:toListOf,foldlOf:foldlOf,foldrOf:foldrOf,foldMapOf:foldMapOf,foldOf:foldOf,preview:preview,"^..":$up$dot$dot,"^?":$up$qmark}},{"Control.Apply":10,"Data.Either":57,"Data.Foldable":61,"Data.Functor.Contravariant":67,"Data.Lens.Internal.Forget":81,"Data.Lens.Internal.Indexed":82,"Data.Lens.Internal.Void":87,"Data.Lens.Types":99,"Data.List":101,"Data.Maybe":107,"Data.Maybe.First":103,"Data.Maybe.Last":104,"Data.Monoid.Additive":108,"Data.Monoid.Conj":109,"Data.Monoid.Disj":110,"Data.Monoid.Dual":111,"Data.Monoid.Endo":112,"Data.Monoid.Multiplicative":113,"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Star":119,"Data.Tuple":134,Prelude:146}],77:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Const=require("Data.Const");var Data_Functor_Contravariant=require("Data.Functor.Contravariant");var Data_Profunctor_Star=require("Data.Profunctor.Star");var Data_Tuple=require("Data.Tuple");var Control_Monad_State_Class=require("Control.Monad.State.Class");var Data_Lens_Internal_Forget=require("Data.Lens.Internal.Forget");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Internal_Indexed=require("Data.Lens.Internal.Indexed");var view=function view(l){return Data_Lens_Internal_Forget.runForget(l(Prelude.id(Prelude.categoryFn)))};var $up$dot=function $up$dot(s){return function(l){return view(l)(s)}};var use=function use(dictMonadState){return function(p){return Control_Monad_State_Class.gets(dictMonadState)(function(v){return $up$dot(v)(p)})}};var to=function to(dictContravariant){return function(f){return function(p){return function($4){return Data_Functor_Contravariant.cmap(dictContravariant)(f)(Data_Profunctor_Star.runStar(p)(f($4)))}}}};var iview=function iview(l){return Data_Lens_Internal_Forget.runForget(l(Data_Lens_Internal_Indexed.Indexed(Prelude.id(Prelude.categoryFn))))};var iuse=function iuse(dictMonadState){return function(p){return Control_Monad_State_Class.gets(dictMonadState)(iview(p))}};module.exports={iuse:iuse,iview:iview,use:use,to:to,view:view,"^.":$up$dot}},{"Control.Monad.State.Class":32,"Data.Const":54,"Data.Functor.Contravariant":67,"Data.Lens.Internal.Forget":81,"Data.Lens.Internal.Indexed":82,"Data.Lens.Types":99,"Data.Profunctor.Star":119,"Data.Tuple":134,Prelude:146}],78:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Identity=require("Data.Identity");var Data_Map=require("Data.Map");var Data_Maybe=require("Data.Maybe");var Data_Set=require("Data.Set");var Data_StrMap=require("Data.StrMap");var Data_Array=require("Data.Array");var Data_Traversable=require("Data.Traversable");var Data_Lens_Internal_Wander=require("Data.Lens.Internal.Wander");var Data_Lens_Types=require("Data.Lens.Types");var Index=function Index(ix){this.ix=ix};var ix=function ix(dict){return dict.ix};var indexStrMap=new Index(function(k){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return function(coalg){return function(m){return Prelude["#"](Data_StrMap.lookup(k)(m))(Data_Maybe.maybe(Prelude.pure(dictApplicative)(m))(Prelude[">>>"](Prelude.semigroupoidFn)(coalg)(Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"](undefined)["__superclass_Prelude.Functor_0"](undefined))(function(v){return Data_StrMap.insert(k)(v)(m)}))))}}})}});var indexSet=function indexSet(dictOrd){return new Index(function(x){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return function(coalg){return Prelude["<<<"](Prelude.semigroupoidFn)(Prelude.pure(dictApplicative))(Data_Set.insert(dictOrd)(x))}})}})};var indexMaybe=new Index(function(v){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return Data_Traversable.traverse(Data_Traversable.traversableMaybe)(dictApplicative)})}});var indexMap=function indexMap(dictOrd){return new Index(function(k){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return function(coalg){return function(m){return Prelude["#"](Data_Map.lookup(dictOrd)(k)(m))(Data_Maybe.maybe(Prelude.pure(dictApplicative)(m))(Prelude[">>>"](Prelude.semigroupoidFn)(coalg)(Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"](undefined)["__superclass_Prelude.Functor_0"](undefined))(function(v){return Data_Map.insert(dictOrd)(k)(v)(m)}))))}}})}})};var indexIdentity=new Index(function(v){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return Data_Traversable.traverse(Data_Identity.traversableIdentity)(dictApplicative)})}});var indexArray=new Index(function(n){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return function(coalg){return function(xs){return Prelude["#"](Data_Array["!!"](xs)(n))(Data_Maybe.maybe(Prelude.pure(dictApplicative)(xs))(Prelude[">>>"](Prelude.semigroupoidFn)(coalg)(Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"](undefined)["__superclass_Prelude.Functor_0"](undefined))(function(x){return Data_Maybe.fromMaybe(xs)(Data_Array.updateAt(n)(x)(xs))}))))}}})}});var indexArr=function indexArr(dictEq){return new Index(function(i){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return function(coalg){return function(f){return Prelude["<#>"](dictApplicative["__superclass_Prelude.Apply_0"](undefined)["__superclass_Prelude.Functor_0"](undefined))(coalg(f(i)))(function(a){return function(j){return function(){var $19=Prelude["=="](dictEq)(i)(j);if($19){return a}if(!$19){return f(j)}throw new Error("Failed pattern match at Data.Lens.Index line 26, column 9 - line 28, column 1: "+[$19.constructor.name])}()}})}}})}})};module.exports={Index:Index,ix:ix,indexArr:indexArr,indexMaybe:indexMaybe,indexIdentity:indexIdentity,indexArray:indexArray,indexSet:indexSet,indexMap:indexMap,indexStrMap:indexStrMap}},{"Data.Array":48,"Data.Identity":70,"Data.Lens.Internal.Wander":88,"Data.Lens.Types":99,"Data.Map":102,"Data.Maybe":107,"Data.Set":122,"Data.StrMap":126,"Data.Traversable":132,Prelude:146}],79:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Monad_State=require("Control.Monad.State");var Control_Apply=require("Control.Apply");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Star=require("Data.Profunctor.Star");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Functor_Compose=require("Data.Functor.Compose");var Data_Tuple=require("Data.Tuple");var Data_Either=require("Data.Either");var Data_Lens_Types=require("Data.Lens.Types");var Data_Lens_Internal_Indexed=require("Data.Lens.Internal.Indexed");var Data_Lens_Internal_Wander=require("Data.Lens.Internal.Wander");var Control_Monad_State_Trans=require("Control.Monad.State.Trans");var Data_Identity=require("Data.Identity");var Control_Monad_State_Class=require("Control.Monad.State.Class");var unIndex=function unIndex(dictProfunctor){return function(l){return function($6){return l(Data_Lens_Internal_Indexed.Indexed(Data_Profunctor.dimap(dictProfunctor)(Data_Tuple.snd)(Prelude.id(Prelude.categoryFn))($6)))}}};var iwander=function iwander(dictWander){return function(itr){return function($7){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return function(f){return function(s){return itr(dictApplicative)(Data_Tuple.curry(f))(s)}}})(Data_Lens_Internal_Indexed.fromIndexed($7))}}};var positions=function positions(dictWander){return function(tr){return iwander(dictWander)(function(dictApplicative){return function(f){return function(s){return Prelude.flip(Control_Monad_State.evalState)(0)(Data_Functor_Compose.decompose(Prelude.flip(Data_Profunctor_Star.runStar)(s)(tr(Data_Lens_Internal_Wander.wanderStar(Data_Functor_Compose.applicativeCompose(Control_Monad_State_Trans.applicativeStateT(Data_Identity.monadIdentity))(dictApplicative)))(function(a){return Data_Functor_Compose.Compose.create(Control_Apply["<*"](Control_Monad_State_Trans.applyStateT(Data_Identity.monadIdentity))(Prelude["<*>"](Control_Monad_State_Trans.applyStateT(Data_Identity.monadIdentity))(Prelude["<$>"](Control_Monad_State_Trans.functorStateT(Data_Identity.monadIdentity))(f)(Control_Monad_State_Class.get(Control_Monad_State_Trans.monadStateStateT(Data_Identity.monadIdentity))))(Prelude.pure(Control_Monad_State_Trans.applicativeStateT(Data_Identity.monadIdentity))(a)))(Control_Monad_State_Class.modify(Control_Monad_State_Trans.monadStateStateT(Data_Identity.monadIdentity))(function(v){return v+1|0})))}))))}}})}};module.exports={positions:positions,iwander:iwander,unIndex:unIndex}},{"Control.Apply":10,"Control.Monad.State":34,"Control.Monad.State.Class":32,"Control.Monad.State.Trans":33,"Data.Either":57,"Data.Functor.Compose":66,"Data.Identity":70,"Data.Lens.Internal.Indexed":82,"Data.Lens.Internal.Wander":88,"Data.Lens.Types":99,"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Star":119,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146}],80:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Exchange=function(){function Exchange(value0,value1){this.value0=value0;this.value1=value1}Exchange.create=function(value0){return function(value1){return new Exchange(value0,value1)}};return Exchange}();var profunctorExchange=new Data_Profunctor.Profunctor(function(f){return function(g){return function(v){return new Exchange(function($11){return v.value0(f($11))},function($12){return g(v.value1($12))})}}});var functorExchange=new Prelude.Functor(function(f){return function(v){return new Exchange(v.value0,function($13){return f(v.value1($13))})}});module.exports={Exchange:Exchange,functorExchange:functorExchange,profunctorExchange:profunctorExchange}},{"Data.Profunctor":121,Prelude:146}],81:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Tuple=require("Data.Tuple");var Data_Either=require("Data.Either");var Data_Monoid=require("Data.Monoid");var Data_Const=require("Data.Const");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Profunctor_Cochoice=require("Data.Profunctor.Cochoice");var Data_Lens_Internal_Wander=require("Data.Lens.Internal.Wander");var Forget=function Forget(x){return x};var runForget=function runForget(v){return v};var profunctorForget=new Data_Profunctor.Profunctor(function(f){return function(v){return function(v1){return function($24){return v1(f($24))}}}});var strongForget=new Data_Profunctor_Strong.Strong(function(){return profunctorForget},function(v){return function($25){return v(Data_Tuple.fst($25))}},function(v){return function($26){return v(Data_Tuple.snd($26))}});var cochoiceForget=new Data_Profunctor_Cochoice.Cochoice(function(){return profunctorForget},function(v){return function($27){return v(Data_Either.Left.create($27))}},function(v){return function($28){return v(Data_Either.Right.create($28))}});var choiceForget=function choiceForget(dictMonoid){return new Data_Profunctor_Choice.Choice(function(){return profunctorForget},function(v){return Data_Either.either(v)(Data_Monoid.mempty(Data_Monoid.monoidFn(dictMonoid)))},function(v){return Data_Either.either(Data_Monoid.mempty(Data_Monoid.monoidFn(dictMonoid)))(v)})};var wanderForget=function wanderForget(dictMonoid){return new Data_Lens_Internal_Wander.Wander(function(){return choiceForget(dictMonoid)},function(){return strongForget},function(f){return function(v){return function(s){return Data_Const.getConst(f(Data_Const.applicativeConst(dictMonoid))(function($29){return Data_Const.Const(v($29))})(s))}}})};module.exports={Forget:Forget,runForget:runForget,profunctorForget:profunctorForget,choiceForget:choiceForget,strongForget:strongForget,cochoiceForget:cochoiceForget,wanderForget:wanderForget}},{"Data.Const":54,"Data.Either":57,"Data.Lens.Internal.Wander":88,"Data.Monoid":114,"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Cochoice":117,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146}],82:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Tuple=require("Data.Tuple");var Data_Either=require("Data.Either");var Indexed=function Indexed(x){return x};var fromIndexed=function fromIndexed(v){return v};var indexedProfunctor=function indexedProfunctor(dictProfunctor){return new Data_Profunctor.Profunctor(function(f){return function(g){return function($29){return Indexed(Data_Profunctor.dimap(dictProfunctor)(Data_Profunctor_Strong.second(Data_Profunctor_Strong.strongFn)(f))(g)(fromIndexed($29)))}}})};var indexedChoice=function indexedChoice(dictChoice){return new Data_Profunctor_Choice.Choice(function(){return indexedProfunctor(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())},function(v){return Data_Profunctor.dimap(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())(function(v1){return Data_Either.either(function($30){return Data_Either.Left.create(Data_Tuple.Tuple.create(v1.value0)($30))})(Data_Either.Right.create)(v1.value1)})(Prelude.id(Prelude.categoryFn))(Data_Profunctor_Choice.left(dictChoice)(v))},function(v){return Data_Profunctor.dimap(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())(function(v1){return Data_Either.either(Data_Either.Left.create)(function($31){return Data_Either.Right.create(Data_Tuple.Tuple.create(v1.value0)($31))})(v1.value1)})(Prelude.id(Prelude.categoryFn))(Data_Profunctor_Choice.right(dictChoice)(v))})};var indexedStrong=function indexedStrong(dictStrong){return new Data_Profunctor_Strong.Strong(function(){return indexedProfunctor(dictStrong["__superclass_Data.Profunctor.Profunctor_0"]())},function($32){return Indexed(Data_Profunctor.dimap(dictStrong["__superclass_Data.Profunctor.Profunctor_0"]())(function(v){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(v.value0,v.value1.value0),v.value1.value1)})(Prelude.id(Prelude.categoryFn))(Data_Profunctor_Strong.first(dictStrong)(fromIndexed($32))))},function($33){return Indexed(Data_Profunctor.dimap(dictStrong["__superclass_Data.Profunctor.Profunctor_0"]())(function(v){return new Data_Tuple.Tuple(v.value1.value0,new Data_Tuple.Tuple(v.value0,v.value1.value1))})(Prelude.id(Prelude.categoryFn))(Data_Profunctor_Strong.second(dictStrong)(fromIndexed($33))))})};module.exports={Indexed:Indexed,fromIndexed:fromIndexed,indexedProfunctor:indexedProfunctor,indexedStrong:indexedStrong,indexedChoice:indexedChoice}},{"Data.Either":57,"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146}],83:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Bifunctor=require("Data.Bifunctor");var Data_Either=require("Data.Either");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Market=function(){function Market(value0,value1){this.value0=value0;this.value1=value1}Market.create=function(value0){return function(value1){return new Market(value0,value1)}};return Market}();var profunctorMarket=new Data_Profunctor.Profunctor(function(f){return function(g){return function(v){return new Market(function($19){return g(v.value0($19))},function($20){return Data_Bifunctor.lmap(Data_Either.bifunctorEither)(g)(v.value1(f($20)))})}}});var functorMarket=new Prelude.Functor(function(f){return function(v){return new Market(function($21){return f(v.value0($21))},function($22){return Data_Bifunctor.lmap(Data_Either.bifunctorEither)(f)(v.value1($22))})}});var choiceMarket=new Data_Profunctor_Choice.Choice(function(){return profunctorMarket},function(v){return new Market(function($23){return Data_Either.Left.create(v.value0($23))},Data_Either.either(function($24){return Data_Bifunctor.lmap(Data_Either.bifunctorEither)(Data_Either.Left.create)(v.value1($24))})(function($25){return Data_Either.Left.create(Data_Either.Right.create($25))}))},function(v){return new Market(function($26){return Data_Either.Right.create(v.value0($26))},Data_Either.either(function($27){return Data_Either.Left.create(Data_Either.Left.create($27))})(function($28){return Data_Bifunctor.lmap(Data_Either.bifunctorEither)(Data_Either.Right.create)(v.value1($28))}))});module.exports={Market:Market,functorMarket:functorMarket,profunctorMarket:profunctorMarket,choiceMarket:choiceMarket}},{"Data.Bifunctor":50,"Data.Either":57,"Data.Profunctor":121,"Data.Profunctor.Choice":115,Prelude:146}],84:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Profunctor_Cochoice=require("Data.Profunctor.Cochoice");var Data_Profunctor_Costrong=require("Data.Profunctor.Costrong");var Re=function Re(x){return x};var runRe=function runRe(v){return v};var profunctorRe=function profunctorRe(dictProfunctor){return new Data_Profunctor.Profunctor(function(f){return function(g){return function(v){return function($27){return v(Data_Profunctor.dimap(dictProfunctor)(g)(f)($27))}}}})};var strongRe=function strongRe(dictStrong){return new Data_Profunctor_Costrong.Costrong(function(){return profunctorRe(dictStrong["__superclass_Data.Profunctor.Profunctor_0"]())},function(v){return function($28){return v(Data_Profunctor_Strong.first(dictStrong)($28))}},function(v){return function($29){return v(Data_Profunctor_Strong.second(dictStrong)($29))}})};var costrongRe=function costrongRe(dictCostrong){return new Data_Profunctor_Strong.Strong(function(){return profunctorRe(dictCostrong["__superclass_Data.Profunctor.Profunctor_0"]())},function(v){return function($30){return v(Data_Profunctor_Costrong.unfirst(dictCostrong)($30))}},function(v){return function($31){return v(Data_Profunctor_Costrong.unsecond(dictCostrong)($31))}})};var cochoiceRe=function cochoiceRe(dictCochoice){return new Data_Profunctor_Choice.Choice(function(){return profunctorRe(dictCochoice["__superclass_Data.Profunctor.Profunctor_0"]())},function(v){return function($32){return v(Data_Profunctor_Cochoice.unleft(dictCochoice)($32))}},function(v){return function($33){return v(Data_Profunctor_Cochoice.unright(dictCochoice)($33))}})};var choiceRe=function choiceRe(dictChoice){return new Data_Profunctor_Cochoice.Cochoice(function(){return profunctorRe(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())},function(v){return function($34){return v(Data_Profunctor_Choice.left(dictChoice)($34))}},function(v){return function($35){return v(Data_Profunctor_Choice.right(dictChoice)($35))}})};module.exports={Re:Re,runRe:runRe,profunctorRe:profunctorRe,choiceRe:choiceRe,cochoiceRe:cochoiceRe,strongRe:strongRe,costrongRe:costrongRe}},{"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Cochoice":117,"Data.Profunctor.Costrong":118,"Data.Profunctor.Strong":120,Prelude:146}],85:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Tuple=require("Data.Tuple");var Shop=function(){function Shop(value0,value1){this.value0=value0;this.value1=value1}Shop.create=function(value0){return function(value1){return new Shop(value0,value1)}};return Shop}();var profunctorShop=new Data_Profunctor.Profunctor(function(f){return function(g){return function(v){return new Shop(function($30){return v.value0(f($30))},function(s){return function($31){return g(v.value1(f(s))($31))}})}}});var strongShop=new Data_Profunctor_Strong.Strong(function(){return profunctorShop},function(v){return new Shop(function(v1){return v.value0(v1.value0)},function(v1){return function(b){return new Data_Tuple.Tuple(v.value1(v1.value0)(b),v1.value1)}})},function(v){return new Shop(function(v1){return v.value0(v1.value1)},function(v1){return function(b){return new Data_Tuple.Tuple(v1.value0,v.value1(v1.value1)(b))}})});module.exports={Shop:Shop,profunctorShop:profunctorShop,strongShop:strongShop}},{"Data.Profunctor":121,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146}],86:[function(require,module,exports){"use strict";var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Profunctor_Costrong=require("Data.Profunctor.Costrong");var Data_Either=require("Data.Either");var Data_Tuple=require("Data.Tuple");var Tagged=function Tagged(x){return x};var unTagged=function unTagged(v){return v};var taggedProfunctor=new Data_Profunctor.Profunctor(function(v){return function(g){return function(v1){return g(v1)}}});var taggedCostrong=new Data_Profunctor_Costrong.Costrong(function(){return taggedProfunctor},function(v){return v.value0},function(v){return v.value1});var taggedChoice=new Data_Profunctor_Choice.Choice(function(){return taggedProfunctor},function(v){return new Data_Either.Left(v)},function(v){return new Data_Either.Right(v)});module.exports={Tagged:Tagged,unTagged:unTagged,taggedProfunctor:taggedProfunctor,taggedChoice:taggedChoice,taggedCostrong:taggedCostrong}},{"Data.Either":57,"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Costrong":118,"Data.Tuple":134}],87:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Functor_Contravariant=require("Data.Functor.Contravariant");var Unsafe_Coerce=require("Unsafe.Coerce");var absurd=Unsafe_Coerce.unsafeCoerce;var coerce=function coerce(dictContravariant){return function(dictFunctor){return function(a){return Prelude["<$>"](dictFunctor)(absurd)(Data_Functor_Contravariant[">$<"](dictContravariant)(absurd)(a))}}};module.exports={coerce:coerce,absurd:absurd}},{"Data.Functor.Contravariant":67,Prelude:146,"Unsafe.Coerce":166}],88:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Profunctor_Star=require("Data.Profunctor.Star");var Data_Identity=require("Data.Identity");var Wander=function Wander(__superclass_Data$dotProfunctor$dotChoice$dotChoice_1,__superclass_Data$dotProfunctor$dotStrong$dotStrong_0,wander){this["__superclass_Data.Profunctor.Choice.Choice_1"]=__superclass_Data$dotProfunctor$dotChoice$dotChoice_1;this["__superclass_Data.Profunctor.Strong.Strong_0"]=__superclass_Data$dotProfunctor$dotStrong$dotStrong_0;this.wander=wander};var wanderStar=function wanderStar(dictApplicative){return new Wander(function(){return Data_Profunctor_Star.choiceStar(dictApplicative)},function(){return Data_Profunctor_Star.strongStar(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())},function(t){return function($1){return Data_Profunctor_Star.Star(t(dictApplicative)(Data_Profunctor_Star.runStar($1)))}})};var wanderFunction=new Wander(function(){return Data_Profunctor_Choice.choiceFn},function(){return Data_Profunctor_Strong.strongFn},function(t){
return function(f){return function(s){return Data_Identity.runIdentity(t(Data_Identity.applicativeIdentity)(function($2){return Data_Identity.Identity(f($2))})(s))}}});var wander=function wander(dict){return dict.wander};module.exports={Wander:Wander,wander:wander,wanderFunction:wanderFunction,wanderStar:wanderStar}},{"Data.Identity":70,"Data.Profunctor.Choice":115,"Data.Profunctor.Star":119,"Data.Profunctor.Strong":120,Prelude:146}],89:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Data_Tuple=require("Data.Tuple");var Data_Lens_Types=require("Data.Lens.Types");var Data_Lens_Internal_Exchange=require("Data.Lens.Internal.Exchange");var Data_Lens_Internal_Re=require("Data.Lens.Internal.Re");var withIso=function withIso(l){return function(f){var $6=l(new Data_Lens_Internal_Exchange.Exchange(Prelude.id(Prelude.categoryFn),Prelude.id(Prelude.categoryFn)));return f($6.value0)($6.value1)}};var under=function under(l){return withIso(l)(function(sa){return function(bt){return function(ts){return function($9){return sa(ts(bt($9)))}}}})};var re=function re(t){return Data_Lens_Internal_Re.runRe(t(Prelude.id(Prelude.categoryFn)))};var iso=function iso(f){return function(g){return function(dictProfunctor){return function(pab){return Data_Profunctor.dimap(dictProfunctor)(f)(g)(pab)}}}};var uncurried=function uncurried(dictProfunctor){return iso(Data_Tuple.uncurry)(Data_Tuple.curry)(dictProfunctor)};var flipped=function flipped(dictProfunctor){return iso(Prelude.flip)(Prelude.flip)(dictProfunctor)};var curried=function curried(dictProfunctor){return iso(Data_Tuple.curry)(Data_Tuple.uncurry)(dictProfunctor)};var cloneIso=function cloneIso(l){return function(dictProfunctor){return withIso(l)(function(x){return function(y){return function(p){return iso(x)(y)(dictProfunctor)(p)}}})}};var auf=function auf(dictProfunctor){return function(l){return withIso(l)(function(sa){return function(bt){return function(f){return function(g){return function(e){return bt(f(Data_Profunctor.rmap(dictProfunctor)(sa)(g))(e))}}}}})}};var au=function au(l){return withIso(l)(function(sa){return function(bt){return function(f){return function(e){return sa(f(bt)(e))}}}})};module.exports={flipped:flipped,uncurried:uncurried,curried:curried,under:under,auf:auf,au:au,re:re,cloneIso:cloneIso,withIso:withIso,iso:iso}},{"Data.Lens.Internal.Exchange":80,"Data.Lens.Internal.Re":84,"Data.Lens.Types":99,"Data.Profunctor":121,"Data.Tuple":134,Prelude:146}],90:[function(require,module,exports){"use strict";var Data_Tuple=require("Data.Tuple");var Data_Lens_Lens=require("Data.Lens.Lens");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var _2=function _2(dictStrong){return Data_Profunctor_Strong.second(dictStrong)};var _1=function _1(dictStrong){return Data_Profunctor_Strong.first(dictStrong)};module.exports={_2:_2,_1:_1}},{"Data.Lens.Lens":93,"Data.Profunctor.Strong":120,"Data.Tuple":134}],91:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Lens_Lens=require("Data.Lens.Lens");var united=function united(dictStrong){return Data_Lens_Lens.lens(Prelude["const"](Prelude.unit))(Prelude["const"])(dictStrong)};module.exports={united:united}},{"Data.Lens.Lens":93,Prelude:146}],92:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Lens_Internal_Void=require("Data.Lens.Internal.Void");var Data_Lens_Lens=require("Data.Lens.Lens");var devoid=function devoid(dictStrong){return Data_Lens_Lens.lens(Data_Lens_Internal_Void.absurd)(Prelude["const"])(dictStrong)};module.exports={devoid:devoid}},{"Data.Lens.Internal.Void":87,"Data.Lens.Lens":93,Prelude:146}],93:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Tuple=require("Data.Tuple");var Data_Lens_Internal_Shop=require("Data.Lens.Internal.Shop");var Data_Lens_Types=require("Data.Lens.Types");var withLens=function withLens(l){return function(f){var $6=l(new Data_Lens_Internal_Shop.Shop(Prelude.id(Prelude.categoryFn),function(v){return function(b){return b}}));return f($6.value0)($6.value1)}};var lens$prime=function lens$prime(to){return function(dictStrong){return function(pab){return Data_Profunctor.dimap(dictStrong["__superclass_Data.Profunctor.Profunctor_0"]())(to)(function(v){return v.value1(v.value0)})(Data_Profunctor_Strong.first(dictStrong)(pab))}}};var lens=function lens(get){return function(set){return function(dictStrong){return lens$prime(function(s){return new Data_Tuple.Tuple(get(s),function(b){return set(s)(b)})})(dictStrong)}}};var cloneLens=function cloneLens(l){return function(dictStrong){return withLens(l)(function(x){return function(y){return function(p){return lens(x)(y)(dictStrong)(p)}}})}};module.exports={cloneLens:cloneLens,withLens:withLens,"lens'":lens$prime,lens:lens}},{"Data.Lens.Internal.Shop":85,"Data.Lens.Types":99,"Data.Profunctor":121,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146}],94:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Either=require("Data.Either");var Data_Lens_Prism=require("Data.Lens.Prism");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var _Right=function _Right(dictChoice){return Data_Profunctor_Choice.right(dictChoice)};var _Left=function _Left(dictChoice){return Data_Profunctor_Choice.left(dictChoice)};module.exports={_Right:_Right,_Left:_Left}},{"Data.Either":57,"Data.Lens.Prism":96,"Data.Profunctor.Choice":115,Prelude:146}],95:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Either=require("Data.Either");var Data_Maybe=require("Data.Maybe");var Data_Lens_Prism=require("Data.Lens.Prism");var _Nothing=function _Nothing(dictChoice){return Data_Lens_Prism.prism(Prelude["const"](Data_Maybe.Nothing.value))(Data_Maybe.maybe(new Data_Either.Right(Prelude.unit))(Prelude["const"](new Data_Either.Left(Data_Maybe.Nothing.value))))(dictChoice)};var _Just=function _Just(dictChoice){return Data_Lens_Prism.prism(Data_Maybe.Just.create)(Data_Maybe.maybe(new Data_Either.Left(Data_Maybe.Nothing.value))(Data_Either.Right.create))(dictChoice)};module.exports={_Just:_Just,_Nothing:_Nothing}},{"Data.Either":57,"Data.Lens.Prism":96,"Data.Maybe":107,Prelude:146}],96:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_MonadPlus=require("Control.MonadPlus");var Data_Either=require("Data.Either");var Data_Maybe=require("Data.Maybe");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Lens_Types_1=require("Data.Lens.Types");var Data_Lens_Types_1=require("Data.Lens.Types");var Data_Lens_Internal_Market=require("Data.Lens.Internal.Market");var Data_Lens_Internal_Tagged=require("Data.Lens.Internal.Tagged");var withPrism=function withPrism(l){return function(f){var $10=l(new Data_Lens_Internal_Market.Market(Prelude.id(Prelude.categoryFn),Data_Either.Right.create));return f($10.value0)($10.value1)}};var review=function review(p){return function($14){return Data_Lens_Internal_Tagged.unTagged(p(Data_Lens_Internal_Tagged.Tagged($14)))}};var prism=function prism(to){return function(fro){return function(dictChoice){return function(pab){return Data_Profunctor.dimap(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())(fro)(Data_Either.either(Prelude.id(Prelude.categoryFn))(Prelude.id(Prelude.categoryFn)))(Data_Profunctor_Choice.right(dictChoice)(Data_Profunctor.rmap(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())(to)(pab)))}}}};var prism$prime=function prism$prime(to){return function(fro){return function(dictChoice){return prism(to)(function(s){return Data_Maybe.maybe(new Data_Either.Left(s))(Data_Either.Right.create)(fro(s))})(dictChoice)}}};var nearly=function nearly(x){return function(f){return function(dictChoice){return prism$prime(Prelude["const"](x))(function($15){return Control_MonadPlus.guard(Data_Maybe.monadPlusMaybe)(f($15))})(dictChoice)}}};var only=function only(dictEq){return function(x){return function(dictChoice){return nearly(x)(function(v){return Prelude["=="](dictEq)(v)(x)})(dictChoice)}}};var matching=function matching(l){return withPrism(l)(function(v){return function(f){return f}})};var is=function is(dictBooleanAlgebra){return function(l){return function($16){return Data_Either.either(Prelude["const"](Prelude.bottom(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())))(Prelude["const"](Prelude.top(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())))(matching(l)($16))}}};var isn$primet=function isn$primet(dictBooleanAlgebra){return function(l){return function($17){return Prelude.not(dictBooleanAlgebra)(is(dictBooleanAlgebra)(l)($17))}}};var clonePrism=function clonePrism(l){return function(dictChoice){return withPrism(l)(function(x){return function(y){return function(p){return prism(x)(y)(dictChoice)(p)}}})}};module.exports={"isn't":isn$primet,is:is,matching:matching,withPrism:withPrism,clonePrism:clonePrism,only:only,nearly:nearly,review:review,"prism'":prism$prime,prism:prism}},{"Control.MonadPlus":37,"Data.Either":57,"Data.Lens.Internal.Market":83,"Data.Lens.Internal.Tagged":86,"Data.Lens.Types":99,"Data.Maybe":107,"Data.Profunctor":121,"Data.Profunctor.Choice":115,Prelude:146}],97:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Monad_State_Class=require("Control.Monad.State.Class");var Data_Maybe=require("Data.Maybe");var Data_Tuple=require("Data.Tuple");var Data_Lens_Types_1=require("Data.Lens.Types");var Data_Lens_Types_1=require("Data.Lens.Types");var Data_Lens_Internal_Indexed=require("Data.Lens.Internal.Indexed");var over=function over(l){return l};var set=function set(l){return function(b){return over(l)(Prelude["const"](b))}};var $dot$tilde=set;var $qmark$tilde=function $qmark$tilde(p){return function($29){return set(p)(Data_Maybe.Just.create($29))}};var $percent$tilde=over;var $amp$amp$tilde=function $amp$amp$tilde(dictBooleanAlgebra){return function(p){return function($30){return over(p)(Prelude.flip(Prelude.conj(dictBooleanAlgebra))($30))}}};var $times$tilde=function $times$tilde(dictSemiring){return function(p){return function($31){return over(p)(Prelude.flip(Prelude.mul(dictSemiring))($31))}}};var $plus$plus$tilde=function $plus$plus$tilde(dictSemigroup){return function(p){return function($32){return over(p)(Prelude.flip(Prelude.append(dictSemigroup))($32))}}};var $plus$tilde=function $plus$tilde(dictSemiring){return function(p){return function($33){return over(p)(Prelude.add(dictSemiring)($33))}}};var $minus$tilde=function $minus$tilde(dictRing){return function(p){return function($34){return over(p)(Prelude.flip(Prelude.sub(dictRing))($34))}}};var $div$div$tilde=function $div$div$tilde(dictDivisionRing){return function(p){return function($35){return over(p)(Prelude.flip(Prelude.div(dictDivisionRing["__superclass_Prelude.ModuloSemiring_1"]()))($35))}}};var $less$greater$tilde=function $less$greater$tilde(dictSemigroup){return function(p){return function($36){return over(p)(Prelude.flip(Prelude.append(dictSemigroup))($36))}}};var $bar$bar$tilde=function $bar$bar$tilde(dictBooleanAlgebra){return function(p){return function($37){return over(p)(Prelude.flip(Prelude.disj(dictBooleanAlgebra))($37))}}};var modifying=function modifying(dictMonadState){return function(p){return function(f){return Control_Monad_State_Class.modify(dictMonadState)(over(p)(f))}}};var $percent$eq=function $percent$eq(dictMonadState){return modifying(dictMonadState)};var $amp$amp$eq=function $amp$amp$eq(dictMonadState){return function(dictBooleanAlgebra){return function(p){return function($38){return modifying(dictMonadState)(p)(Prelude.flip(Prelude.conj(dictBooleanAlgebra))($38))}}}};var $times$eq=function $times$eq(dictMonadState){return function(dictSemiring){return function(p){return function($39){return modifying(dictMonadState)(p)(Prelude.flip(Prelude.mul(dictSemiring))($39))}}}};var $plus$plus$eq=function $plus$plus$eq(dictMonadState){return function(dictSemigroup){return function(p){return function($40){return modifying(dictMonadState)(p)(Prelude.flip(Prelude.append(dictSemigroup))($40))}}}};var $plus$eq=function $plus$eq(dictMonadState){return function(dictSemiring){return function(p){return function($41){return modifying(dictMonadState)(p)(Prelude.add(dictSemiring)($41))}}}};var $minus$eq=function $minus$eq(dictMonadState){return function(dictRing){return function(p){return function($42){return modifying(dictMonadState)(p)(Prelude.flip(Prelude.sub(dictRing))($42))}}}};var $div$div$eq=function $div$div$eq(dictMonadState){return function(dictDivisionRing){return function(p){return function($43){return modifying(dictMonadState)(p)(Prelude.flip(Prelude.div(dictDivisionRing["__superclass_Prelude.ModuloSemiring_1"]()))($43))}}}};var $less$greater$eq=function $less$greater$eq(dictMonadState){return function(dictSemigroup){return function(p){return function($44){return modifying(dictMonadState)(p)(Prelude.flip(Prelude.append(dictSemigroup))($44))}}}};var $bar$bar$eq=function $bar$bar$eq(dictMonadState){return function(dictBooleanAlgebra){return function(p){return function($45){return modifying(dictMonadState)(p)(Prelude.flip(Prelude.disj(dictBooleanAlgebra))($45))}}}};var iover=function iover(l){return function(f){return l(Data_Lens_Internal_Indexed.Indexed(Data_Tuple.uncurry(f)))}};var assign=function assign(dictMonadState){return function(p){return function(b){return Control_Monad_State_Class.modify(dictMonadState)(set(p)(b))}}};var $dot$eq=function $dot$eq(dictMonadState){return assign(dictMonadState)};var $qmark$eq=function $qmark$eq(dictMonadState){return function(p){return function($46){return assign(dictMonadState)(p)(Data_Maybe.Just.create($46))}}};module.exports={set:set,over:over,"?=":$qmark$eq,"++=":$plus$plus$eq,"<>=":$less$greater$eq,"&&=":$amp$amp$eq,"||=":$bar$bar$eq,"//=":$div$div$eq,"-=":$minus$eq,"*=":$times$eq,"+=":$plus$eq,"%=":$percent$eq,".=":$dot$eq,"?~":$qmark$tilde,"++~":$plus$plus$tilde,"<>~":$less$greater$tilde,"&&~":$amp$amp$tilde,"||~":$bar$bar$tilde,"//~":$div$div$tilde,"*~":$times$tilde,"-~":$minus$tilde,"+~":$plus$tilde,".~":$dot$tilde,"%~":$percent$tilde}},{"Control.Monad.State.Class":32,"Data.Lens.Internal.Indexed":82,"Data.Lens.Types":99,"Data.Maybe":107,"Data.Tuple":134,Prelude:146}],98:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Alternative=require("Control.Alternative");var Control_Plus=require("Control.Plus");var Data_Monoid_Disj=require("Data.Monoid.Disj");var Data_Profunctor_Star=require("Data.Profunctor.Star");var Data_Traversable=require("Data.Traversable");var Data_Tuple=require("Data.Tuple");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Types_2=require("Data.Lens.Types");var Data_Lens_Indexed=require("Data.Lens.Indexed");var Data_Lens_Internal_Wander=require("Data.Lens.Internal.Wander");var Data_Lens_Internal_Indexed=require("Data.Lens.Internal.Indexed");var traversed=function traversed(dictTraversable){return function(dictWander){return Data_Lens_Internal_Wander.wander(dictWander)(function(dictApplicative){return Data_Traversable.traverse(dictTraversable)(dictApplicative)})}};var traverseOf=function traverseOf(dictApplicative){return function(t){return function($23){return Data_Profunctor_Star.runStar(t(Data_Profunctor_Star.Star($23)))}}};var sequenceOf=function sequenceOf(dictApplicative){return function(t){return traverseOf(dictApplicative)(t)(Prelude.id(Prelude.categoryFn))}};var itraverseOf=function itraverseOf(dictApplicative){return function(t){return function(f){return Data_Profunctor_Star.runStar(t(Data_Lens_Internal_Indexed.Indexed(Data_Profunctor_Star.Star(Data_Tuple.uncurry(f)))))}}};var failover=function failover(dictAlternative){return function(t){return function(f){return function(s){var $14=Data_Profunctor_Star.runStar(t(Data_Profunctor_Star.Star(function($24){return Data_Tuple.Tuple.create(true)(f($24))})))(s);if($14.value0){return Prelude.pure(dictAlternative["__superclass_Prelude.Applicative_0"]())($14.value1)}if(!$14.value0){return Control_Plus.empty(dictAlternative["__superclass_Control.Plus.Plus_1"]())}throw new Error("Failed pattern match at Data.Lens.Traversal line 49, column 18 - line 54, column 1: "+[$14.constructor.name])}}}};var elementsOf=function elementsOf(dictWander){return function(tr){return function(pr){return Data_Lens_Indexed.iwander(dictWander)(function(dictApplicative){return function(f){return Data_Profunctor_Star.runStar(tr(Data_Lens_Internal_Wander.wanderStar(dictApplicative))(Data_Lens_Internal_Indexed.Indexed(Data_Profunctor_Star.Star(function(v){var $20=pr(v.value0);if($20){return f(v.value0)(v.value1)}if(!$20){return Prelude.pure(dictApplicative)(v.value1)}throw new Error("Failed pattern match at Data.Lens.Traversal line 63, column 82 - line 66, column 1: "+[$20.constructor.name])}))))}})}}};var element=function element(dictWander){return function(n){return function(tr){return Data_Lens_Indexed.unIndex(dictWander["__superclass_Data.Profunctor.Choice.Choice_1"]()["__superclass_Data.Profunctor.Profunctor_0"]())(elementsOf(dictWander)(function(dictWander1){return Data_Lens_Indexed.positions(dictWander1)(function(dictWander2){return tr(dictWander2)})})(function(v){return v===n}))}}};module.exports={elementsOf:elementsOf,failover:failover,sequenceOf:sequenceOf,traverseOf:traverseOf,traversed:traversed}},{"Control.Alternative":9,"Control.Plus":39,"Data.Lens.Indexed":79,"Data.Lens.Internal.Indexed":82,"Data.Lens.Internal.Wander":88,"Data.Lens.Types":99,"Data.Monoid.Disj":110,"Data.Profunctor.Star":119,"Data.Traversable":132,"Data.Tuple":134,Prelude:146}],99:[function(require,module,exports){"use strict";var Data_Const=require("Data.Const");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Profunctor_Star=require("Data.Profunctor.Star");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Profunctor_Closed=require("Data.Profunctor.Closed");var Data_Lens_Internal_Exchange=require("Data.Lens.Internal.Exchange");var Data_Lens_Internal_Market=require("Data.Lens.Internal.Market");var Data_Lens_Internal_Shop=require("Data.Lens.Internal.Shop");var Data_Lens_Internal_Tagged=require("Data.Lens.Internal.Tagged");var Data_Lens_Internal_Forget=require("Data.Lens.Internal.Forget");var Data_Lens_Internal_Wander=require("Data.Lens.Internal.Wander");var Data_Lens_Internal_Re=require("Data.Lens.Internal.Re");var Data_Lens_Internal_Indexed=require("Data.Lens.Internal.Indexed");module.exports={}},{"Data.Const":54,"Data.Lens.Internal.Exchange":80,"Data.Lens.Internal.Forget":81,"Data.Lens.Internal.Indexed":82,"Data.Lens.Internal.Market":83,"Data.Lens.Internal.Re":84,"Data.Lens.Internal.Shop":85,"Data.Lens.Internal.Tagged":86,"Data.Lens.Internal.Wander":88,"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Closed":116,"Data.Profunctor.Star":119,"Data.Profunctor.Strong":120}],100:[function(require,module,exports){"use strict";var Data_Lens_Iso=require("Data.Lens.Iso");var Data_Lens_Lens=require("Data.Lens.Lens");var Data_Lens_Prism=require("Data.Lens.Prism");var Data_Lens_Traversal=require("Data.Lens.Traversal");var Data_Lens_Types=require("Data.Lens.Types");var Data_Lens_Setter=require("Data.Lens.Setter");var Data_Lens_Getter=require("Data.Lens.Getter");var Data_Lens_Fold=require("Data.Lens.Fold");var Data_Lens_Common=require("Data.Lens.Common");module.exports={}},{"Data.Lens.Common":75,"Data.Lens.Fold":76,"Data.Lens.Getter":77,"Data.Lens.Iso":89,"Data.Lens.Lens":93,"Data.Lens.Prism":96,"Data.Lens.Setter":97,"Data.Lens.Traversal":98,"Data.Lens.Types":99}],101:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Alt=require("Control.Alt");var Control_Alternative=require("Control.Alternative");var Control_Lazy=require("Control.Lazy");var Control_MonadPlus=require("Control.MonadPlus");var Control_Plus=require("Control.Plus");var Data_Foldable=require("Data.Foldable");var Data_Maybe=require("Data.Maybe");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Data_Tuple=require("Data.Tuple");var Data_Unfoldable=require("Data.Unfoldable");var Nil=function(){function Nil(){}Nil.value=new Nil;return Nil}();var Cons=function(){function Cons(value0,value1){this.value0=value0;this.value1=value1}Cons.create=function(value0){return function(value1){return new Cons(value0,value1)}};return Cons}();var $colon=Cons.create;var updateAt=function updateAt(v){return function(v1){return function(v2){if(v===0&&v2 instanceof Cons){return new Data_Maybe.Just(new Cons(v1,v2.value1))}if(v2 instanceof Cons){return Prelude["<$>"](Data_Maybe.functorMaybe)(Cons.create(v2.value0))(updateAt(v-1)(v1)(v2.value1))}return Data_Maybe.Nothing.value}}};var uncons=function uncons(v){if(v instanceof Nil){return Data_Maybe.Nothing.value}if(v instanceof Cons){return new Data_Maybe.Just({head:v.value0,tail:v.value1})}throw new Error("Failed pattern match at Data.List line 273, column 1 - line 274, column 1: "+[v.constructor.name])};var toUnfoldable=function toUnfoldable(dictUnfoldable){return Data_Unfoldable.unfoldr(dictUnfoldable)(function(xs){return Prelude["<$>"](Data_Maybe.functorMaybe)(function(rec){return new Data_Tuple.Tuple(rec.head,rec.tail)})(uncons(xs))})};var tail=function tail(v){if(v instanceof Nil){return Data_Maybe.Nothing.value}if(v instanceof Cons){return new Data_Maybe.Just(v.value1)}throw new Error("Failed pattern match at Data.List line 254, column 1 - line 255, column 1: "+[v.constructor.name])};var span=function span(v){return function(v1){if(v1 instanceof Cons&&v(v1.value0)){var $133=span(v)(v1.value1);return{init:new Cons(v1.value0,$133.init),rest:$133.rest}}return{init:Nil.value,rest:v1}}};var singleton=function singleton(a){return new Cons(a,Nil.value)};var sortBy=function sortBy(cmp){var merge=function merge(v){return function(v1){if(v instanceof Cons&&v1 instanceof Cons){if(Prelude["=="](Prelude.eqOrdering)(cmp(v.value0)(v1.value0))(Prelude.GT.value)){return new Cons(v1.value0,merge(v)(v1.value1))}if(Prelude.otherwise){return new Cons(v.value0,merge(v.value1)(v1))}}if(v instanceof Nil){return v1}if(v1 instanceof Nil){return v}throw new Error("Failed pattern match at Data.List line 475, column 3 - line 478, column 3: "+[v.constructor.name,v1.constructor.name])}};var mergePairs=function mergePairs(v){if(v instanceof Cons&&v.value1 instanceof Cons){return new Cons(merge(v.value0)(v.value1.value0),mergePairs(v.value1.value1))}return v};var mergeAll=function mergeAll(__copy_v){var v=__copy_v;tco:while(true){if(v instanceof Cons&&v.value1 instanceof Nil){return v.value0}var __tco_v=mergePairs(v);v=__tco_v;continue tco}};var sequences=function sequences(v){if(v instanceof Cons&&v.value1 instanceof Cons){if(Prelude["=="](Prelude.eqOrdering)(cmp(v.value0)(v.value1.value0))(Prelude.GT.value)){return descending(v.value1.value0)(singleton(v.value0))(v.value1.value1)}if(Prelude.otherwise){return ascending(v.value1.value0)(Cons.create(v.value0))(v.value1.value1)}}return singleton(v)};var descending=function descending(__copy_a){return function(__copy_as){return function(__copy_v){var a=__copy_a;var as=__copy_as;var v=__copy_v;tco:while(true){if(v instanceof Cons&&Prelude["=="](Prelude.eqOrdering)(cmp(a)(v.value0))(Prelude.GT.value)){var __tco_a=v.value0;var __tco_as=new Cons(a,as);var __tco_v=v.value1;a=__tco_a;as=__tco_as;v=__tco_v;continue tco}return new Cons(new Cons(a,as),sequences(v))}}}};var ascending=function ascending(a){return function(as){return function(v){if(v instanceof Cons&&Prelude["/="](Prelude.eqOrdering)(cmp(a)(v.value0))(Prelude.GT.value)){return ascending(v.value0)(function(ys){return as(new Cons(a,ys))})(v.value1)}return new Cons(as(singleton(a)),sequences(v))}}};return function($371){return mergeAll(sequences($371))}};var sort=function sort(dictOrd){return function(xs){return sortBy(Prelude.compare(dictOrd))(xs)}};var showList=function showList(dictShow){return new Prelude.Show(function(v){if(v instanceof Nil){return"Nil"}if(v instanceof Cons){return"Cons ("+(Prelude.show(dictShow)(v.value0)+(") ("+(Prelude.show(showList(dictShow))(v.value1)+")")))}throw new Error("Failed pattern match at Data.List line 727, column 3 - line 728, column 3: "+[v.constructor.name])})};var semigroupList=new Prelude.Semigroup(function(v){return function(ys){if(v instanceof Nil){return ys}if(v instanceof Cons){return new Cons(v.value0,Prelude["<>"](semigroupList)(v.value1)(ys))}throw new Error("Failed pattern match at Data.List line 751, column 3 - line 752, column 3: "+[v.constructor.name,ys.constructor.name])}});var reverse=function(){var go=function go(__copy_acc){return function(__copy_v){var acc=__copy_acc;var v=__copy_v;tco:while(true){if(v instanceof Nil){return acc}if(v instanceof Cons){var __tco_acc=new Cons(v.value0,acc);var __tco_v=v.value1;acc=__tco_acc;v=__tco_v;continue tco}throw new Error("Failed pattern match at Data.List line 371, column 1 - line 379, column 1: "+[acc.constructor.name,v.constructor.name])}}};return go(Nil.value)}();var snoc=function snoc(xs){return function(x){return reverse(new Cons(x,reverse(xs)))}};var take=function(){var go=function go(__copy_acc){return function(__copy_v){return function(__copy_v1){var acc=__copy_acc;var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v===0){return reverse(acc)}if(v1 instanceof Nil){return reverse(acc)}if(v1 instanceof Cons){var __tco_acc=new Cons(v1.value0,acc);var __tco_v=v-1;var __tco_v1=v1.value1;acc=__tco_acc;v=__tco_v;v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.List line 493, column 1 - line 502, column 1: "+[acc.constructor.name,v.constructor.name,v1.constructor.name])}}}};return go(Nil.value)}();var takeWhile=function takeWhile(p){var go=function go(__copy_acc){return function(__copy_v){var acc=__copy_acc;var v=__copy_v;tco:while(true){if(v instanceof Cons&&p(v.value0)){var __tco_acc=new Cons(v.value0,acc);var __tco_v=v.value1;acc=__tco_acc;v=__tco_v;continue tco}return reverse(acc)}}};return go(Nil.value)};var unfoldableList=new Data_Unfoldable.Unfoldable(function(f){return function(b){var go=function go(__copy_source){return function(__copy_memo){var source=__copy_source;var memo=__copy_memo;tco:while(true){var $187=f(source);if($187 instanceof Data_Maybe.Nothing){return reverse(memo)}if($187 instanceof Data_Maybe.Just){var __tco_memo=new Cons($187.value0.value0,memo);source=$187.value0.value1;memo=__tco_memo;continue tco}throw new Error("Failed pattern match at Data.List line 777, column 24 - line 781, column 1: "+[$187.constructor.name])}}};return go(b)(Nil.value)}});var zipWith=function zipWith(f){return function(xs){return function(ys){var go=function go(__copy_v){return function(__copy_v1){return function(__copy_acc){var v=__copy_v;var v1=__copy_v1;var acc=__copy_acc;tco:while(true){if(v instanceof Nil){return acc}if(v1 instanceof Nil){return acc}if(v instanceof Cons&&v1 instanceof Cons){var __tco_v=v.value1;var __tco_v1=v1.value1;var __tco_acc=new Cons(f(v.value0)(v1.value0),acc);v=__tco_v;v1=__tco_v1;acc=__tco_acc;continue tco}throw new Error("Failed pattern match at Data.List line 657, column 1 - line 665, column 1: "+[v.constructor.name,v1.constructor.name,acc.constructor.name])}}}};return reverse(go(xs)(ys)(Nil.value))}}};var zip=zipWith(Data_Tuple.Tuple.create);var replicateM=function replicateM(dictMonad){return function(n){return function(m){if(n<1){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(Nil.value)}if(Prelude.otherwise){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(m)(function(v){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(replicateM(dictMonad)(n-1)(m))(function(v1){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(new Cons(v,v1))})})}throw new Error("Failed pattern match at Data.List line 158, column 1 - line 167, column 1: "+[n.constructor.name,m.constructor.name])}}};var replicate=function replicate(n){return function(value){var go=function go(__copy_n1){return function(__copy_rest){var n1=__copy_n1;var rest=__copy_rest;tco:while(true){if(n1<=0){return rest}if(Prelude.otherwise){var __tco_n1=n1-1;var __tco_rest=new Cons(value,rest);n1=__tco_n1;rest=__tco_rest;continue tco}throw new Error("Failed pattern match at Data.List line 151, column 1 - line 157, column 1: "+[n1.constructor.name,rest.constructor.name])}}};return go(n)(Nil.value)}};var range=function range(start){return function(end){if(start===end){return singleton(start)}if(Prelude.otherwise){var go=function go(__copy_s){return function(__copy_e){return function(__copy_step){return function(__copy_rest){var s=__copy_s;var e=__copy_e;var step=__copy_step;var rest=__copy_rest;tco:while(true){if(s===e){return new Cons(s,rest)}if(Prelude.otherwise){var __tco_s=s+step|0;var __tco_e=e;var __tco_step=step;var __tco_rest=new Cons(s,rest);s=__tco_s;e=__tco_e;step=__tco_step;rest=__tco_rest;continue tco}throw new Error("Failed pattern match at Data.List line 143, column 1 - line 150, column 1: "+[s.constructor.name,e.constructor.name,step.constructor.name,rest.constructor.name])}}}}};return go(end)(start)(function(){var $210=start>end;if($210){return 1}if(!$210){return-1}throw new Error("Failed pattern match at Data.List line 144, column 45 - line 144, column 74: "+[$210.constructor.name])}())(Nil.value)}throw new Error("Failed pattern match at Data.List line 143, column 1 - line 150, column 1: "+[start.constructor.name,end.constructor.name])}};var $dot$dot=range;var $$null=function $$null(v){if(v instanceof Nil){return true}return false};var monoidList=new Data_Monoid.Monoid(function(){return semigroupList},Nil.value);var mapMaybe=function mapMaybe(f){var go=function go(__copy_acc){return function(__copy_v){var acc=__copy_acc;var v=__copy_v;tco:while(true){if(v instanceof Nil){return reverse(acc)}if(v instanceof Cons){var $214=f(v.value0);if($214 instanceof Data_Maybe.Nothing){var __tco_acc=acc;var __tco_v=v.value1;acc=__tco_acc;v=__tco_v;continue tco}if($214 instanceof Data_Maybe.Just){var __tco_acc=new Cons($214.value0,acc);var __tco_v=v.value1;acc=__tco_acc;v=__tco_v;continue tco}throw new Error("Failed pattern match at Data.List line 427, column 5 - line 433, column 1: "+[$214.constructor.name])}throw new Error("Failed pattern match at Data.List line 423, column 1 - line 433, column 1: "+[acc.constructor.name,v.constructor.name])}}};return go(Nil.value)};var some=function some(dictAlternative){return function(dictLazy){return function(v){return Prelude["<*>"](dictAlternative["__superclass_Prelude.Applicative_0"]()["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictAlternative["__superclass_Control.Plus.Plus_1"]()["__superclass_Control.Alt.Alt_0"]()["__superclass_Prelude.Functor_0"]())(Cons.create)(v))(Control_Lazy.defer(dictLazy)(function(v1){return many(dictAlternative)(dictLazy)(v)}))}}};var many=function many(dictAlternative){return function(dictLazy){return function(v){return Control_Alt["<|>"](dictAlternative["__superclass_Control.Plus.Plus_1"]()["__superclass_Control.Alt.Alt_0"]())(some(dictAlternative)(dictLazy)(v))(Prelude.pure(dictAlternative["__superclass_Prelude.Applicative_0"]())(Nil.value))}}};var last=function last(__copy_v){var v=__copy_v;tco:while(true){if(v instanceof Cons&&v.value1 instanceof Nil){return new Data_Maybe.Just(v.value0)}if(v instanceof Cons){var __tco_v=v.value1;v=__tco_v;continue tco}return Data_Maybe.Nothing.value}};var insertBy=function insertBy(v){return function(x){return function(v1){if(v1 instanceof Nil){return new Cons(x,Nil.value)}if(v1 instanceof Cons){var $227=v(x)(v1.value0);if($227 instanceof Prelude.GT){return new Cons(v1.value0,insertBy(v)(x)(v1.value1))}return new Cons(x,v1);
}throw new Error("Failed pattern match at Data.List line 225, column 1 - line 226, column 1: "+[v.constructor.name,x.constructor.name,v1.constructor.name])}}};var insertAt=function insertAt(v){return function(v1){return function(v2){if(v===0){return new Data_Maybe.Just(new Cons(v1,v2))}if(v2 instanceof Cons){return Prelude["<$>"](Data_Maybe.functorMaybe)(Cons.create(v2.value0))(insertAt(v-1)(v1)(v2.value1))}return Data_Maybe.Nothing.value}}};var insert=function insert(dictOrd){return insertBy(Prelude.compare(dictOrd))};var init=function init(v){if(v instanceof Nil){return Data_Maybe.Nothing.value}var go=function go(__copy_v1){return function(__copy_acc){var v1=__copy_v1;var acc=__copy_acc;tco:while(true){if(v1 instanceof Cons&&v1.value1 instanceof Nil){return acc}if(v1 instanceof Cons){var __tco_v1=v1.value1;var __tco_acc=new Cons(v1.value0,acc);v1=__tco_v1;acc=__tco_acc;continue tco}return acc}}};return Data_Maybe.Just.create(reverse(go(v)(Nil.value)))};var index=function index(__copy_v){return function(__copy_v1){var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v instanceof Nil){return Data_Maybe.Nothing.value}if(v instanceof Cons&&v1===0){return new Data_Maybe.Just(v.value0)}if(v instanceof Cons){var __tco_v=v.value1;var __tco_v1=v1-1;v=__tco_v;v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.List line 284, column 1 - line 285, column 1: "+[v.constructor.name,v1.constructor.name])}}};var $bang$bang=index;var head=function head(v){if(v instanceof Nil){return Data_Maybe.Nothing.value}if(v instanceof Cons){return new Data_Maybe.Just(v.value0)}throw new Error("Failed pattern match at Data.List line 239, column 1 - line 240, column 1: "+[v.constructor.name])};var transpose=function transpose(v){if(v instanceof Nil){return Nil.value}if(v instanceof Cons&&v.value0 instanceof Nil){return transpose(v.value1)}if(v instanceof Cons&&v.value0 instanceof Cons){return $colon($colon(v.value0.value0)(mapMaybe(head)(v.value1)))(transpose($colon(v.value0.value1)(mapMaybe(tail)(v.value1))))}throw new Error("Failed pattern match at Data.List line 694, column 1 - line 695, column 1: "+[v.constructor.name])};var groupBy=function groupBy(v){return function(v1){if(v1 instanceof Nil){return Nil.value}if(v1 instanceof Cons){var $260=span(v(v1.value0))(v1.value1);return new Cons(new Cons(v1.value0,$260.init),groupBy(v)($260.rest))}throw new Error("Failed pattern match at Data.List line 567, column 1 - line 568, column 1: "+[v.constructor.name,v1.constructor.name])}};var group=function group(dictEq){return groupBy(Prelude["=="](dictEq))};var group$prime=function group$prime(dictOrd){return function($372){return group(dictOrd["__superclass_Prelude.Eq_0"]())(sort(dictOrd)($372))}};var functorList=new Prelude.Functor(function(f){return function(lst){var go=function go(__copy_v){return function(__copy_acc){var v=__copy_v;var acc=__copy_acc;tco:while(true){if(v instanceof Nil){return acc}if(v instanceof Cons){var __tco_v=v.value1;var __tco_acc=new Cons(f(v.value0),acc);v=__tco_v;acc=__tco_acc;continue tco}throw new Error("Failed pattern match at Data.List line 758, column 3 - line 764, column 1: "+[v.constructor.name,acc.constructor.name])}}};return reverse(go(lst)(Nil.value))}});var fromList=function fromList(dictUnfoldable){return toUnfoldable(dictUnfoldable)};var fromFoldable=function fromFoldable(dictFoldable){return Data_Foldable.foldr(dictFoldable)(Cons.create)(Nil.value)};var toList=function toList(dictFoldable){return fromFoldable(dictFoldable)};var foldableList=new Data_Foldable.Foldable(function(dictMonoid){return function(f){return Data_Foldable.foldl(foldableList)(function(acc){return function($373){return Prelude.append(dictMonoid["__superclass_Prelude.Semigroup_0"]())(acc)(f($373))}})(Data_Monoid.mempty(dictMonoid))}},function(){var go=function go(__copy_v){return function(__copy_b){return function(__copy_v1){var v=__copy_v;var b=__copy_b;var v1=__copy_v1;tco:while(true){if(v1 instanceof Nil){return b}if(v1 instanceof Cons){var __tco_v=v;var __tco_b=v(b)(v1.value0);var __tco_v1=v1.value1;v=__tco_v;b=__tco_b;v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.List line 767, column 3 - line 771, column 3: "+[v.constructor.name,b.constructor.name,v1.constructor.name])}}}};return go}(),function(v){return function(b){return function(v1){if(v1 instanceof Nil){return b}if(v1 instanceof Cons){return v(v1.value0)(Data_Foldable.foldr(foldableList)(v)(b)(v1.value1))}throw new Error("Failed pattern match at Data.List line 765, column 3 - line 766, column 3: "+[v.constructor.name,b.constructor.name,v1.constructor.name])}}});var length=Data_Foldable.foldl(foldableList)(function(acc){return function(v){return acc+1|0}})(0);var traversableList=new Data_Traversable.Traversable(function(){return foldableList},function(){return functorList},function(dictApplicative){return function(v){if(v instanceof Nil){return Prelude.pure(dictApplicative)(Nil.value)}if(v instanceof Cons){return Prelude["<*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Cons.create)(v.value0))(Data_Traversable.sequence(traversableList)(dictApplicative)(v.value1))}throw new Error("Failed pattern match at Data.List line 784, column 3 - line 785, column 3: "+[v.constructor.name])}},function(dictApplicative){return function(v){return function(v1){if(v1 instanceof Nil){return Prelude.pure(dictApplicative)(Nil.value)}if(v1 instanceof Cons){return Prelude["<*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Cons.create)(v(v1.value0)))(Data_Traversable.traverse(traversableList)(dictApplicative)(v)(v1.value1))}throw new Error("Failed pattern match at Data.List line 782, column 3 - line 783, column 3: "+[v.constructor.name,v1.constructor.name])}}});var zipWithA=function zipWithA(dictApplicative){return function(f){return function(xs){return function(ys){return Data_Traversable.sequence(traversableList)(dictApplicative)(zipWith(f)(xs)(ys))}}}};var unzip=Data_Foldable.foldr(foldableList)(function(v){return function(v1){return new Data_Tuple.Tuple(new Cons(v.value0,v1.value0),new Cons(v.value1,v1.value1))}})(new Data_Tuple.Tuple(Nil.value,Nil.value));var foldM=function foldM(dictMonad){return function(v){return function(a){return function(v1){if(v1 instanceof Nil){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(a)}if(v1 instanceof Cons){return Prelude[">>="](dictMonad["__superclass_Prelude.Bind_1"]())(v(a)(v1.value0))(function(a$prime){return foldM(dictMonad)(v)(a$prime)(v1.value1)})}throw new Error("Failed pattern match at Data.List line 705, column 1 - line 706, column 1: "+[v.constructor.name,a.constructor.name,v1.constructor.name])}}}};var findIndex=function findIndex(fn){var go=function go(__copy_v){return function(__copy_v1){var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v1 instanceof Cons){if(fn(v1.value0)){return new Data_Maybe.Just(v)}if(Prelude.otherwise){var __tco_v=v+1|0;var __tco_v1=v1.value1;v=__tco_v;v1=__tco_v1;continue tco}}if(v1 instanceof Nil){return Data_Maybe.Nothing.value}throw new Error("Failed pattern match at Data.List line 307, column 3 - line 309, column 3: "+[v.constructor.name,v1.constructor.name])}}};return go(0)};var findLastIndex=function findLastIndex(fn){return function(xs){return Prelude["<$>"](Data_Maybe.functorMaybe)(Prelude["-"](Prelude.ringInt)(length(xs)-1))(findIndex(fn)(reverse(xs)))}};var filterM=function filterM(dictMonad){return function(v){return function(v1){if(v1 instanceof Nil){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(Nil.value)}if(v1 instanceof Cons){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(v(v1.value0))(function(v2){return Prelude.bind(dictMonad["__superclass_Prelude.Bind_1"]())(filterM(dictMonad)(v)(v1.value1))(function(v3){return Prelude["return"](dictMonad["__superclass_Prelude.Applicative_0"]())(function(){if(v2){return new Cons(v1.value0,v3)}if(!v2){return v3}throw new Error("Failed pattern match at Data.List line 414, column 3 - line 422, column 1: "+[v2.constructor.name])}())})})}throw new Error("Failed pattern match at Data.List line 410, column 1 - line 411, column 1: "+[v.constructor.name,v1.constructor.name])}}};var filter=function filter(p){var go=function go(__copy_acc){return function(__copy_v){var acc=__copy_acc;var v=__copy_v;tco:while(true){if(v instanceof Nil){return reverse(acc)}if(v instanceof Cons){if(p(v.value0)){var __tco_acc=new Cons(v.value0,acc);var __tco_v=v.value1;acc=__tco_acc;v=__tco_v;continue tco}if(Prelude.otherwise){var __tco_acc=acc;var __tco_v=v.value1;acc=__tco_acc;v=__tco_v;continue tco}}throw new Error("Failed pattern match at Data.List line 394, column 1 - line 409, column 1: "+[acc.constructor.name,v.constructor.name])}}};return go(Nil.value)};var intersectBy=function intersectBy(v){return function(v1){return function(v2){if(v1 instanceof Nil){return Nil.value}if(v2 instanceof Nil){return Nil.value}return filter(function(x){return Data_Foldable.any(foldableList)(Prelude.booleanAlgebraBoolean)(v(x))(v2)})(v1)}}};var intersect=function intersect(dictEq){return intersectBy(Prelude["=="](dictEq))};var nubBy=function nubBy(v){return function(v1){if(v1 instanceof Nil){return Nil.value}if(v1 instanceof Cons){return new Cons(v1.value0,nubBy(v)(filter(function(y){return!v(v1.value0)(y)})(v1.value1)))}throw new Error("Failed pattern match at Data.List line 586, column 1 - line 587, column 1: "+[v.constructor.name,v1.constructor.name])}};var nub=function nub(dictEq){return nubBy(Prelude.eq(dictEq))};var eqList=function eqList(dictEq){return new Prelude.Eq(function(xs){return function(ys){var go=function go(__copy_v){return function(__copy_v1){return function(__copy_v2){var v=__copy_v;var v1=__copy_v1;var v2=__copy_v2;tco:while(true){if(!v2){return false}if(v instanceof Nil&&v1 instanceof Nil){return v2}if(v instanceof Cons&&v1 instanceof Cons){var __tco_v=v.value1;var __tco_v1=v1.value1;var __tco_v2=v2&&Prelude["=="](dictEq)(v1.value0)(v.value0);v=__tco_v;v1=__tco_v1;v2=__tco_v2;continue tco}return false}}}};return go(xs)(ys)(true)}})};var ordList=function ordList(dictOrd){return new Prelude.Ord(function(){return eqList(dictOrd["__superclass_Prelude.Eq_0"]())},function(xs){return function(ys){var go=function go(__copy_v){return function(__copy_v1){var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v instanceof Nil&&v1 instanceof Nil){return Prelude.EQ.value}if(v instanceof Nil){return Prelude.LT.value}if(v1 instanceof Nil){return Prelude.GT.value}if(v instanceof Cons&&v1 instanceof Cons){var $329=Prelude.compare(dictOrd)(v.value0)(v1.value0);if($329 instanceof Prelude.EQ){var __tco_v=v.value1;var __tco_v1=v1.value1;v=__tco_v;v1=__tco_v1;continue tco}return $329}throw new Error("Failed pattern match at Data.List line 740, column 3 - line 750, column 1: "+[v.constructor.name,v1.constructor.name])}}};return go(xs)(ys)}})};var elemLastIndex=function elemLastIndex(dictEq){return function(x){return findLastIndex(function(v){return Prelude["=="](dictEq)(v)(x)})}};var elemIndex=function elemIndex(dictEq){return function(x){return findIndex(function(v){return Prelude["=="](dictEq)(v)(x)})}};var dropWhile=function dropWhile(p){var go=function go(__copy_v){var v=__copy_v;tco:while(true){if(v instanceof Cons&&p(v.value0)){var __tco_v=v.value1;v=__tco_v;continue tco}return v}};return go};var drop=function drop(__copy_v){return function(__copy_v1){var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v===0){return v1}if(v1 instanceof Nil){return Nil.value}if(v1 instanceof Cons){var __tco_v=v-1;var __tco_v1=v1.value1;v=__tco_v;v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.List line 512, column 1 - line 513, column 1: "+[v.constructor.name,v1.constructor.name])}}};var slice=function slice(start){return function(end){return function(xs){return take(end-start)(drop(start)(xs))}}};var deleteBy=function deleteBy(v){return function(v1){return function(v2){if(v2 instanceof Nil){return Nil.value}if(v2 instanceof Cons&&v(v1)(v2.value0)){return v2.value1}if(v2 instanceof Cons){return new Cons(v2.value0,deleteBy(v)(v1)(v2.value1))}throw new Error("Failed pattern match at Data.List line 613, column 1 - line 614, column 1: "+[v.constructor.name,v1.constructor.name,v2.constructor.name])}}};var unionBy=function unionBy(eq){return function(xs){return function(ys){return Prelude["<>"](semigroupList)(xs)(Data_Foldable.foldl(foldableList)(Prelude.flip(deleteBy(eq)))(nubBy(eq)(ys))(xs))}}};var union=function union(dictEq){return unionBy(Prelude["=="](dictEq))};var deleteAt=function deleteAt(v){return function(v1){if(v===0&&v1 instanceof Cons){return new Data_Maybe.Just(v1.value1)}if(v1 instanceof Cons){return Prelude["<$>"](Data_Maybe.functorMaybe)(Cons.create(v1.value0))(deleteAt(v-1)(v1.value1))}return Data_Maybe.Nothing.value}};var $$delete=function $$delete(dictEq){return deleteBy(Prelude["=="](dictEq))};var $bslash$bslash=function $bslash$bslash(dictEq){return Data_Foldable.foldl(foldableList)(Prelude.flip($$delete(dictEq)))};var concatMap=function concatMap(v){return function(v1){if(v1 instanceof Nil){return Nil.value}if(v1 instanceof Cons){return Prelude["<>"](semigroupList)(v(v1.value0))(concatMap(v)(v1.value1))}throw new Error("Failed pattern match at Data.List line 387, column 1 - line 388, column 1: "+[v.constructor.name,v1.constructor.name])}};var catMaybes=mapMaybe(Prelude.id(Prelude.categoryFn));var applyList=new Prelude.Apply(function(){return functorList},function(v){return function(v1){if(v instanceof Nil){return Nil.value}if(v instanceof Cons){return Prelude["<>"](semigroupList)(Prelude["<$>"](functorList)(v.value0)(v1))(Prelude["<*>"](applyList)(v.value1)(v1))}throw new Error("Failed pattern match at Data.List line 788, column 3 - line 789, column 3: "+[v.constructor.name,v1.constructor.name])}});var bindList=new Prelude.Bind(function(){return applyList},Prelude.flip(concatMap));var concat=function concat(v){return Prelude[">>="](bindList)(v)(Prelude.id(Prelude.categoryFn))};var applicativeList=new Prelude.Applicative(function(){return applyList},function(a){return new Cons(a,Nil.value)});var monadList=new Prelude.Monad(function(){return applicativeList},function(){return bindList});var alterAt=function alterAt(v){return function(v1){return function(v2){if(v===0&&v2 instanceof Cons){return Data_Maybe.Just.create(function(){var $365=v1(v2.value0);if($365 instanceof Data_Maybe.Nothing){return v2.value1}if($365 instanceof Data_Maybe.Just){return new Cons($365.value0,v2.value1)}throw new Error("Failed pattern match at Data.List line 356, column 27 - line 360, column 1: "+[$365.constructor.name])}())}if(v2 instanceof Cons){return Prelude["<$>"](Data_Maybe.functorMaybe)(Cons.create(v2.value0))(alterAt(v-1)(v1)(v2.value1))}return Data_Maybe.Nothing.value}}};var modifyAt=function modifyAt(n){return function(f){return alterAt(n)(function($374){return Data_Maybe.Just.create(f($374))})}};var altList=new Control_Alt.Alt(function(){return functorList},Prelude.append(semigroupList));var plusList=new Control_Plus.Plus(function(){return altList},Nil.value);var alternativeList=new Control_Alternative.Alternative(function(){return plusList},function(){return applicativeList});var monadPlusList=new Control_MonadPlus.MonadPlus(function(){return alternativeList},function(){return monadList});module.exports={Nil:Nil,Cons:Cons,fromList:fromList,toList:toList,foldM:foldM,transpose:transpose,unzip:unzip,zip:zip,zipWithA:zipWithA,zipWith:zipWith,intersectBy:intersectBy,intersect:intersect,"\\\\":$bslash$bslash,deleteBy:deleteBy,"delete":$$delete,unionBy:unionBy,union:union,nubBy:nubBy,nub:nub,groupBy:groupBy,"group'":group$prime,group:group,span:span,dropWhile:dropWhile,drop:drop,takeWhile:takeWhile,take:take,slice:slice,sortBy:sortBy,sort:sort,catMaybes:catMaybes,mapMaybe:mapMaybe,filterM:filterM,filter:filter,concatMap:concatMap,concat:concat,reverse:reverse,alterAt:alterAt,modifyAt:modifyAt,updateAt:updateAt,deleteAt:deleteAt,insertAt:insertAt,findLastIndex:findLastIndex,findIndex:findIndex,elemLastIndex:elemLastIndex,elemIndex:elemIndex,index:index,"!!":$bang$bang,uncons:uncons,init:init,tail:tail,last:last,head:head,insertBy:insertBy,insert:insert,snoc:snoc,":":$colon,length:length,"null":$$null,many:many,some:some,replicateM:replicateM,replicate:replicate,range:range,"..":$dot$dot,singleton:singleton,fromFoldable:fromFoldable,toUnfoldable:toUnfoldable,showList:showList,eqList:eqList,ordList:ordList,semigroupList:semigroupList,monoidList:monoidList,functorList:functorList,foldableList:foldableList,unfoldableList:unfoldableList,traversableList:traversableList,applyList:applyList,applicativeList:applicativeList,bindList:bindList,monadList:monadList,altList:altList,plusList:plusList,alternativeList:alternativeList,monadPlusList:monadPlusList}},{"Control.Alt":8,"Control.Alternative":9,"Control.Lazy":16,"Control.MonadPlus":37,"Control.Plus":39,"Data.Foldable":61,"Data.Maybe":107,"Data.Monoid":114,"Data.Traversable":132,"Data.Tuple":134,"Data.Unfoldable":135,Prelude:146}],102:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Foldable=require("Data.Foldable");var Data_List=require("Data.List");var Data_Maybe=require("Data.Maybe");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Data_Tuple=require("Data.Tuple");var Leaf=function(){function Leaf(){}Leaf.value=new Leaf;return Leaf}();var Two=function(){function Two(value0,value1,value2,value3){this.value0=value0;this.value1=value1;this.value2=value2;this.value3=value3}Two.create=function(value0){return function(value1){return function(value2){return function(value3){return new Two(value0,value1,value2,value3)}}}};return Two}();var Three=function(){function Three(value0,value1,value2,value3,value4,value5,value6){this.value0=value0;this.value1=value1;this.value2=value2;this.value3=value3;this.value4=value4;this.value5=value5;this.value6=value6}Three.create=function(value0){return function(value1){return function(value2){return function(value3){return function(value4){return function(value5){return function(value6){return new Three(value0,value1,value2,value3,value4,value5,value6)}}}}}}};return Three}();var TwoLeft=function(){function TwoLeft(value0,value1,value2){this.value0=value0;this.value1=value1;this.value2=value2}TwoLeft.create=function(value0){return function(value1){return function(value2){return new TwoLeft(value0,value1,value2)}}};return TwoLeft}();var TwoRight=function(){function TwoRight(value0,value1,value2){this.value0=value0;this.value1=value1;this.value2=value2}TwoRight.create=function(value0){return function(value1){return function(value2){return new TwoRight(value0,value1,value2)}}};return TwoRight}();var ThreeLeft=function(){function ThreeLeft(value0,value1,value2,value3,value4,value5){this.value0=value0;this.value1=value1;this.value2=value2;this.value3=value3;this.value4=value4;this.value5=value5}ThreeLeft.create=function(value0){return function(value1){return function(value2){return function(value3){return function(value4){return function(value5){return new ThreeLeft(value0,value1,value2,value3,value4,value5)}}}}}};return ThreeLeft}();var ThreeMiddle=function(){function ThreeMiddle(value0,value1,value2,value3,value4,value5){this.value0=value0;this.value1=value1;this.value2=value2;this.value3=value3;this.value4=value4;this.value5=value5}ThreeMiddle.create=function(value0){return function(value1){return function(value2){return function(value3){return function(value4){return function(value5){return new ThreeMiddle(value0,value1,value2,value3,value4,value5)}}}}}};return ThreeMiddle}();var ThreeRight=function(){function ThreeRight(value0,value1,value2,value3,value4,value5){this.value0=value0;this.value1=value1;this.value2=value2;this.value3=value3;this.value4=value4;this.value5=value5}ThreeRight.create=function(value0){return function(value1){return function(value2){return function(value3){return function(value4){return function(value5){return new ThreeRight(value0,value1,value2,value3,value4,value5)}}}}}};return ThreeRight}();var KickUp=function(){function KickUp(value0,value1,value2,value3){this.value0=value0;this.value1=value1;this.value2=value2;this.value3=value3}KickUp.create=function(value0){return function(value1){return function(value2){return function(value3){return new KickUp(value0,value1,value2,value3)}}}};return KickUp}();var values=function values(v){if(v instanceof Leaf){return Data_List.Nil.value}if(v instanceof Two){return Prelude["++"](Data_List.semigroupList)(values(v.value0))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(v.value2))(values(v.value3)))}if(v instanceof Three){return Prelude["++"](Data_List.semigroupList)(values(v.value0))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(v.value2))(Prelude["++"](Data_List.semigroupList)(values(v.value3))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(v.value5))(values(v.value6)))))}throw new Error("Failed pattern match at Data.Map line 279, column 1 - line 280, column 1: "+[v.constructor.name])};var toList=function toList(v){if(v instanceof Leaf){return Data_List.Nil.value}if(v instanceof Two){return Prelude["++"](Data_List.semigroupList)(toList(v.value0))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(new Data_Tuple.Tuple(v.value1,v.value2)))(toList(v.value3)))}if(v instanceof Three){return Prelude["++"](Data_List.semigroupList)(toList(v.value0))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(new Data_Tuple.Tuple(v.value1,v.value2)))(Prelude["++"](Data_List.semigroupList)(toList(v.value3))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(new Data_Tuple.Tuple(v.value4,v.value5)))(toList(v.value6)))))}throw new Error("Failed pattern match at Data.Map line 258, column 1 - line 259, column 1: "+[v.constructor.name])};var size=function size($600){return Data_List.length(values($600))};var singleton=function singleton(k){return function(v){return new Two(Leaf.value,k,v,Leaf.value)}};var showTree=function showTree(dictShow){return function(dictShow1){return function(v){if(v instanceof Leaf){return"Leaf"}if(v instanceof Two){return"Two ("+(showTree(dictShow)(dictShow1)(v.value0)+(") ("+(Prelude.show(dictShow)(v.value1)+(") ("+(Prelude.show(dictShow1)(v.value2)+(") ("+(showTree(dictShow)(dictShow1)(v.value3)+")")))))))}if(v instanceof Three){return"Three ("+(showTree(dictShow)(dictShow1)(v.value0)+(") ("+(Prelude.show(dictShow)(v.value1)+(") ("+(Prelude.show(dictShow1)(v.value2)+(") ("+(showTree(dictShow)(dictShow1)(v.value3)+(") ("+(Prelude.show(dictShow)(v.value4)+(") ("+(Prelude.show(dictShow1)(v.value5)+(") ("+(showTree(dictShow)(dictShow1)(v.value6)+")")))))))))))))}throw new Error("Failed pattern match at Data.Map line 77, column 1 - line 78, column 1: "+[v.constructor.name])}}};var showMap=function showMap(dictShow){return function(dictShow1){return new Prelude.Show(function(m){return"fromList "+Prelude.show(Data_List.showList(Data_Tuple.showTuple(dictShow)(dictShow1)))(toList(m))})}};var lookup=function lookup(__copy_dictOrd){return function(__copy_v){return function(__copy_v1){var dictOrd=__copy_dictOrd;var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v1 instanceof Leaf){return Data_Maybe.Nothing.value}if(v1 instanceof Two&&Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value1)){return new Data_Maybe.Just(v1.value2)}if(v1 instanceof Two&&Prelude["<"](dictOrd)(v)(v1.value1)){var __tco_dictOrd=dictOrd;var __tco_v=v;var __tco_v1=v1.value0;dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Two){var __tco_dictOrd=dictOrd;var __tco_v=v;var __tco_v1=v1.value3;dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Three&&Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value1)){return new Data_Maybe.Just(v1.value2)}if(v1 instanceof Three&&Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value4)){return new Data_Maybe.Just(v1.value5)}if(v1 instanceof Three&&Prelude["<"](dictOrd)(v)(v1.value1)){var __tco_dictOrd=dictOrd;var __tco_v=v;var __tco_v1=v1.value0;dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Three&&Prelude["<"](dictOrd)(v1.value1)(v)&&Prelude["<="](dictOrd)(v)(v1.value4)){var __tco_dictOrd=dictOrd;var __tco_v=v;var __tco_v1=v1.value3;dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Three){var __tco_dictOrd=dictOrd;var __tco_v=v;var __tco_v1=v1.value6;dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.Map line 118, column 1 - line 119, column 1: "+[v.constructor.name,v1.constructor.name])}}}};var member=function member(dictOrd){return function(k){return function(m){return Data_Maybe.isJust(lookup(dictOrd)(k)(m))}}};var keys=function keys(v){if(v instanceof Leaf){return Data_List.Nil.value}if(v instanceof Two){return Prelude["++"](Data_List.semigroupList)(keys(v.value0))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(v.value1))(keys(v.value3)))}if(v instanceof Three){return Prelude["++"](Data_List.semigroupList)(keys(v.value0))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(v.value1))(Prelude["++"](Data_List.semigroupList)(keys(v.value3))(Prelude["++"](Data_List.semigroupList)(Prelude.pure(Data_List.applicativeList)(v.value4))(keys(v.value6)))))}throw new Error("Failed pattern match at Data.Map line 273, column 1 - line 274, column 1: "+[v.constructor.name])};var isEmpty=function isEmpty(v){if(v instanceof Leaf){return true}return false};var functorMap=new Prelude.Functor(function(v){return function(v1){if(v1 instanceof Leaf){return Leaf.value}if(v1 instanceof Two){return new Two(Prelude.map(functorMap)(v)(v1.value0),v1.value1,v(v1.value2),Prelude.map(functorMap)(v)(v1.value3))}if(v1 instanceof Three){return new Three(Prelude.map(functorMap)(v)(v1.value0),v1.value1,v(v1.value2),Prelude.map(functorMap)(v)(v1.value3),v1.value4,v(v1.value5),Prelude.map(functorMap)(v)(v1.value6))}throw new Error("Failed pattern match at Data.Map line 62, column 3 - line 63, column 3: "+[v.constructor.name,v1.constructor.name])}});var fromZipper=function fromZipper(__copy_dictOrd){return function(__copy_v){return function(__copy_v1){var dictOrd=__copy_dictOrd;var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v instanceof Data_List.Nil){return v1}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoLeft){var __tco_dictOrd=dictOrd;var __tco_v=v.value1;var __tco_v1=new Two(v1,v.value0.value0,v.value0.value1,v.value0.value2);dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoRight){var __tco_dictOrd=dictOrd;var __tco_v=v.value1;var __tco_v1=new Two(v.value0.value0,v.value0.value1,v.value0.value2,v1);dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeLeft){var __tco_dictOrd=dictOrd;var __tco_v=v.value1;var __tco_v1=new Three(v1,v.value0.value0,v.value0.value1,v.value0.value2,v.value0.value3,v.value0.value4,v.value0.value5);dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeMiddle){var __tco_dictOrd=dictOrd;var __tco_v=v.value1;var __tco_v1=new Three(v.value0.value0,v.value0.value1,v.value0.value2,v1,v.value0.value3,v.value0.value4,v.value0.value5);dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeRight){var __tco_dictOrd=dictOrd;var __tco_v=v.value1;var __tco_v1=new Three(v.value0.value0,v.value0.value1,v.value0.value2,v.value0.value3,v.value0.value4,v.value0.value5,v1);dictOrd=__tco_dictOrd;v=__tco_v;v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.Map line 140, column 1 - line 141, column 1: "+[v.constructor.name,v1.constructor.name])}}}};var insert=function insert(dictOrd){var up=function up(__copy_v){return function(__copy_v1){var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v instanceof Data_List.Nil){return new Two(v1.value0,v1.value1,v1.value2,v1.value3)}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoLeft){return fromZipper(dictOrd)(v.value1)(new Three(v1.value0,v1.value1,v1.value2,v1.value3,v.value0.value0,v.value0.value1,v.value0.value2))}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoRight){return fromZipper(dictOrd)(v.value1)(new Three(v.value0.value0,v.value0.value1,v.value0.value2,v1.value0,v1.value1,v1.value2,v1.value3))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeLeft){var __tco_v=v.value1;var __tco_v1=new KickUp(new Two(v1.value0,v1.value1,v1.value2,v1.value3),v.value0.value0,v.value0.value1,new Two(v.value0.value2,v.value0.value3,v.value0.value4,v.value0.value5));v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeMiddle){var __tco_v=v.value1;var __tco_v1=new KickUp(new Two(v.value0.value0,v.value0.value1,v.value0.value2,v1.value0),v1.value1,v1.value2,new Two(v1.value3,v.value0.value3,v.value0.value4,v.value0.value5));v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeRight){var __tco_v=v.value1;var __tco_v1=new KickUp(new Two(v.value0.value0,v.value0.value1,v.value0.value2,v.value0.value3),v.value0.value4,v.value0.value5,new Two(v1.value0,v1.value1,v1.value2,v1.value3));v=__tco_v;v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.Map line 165, column 3 - line 166, column 3: "+[v.constructor.name,v1.constructor.name])}}};var down=function down(__copy_ctx){return function(__copy_k){return function(__copy_v){return function(__copy_v1){var ctx=__copy_ctx;var k=__copy_k;var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v1 instanceof Leaf){return up(ctx)(new KickUp(Leaf.value,k,v,Leaf.value))}if(v1 instanceof Two&&Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(k)(v1.value1)){return fromZipper(dictOrd)(ctx)(new Two(v1.value0,k,v,v1.value3))}if(v1 instanceof Two&&Prelude["<"](dictOrd)(k)(v1.value1)){var __tco_ctx=new Data_List.Cons(new TwoLeft(v1.value1,v1.value2,v1.value3),ctx);var __tco_k=k;var __tco_v=v;var __tco_v1=v1.value0;ctx=__tco_ctx;k=__tco_k;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Two){var __tco_ctx=new Data_List.Cons(new TwoRight(v1.value0,v1.value1,v1.value2),ctx);var __tco_k=k;var __tco_v=v;var __tco_v1=v1.value3;ctx=__tco_ctx;k=__tco_k;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Three&&Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(k)(v1.value1)){return fromZipper(dictOrd)(ctx)(new Three(v1.value0,k,v,v1.value3,v1.value4,v1.value5,v1.value6))}if(v1 instanceof Three&&Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(k)(v1.value4)){return fromZipper(dictOrd)(ctx)(new Three(v1.value0,v1.value1,v1.value2,v1.value3,k,v,v1.value6))}if(v1 instanceof Three&&Prelude["<"](dictOrd)(k)(v1.value1)){var __tco_ctx=new Data_List.Cons(new ThreeLeft(v1.value1,v1.value2,v1.value3,v1.value4,v1.value5,v1.value6),ctx);var __tco_k=k;var __tco_v=v;var __tco_v1=v1.value0;ctx=__tco_ctx;k=__tco_k;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Three&&Prelude["<"](dictOrd)(v1.value1)(k)&&Prelude["<="](dictOrd)(k)(v1.value4)){var __tco_ctx=new Data_List.Cons(new ThreeMiddle(v1.value0,v1.value1,v1.value2,v1.value4,v1.value5,v1.value6),ctx);var __tco_k=k;var __tco_v=v;var __tco_v1=v1.value3;ctx=__tco_ctx;k=__tco_k;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Three){var __tco_ctx=new Data_List.Cons(new ThreeRight(v1.value0,v1.value1,v1.value2,v1.value3,v1.value4,v1.value5),ctx);var __tco_k=k;var __tco_v=v;var __tco_v1=v1.value6;ctx=__tco_ctx;k=__tco_k;v=__tco_v;
v1=__tco_v1;continue tco}throw new Error("Failed pattern match at Data.Map line 154, column 3 - line 155, column 3: "+[ctx.constructor.name,k.constructor.name,v.constructor.name,v1.constructor.name])}}}}};return down(Data_List.Nil.value)};var foldableMap=new Data_Foldable.Foldable(function(dictMonoid){return function(f){return function(m){return Data_Foldable.foldMap(Data_List.foldableList)(dictMonoid)(f)(values(m))}}},function(f){return function(z){return function(m){return Data_Foldable.foldl(Data_List.foldableList)(f)(z)(values(m))}}},function(f){return function(z){return function(m){return Data_Foldable.foldr(Data_List.foldableList)(f)(z)(values(m))}}});var eqMap=function eqMap(dictEq){return function(dictEq1){return new Prelude.Eq(function(m1){return function(m2){return Prelude["=="](Data_List.eqList(Data_Tuple.eqTuple(dictEq)(dictEq1)))(toList(m1))(toList(m2))}})}};var ordMap=function ordMap(dictOrd){return function(dictOrd1){return new Prelude.Ord(function(){return eqMap(dictOrd["__superclass_Prelude.Eq_0"]())(dictOrd1["__superclass_Prelude.Eq_0"]())},function(m1){return function(m2){return Prelude.compare(Data_List.ordList(Data_Tuple.ordTuple(dictOrd)(dictOrd1)))(toList(m1))(toList(m2))}})}};var empty=Leaf.value;var fromFoldable=function fromFoldable(dictOrd){return function(dictFoldable){return Data_Foldable.foldl(dictFoldable)(function(m){return function(v){return insert(dictOrd)(v.value0)(v.value1)(m)}})(empty)}};var fromList=function fromList(dictOrd){return fromFoldable(dictOrd)(Data_List.foldableList)};var $$delete=function $$delete(dictOrd){var up=function up(__copy_v){return function(__copy_v1){var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v instanceof Data_List.Nil){return v1}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoLeft&&v.value0.value2 instanceof Leaf&&v1 instanceof Leaf){return fromZipper(dictOrd)(v.value1)(new Two(Leaf.value,v.value0.value0,v.value0.value1,Leaf.value))}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoRight&&v.value0.value0 instanceof Leaf&&v1 instanceof Leaf){return fromZipper(dictOrd)(v.value1)(new Two(Leaf.value,v.value0.value1,v.value0.value2,Leaf.value))}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoLeft&&v.value0.value2 instanceof Two){var __tco_v=v.value1;var __tco_v1=new Three(v1,v.value0.value0,v.value0.value1,v.value0.value2.value0,v.value0.value2.value1,v.value0.value2.value2,v.value0.value2.value3);v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoRight&&v.value0.value0 instanceof Two){var __tco_v=v.value1;var __tco_v1=new Three(v.value0.value0.value0,v.value0.value0.value1,v.value0.value0.value2,v.value0.value0.value3,v.value0.value1,v.value0.value2,v1);v=__tco_v;v1=__tco_v1;continue tco}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoLeft&&v.value0.value2 instanceof Three){return fromZipper(dictOrd)(v.value1)(new Two(new Two(v1,v.value0.value0,v.value0.value1,v.value0.value2.value0),v.value0.value2.value1,v.value0.value2.value2,new Two(v.value0.value2.value3,v.value0.value2.value4,v.value0.value2.value5,v.value0.value2.value6)))}if(v instanceof Data_List.Cons&&v.value0 instanceof TwoRight&&v.value0.value0 instanceof Three){return fromZipper(dictOrd)(v.value1)(new Two(new Two(v.value0.value0.value0,v.value0.value0.value1,v.value0.value0.value2,v.value0.value0.value3),v.value0.value0.value4,v.value0.value0.value5,new Two(v.value0.value0.value6,v.value0.value1,v.value0.value2,v1)))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeLeft&&v.value0.value2 instanceof Leaf&&v.value0.value5 instanceof Leaf&&v1 instanceof Leaf){return fromZipper(dictOrd)(v.value1)(new Three(Leaf.value,v.value0.value0,v.value0.value1,Leaf.value,v.value0.value3,v.value0.value4,Leaf.value))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeMiddle&&v.value0.value0 instanceof Leaf&&v.value0.value5 instanceof Leaf&&v1 instanceof Leaf){return fromZipper(dictOrd)(v.value1)(new Three(Leaf.value,v.value0.value1,v.value0.value2,Leaf.value,v.value0.value3,v.value0.value4,Leaf.value))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeRight&&v.value0.value0 instanceof Leaf&&v.value0.value3 instanceof Leaf&&v1 instanceof Leaf){return fromZipper(dictOrd)(v.value1)(new Three(Leaf.value,v.value0.value1,v.value0.value2,Leaf.value,v.value0.value4,v.value0.value5,Leaf.value))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeLeft&&v.value0.value2 instanceof Two){return fromZipper(dictOrd)(v.value1)(new Two(new Three(v1,v.value0.value0,v.value0.value1,v.value0.value2.value0,v.value0.value2.value1,v.value0.value2.value2,v.value0.value2.value3),v.value0.value3,v.value0.value4,v.value0.value5))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeMiddle&&v.value0.value0 instanceof Two){return fromZipper(dictOrd)(v.value1)(new Two(new Three(v.value0.value0.value0,v.value0.value0.value1,v.value0.value0.value2,v.value0.value0.value3,v.value0.value1,v.value0.value2,v1),v.value0.value3,v.value0.value4,v.value0.value5))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeMiddle&&v.value0.value5 instanceof Two){return fromZipper(dictOrd)(v.value1)(new Two(v.value0.value0,v.value0.value1,v.value0.value2,new Three(v1,v.value0.value3,v.value0.value4,v.value0.value5.value0,v.value0.value5.value1,v.value0.value5.value2,v.value0.value5.value3)))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeRight&&v.value0.value3 instanceof Two){return fromZipper(dictOrd)(v.value1)(new Two(v.value0.value0,v.value0.value1,v.value0.value2,new Three(v.value0.value3.value0,v.value0.value3.value1,v.value0.value3.value2,v.value0.value3.value3,v.value0.value4,v.value0.value5,v1)))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeLeft&&v.value0.value2 instanceof Three){return fromZipper(dictOrd)(v.value1)(new Three(new Two(v1,v.value0.value0,v.value0.value1,v.value0.value2.value0),v.value0.value2.value1,v.value0.value2.value2,new Two(v.value0.value2.value3,v.value0.value2.value4,v.value0.value2.value5,v.value0.value2.value6),v.value0.value3,v.value0.value4,v.value0.value5))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeMiddle&&v.value0.value0 instanceof Three){return fromZipper(dictOrd)(v.value1)(new Three(new Two(v.value0.value0.value0,v.value0.value0.value1,v.value0.value0.value2,v.value0.value0.value3),v.value0.value0.value4,v.value0.value0.value5,new Two(v.value0.value0.value6,v.value0.value1,v.value0.value2,v1),v.value0.value3,v.value0.value4,v.value0.value5))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeMiddle&&v.value0.value5 instanceof Three){return fromZipper(dictOrd)(v.value1)(new Three(v.value0.value0,v.value0.value1,v.value0.value2,new Two(v1,v.value0.value3,v.value0.value4,v.value0.value5.value0),v.value0.value5.value1,v.value0.value5.value2,new Two(v.value0.value5.value3,v.value0.value5.value4,v.value0.value5.value5,v.value0.value5.value6)))}if(v instanceof Data_List.Cons&&v.value0 instanceof ThreeRight&&v.value0.value3 instanceof Three){return fromZipper(dictOrd)(v.value1)(new Three(v.value0.value0,v.value0.value1,v.value0.value2,new Two(v.value0.value3.value0,v.value0.value3.value1,v.value0.value3.value2,v.value0.value3.value3),v.value0.value3.value4,v.value0.value3.value5,new Two(v.value0.value3.value6,v.value0.value4,v.value0.value5,v1)))}return Data_Maybe_Unsafe.unsafeThrow("Impossible case in 'up'")}}};var removeMaxNode=function removeMaxNode(__copy_v){return function(__copy_v1){var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v1 instanceof Two&&v1.value0 instanceof Leaf&&v1.value3 instanceof Leaf){return up(v)(Leaf.value)}if(v1 instanceof Two){var __tco_v=new Data_List.Cons(new TwoRight(v1.value0,v1.value1,v1.value2),v);var __tco_v1=v1.value3;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Three&&v1.value0 instanceof Leaf&&v1.value3 instanceof Leaf&&v1.value6 instanceof Leaf){return up(new Data_List.Cons(new TwoRight(Leaf.value,v1.value1,v1.value2),v))(Leaf.value)}if(v1 instanceof Three){var __tco_v=new Data_List.Cons(new ThreeRight(v1.value0,v1.value1,v1.value2,v1.value3,v1.value4,v1.value5),v);var __tco_v1=v1.value6;v=__tco_v;v1=__tco_v1;continue tco}if(v1 instanceof Leaf){return Data_Maybe_Unsafe.unsafeThrow("Impossible case in 'removeMaxNode'")}throw new Error("Failed pattern match at Data.Map line 227, column 3 - line 228, column 3: "+[v.constructor.name,v1.constructor.name])}}};var maxNode=function maxNode(__copy_v){var v=__copy_v;tco:while(true){if(v instanceof Two&&v.value3 instanceof Leaf){return{key:v.value1,value:v.value2}}if(v instanceof Two){var __tco_v=v.value3;v=__tco_v;continue tco}if(v instanceof Three&&v.value6 instanceof Leaf){return{key:v.value4,value:v.value5}}if(v instanceof Three){var __tco_v=v.value6;v=__tco_v;continue tco}if(v instanceof Leaf){return Data_Maybe_Unsafe.unsafeThrow("Impossible case in 'maxNode'")}throw new Error("Failed pattern match at Data.Map line 219, column 3 - line 220, column 3: "+[v.constructor.name])}};var down=function down(__copy_ctx){return function(__copy_v){return function(__copy_v1){var ctx=__copy_ctx;var v=__copy_v;var v1=__copy_v1;tco:while(true){if(v1 instanceof Leaf){return fromZipper(dictOrd)(ctx)(Leaf.value)}if(v1 instanceof Two&&v1.value0 instanceof Leaf&&v1.value3 instanceof Leaf&&Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value1)){return up(ctx)(Leaf.value)}if(v1 instanceof Two){if(Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value1)){var max=maxNode(v1.value0);return removeMaxNode(new Data_List.Cons(new TwoLeft(max.key,max.value,v1.value3),ctx))(v1.value0)}if(Prelude["<"](dictOrd)(v)(v1.value1)){var __tco_ctx=new Data_List.Cons(new TwoLeft(v1.value1,v1.value2,v1.value3),ctx);var __tco_v=v;var __tco_v1=v1.value0;ctx=__tco_ctx;v=__tco_v;v1=__tco_v1;continue tco}if(Prelude.otherwise){var __tco_ctx=new Data_List.Cons(new TwoRight(v1.value0,v1.value1,v1.value2),ctx);var __tco_v=v;var __tco_v1=v1.value3;ctx=__tco_ctx;v=__tco_v;v1=__tco_v1;continue tco}}if(v1 instanceof Three&&v1.value0 instanceof Leaf&&v1.value3 instanceof Leaf&&v1.value6 instanceof Leaf){if(Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value1)){return fromZipper(dictOrd)(ctx)(new Two(Leaf.value,v1.value4,v1.value5,Leaf.value))}if(Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value4)){return fromZipper(dictOrd)(ctx)(new Two(Leaf.value,v1.value1,v1.value2,Leaf.value))}}if(v1 instanceof Three){if(Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value1)){var max=maxNode(v1.value0);return removeMaxNode(new Data_List.Cons(new ThreeLeft(max.key,max.value,v1.value3,v1.value4,v1.value5,v1.value6),ctx))(v1.value0)}if(Prelude["=="](dictOrd["__superclass_Prelude.Eq_0"]())(v)(v1.value4)){var max=maxNode(v1.value3);return removeMaxNode(new Data_List.Cons(new ThreeMiddle(v1.value0,v1.value1,v1.value2,max.key,max.value,v1.value6),ctx))(v1.value3)}if(Prelude["<"](dictOrd)(v)(v1.value1)){var __tco_ctx=new Data_List.Cons(new ThreeLeft(v1.value1,v1.value2,v1.value3,v1.value4,v1.value5,v1.value6),ctx);var __tco_v=v;var __tco_v1=v1.value0;ctx=__tco_ctx;v=__tco_v;v1=__tco_v1;continue tco}if(Prelude["<"](dictOrd)(v1.value1)(v)&&Prelude["<"](dictOrd)(v)(v1.value4)){var __tco_ctx=new Data_List.Cons(new ThreeMiddle(v1.value0,v1.value1,v1.value2,v1.value4,v1.value5,v1.value6),ctx);var __tco_v=v;var __tco_v1=v1.value3;ctx=__tco_ctx;v=__tco_v;v1=__tco_v1;continue tco}if(Prelude.otherwise){var __tco_ctx=new Data_List.Cons(new ThreeRight(v1.value0,v1.value1,v1.value2,v1.value3,v1.value4,v1.value5),ctx);var __tco_v=v;var __tco_v1=v1.value6;ctx=__tco_ctx;v=__tco_v;v1=__tco_v1;continue tco}}throw new Error("Failed pattern match at Data.Map line 177, column 3 - line 178, column 3: "+[ctx.constructor.name,v.constructor.name,v1.constructor.name])}}}};return down(Data_List.Nil.value)};var checkValid=function checkValid(tree){var allHeights=function allHeights(v){if(v instanceof Leaf){return Prelude.pure(Data_List.applicativeList)(0)}if(v instanceof Two){return Prelude.map(Data_List.functorList)(function(n){return n+1|0})(Prelude["++"](Data_List.semigroupList)(allHeights(v.value0))(allHeights(v.value3)))}if(v instanceof Three){return Prelude.map(Data_List.functorList)(function(n){return n+1|0})(Prelude["++"](Data_List.semigroupList)(allHeights(v.value0))(Prelude["++"](Data_List.semigroupList)(allHeights(v.value3))(allHeights(v.value6))))}throw new Error("Failed pattern match at Data.Map line 112, column 3 - line 113, column 3: "+[v.constructor.name])};return Data_List.length(Data_List.nub(Prelude.eqInt)(allHeights(tree)))===1};var alter=function alter(dictOrd){return function(f){return function(k){return function(m){var $588=f(lookup(dictOrd)(k)(m));if($588 instanceof Data_Maybe.Nothing){return $$delete(dictOrd)(k)(m)}if($588 instanceof Data_Maybe.Just){return insert(dictOrd)(k)($588.value0)(m)}throw new Error("Failed pattern match at Data.Map line 236, column 15 - line 241, column 1: "+[$588.constructor.name])}}}};var fromFoldableWith=function fromFoldableWith(dictOrd){return function(dictFoldable){return function(f){var combine=function combine(v){return function(v1){if(v1 instanceof Data_Maybe.Just){return Data_Maybe.Just.create(f(v)(v1.value0))}if(v1 instanceof Data_Maybe.Nothing){return new Data_Maybe.Just(v)}throw new Error("Failed pattern match at Data.Map line 253, column 3 - line 254, column 3: "+[v.constructor.name,v1.constructor.name])}};return Data_Foldable.foldl(dictFoldable)(function(m){return function(v){return alter(dictOrd)(combine(v.value1))(v.value0)(m)}})(empty)}}};var fromListWith=function fromListWith(dictOrd){return fromFoldableWith(dictOrd)(Data_List.foldableList)};var unionWith=function unionWith(dictOrd){return function(f){return function(m1){return function(m2){var go=function go(m){return function(v){return alter(dictOrd)(function($601){return Data_Maybe.Just.create(Data_Maybe.maybe(v.value1)(f(v.value1))($601))})(v.value0)(m)}};return Data_Foldable.foldl(Data_List.foldableList)(go)(m2)(toList(m1))}}}};var union=function union(dictOrd){return unionWith(dictOrd)(Prelude["const"])};var semigroupMap=function semigroupMap(dictOrd){return new Prelude.Semigroup(union(dictOrd))};var monoidMap=function monoidMap(dictOrd){return new Data_Monoid.Monoid(function(){return semigroupMap(dictOrd)},empty)};var traversableMap=function traversableMap(dictOrd){return new Data_Traversable.Traversable(function(){return foldableMap},function(){return functorMap},function(dictApplicative){return Data_Traversable.traverse(traversableMap(dictOrd))(dictApplicative)(Prelude.id(Prelude.categoryFn))},function(dictApplicative){return function(f){return function(ms){return Data_Foldable.foldr(Data_List.foldableList)(function(x){return function(acc){return Prelude["<*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(union(dictOrd))(x))(acc)}})(Prelude.pure(dictApplicative)(empty))(Prelude["<$>"](Data_List.functorList)(Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Tuple.uncurry(singleton)))(Prelude["<$>"](Data_List.functorList)(Data_Traversable.traverse(Data_Tuple.traversableTuple)(dictApplicative)(f))(toList(ms))))}}})};var unions=function unions(dictOrd){return function(dictFoldable){return Data_Foldable.foldl(dictFoldable)(union(dictOrd))(empty)}};var update=function update(dictOrd){return function(f){return function(k){return function(m){return alter(dictOrd)(Data_Maybe.maybe(Data_Maybe.Nothing.value)(f))(k)(m)}}}};module.exports={size:size,unions:unions,unionWith:unionWith,union:union,values:values,keys:keys,update:update,alter:alter,member:member,"delete":$$delete,fromListWith:fromListWith,fromList:fromList,toList:toList,fromFoldableWith:fromFoldableWith,fromFoldable:fromFoldable,lookup:lookup,insert:insert,checkValid:checkValid,singleton:singleton,isEmpty:isEmpty,empty:empty,showTree:showTree,eqMap:eqMap,showMap:showMap,ordMap:ordMap,semigroupMap:semigroupMap,monoidMap:monoidMap,functorMap:functorMap,foldableMap:foldableMap,traversableMap:traversableMap}},{"Data.Foldable":61,"Data.List":101,"Data.Maybe":107,"Data.Maybe.Unsafe":106,"Data.Monoid":114,"Data.Traversable":132,"Data.Tuple":134,Prelude:146}],103:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Maybe=require("Data.Maybe");var Data_Monoid=require("Data.Monoid");var First=function First(x){return x};var showFirst=function showFirst(dictShow){return new Prelude.Show(function(v){return"First ("+(Prelude.show(Data_Maybe.showMaybe(dictShow))(v)+")")})};var semigroupFirst=new Prelude.Semigroup(function(v){return function(v1){if(v instanceof Data_Maybe.Just){return v}return v1}});var runFirst=function runFirst(v){return v};var monoidFirst=new Data_Monoid.Monoid(function(){return semigroupFirst},Data_Maybe.Nothing.value);var functorFirst=new Prelude.Functor(function(f){return function(v){return Prelude["<$>"](Data_Maybe.functorMaybe)(f)(v)}});var invariantFirst=new Data_Functor_Invariant.Invariant(Data_Functor_Invariant.imapF(functorFirst));var extendFirst=new Control_Extend.Extend(function(){return functorFirst},function(f){return function(v){return Control_Extend.extend(Data_Maybe.extendMaybe)(function($34){return f(First($34))})(v)}});var eqFirst=function eqFirst(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](Data_Maybe.eqMaybe(dictEq))(v)(v1)}})};var ordFirst=function ordFirst(dictOrd){return new Prelude.Ord(function(){return eqFirst(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(Data_Maybe.ordMaybe(dictOrd))(v)(v1)}})};var boundedFirst=function boundedFirst(dictBounded){return new Prelude.Bounded(Prelude.bottom(Data_Maybe.boundedMaybe(dictBounded)),Prelude.top(Data_Maybe.boundedMaybe(dictBounded)))};var applyFirst=new Prelude.Apply(function(){return functorFirst},function(v){return function(v1){return Prelude["<*>"](Data_Maybe.applyMaybe)(v)(v1)}});var bindFirst=new Prelude.Bind(function(){return applyFirst},function(v){return function(f){return Prelude.bind(Data_Maybe.bindMaybe)(v)(function($35){return runFirst(f($35))})}});var applicativeFirst=new Prelude.Applicative(function(){return applyFirst},function($36){return First(Prelude.pure(Data_Maybe.applicativeMaybe)($36))});var monadFirst=new Prelude.Monad(function(){return applicativeFirst},function(){return bindFirst});module.exports={First:First,runFirst:runFirst,eqFirst:eqFirst,ordFirst:ordFirst,boundedFirst:boundedFirst,functorFirst:functorFirst,applyFirst:applyFirst,applicativeFirst:applicativeFirst,bindFirst:bindFirst,monadFirst:monadFirst,extendFirst:extendFirst,invariantFirst:invariantFirst,showFirst:showFirst,semigroupFirst:semigroupFirst,monoidFirst:monoidFirst}},{"Control.Comonad":14,"Control.Extend":15,"Data.Functor.Invariant":68,"Data.Maybe":107,"Data.Monoid":114,Prelude:146}],104:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Maybe=require("Data.Maybe");var Data_Monoid=require("Data.Monoid");var Last=function Last(x){return x};var showLast=function showLast(dictShow){return new Prelude.Show(function(v){return"Last ("+(Prelude.show(Data_Maybe.showMaybe(dictShow))(v)+")")})};var semigroupLast=new Prelude.Semigroup(function(v){return function(v1){if(v1 instanceof Data_Maybe.Just){return v1}if(v1 instanceof Data_Maybe.Nothing){return v}throw new Error("Failed pattern match at Data.Maybe.Last line 58, column 3 - line 59, column 3: "+[v.constructor.name,v1.constructor.name])}});var runLast=function runLast(v){return v};var monoidLast=new Data_Monoid.Monoid(function(){return semigroupLast},Data_Maybe.Nothing.value);var functorLast=new Prelude.Functor(function(f){return function(v){return Prelude["<$>"](Data_Maybe.functorMaybe)(f)(v)}});var invariantLast=new Data_Functor_Invariant.Invariant(Data_Functor_Invariant.imapF(functorLast));var extendLast=new Control_Extend.Extend(function(){return functorLast},function(f){return function(v){return Control_Extend.extend(Data_Maybe.extendMaybe)(function($34){return f(Last($34))})(v)}});var eqLast=function eqLast(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](Data_Maybe.eqMaybe(dictEq))(v)(v1)}})};var ordLast=function ordLast(dictOrd){return new Prelude.Ord(function(){return eqLast(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(Data_Maybe.ordMaybe(dictOrd))(v)(v1)}})};var boundedLast=function boundedLast(dictBounded){return new Prelude.Bounded(Prelude.bottom(Data_Maybe.boundedMaybe(dictBounded)),Prelude.top(Data_Maybe.boundedMaybe(dictBounded)))};var applyLast=new Prelude.Apply(function(){return functorLast},function(v){return function(v1){return Prelude["<*>"](Data_Maybe.applyMaybe)(v)(v1)}});var bindLast=new Prelude.Bind(function(){return applyLast},function(v){return function(f){return Prelude.bind(Data_Maybe.bindMaybe)(v)(function($35){return runLast(f($35))})}});var applicativeLast=new Prelude.Applicative(function(){return applyLast},function($36){return Last(Prelude.pure(Data_Maybe.applicativeMaybe)($36))});var monadLast=new Prelude.Monad(function(){return applicativeLast},function(){return bindLast});module.exports={Last:Last,runLast:runLast,eqLast:eqLast,ordLast:ordLast,boundedLast:boundedLast,functorLast:functorLast,applyLast:applyLast,applicativeLast:applicativeLast,bindLast:bindLast,monadLast:monadLast,extendLast:extendLast,invariantLast:invariantLast,showLast:showLast,semigroupLast:semigroupLast,monoidLast:monoidLast}},{"Control.Comonad":14,"Control.Extend":15,"Data.Functor.Invariant":68,"Data.Maybe":107,"Data.Monoid":114,Prelude:146}],105:[function(require,module,exports){"use strict";exports.unsafeThrow=function(msg){throw new Error(msg)}},{}],106:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Data_Maybe=require("Data.Maybe");var fromJust=function fromJust(v){if(v instanceof Data_Maybe.Just){return v.value0}if(v instanceof Data_Maybe.Nothing){return $foreign.unsafeThrow("Data.Maybe.Unsafe.fromJust called on Nothing")}throw new Error("Failed pattern match at Data.Maybe.Unsafe line 11, column 1 - line 12, column 1: "+[v.constructor.name])};module.exports={fromJust:fromJust,unsafeThrow:$foreign.unsafeThrow}},{"./foreign":105,"Data.Maybe":107,Prelude:146}],107:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Alt=require("Control.Alt");var Control_Alternative=require("Control.Alternative");var Control_Extend=require("Control.Extend");var Control_MonadPlus=require("Control.MonadPlus");var Control_Plus=require("Control.Plus");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Monoid=require("Data.Monoid");var Nothing=function(){function Nothing(){}Nothing.value=new Nothing;return Nothing}();var Just=function(){function Just(value0){this.value0=value0}Just.create=function(value0){return new Just(value0)};return Just}();var showMaybe=function showMaybe(dictShow){return new Prelude.Show(function(v){if(v instanceof Just){return"Just ("+(Prelude.show(dictShow)(v.value0)+")")}if(v instanceof Nothing){return"Nothing"}throw new Error("Failed pattern match at Data.Maybe line 290, column 3 - line 291, column 3: "+[v.constructor.name])})};var semigroupMaybe=function semigroupMaybe(dictSemigroup){return new Prelude.Semigroup(function(v){return function(v1){if(v instanceof Nothing){return v1}if(v1 instanceof Nothing){return v}if(v instanceof Just&&v1 instanceof Just){return new Just(Prelude["<>"](dictSemigroup)(v.value0)(v1.value0))}throw new Error("Failed pattern match at Data.Maybe line 232, column 3 - line 233, column 3: "+[v.constructor.name,v1.constructor.name])}})};var monoidMaybe=function monoidMaybe(dictSemigroup){return new Data_Monoid.Monoid(function(){return semigroupMaybe(dictSemigroup)},Nothing.value)};var maybe$prime=function maybe$prime(v){return function(v1){return function(v2){if(v2 instanceof Nothing){return v(Prelude.unit)}if(v2 instanceof Just){return v1(v2.value0)}throw new Error("Failed pattern match at Data.Maybe line 40, column 1 - line 41, column 1: "+[v.constructor.name,v1.constructor.name,v2.constructor.name])}}};var maybe=function maybe(v){return function(v1){return function(v2){if(v2 instanceof Nothing){return v}if(v2 instanceof Just){return v1(v2.value0)}throw new Error("Failed pattern match at Data.Maybe line 27, column 1 - line 28, column 1: "+[v.constructor.name,v1.constructor.name,v2.constructor.name])}}};var isNothing=maybe(true)(Prelude["const"](false));var isJust=maybe(false)(Prelude["const"](true));var functorMaybe=new Prelude.Functor(function(v){return function(v1){if(v1 instanceof Just){return new Just(v(v1.value0))}return Nothing.value}});var invariantMaybe=new Data_Functor_Invariant.Invariant(Data_Functor_Invariant.imapF(functorMaybe));var fromMaybe$prime=function fromMaybe$prime(a){return maybe$prime(a)(Prelude.id(Prelude.categoryFn))};var fromMaybe=function fromMaybe(a){return maybe(a)(Prelude.id(Prelude.categoryFn))};var extendMaybe=new Control_Extend.Extend(function(){return functorMaybe},function(v){return function(v1){if(v1 instanceof Nothing){return Nothing.value}return new Just(v(v1))}});var eqMaybe=function eqMaybe(dictEq){return new Prelude.Eq(function(v){return function(v1){if(v instanceof Nothing&&v1 instanceof Nothing){return true}if(v instanceof Just&&v1 instanceof Just){return Prelude["=="](dictEq)(v.value0)(v1.value0)}return false}})};var ordMaybe=function ordMaybe(dictOrd){return new Prelude.Ord(function(){return eqMaybe(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){if(v instanceof Just&&v1 instanceof Just){return Prelude.compare(dictOrd)(v.value0)(v1.value0)}if(v instanceof Nothing&&v1 instanceof Nothing){return Prelude.EQ.value}if(v instanceof Nothing){return Prelude.LT.value}if(v1 instanceof Nothing){return Prelude.GT.value}throw new Error("Failed pattern match at Data.Maybe line 270, column 3 - line 271, column 3: "+[v.constructor.name,v1.constructor.name])}})};var boundedMaybe=function boundedMaybe(dictBounded){return new Prelude.Bounded(Nothing.value,new Just(Prelude.top(dictBounded)))};var boundedOrdMaybe=function boundedOrdMaybe(dictBoundedOrd){return new Prelude.BoundedOrd(function(){return boundedMaybe(dictBoundedOrd["__superclass_Prelude.Bounded_0"]())},function(){return ordMaybe(dictBoundedOrd["__superclass_Prelude.Ord_1"]())})};var applyMaybe=new Prelude.Apply(function(){return functorMaybe},function(v){return function(v1){if(v instanceof Just){return Prelude["<$>"](functorMaybe)(v.value0)(v1)}if(v instanceof Nothing){return Nothing.value}throw new Error("Failed pattern match at Data.Maybe line 122, column 3 - line 123, column 3: "+[v.constructor.name,v1.constructor.name])}});var bindMaybe=new Prelude.Bind(function(){return applyMaybe},function(v){return function(v1){if(v instanceof Just){return v1(v.value0)}if(v instanceof Nothing){return Nothing.value}throw new Error("Failed pattern match at Data.Maybe line 181, column 3 - line 182, column 3: "+[v.constructor.name,v1.constructor.name])}});var booleanAlgebraMaybe=function booleanAlgebraMaybe(dictBooleanAlgebra){return new Prelude.BooleanAlgebra(function(){return boundedMaybe(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())},function(x){return function(y){return Prelude["<*>"](applyMaybe)(Prelude["<$>"](functorMaybe)(Prelude.conj(dictBooleanAlgebra))(x))(y)}},function(x){return function(y){return Prelude["<*>"](applyMaybe)(Prelude["<$>"](functorMaybe)(Prelude.disj(dictBooleanAlgebra))(x))(y)}},Prelude.map(functorMaybe)(Prelude.not(dictBooleanAlgebra)))};var semiringMaybe=function semiringMaybe(dictSemiring){return new Prelude.Semiring(function(x){return function(y){return Prelude["<*>"](applyMaybe)(Prelude["<$>"](functorMaybe)(Prelude.add(dictSemiring))(x))(y)}},function(x){return function(y){return Prelude["<*>"](applyMaybe)(Prelude["<$>"](functorMaybe)(Prelude.mul(dictSemiring))(x))(y)}},new Just(Prelude.one(dictSemiring)),new Just(Prelude.zero(dictSemiring)))};var moduloSemiringMaybe=function moduloSemiringMaybe(dictModuloSemiring){return new Prelude.ModuloSemiring(function(){return semiringMaybe(dictModuloSemiring["__superclass_Prelude.Semiring_0"]())},function(x){return function(y){return Prelude["<*>"](applyMaybe)(Prelude["<$>"](functorMaybe)(Prelude.div(dictModuloSemiring))(x))(y)}},function(x){return function(y){return Prelude["<*>"](applyMaybe)(Prelude["<$>"](functorMaybe)(Prelude.mod(dictModuloSemiring))(x))(y)}})};var ringMaybe=function ringMaybe(dictRing){return new Prelude.Ring(function(){return semiringMaybe(dictRing["__superclass_Prelude.Semiring_0"]())},function(x){return function(y){return Prelude["<*>"](applyMaybe)(Prelude["<$>"](functorMaybe)(Prelude.sub(dictRing))(x))(y)}})};var divisionRingMaybe=function divisionRingMaybe(dictDivisionRing){return new Prelude.DivisionRing(function(){return moduloSemiringMaybe(dictDivisionRing["__superclass_Prelude.ModuloSemiring_1"]())},function(){return ringMaybe(dictDivisionRing["__superclass_Prelude.Ring_0"]())})};var numMaybe=function numMaybe(dictNum){return new Prelude.Num(function(){return divisionRingMaybe(dictNum["__superclass_Prelude.DivisionRing_0"]())})};var applicativeMaybe=new Prelude.Applicative(function(){return applyMaybe},Just.create);var monadMaybe=new Prelude.Monad(function(){return applicativeMaybe},function(){return bindMaybe});var altMaybe=new Control_Alt.Alt(function(){return functorMaybe},function(v){return function(v1){if(v instanceof Nothing){return v1}return v}});var plusMaybe=new Control_Plus.Plus(function(){return altMaybe},Nothing.value);var alternativeMaybe=new Control_Alternative.Alternative(function(){return plusMaybe},function(){return applicativeMaybe});var monadPlusMaybe=new Control_MonadPlus.MonadPlus(function(){return alternativeMaybe},function(){return monadMaybe});module.exports={Nothing:Nothing,Just:Just,isNothing:isNothing,isJust:isJust,"fromMaybe'":fromMaybe$prime,fromMaybe:fromMaybe,"maybe'":maybe$prime,maybe:maybe,functorMaybe:functorMaybe,applyMaybe:applyMaybe,applicativeMaybe:applicativeMaybe,altMaybe:altMaybe,plusMaybe:plusMaybe,alternativeMaybe:alternativeMaybe,bindMaybe:bindMaybe,monadMaybe:monadMaybe,monadPlusMaybe:monadPlusMaybe,extendMaybe:extendMaybe,invariantMaybe:invariantMaybe,semigroupMaybe:semigroupMaybe,monoidMaybe:monoidMaybe,semiringMaybe:semiringMaybe,moduloSemiringMaybe:moduloSemiringMaybe,ringMaybe:ringMaybe,divisionRingMaybe:divisionRingMaybe,numMaybe:numMaybe,eqMaybe:eqMaybe,ordMaybe:ordMaybe,boundedMaybe:boundedMaybe,boundedOrdMaybe:boundedOrdMaybe,booleanAlgebraMaybe:booleanAlgebraMaybe,showMaybe:showMaybe}},{"Control.Alt":8,"Control.Alternative":9,"Control.Extend":15,"Control.MonadPlus":37,"Control.Plus":39,"Data.Functor.Invariant":68,"Data.Monoid":114,Prelude:146}],108:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Monoid=require("Data.Monoid");var Additive=function Additive(x){return x};var showAdditive=function showAdditive(dictShow){return new Prelude.Show(function(v){return"Additive ("+(Prelude.show(dictShow)(v)+")")})};var semigroupAdditive=function semigroupAdditive(dictSemiring){return new Prelude.Semigroup(function(v){return function(v1){return Prelude["+"](dictSemiring)(v)(v1)}})};var runAdditive=function runAdditive(v){return v};var monoidAdditive=function monoidAdditive(dictSemiring){return new Data_Monoid.Monoid(function(){
return semigroupAdditive(dictSemiring)},Prelude.zero(dictSemiring))};var invariantAdditive=new Data_Functor_Invariant.Invariant(function(f){return function(v){return function(v1){return f(v1)}}});var functorAdditive=new Prelude.Functor(function(f){return function(v){return f(v)}});var extendAdditive=new Control_Extend.Extend(function(){return functorAdditive},function(f){return function(x){return f(x)}});var eqAdditive=function eqAdditive(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v)(v1)}})};var ordAdditive=function ordAdditive(dictOrd){return new Prelude.Ord(function(){return eqAdditive(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v)(v1)}})};var comonadAdditive=new Control_Comonad.Comonad(function(){return extendAdditive},runAdditive);var applyAdditive=new Prelude.Apply(function(){return functorAdditive},function(v){return function(v1){return v(v1)}});var bindAdditive=new Prelude.Bind(function(){return applyAdditive},function(v){return function(f){return f(v)}});var applicativeAdditive=new Prelude.Applicative(function(){return applyAdditive},Additive);var monadAdditive=new Prelude.Monad(function(){return applicativeAdditive},function(){return bindAdditive});module.exports={Additive:Additive,runAdditive:runAdditive,eqAdditive:eqAdditive,ordAdditive:ordAdditive,functorAdditive:functorAdditive,applyAdditive:applyAdditive,applicativeAdditive:applicativeAdditive,bindAdditive:bindAdditive,monadAdditive:monadAdditive,extendAdditive:extendAdditive,comonadAdditive:comonadAdditive,invariantAdditive:invariantAdditive,showAdditive:showAdditive,semigroupAdditive:semigroupAdditive,monoidAdditive:monoidAdditive}},{"Control.Comonad":14,"Control.Extend":15,"Data.Functor.Invariant":68,"Data.Monoid":114,Prelude:146}],109:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Monoid=require("Data.Monoid");var Conj=function Conj(x){return x};var showConj=function showConj(dictShow){return new Prelude.Show(function(v){return"Conj ("+(Prelude.show(dictShow)(v)+")")})};var semiringConj=function semiringConj(dictBooleanAlgebra){return new Prelude.Semiring(function(v){return function(v1){return Prelude.conj(dictBooleanAlgebra)(v)(v1)}},function(v){return function(v1){return Prelude.disj(dictBooleanAlgebra)(v)(v1)}},Prelude.bottom(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]()),Prelude.top(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]()))};var semigroupConj=function semigroupConj(dictBooleanAlgebra){return new Prelude.Semigroup(function(v){return function(v1){return Prelude.conj(dictBooleanAlgebra)(v)(v1)}})};var runConj=function runConj(v){return v};var monoidConj=function monoidConj(dictBooleanAlgebra){return new Data_Monoid.Monoid(function(){return semigroupConj(dictBooleanAlgebra)},Prelude.top(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]()))};var functorConj=new Prelude.Functor(function(f){return function(v){return f(v)}});var extendConj=new Control_Extend.Extend(function(){return functorConj},function(f){return function(x){return f(x)}});var eqConj=function eqConj(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v)(v1)}})};var ordConj=function ordConj(dictOrd){return new Prelude.Ord(function(){return eqConj(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v)(v1)}})};var comonadConj=new Control_Comonad.Comonad(function(){return extendConj},runConj);var boundedConj=function boundedConj(dictBounded){return new Prelude.Bounded(Prelude.bottom(dictBounded),Prelude.top(dictBounded))};var applyConj=new Prelude.Apply(function(){return functorConj},function(v){return function(v1){return v(v1)}});var bindConj=new Prelude.Bind(function(){return applyConj},function(v){return function(f){return f(v)}});var applicativeConj=new Prelude.Applicative(function(){return applyConj},Conj);var monadConj=new Prelude.Monad(function(){return applicativeConj},function(){return bindConj});module.exports={Conj:Conj,runConj:runConj,eqConj:eqConj,ordConj:ordConj,boundedConj:boundedConj,functorConj:functorConj,applyConj:applyConj,applicativeConj:applicativeConj,bindConj:bindConj,monadConj:monadConj,extendConj:extendConj,comonadConj:comonadConj,showConj:showConj,semigroupConj:semigroupConj,monoidConj:monoidConj,semiringConj:semiringConj}},{"Control.Comonad":14,"Control.Extend":15,"Data.Monoid":114,Prelude:146}],110:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Monoid=require("Data.Monoid");var Disj=function Disj(x){return x};var showDisj=function showDisj(dictShow){return new Prelude.Show(function(v){return"Disj ("+(Prelude.show(dictShow)(v)+")")})};var semiringDisj=function semiringDisj(dictBooleanAlgebra){return new Prelude.Semiring(function(v){return function(v1){return Prelude.disj(dictBooleanAlgebra)(v)(v1)}},function(v){return function(v1){return Prelude.conj(dictBooleanAlgebra)(v)(v1)}},Prelude.top(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]()),Prelude.bottom(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]()))};var semigroupDisj=function semigroupDisj(dictBooleanAlgebra){return new Prelude.Semigroup(function(v){return function(v1){return Prelude.disj(dictBooleanAlgebra)(v)(v1)}})};var runDisj=function runDisj(v){return v};var monoidDisj=function monoidDisj(dictBooleanAlgebra){return new Data_Monoid.Monoid(function(){return semigroupDisj(dictBooleanAlgebra)},Prelude.bottom(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]()))};var functorDisj=new Prelude.Functor(function(f){return function(v){return f(v)}});var extendDisj=new Control_Extend.Extend(function(){return functorDisj},function(f){return function(x){return f(x)}});var eqDisj=function eqDisj(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v)(v1)}})};var ordDisj=function ordDisj(dictOrd){return new Prelude.Ord(function(){return eqDisj(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v)(v1)}})};var comonadDisj=new Control_Comonad.Comonad(function(){return extendDisj},runDisj);var boundedDisj=function boundedDisj(dictBounded){return new Prelude.Bounded(Prelude.bottom(dictBounded),Prelude.top(dictBounded))};var applyDisj=new Prelude.Apply(function(){return functorDisj},function(v){return function(v1){return v(v1)}});var bindDisj=new Prelude.Bind(function(){return applyDisj},function(v){return function(f){return f(v)}});var applicativeDisj=new Prelude.Applicative(function(){return applyDisj},Disj);var monadDisj=new Prelude.Monad(function(){return applicativeDisj},function(){return bindDisj});module.exports={Disj:Disj,runDisj:runDisj,eqDisj:eqDisj,ordDisj:ordDisj,boundedDisj:boundedDisj,functorDisj:functorDisj,applyDisj:applyDisj,applicativeDisj:applicativeDisj,bindDisj:bindDisj,monadDisj:monadDisj,extendDisj:extendDisj,comonadDisj:comonadDisj,showDisj:showDisj,semigroupDisj:semigroupDisj,monoidDisj:monoidDisj,semiringDisj:semiringDisj}},{"Control.Comonad":14,"Control.Extend":15,"Data.Monoid":114,Prelude:146}],111:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Monoid=require("Data.Monoid");var Dual=function Dual(x){return x};var showDual=function showDual(dictShow){return new Prelude.Show(function(v){return"Dual ("+(Prelude.show(dictShow)(v)+")")})};var semigroupDual=function semigroupDual(dictSemigroup){return new Prelude.Semigroup(function(v){return function(v1){return Prelude["<>"](dictSemigroup)(v1)(v)}})};var runDual=function runDual(v){return v};var monoidDual=function monoidDual(dictMonoid){return new Data_Monoid.Monoid(function(){return semigroupDual(dictMonoid["__superclass_Prelude.Semigroup_0"]())},Data_Monoid.mempty(dictMonoid))};var invariantDual=new Data_Functor_Invariant.Invariant(function(f){return function(v){return function(v1){return f(v1)}}});var functorDual=new Prelude.Functor(function(f){return function(v){return f(v)}});var extendDual=new Control_Extend.Extend(function(){return functorDual},function(f){return function(x){return f(x)}});var eqDual=function eqDual(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v)(v1)}})};var ordDual=function ordDual(dictOrd){return new Prelude.Ord(function(){return eqDual(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v)(v1)}})};var comonadDual=new Control_Comonad.Comonad(function(){return extendDual},runDual);var applyDual=new Prelude.Apply(function(){return functorDual},function(v){return function(v1){return v(v1)}});var bindDual=new Prelude.Bind(function(){return applyDual},function(v){return function(f){return f(v)}});var applicativeDual=new Prelude.Applicative(function(){return applyDual},Dual);var monadDual=new Prelude.Monad(function(){return applicativeDual},function(){return bindDual});module.exports={Dual:Dual,runDual:runDual,eqDual:eqDual,ordDual:ordDual,functorDual:functorDual,applyDual:applyDual,applicativeDual:applicativeDual,bindDual:bindDual,monadDual:monadDual,extendDual:extendDual,comonadDual:comonadDual,invariantDual:invariantDual,showDual:showDual,semigroupDual:semigroupDual,monoidDual:monoidDual}},{"Control.Comonad":14,"Control.Extend":15,"Data.Functor.Invariant":68,"Data.Monoid":114,Prelude:146}],112:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Monoid=require("Data.Monoid");var Endo=function Endo(x){return x};var semigroupEndo=new Prelude.Semigroup(function(v){return function(v1){return function($10){return v(v1($10))}}});var runEndo=function runEndo(v){return v};var monoidEndo=new Data_Monoid.Monoid(function(){return semigroupEndo},Prelude.id(Prelude.categoryFn));var invariantEndo=new Data_Functor_Invariant.Invariant(function(ab){return function(ba){return function(v){return function($11){return ab(v(ba($11)))}}}});module.exports={Endo:Endo,runEndo:runEndo,invariantEndo:invariantEndo,semigroupEndo:semigroupEndo,monoidEndo:monoidEndo}},{"Data.Functor.Invariant":68,"Data.Monoid":114,Prelude:146}],113:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Monoid=require("Data.Monoid");var Multiplicative=function Multiplicative(x){return x};var showMultiplicative=function showMultiplicative(dictShow){return new Prelude.Show(function(v){return"Multiplicative ("+(Prelude.show(dictShow)(v)+")")})};var semigroupMultiplicative=function semigroupMultiplicative(dictSemiring){return new Prelude.Semigroup(function(v){return function(v1){return Prelude["*"](dictSemiring)(v)(v1)}})};var runMultiplicative=function runMultiplicative(v){return v};var monoidMultiplicative=function monoidMultiplicative(dictSemiring){return new Data_Monoid.Monoid(function(){return semigroupMultiplicative(dictSemiring)},Prelude.one(dictSemiring))};var invariantMultiplicative=new Data_Functor_Invariant.Invariant(function(f){return function(v){return function(v1){return f(v1)}}});var functorMultiplicative=new Prelude.Functor(function(f){return function(v){return f(v)}});var extendMultiplicative=new Control_Extend.Extend(function(){return functorMultiplicative},function(f){return function(x){return f(x)}});var eqMultiplicative=function eqMultiplicative(dictEq){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v)(v1)}})};var ordMultiplicative=function ordMultiplicative(dictOrd){return new Prelude.Ord(function(){return eqMultiplicative(dictOrd["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){return Prelude.compare(dictOrd)(v)(v1)}})};var comonadMultiplicative=new Control_Comonad.Comonad(function(){return extendMultiplicative},runMultiplicative);var applyMultiplicative=new Prelude.Apply(function(){return functorMultiplicative},function(v){return function(v1){return v(v1)}});var bindMultiplicative=new Prelude.Bind(function(){return applyMultiplicative},function(v){return function(f){return f(v)}});var applicativeMultiplicative=new Prelude.Applicative(function(){return applyMultiplicative},Multiplicative);var monadMultiplicative=new Prelude.Monad(function(){return applicativeMultiplicative},function(){return bindMultiplicative});module.exports={Multiplicative:Multiplicative,runMultiplicative:runMultiplicative,eqMultiplicative:eqMultiplicative,ordMultiplicative:ordMultiplicative,functorMultiplicative:functorMultiplicative,applyMultiplicative:applyMultiplicative,applicativeMultiplicative:applicativeMultiplicative,bindMultiplicative:bindMultiplicative,monadMultiplicative:monadMultiplicative,extendMultiplicative:extendMultiplicative,comonadMultiplicative:comonadMultiplicative,invariantMultiplicative:invariantMultiplicative,showMultiplicative:showMultiplicative,semigroupMultiplicative:semigroupMultiplicative,monoidMultiplicative:monoidMultiplicative}},{"Control.Comonad":14,"Control.Extend":15,"Data.Functor.Invariant":68,"Data.Monoid":114,Prelude:146}],114:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Monoid=function Monoid(__superclass_Prelude$dotSemigroup_0,mempty){this["__superclass_Prelude.Semigroup_0"]=__superclass_Prelude$dotSemigroup_0;this.mempty=mempty};var monoidUnit=new Monoid(function(){return Prelude.semigroupUnit},Prelude.unit);var monoidString=new Monoid(function(){return Prelude.semigroupString},"");var monoidArray=new Monoid(function(){return Prelude.semigroupArray},[]);var mempty=function mempty(dict){return dict.mempty};var monoidFn=function monoidFn(dictMonoid){return new Monoid(function(){return Prelude.semigroupFn(dictMonoid["__superclass_Prelude.Semigroup_0"]())},Prelude["const"](mempty(dictMonoid)))};module.exports={Monoid:Monoid,mempty:mempty,monoidUnit:monoidUnit,monoidFn:monoidFn,monoidString:monoidString,monoidArray:monoidArray}},{Prelude:146}],115:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Either=require("Data.Either");var Data_Profunctor=require("Data.Profunctor");var Choice=function Choice(__superclass_Data$dotProfunctor$dotProfunctor_0,left,right){this["__superclass_Data.Profunctor.Profunctor_0"]=__superclass_Data$dotProfunctor$dotProfunctor_0;this.left=left;this.right=right};var right=function right(dict){return dict.right};var left=function left(dict){return dict.left};var $plus$plus$plus=function $plus$plus$plus(dictCategory){return function(dictChoice){return function(l){return function(r){return Prelude[">>>"](dictCategory["__superclass_Prelude.Semigroupoid_0"]())(left(dictChoice)(l))(right(dictChoice)(r))}}}};var $bar$bar$bar=function $bar$bar$bar(dictCategory){return function(dictChoice){return function(l){return function(r){var join=Data_Profunctor.dimap(dictChoice["__superclass_Data.Profunctor.Profunctor_0"]())(Data_Either.either(Prelude.id(Prelude.categoryFn))(Prelude.id(Prelude.categoryFn)))(Prelude.id(Prelude.categoryFn))(Prelude.id(dictCategory));return Prelude[">>>"](dictCategory["__superclass_Prelude.Semigroupoid_0"]())($plus$plus$plus(dictCategory)(dictChoice)(l)(r))(join)}}}};var choiceFn=new Choice(function(){return Data_Profunctor.profunctorFn},function(v){return function(v1){if(v1 instanceof Data_Either.Left){return Data_Either.Left.create(v(v1.value0))}if(v1 instanceof Data_Either.Right){return new Data_Either.Right(v1.value0)}throw new Error("Failed pattern match at Data.Profunctor.Choice line 18, column 3 - line 19, column 3: "+[v.constructor.name,v1.constructor.name])}},Prelude["<$>"](Data_Either.functorEither));module.exports={Choice:Choice,"|||":$bar$bar$bar,"+++":$plus$plus$plus,right:right,left:left,choiceFn:choiceFn}},{"Data.Either":57,"Data.Profunctor":121,Prelude:146}],116:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Closed=function Closed(__superclass_Data$dotProfunctor$dotProfunctor_0,closed){this["__superclass_Data.Profunctor.Profunctor_0"]=__superclass_Data$dotProfunctor$dotProfunctor_0;this.closed=closed};var closedFunction=new Closed(function(){return Data_Profunctor.profunctorFn},Prelude["<<<"](Prelude.semigroupoidFn));var closed=function closed(dict){return dict.closed};module.exports={Closed:Closed,closed:closed,closedFunction:closedFunction}},{"Data.Profunctor":121,Prelude:146}],117:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Either=require("Data.Either");var Data_Profunctor=require("Data.Profunctor");var Cochoice=function Cochoice(__superclass_Data$dotProfunctor$dotProfunctor_0,unleft,unright){this["__superclass_Data.Profunctor.Profunctor_0"]=__superclass_Data$dotProfunctor$dotProfunctor_0;this.unleft=unleft;this.unright=unright};var unright=function unright(dict){return dict.unright};var unleft=function unleft(dict){return dict.unleft};module.exports={Cochoice:Cochoice,unright:unright,unleft:unleft}},{"Data.Either":57,"Data.Profunctor":121,Prelude:146}],118:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Tuple=require("Data.Tuple");var Data_Profunctor=require("Data.Profunctor");var Costrong=function Costrong(__superclass_Data$dotProfunctor$dotProfunctor_0,unfirst,unsecond){this["__superclass_Data.Profunctor.Profunctor_0"]=__superclass_Data$dotProfunctor$dotProfunctor_0;this.unfirst=unfirst;this.unsecond=unsecond};var unsecond=function unsecond(dict){return dict.unsecond};var unfirst=function unfirst(dict){return dict.unfirst};module.exports={Costrong:Costrong,unsecond:unsecond,unfirst:unfirst}},{"Data.Profunctor":121,"Data.Tuple":134,Prelude:146}],119:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Tuple=require("Data.Tuple");var Data_Either=require("Data.Either");var Data_Profunctor=require("Data.Profunctor");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Star=function Star(x){return x};var runStar=function runStar(v){return v};var profunctorStar=function profunctorStar(dictFunctor){return new Data_Profunctor.Profunctor(function(f){return function(g){return function(v){return function($26){return Prelude.map(dictFunctor)(g)(v(f($26)))}}}})};var strongStar=function strongStar(dictFunctor){return new Data_Profunctor_Strong.Strong(function(){return profunctorStar(dictFunctor)},function(v){return function(v1){return Prelude.map(dictFunctor)(function(v2){return new Data_Tuple.Tuple(v2,v1.value1)})(v(v1.value0))}},function(v){return function(v1){return Prelude.map(dictFunctor)(Data_Tuple.Tuple.create(v1.value0))(v(v1.value1))}})};var choiceStar=function choiceStar(dictApplicative){return new Data_Profunctor_Choice.Choice(function(){return profunctorStar(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())},function(v){return Star(Data_Either.either(function($27){return Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Either.Left.create)(v($27))})(function($28){return Prelude.pure(dictApplicative)(Data_Either.Right.create($28))}))},function(v){return Star(Data_Either.either(function($29){return Prelude.pure(dictApplicative)(Data_Either.Left.create($29))})(function($30){return Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Either.Right.create)(v($30))}))})};module.exports={Star:Star,runStar:runStar,profunctorStar:profunctorStar,strongStar:strongStar,choiceStar:choiceStar}},{"Data.Either":57,"Data.Profunctor":121,"Data.Profunctor.Choice":115,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146}],120:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Profunctor=require("Data.Profunctor");var Data_Tuple=require("Data.Tuple");var Strong=function Strong(__superclass_Data$dotProfunctor$dotProfunctor_0,first,second){this["__superclass_Data.Profunctor.Profunctor_0"]=__superclass_Data$dotProfunctor$dotProfunctor_0;this.first=first;this.second=second};var strongFn=new Strong(function(){return Data_Profunctor.profunctorFn},function(a2b){return function(v){return new Data_Tuple.Tuple(a2b(v.value0),v.value1)}},Prelude["<$>"](Data_Tuple.functorTuple));var second=function second(dict){return dict.second};var first=function first(dict){return dict.first};var $times$times$times=function $times$times$times(dictCategory){return function(dictStrong){return function(l){return function(r){return Prelude[">>>"](dictCategory["__superclass_Prelude.Semigroupoid_0"]())(first(dictStrong)(l))(second(dictStrong)(r))}}}};var $amp$amp$amp=function $amp$amp$amp(dictCategory){return function(dictStrong){return function(l){return function(r){var split=Data_Profunctor.dimap(dictStrong["__superclass_Data.Profunctor.Profunctor_0"]())(Prelude.id(Prelude.categoryFn))(function(a){return new Data_Tuple.Tuple(a,a)})(Prelude.id(dictCategory));return Prelude[">>>"](dictCategory["__superclass_Prelude.Semigroupoid_0"]())(split)($times$times$times(dictCategory)(dictStrong)(l)(r))}}}};module.exports={Strong:Strong,"&&&":$amp$amp$amp,"***":$times$times$times,second:second,first:first,strongFn:strongFn}},{"Data.Profunctor":121,"Data.Tuple":134,Prelude:146}],121:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Profunctor=function Profunctor(dimap){this.dimap=dimap};var profunctorFn=new Profunctor(function(a2b){return function(c2d){return function(b2c){return function($4){return c2d(b2c(a2b($4)))}}}});var dimap=function dimap(dict){return dict.dimap};var lmap=function lmap(dictProfunctor){return function(a2b){return dimap(dictProfunctor)(a2b)(Prelude.id(Prelude.categoryFn))}};var rmap=function rmap(dictProfunctor){return function(b2c){return dimap(dictProfunctor)(Prelude.id(Prelude.categoryFn))(b2c)}};var arr=function arr(dictCategory){return function(dictProfunctor){return function(f){return rmap(dictProfunctor)(f)(Prelude.id(dictCategory))}}};module.exports={Profunctor:Profunctor,arr:arr,rmap:rmap,lmap:lmap,dimap:dimap,profunctorFn:profunctorFn}},{Prelude:146}],122:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Foldable_1=require("Data.Foldable");var Data_List_1=require("Data.List");var Data_Monoid=require("Data.Monoid");var Data_Map=require("Data.Map");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Monad_ST=require("Control.Monad.ST");var Control_Monad_Rec_Class=require("Control.Monad.Rec.Class");var Data_Array=require("Data.Array");var Data_Array_ST=require("Data.Array.ST");var Data_Array_Unsafe=require("Data.Array.Unsafe");var Data_List_1=require("Data.List");var Data_Either=require("Data.Either");var Data_Foldable_1=require("Data.Foldable");var Data_Unfoldable=require("Data.Unfoldable");var $$Set=function(){function Set(value0){this.value0=value0}Set.create=function(value0){return new Set(value0)};return Set}();var union=function union(dictOrd){return function(v){return function(v1){return function(){var $30=v;var $31=v1;var $33=$30.value0;var m1=$33;var $32=$31.value0;var m2=$32;return new $$Set(Data_Map.union(dictOrd)(m1)(m2));throw new Error("Failed pattern match at Data.Set line 117, column 1 - line 120, column 1: "+[$30.constructor.name,$31.constructor.name])}()}}};var toList=function toList(v){return function(){var $34=v;var $35=$34.value0;var m=$35;return Data_Map.keys(m);throw new Error("Failed pattern match at Data.Set line 103, column 1 - line 106, column 1: "+[$34.constructor.name])}()};var toArray=function toArray(dictOrd){return Prelude["<<<"](Prelude.semigroupoidFn)(Data_List_1.fromList(Data_Unfoldable.unfoldableArray))(toList)};var size=function size(v){return function(){var $36=v;var $37=$36.value0;var m=$37;return Data_Map.size(m);throw new Error("Failed pattern match at Data.Set line 111, column 1 - line 116, column 1: "+[$36.constructor.name])}()};var singleton=function singleton(a){return new $$Set(Data_Map.singleton(a)(Prelude.unit))};var showSet=function showSet(dictShow){return new Prelude.Show(function(s){return Prelude["++"](Prelude.semigroupString)("fromList ")(Prelude.show(Data_List_1.showList(dictShow))(toList(s)))})};var semigroupSet=function semigroupSet(dictOrd){return new Prelude.Semigroup(union(dictOrd))};var member=function member(dictOrd){return function(a){return function(v){return function(){var $38=a;var $39=v;var a1=$38;var $40=$39.value0;var m=$40;return Data_Map.member(dictOrd)(a1)(m);throw new Error("Failed pattern match at Data.Set line 87, column 1 - line 90, column 1: "+[$38.constructor.name,$39.constructor.name])}()}}};var isEmpty=function isEmpty(v){return function(){var $41=v;var $42=$41.value0;var m=$42;return Data_Map.isEmpty(m);throw new Error("Failed pattern match at Data.Set line 73, column 1 - line 76, column 1: "+[$41.constructor.name])}()};var insert=function insert(dictOrd){return function(a){return function(v){return function(){var $43=a;var $44=v;var a1=$43;var $45=$44.value0;var m=$45;return new $$Set(Data_Map.insert(dictOrd)(a1)(Prelude.unit)(m));throw new Error("Failed pattern match at Data.Set line 91, column 1 - line 94, column 1: "+[$43.constructor.name,$44.constructor.name])}()}}};var foldableSet=new Data_Foldable_1.Foldable(function(dictMonoid){return function(f){return Prelude["<<<"](Prelude.semigroupoidFn)(Data_Foldable_1.foldMap(Data_List_1.foldableList)(dictMonoid)(f))(toList)}},function(f){return function(x){return Prelude["<<<"](Prelude.semigroupoidFn)(Data_Foldable_1.foldl(Data_List_1.foldableList)(f)(x))(toList)}},function(f){return function(x){return Prelude["<<<"](Prelude.semigroupoidFn)(Data_Foldable_1.foldr(Data_List_1.foldableList)(f)(x))(toList)}});var eqSet=function eqSet(dictEq){return new Prelude.Eq(function(v){return function(v1){return function(){var $46=v;var $47=v1;var $49=$46.value0;var m1=$49;var $48=$47.value0;var m2=$48;return Prelude["=="](Data_Map.eqMap(dictEq)(Prelude.eqUnit))(m1)(m2);throw new Error("Failed pattern match at Data.Set line 48, column 3 - line 50, column 1: "+[$46.constructor.name,$47.constructor.name])}()}})};var ordSet=function ordSet(dictOrd){return new Prelude.Ord(function(__unused){return eqSet(dictOrd["__superclass_Prelude.Eq_0"](undefined))},function(s1){return function(s2){return Prelude.compare(Data_List_1.ordList(dictOrd))(toList(s1))(toList(s2))}})};var empty=new $$Set(Data_Map.empty);var fromFoldable=function fromFoldable(dictFoldable){return function(dictOrd){return Data_Foldable_1.foldl(dictFoldable)(function(m){return function(a){return insert(dictOrd)(a)(m)}})(empty)}};var fromList=function fromList(dictOrd){return fromFoldable(Data_List_1.foldableList)(dictOrd)};var intersection=function intersection(dictOrd){return function(s1){return function(s2){return function(){var rs=toArray(dictOrd)(s2);var rl=Data_Array.length(rs);var ls=toArray(dictOrd)(s1);var ll=Data_Array.length(ls);var intersect=function intersect(acc){return function(){var go=function go(l){return function(r){return function(){var $50=Prelude["&&"](Prelude.booleanAlgebraBoolean)(Prelude["<"](Prelude.ordInt)(l)(ll))(Prelude["<"](Prelude.ordInt)(r)(rl));if($50){return function(){var $51=Prelude.compare(dictOrd)(Data_Array_Unsafe.unsafeIndex(ls)(l))(Data_Array_Unsafe.unsafeIndex(rs)(r));if($51 instanceof Prelude.EQ){return Prelude.bind(Control_Monad_Eff.bindEff)(Data_Array_ST.pushSTArray(acc)(Data_Array_Unsafe.unsafeIndex(ls)(l)))(function(__unused){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(new Data_Either.Left({a:Prelude["+"](Prelude.semiringInt)(l)(1),b:Prelude["+"](Prelude.semiringInt)(r)(1)}))})}if($51 instanceof Prelude.LT){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(new Data_Either.Left({a:Prelude["+"](Prelude.semiringInt)(l)(1),b:r}))}if($51 instanceof Prelude.GT){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(new Data_Either.Left({a:l,b:Prelude["+"](Prelude.semiringInt)(r)(1)}))}throw new Error("Failed pattern match at Data.Set line 148, column 12 - line 154, column 7: "+[$51.constructor.name])}()}if(!$50){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(new Data_Either.Right(acc))}throw new Error("Failed pattern match at Data.Set line 147, column 7 - line 156, column 1: "+[$50.constructor.name])}()}};return Control_Monad_Rec_Class.tailRecM2(Control_Monad_Rec_Class.monadRecEff)(go)(0)(0)}()};return Prelude["$"](fromFoldable(Data_Foldable_1.foldableArray)(dictOrd))(Control_Monad_Eff.runPure(Data_Array_ST.runSTArray(Prelude[">>="](Control_Monad_Eff.bindEff)(Data_Array_ST.emptySTArray)(intersect))))}()}}};var monoidSet=function monoidSet(dictOrd){return new Data_Monoid.Monoid(function(__unused){return semigroupSet(dictOrd)},empty)};var unions=function unions(dictOrd){return Data_Foldable_1.foldl(Data_List_1.foldableList)(union(dictOrd))(empty)};var $$delete=function $$delete(dictOrd){return function(a){return function(v){return function(){var $52=a;var $53=v;var a1=$52;var $54=$53.value0;var m=$54;return new $$Set(Data_Map["delete"](dictOrd)(a1)(m));throw new Error("Failed pattern match at Data.Set line 95, column 1 - line 98, column 1: "+[$52.constructor.name,$53.constructor.name])}()}}};var difference=function difference(dictOrd){return function(s1){return function(s2){return Data_Foldable_1.foldl(Data_List_1.foldableList)(Prelude.flip($$delete(dictOrd)))(s1)(toList(s2))}}};var subset=function subset(dictOrd){return function(s1){return function(s2){return Prelude["$"](isEmpty)(difference(dictOrd)(s1)(s2))}}};var properSubset=function properSubset(dictOrd){return function(s1){return function(s2){return Prelude["&&"](Prelude.booleanAlgebraBoolean)(subset(dictOrd)(s1)(s2))(Prelude["/="](eqSet(dictOrd["__superclass_Prelude.Eq_0"](undefined)))(s1)(s2))}}};var checkValid=function checkValid(v){return function(){var $55=v;var $56=$55.value0;var m=$56;return Data_Map.checkValid(m);throw new Error("Failed pattern match at Data.Set line 83, column 1 - line 86, column 1: "+[$55.constructor.name])}()};module.exports={intersection:intersection,properSubset:properSubset,subset:subset,difference:difference,unions:unions,union:union,size:size,fromList:fromList,toList:toList,fromFoldable:fromFoldable,"delete":$$delete,member:member,insert:insert,checkValid:checkValid,singleton:singleton,isEmpty:isEmpty,empty:empty,eqSet:eqSet,showSet:showSet,ordSet:ordSet,monoidSet:monoidSet,semigroupSet:semigroupSet,foldableSet:foldableSet}},{"Control.Monad.Eff":26,"Control.Monad.Rec.Class":29,"Control.Monad.ST":31,"Data.Array":48,"Data.Array.ST":44,"Data.Array.Unsafe":46,"Data.Either":57,"Data.Foldable":61,"Data.List":101,"Data.Map":102,"Data.Monoid":114,"Data.Unfoldable":135,Prelude:146}],123:[function(require,module,exports){"use strict";exports["new"]=function(){return{}};exports.peekImpl=function(just){return function(nothing){return function(m){return function(k){return function(){return{}.hasOwnProperty.call(m,k)?just(m[k]):nothing}}}}};exports.poke=function(m){return function(k){return function(v){return function(){m[k]=v;return m}}}};exports["delete"]=function(m){return function(k){return function(){delete m[k];return m}}}},{}],124:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Monad_ST=require("Control.Monad.ST");var Data_Maybe=require("Data.Maybe");var peek=$foreign.peekImpl(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);
module.exports={peek:peek,"delete":$foreign["delete"],poke:$foreign.poke,"new":$foreign["new"]}},{"./foreign":123,"Control.Monad.Eff":26,"Control.Monad.ST":31,"Data.Maybe":107,Prelude:146}],125:[function(require,module,exports){"use strict";exports._copy=function(m){var r={};for(var k in m){if(m.hasOwnProperty(k)){r[k]=m[k]}}return r};exports._copyEff=function(m){return function(){var r={};for(var k in m){if(m.hasOwnProperty(k)){r[k]=m[k]}}return r}};exports.empty={};exports.runST=function(f){return f};exports._fmapStrMap=function(m0,f){var m={};for(var k in m0){if(m0.hasOwnProperty(k)){m[k]=f(m0[k])}}return m};exports._foldM=function(bind){return function(f){return function(mz){return function(m){function g(k){return function(z){return f(z)(k)(m[k])}}for(var k in m){if(m.hasOwnProperty(k)){mz=bind(mz)(g(k))}}return mz}}}};exports._foldSCStrMap=function(m,z,f,fromMaybe){for(var k in m){if(m.hasOwnProperty(k)){var maybeR=f(z)(k)(m[k]);var r=fromMaybe(null)(maybeR);if(r===null)return z;else z=r}}return z};exports.all=function(f){return function(m){for(var k in m){if(m.hasOwnProperty(k)&&!f(k)(m[k]))return false}return true}};exports.size=function(m){var s=0;for(var k in m){if(m.hasOwnProperty(k)){++s}}return s};exports._lookup=function(no,yes,k,m){return k in m?yes(m[k]):no};exports._unsafeDeleteStrMap=function(m,k){delete m[k];return m};exports._lookupST=function(no,yes,k,m){return function(){return k in m?yes(m[k]):no}};function _collect(f){return function(m){var r=[];for(var k in m){if(m.hasOwnProperty(k)){r.push(f(k)(m[k]))}}return r}}exports._collect=_collect;exports.keys=Object.keys||_collect(function(k){return function(){return k}})},{}],126:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Foldable=require("Data.Foldable");var Data_Function=require("Data.Function");var Data_Maybe=require("Data.Maybe");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Data_Tuple=require("Data.Tuple");var Data_List=require("Data.List");var Control_Monad_ST=require("Control.Monad.ST");var Data_StrMap_ST=require("Data.StrMap.ST");var values=function values($38){return Data_List.toList(Data_Foldable.foldableArray)($foreign._collect(function(v){return function(v1){return v1}})($38))};var toList=function toList($39){return Data_List.toList(Data_Foldable.foldableArray)($foreign._collect(Data_Tuple.Tuple.create)($39))};var thawST=$foreign._copyEff;var showStrMap=function showStrMap(dictShow){return new Prelude.Show(function(m){return"fromList "+Prelude.show(Data_List.showList(Data_Tuple.showTuple(Prelude.showString)(dictShow)))(toList(m))})};var pureST=function pureST(f){return Control_Monad_Eff.runPure($foreign.runST(f))};var singleton=function singleton(k){return function(v){return pureST(function __do(){var v1=Data_StrMap_ST["new"]();Data_StrMap_ST.poke(v1)(k)(v)();return v1})}};var mutate=function mutate(f){return function(m){return pureST(function __do(){var v=thawST(m)();f(v)();return v})}};var member=Data_Function.runFn4($foreign._lookup)(false)(Prelude["const"](true));var lookup=Data_Function.runFn4($foreign._lookup)(Data_Maybe.Nothing.value)(Data_Maybe.Just.create);var isSubmap=function isSubmap(dictEq){return function(m1){return function(m2){var f=function f(k){return function(v){return $foreign._lookup(false,Prelude["=="](dictEq)(v),k,m2)}};return $foreign.all(f)(m1)}}};var isEmpty=$foreign.all(function(v){return function(v1){return false}});var insert=function insert(k){return function(v){return mutate(function(s){return Data_StrMap_ST.poke(s)(k)(v)})}};var functorStrMap=new Prelude.Functor(function(f){return function(m){return $foreign._fmapStrMap(m,f)}});var fromFoldableWith=function fromFoldableWith(dictFoldable){return function(f){return function(l){return pureST(function __do(){var v=Data_StrMap_ST["new"]();Data_Foldable.for_(Control_Monad_Eff.applicativeEff)(dictFoldable)(l)(function(v1){return Prelude[">>="](Control_Monad_Eff.bindEff)($foreign._lookupST(v1.value1,f(v1.value1),v1.value0,v))(Data_StrMap_ST.poke(v)(v1.value0))})();return v})}}};var fromListWith=fromFoldableWith(Data_List.foldableList);var fromFoldable=function fromFoldable(dictFoldable){return function(l){return pureST(function __do(){var v=Data_StrMap_ST["new"]();Data_Foldable.for_(Control_Monad_Eff.applicativeEff)(dictFoldable)(l)(function(v1){return Data_StrMap_ST.poke(v)(v1.value0)(v1.value1)})();return v})}};var fromList=fromFoldable(Data_List.foldableList);var freezeST=$foreign._copyEff;var foldMaybe=function foldMaybe(f){return function(z){return function(m){return $foreign._foldSCStrMap(m,z,f,Data_Maybe.fromMaybe)}}};var foldM=function foldM(dictMonad){return function(f){return function(z){return $foreign._foldM(Prelude[">>="](dictMonad["__superclass_Prelude.Bind_1"]()))(f)(Prelude.pure(dictMonad["__superclass_Prelude.Applicative_0"]())(z))}}};var semigroupStrMap=function semigroupStrMap(dictSemigroup){return new Prelude.Semigroup(function(m1){return function(m2){return mutate(function(s1){return foldM(Control_Monad_Eff.monadEff)(function(s2){return function(k){return function(v2){return Data_StrMap_ST.poke(s2)(k)($foreign._lookup(v2,function(v1){return Prelude["<>"](dictSemigroup)(v1)(v2)},k,m2))}}})(s1)(m1)})(m2)}})};var monoidStrMap=function monoidStrMap(dictSemigroup){return new Data_Monoid.Monoid(function(){return semigroupStrMap(dictSemigroup)},$foreign.empty)};var union=function union(m){return mutate(function(s){return foldM(Control_Monad_Eff.monadEff)(Data_StrMap_ST.poke)(s)(m)})};var unions=Data_Foldable.foldl(Data_List.foldableList)(union)($foreign.empty);var fold=$foreign._foldM(Prelude["#"]);var foldMap=function foldMap(dictMonoid){return function(f){return fold(function(acc){return function(k){return function(v){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(acc)(f(k)(v))}}})(Data_Monoid.mempty(dictMonoid))}};var foldableStrMap=new Data_Foldable.Foldable(function(dictMonoid){return function(f){return foldMap(dictMonoid)(Prelude["const"](f))}},function(f){return fold(function(z){return function(v){return f(z)}})},function(f){return function(z){return function(m){return Data_Foldable.foldr(Data_List.foldableList)(f)(z)(values(m))}}});var traversableStrMap=new Data_Traversable.Traversable(function(){return foldableStrMap},function(){return functorStrMap},function(dictApplicative){return Data_Traversable.traverse(traversableStrMap)(dictApplicative)(Prelude.id(Prelude.categoryFn))},function(dictApplicative){return function(f){return function(ms){return Data_Foldable.foldr(Data_List.foldableList)(function(x){return function(acc){return Prelude["<*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(union)(x))(acc)}})(Prelude.pure(dictApplicative)($foreign.empty))(Prelude["<$>"](Data_List.functorList)(Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Tuple.uncurry(singleton)))(Prelude["<$>"](Data_List.functorList)(Data_Traversable.traverse(Data_Tuple.traversableTuple)(dictApplicative)(f))(toList(ms))))}}});var eqStrMap=function eqStrMap(dictEq){return new Prelude.Eq(function(m1){return function(m2){return isSubmap(dictEq)(m1)(m2)&&isSubmap(dictEq)(m2)(m1)}})};var $$delete=function $$delete(k){return mutate(function(s){return Data_StrMap_ST["delete"](s)(k)})};var alter=function alter(f){return function(k){return function(m){var $36=f(lookup(k)(m));if($36 instanceof Data_Maybe.Nothing){return $$delete(k)(m)}if($36 instanceof Data_Maybe.Just){return insert(k)($36.value0)(m)}throw new Error("Failed pattern match at Data.StrMap line 178, column 15 - line 183, column 1: "+[$36.constructor.name])}}};var update=function update(f){return function(k){return function(m){return alter(Data_Maybe.maybe(Data_Maybe.Nothing.value)(f))(k)(m)}}};module.exports={freezeST:freezeST,thawST:thawST,foldMaybe:foldMaybe,foldM:foldM,foldMap:foldMap,fold:fold,isSubmap:isSubmap,unions:unions,union:union,values:values,update:update,alter:alter,member:member,"delete":$$delete,fromListWith:fromListWith,fromList:fromList,fromFoldableWith:fromFoldableWith,fromFoldable:fromFoldable,toList:toList,lookup:lookup,insert:insert,singleton:singleton,isEmpty:isEmpty,functorStrMap:functorStrMap,foldableStrMap:foldableStrMap,traversableStrMap:traversableStrMap,eqStrMap:eqStrMap,showStrMap:showStrMap,semigroupStrMap:semigroupStrMap,monoidStrMap:monoidStrMap,runST:$foreign.runST,all:$foreign.all,keys:$foreign.keys,size:$foreign.size,empty:$foreign.empty}},{"./foreign":125,"Control.Monad.Eff":26,"Control.Monad.ST":31,"Data.Foldable":61,"Data.Function":65,"Data.List":101,"Data.Maybe":107,"Data.Monoid":114,"Data.StrMap.ST":124,"Data.Traversable":132,"Data.Tuple":134,Prelude:146}],127:[function(require,module,exports){"use strict";exports.charCodeAt=function(i){return function(s){if(i>=0&&i<s.length)return s.charCodeAt(i);throw new Error("Data.String.Unsafe.charCodeAt: Invalid index.")}};exports.charAt=function(i){return function(s){if(i>=0&&i<s.length)return s.charAt(i);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};exports.char=function(s){if(s.length===1)return s.charAt(0);throw new Error("Data.String.Unsafe.char: Expected string of length 1.")}},{}],128:[function(require,module,exports){"use strict";var $foreign=require("./foreign");module.exports={charCodeAt:$foreign.charCodeAt,charAt:$foreign.charAt,"char":$foreign["char"]}},{"./foreign":127}],129:[function(require,module,exports){"use strict";exports._charAt=function(just){return function(nothing){return function(i){return function(s){return i>=0&&i<s.length?just(s.charAt(i)):nothing}}}};exports._charCodeAt=function(just){return function(nothing){return function(i){return function(s){return i>=0&&i<s.length?just(s.charCodeAt(i)):nothing}}}};exports._toChar=function(just){return function(nothing){return function(s){return s.length===1?just(s):nothing}}};exports.fromCharArray=function(a){return a.join("")};exports._indexOf=function(just){return function(nothing){return function(x){return function(s){var i=s.indexOf(x);return i===-1?nothing:just(i)}}}};exports["_indexOf'"]=function(just){return function(nothing){return function(x){return function(startAt){return function(s){if(startAt<0||startAt>s.length)return nothing;var i=s.indexOf(x,startAt);return i===-1?nothing:just(i)}}}}};exports._lastIndexOf=function(just){return function(nothing){return function(x){return function(s){var i=s.lastIndexOf(x);return i===-1?nothing:just(i)}}}};exports["_lastIndexOf'"]=function(just){return function(nothing){return function(x){return function(startAt){return function(s){if(startAt<0||startAt>s.length)return nothing;var i=s.lastIndexOf(x,startAt);return i===-1?nothing:just(i)}}}}};exports.length=function(s){return s.length};exports._localeCompare=function(lt){return function(eq){return function(gt){return function(s1){return function(s2){var result=s1.localeCompare(s2);return result<0?lt:result>0?gt:eq}}}}};exports.replace=function(s1){return function(s2){return function(s3){return s3.replace(s1,s2)}}};exports.take=function(n){return function(s){return s.substr(0,n)}};exports.drop=function(n){return function(s){return s.substr(n)}};exports.count=function(p){return function(s){for(var i=0;i<s.length&&p(s.charAt(i));i++){}{}return i}};exports.split=function(sep){return function(s){return s.split(sep)}};exports.toCharArray=function(s){return s.split("")};exports.toLower=function(s){return s.toLowerCase()};exports.toUpper=function(s){return s.toUpperCase()};exports.trim=function(s){return s.trim()};exports.joinWith=function(s){return function(xs){return xs.join(s)}}},{}],130:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Data_Char=require("Data.Char");var Data_Maybe=require("Data.Maybe");var Data_Monoid=require("Data.Monoid");var Data_String_Unsafe=require("Data.String.Unsafe");var uncons=function uncons(v){if(v===""){return Data_Maybe.Nothing.value}return new Data_Maybe.Just({head:Data_String_Unsafe.charAt(0)(v),tail:$foreign.drop(1)(v)})};var toChar=$foreign._toChar(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var takeWhile=function takeWhile(p){return function(s){return $foreign.take($foreign.count(p)(s))(s)}};var $$null=function $$null(s){return $foreign.length(s)===0};var localeCompare=$foreign._localeCompare(Prelude.LT.value)(Prelude.EQ.value)(Prelude.GT.value);var lastIndexOf$prime=$foreign["_lastIndexOf'"](Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var lastIndexOf=$foreign._lastIndexOf(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var stripSuffix=function stripSuffix(suffix){return function(str){var $2=lastIndexOf(suffix)(str);if($2 instanceof Data_Maybe.Just&&$2.value0===$foreign.length(str)-$foreign.length(suffix)){return Data_Maybe.Just.create($foreign.take($2.value0)(str))}return Data_Maybe.Nothing.value}};var indexOf$prime=$foreign["_indexOf'"](Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var indexOf=$foreign._indexOf(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var stripPrefix=function stripPrefix(prefix){return function(str){var $4=indexOf(prefix)(str);if($4 instanceof Data_Maybe.Just&&$4.value0===0){return Data_Maybe.Just.create($foreign.drop($foreign.length(prefix))(str))}return Data_Maybe.Nothing.value}};var fromChar=Data_Char.toString;var singleton=fromChar;var dropWhile=function dropWhile(p){return function(s){return $foreign.drop($foreign.count(p)(s))(s)}};var contains=function contains(x){return function(s){return Data_Maybe.isJust(indexOf(x)(s))}};var charCodeAt=$foreign._charCodeAt(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);var charAt=$foreign._charAt(Data_Maybe.Just.create)(Data_Maybe.Nothing.value);module.exports={stripSuffix:stripSuffix,stripPrefix:stripPrefix,dropWhile:dropWhile,takeWhile:takeWhile,localeCompare:localeCompare,singleton:singleton,uncons:uncons,"null":$$null,"lastIndexOf'":lastIndexOf$prime,lastIndexOf:lastIndexOf,"indexOf'":indexOf$prime,indexOf:indexOf,contains:contains,toChar:toChar,fromChar:fromChar,charCodeAt:charCodeAt,charAt:charAt,joinWith:$foreign.joinWith,trim:$foreign.trim,toUpper:$foreign.toUpper,toLower:$foreign.toLower,toCharArray:$foreign.toCharArray,split:$foreign.split,drop:$foreign.drop,take:$foreign.take,count:$foreign.count,replace:$foreign.replace,length:$foreign.length,fromCharArray:$foreign.fromCharArray}},{"./foreign":129,"Data.Char":53,"Data.Maybe":107,"Data.Monoid":114,"Data.String.Unsafe":128,Prelude:146}],131:[function(require,module,exports){"use strict";exports.traverseArrayImpl=function(){function Cont(fn){this.fn=fn}var emptyList={};var ConsCell=function ConsCell(head,tail){this.head=head;this.tail=tail};function consList(x){return function(xs){return new ConsCell(x,xs)}}function listToArray(list){var arr=[];while(list!==emptyList){arr.push(list.head);list=list.tail}return arr}return function(apply){return function(map){return function(pure){return function(f){var buildFrom=function buildFrom(x,ys){return apply(map(consList)(f(x)))(ys)};var go=function go(acc,currentLen,xs){if(currentLen===0){return acc}else{var last=xs[currentLen-1];return new Cont(function(){return go(buildFrom(last,acc),currentLen-1,xs)})}};return function(array){var result=go(pure(emptyList),array.length,array);while(result instanceof Cont){result=result.fn()}return map(listToArray)(result)}}}}}}()},{}],132:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Data_Foldable=require("Data.Foldable");var Data_Maybe=require("Data.Maybe");var Data_Maybe_First=require("Data.Maybe.First");var Data_Maybe_Last=require("Data.Maybe.Last");var Data_Monoid_Additive=require("Data.Monoid.Additive");var Data_Monoid_Conj=require("Data.Monoid.Conj");var Data_Monoid_Disj=require("Data.Monoid.Disj");var Data_Monoid_Dual=require("Data.Monoid.Dual");var Data_Monoid_Multiplicative=require("Data.Monoid.Multiplicative");var StateL=function StateL(x){return x};var StateR=function StateR(x){return x};var Traversable=function Traversable(__superclass_Data$dotFoldable$dotFoldable_1,__superclass_Prelude$dotFunctor_0,sequence,traverse){this["__superclass_Data.Foldable.Foldable_1"]=__superclass_Data$dotFoldable$dotFoldable_1;this["__superclass_Prelude.Functor_0"]=__superclass_Prelude$dotFunctor_0;this.sequence=sequence;this.traverse=traverse};var traverse=function traverse(dict){return dict.traverse};var traversableMultiplicative=new Traversable(function(){return Data_Foldable.foldableMultiplicative},function(){return Data_Monoid_Multiplicative.functorMultiplicative},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Multiplicative.Multiplicative)(v)}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Multiplicative.Multiplicative)(f(v))}}});var traversableMaybe=new Traversable(function(){return Data_Foldable.foldableMaybe},function(){return Data_Maybe.functorMaybe},function(dictApplicative){return function(v){if(v instanceof Data_Maybe.Nothing){return Prelude.pure(dictApplicative)(Data_Maybe.Nothing.value)}if(v instanceof Data_Maybe.Just){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Maybe.Just.create)(v.value0)}throw new Error("Failed pattern match at Data.Traversable line 79, column 3 - line 80, column 3: "+[v.constructor.name])}},function(dictApplicative){return function(v){return function(v1){if(v1 instanceof Data_Maybe.Nothing){return Prelude.pure(dictApplicative)(Data_Maybe.Nothing.value)}if(v1 instanceof Data_Maybe.Just){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Maybe.Just.create)(v(v1.value0))}throw new Error("Failed pattern match at Data.Traversable line 77, column 3 - line 78, column 3: "+[v.constructor.name,v1.constructor.name])}}});var traversableDual=new Traversable(function(){return Data_Foldable.foldableDual},function(){return Data_Monoid_Dual.functorDual},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Dual.Dual)(v)}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Dual.Dual)(f(v))}}});var traversableDisj=new Traversable(function(){return Data_Foldable.foldableDisj},function(){return Data_Monoid_Disj.functorDisj},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Disj.Disj)(v)}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Disj.Disj)(f(v))}}});var traversableConj=new Traversable(function(){return Data_Foldable.foldableConj},function(){return Data_Monoid_Conj.functorConj},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Conj.Conj)(v)}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Conj.Conj)(f(v))}}});var traversableAdditive=new Traversable(function(){return Data_Foldable.foldableAdditive},function(){return Data_Monoid_Additive.functorAdditive},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Additive.Additive)(v)}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Monoid_Additive.Additive)(f(v))}}});var stateR=function stateR(v){return v};var stateL=function stateL(v){return v};var sequenceDefault=function sequenceDefault(dictTraversable){return function(dictApplicative){return function(tma){return traverse(dictTraversable)(dictApplicative)(Prelude.id(Prelude.categoryFn))(tma)}}};var traversableArray=new Traversable(function(){return Data_Foldable.foldableArray},function(){return Prelude.functorArray},function(dictApplicative){return sequenceDefault(traversableArray)(dictApplicative)},function(dictApplicative){return $foreign.traverseArrayImpl(Prelude.apply(dictApplicative["__superclass_Prelude.Apply_0"]()))(Prelude.map(dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]()))(Prelude.pure(dictApplicative))});var sequence=function sequence(dict){return dict.sequence};var traversableFirst=new Traversable(function(){return Data_Foldable.foldableFirst},function(){return Data_Maybe_First.functorFirst},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Maybe_First.First)(sequence(traversableMaybe)(dictApplicative)(v))}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Maybe_First.First)(traverse(traversableMaybe)(dictApplicative)(f)(v))}}});var traversableLast=new Traversable(function(){return Data_Foldable.foldableLast},function(){return Data_Maybe_Last.functorLast},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Maybe_Last.Last)(sequence(traversableMaybe)(dictApplicative)(v))}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Data_Maybe_Last.Last)(traverse(traversableMaybe)(dictApplicative)(f)(v))}}});var traverseDefault=function traverseDefault(dictTraversable){return function(dictApplicative){return function(f){return function(ta){return sequence(dictTraversable)(dictApplicative)(Prelude.map(dictTraversable["__superclass_Prelude.Functor_0"]())(f)(ta))}}}};var functorStateR=new Prelude.Functor(function(f){return function(k){return function(s){var $75=stateR(k)(s);return{accum:$75.accum,value:f($75.value)}}}});var functorStateL=new Prelude.Functor(function(f){return function(k){return function(s){var $78=stateL(k)(s);return{accum:$78.accum,value:f($78.value)}}}});var $$for=function $$for(dictApplicative){return function(dictTraversable){return function(x){return function(f){return traverse(dictTraversable)(dictApplicative)(f)(x)}}}};var applyStateR=new Prelude.Apply(function(){return functorStateR},function(f){return function(x){return function(s){var $81=stateR(x)(s);var $82=stateR(f)($81.accum);return{accum:$82.accum,value:$82.value($81.value)}}}});var applyStateL=new Prelude.Apply(function(){return functorStateL},function(f){return function(x){return function(s){var $87=stateL(f)(s);var $88=stateL(x)($87.accum);return{accum:$88.accum,value:$87.value($88.value)}}}});var applicativeStateR=new Prelude.Applicative(function(){return applyStateR},function(a){return function(s){return{accum:s,value:a}}});var mapAccumR=function mapAccumR(dictTraversable){return function(f){return function(s0){return function(xs){return stateR(traverse(dictTraversable)(applicativeStateR)(function(a){return function(s){return f(s)(a)}})(xs))(s0)}}}};var scanr=function scanr(dictTraversable){return function(f){return function(b0){return function(xs){return mapAccumR(dictTraversable)(function(b){return function(a){var b$prime=f(a)(b);return{accum:b$prime,value:b$prime}}})(b0)(xs).value}}}};var applicativeStateL=new Prelude.Applicative(function(){return applyStateL},function(a){return function(s){return{accum:s,value:a}}});var mapAccumL=function mapAccumL(dictTraversable){return function(f){return function(s0){return function(xs){return stateL(traverse(dictTraversable)(applicativeStateL)(function(a){return function(s){return f(s)(a)}})(xs))(s0)}}}};var scanl=function scanl(dictTraversable){return function(f){return function(b0){return function(xs){return mapAccumL(dictTraversable)(function(b){return function(a){var b$prime=f(b)(a);return{accum:b$prime,value:b$prime}}})(b0)(xs).value}}}};module.exports={Traversable:Traversable,mapAccumR:mapAccumR,mapAccumL:mapAccumL,scanr:scanr,scanl:scanl,"for":$$for,sequenceDefault:sequenceDefault,traverseDefault:traverseDefault,sequence:sequence,traverse:traverse,traversableArray:traversableArray,traversableMaybe:traversableMaybe,traversableFirst:traversableFirst,traversableLast:traversableLast,traversableAdditive:traversableAdditive,traversableDual:traversableDual,traversableConj:traversableConj,traversableDisj:traversableDisj,traversableMultiplicative:traversableMultiplicative}},{"./foreign":131,"Data.Foldable":61,"Data.Maybe":107,"Data.Maybe.First":103,"Data.Maybe.Last":104,"Data.Monoid.Additive":108,"Data.Monoid.Conj":109,"Data.Monoid.Disj":110,"Data.Monoid.Dual":111,"Data.Monoid.Multiplicative":113,Prelude:146}],133:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Tuple=require("Data.Tuple");var $div$bslash=function $div$bslash(a){return function(b){return new Data_Tuple.Tuple(a,b)}};var uncurry9=function uncurry9(f$prime){return function(v){return f$prime(v.value0.value0.value0.value0.value0.value0.value0.value0)(v.value0.value0.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value1)(v.value0.value0.value0.value1)(v.value0.value0.value1)(v.value0.value1)(v.value1)}};var uncurry8=function uncurry8(f$prime){return function(v){return f$prime(v.value0.value0.value0.value0.value0.value0.value0)(v.value0.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value1)(v.value0.value0.value0.value1)(v.value0.value0.value1)(v.value0.value1)(v.value1)}};var uncurry7=function uncurry7(f$prime){return function(v){return f$prime(v.value0.value0.value0.value0.value0.value0)(v.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value1)(v.value0.value0.value0.value1)(v.value0.value0.value1)(v.value0.value1)(v.value1)}};var uncurry6=function uncurry6(f$prime){return function(v){return f$prime(v.value0.value0.value0.value0.value0)(v.value0.value0.value0.value0.value1)(v.value0.value0.value0.value1)(v.value0.value0.value1)(v.value0.value1)(v.value1)}};var uncurry5=function uncurry5(f){return function(v){return f(v.value0.value0.value0.value0)(v.value0.value0.value0.value1)(v.value0.value0.value1)(v.value0.value1)(v.value1)}};var uncurry4=function uncurry4(f){return function(v){return f(v.value0.value0.value0)(v.value0.value0.value1)(v.value0.value1)(v.value1)}};var uncurry3=function uncurry3(f){return function(v){return f(v.value0.value0)(v.value0.value1)(v.value1)}};var uncurry2=function uncurry2(f){return function(v){return f(v.value0)(v.value1)}};var uncurry10=function uncurry10(f$prime){return function(v){return f$prime(v.value0.value0.value0.value0.value0.value0.value0.value0.value0)(v.value0.value0.value0.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value0.value1)(v.value0.value0.value0.value0.value1)(v.value0.value0.value0.value1)(v.value0.value0.value1)(v.value0.value1)(v.value1)}};var tuple9=function tuple9(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g),h),i)}}}}}}}}};var tuple8=function tuple8(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g),h)}}}}}}}};var tuple7=function tuple7(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g)}}}}}}};var tuple6=function tuple6(a){return function(b){return function(c){return function(d){return function(e){return function(f){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f)}}}}}};var tuple5=function tuple5(a){return function(b){return function(c){return function(d){return function(e){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e)}}}}};var tuple4=function tuple4(a){return function(b){return function(c){return function(d){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d)}}}};var tuple3=function tuple3(a){return function(b){return function(c){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c)}}};var tuple2=Data_Tuple.Tuple.create;var tuple10=function tuple10(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return function(j){return new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g),h),i),j)}}}}}}}}}};var curry9=function curry9(f$prime){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return f$prime(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g),h),i))}}}}}}}}}};var curry8=function curry8(f$prime){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return f$prime(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g),h))}}}}}}}}};var curry7=function curry7(f$prime){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return f$prime(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g))}}}}}}}};var curry6=function curry6(f$prime){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return f$prime(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f))}}}}}}};var curry5=function curry5(f){return function(a){return function(b){return function(c){return function(d){return function(e){return f(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e));
}}}}}};var curry4=function curry4(f){return function(a){return function(b){return function(c){return function(d){return f(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d))}}}}};var curry3=function curry3(f){return function(a){return function(b){return function(c){return f(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c))}}}};var curry2=function curry2(f){return function(a){return function(b){return f(new Data_Tuple.Tuple(a,b))}}};var curry10=function curry10(f$prime){return function(a){return function(b){return function(c){return function(d){return function(e){return function(f){return function(g){return function(h){return function(i){return function(j){return f$prime(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(new Data_Tuple.Tuple(a,b),c),d),e),f),g),h),i),j))}}}}}}}}}}};module.exports={"/\\":$div$bslash,curry10:curry10,uncurry10:uncurry10,curry9:curry9,uncurry9:uncurry9,curry8:curry8,uncurry8:uncurry8,curry7:curry7,uncurry7:uncurry7,curry6:curry6,uncurry6:uncurry6,curry5:curry5,uncurry5:uncurry5,curry4:curry4,uncurry4:uncurry4,curry3:curry3,uncurry3:uncurry3,curry2:curry2,uncurry2:uncurry2,tuple10:tuple10,tuple9:tuple9,tuple8:tuple8,tuple7:tuple7,tuple6:tuple6,tuple5:tuple5,tuple4:tuple4,tuple3:tuple3,tuple2:tuple2}},{"Data.Tuple":134,Prelude:146}],134:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Control_Biapplicative=require("Control.Biapplicative");var Control_Biapply=require("Control.Biapply");var Control_Comonad=require("Control.Comonad");var Control_Extend=require("Control.Extend");var Control_Lazy=require("Control.Lazy");var Data_Bifoldable=require("Data.Bifoldable");var Data_Bifunctor=require("Data.Bifunctor");var Data_Bitraversable=require("Data.Bitraversable");var Data_Foldable=require("Data.Foldable");var Data_Functor_Invariant=require("Data.Functor.Invariant");var Data_Maybe=require("Data.Maybe");var Data_Maybe_First=require("Data.Maybe.First");var Data_Monoid=require("Data.Monoid");var Data_Traversable=require("Data.Traversable");var Tuple=function(){function Tuple(value0,value1){this.value0=value0;this.value1=value1}Tuple.create=function(value0){return function(value1){return new Tuple(value0,value1)}};return Tuple}();var uncurry=function uncurry(f){return function(v){return f(v.value0)(v.value1)}};var swap=function swap(v){return new Tuple(v.value1,v.value0)};var snd=function snd(v){return v.value1};var showTuple=function showTuple(dictShow){return function(dictShow1){return new Prelude.Show(function(v){return"Tuple ("+(Prelude.show(dictShow)(v.value0)+(") ("+(Prelude.show(dictShow1)(v.value1)+")")))})}};var semiringTuple=function semiringTuple(dictSemiring){return function(dictSemiring1){return new Prelude.Semiring(function(v){return function(v1){return new Tuple(Prelude.add(dictSemiring)(v.value0)(v1.value0),Prelude.add(dictSemiring1)(v.value1)(v1.value1))}},function(v){return function(v1){return new Tuple(Prelude.mul(dictSemiring)(v.value0)(v1.value0),Prelude.mul(dictSemiring1)(v.value1)(v1.value1))}},new Tuple(Prelude.one(dictSemiring),Prelude.one(dictSemiring1)),new Tuple(Prelude.zero(dictSemiring),Prelude.zero(dictSemiring1)))}};var semigroupoidTuple=new Prelude.Semigroupoid(function(v){return function(v1){return new Tuple(v1.value0,v.value1)}});var semigroupTuple=function semigroupTuple(dictSemigroup){return function(dictSemigroup1){return new Prelude.Semigroup(function(v){return function(v1){return new Tuple(Prelude["<>"](dictSemigroup)(v.value0)(v1.value0),Prelude["<>"](dictSemigroup1)(v.value1)(v1.value1))}})}};var ringTuple=function ringTuple(dictRing){return function(dictRing1){return new Prelude.Ring(function(){return semiringTuple(dictRing["__superclass_Prelude.Semiring_0"]())(dictRing1["__superclass_Prelude.Semiring_0"]())},function(v){return function(v1){return new Tuple(Prelude.sub(dictRing)(v.value0)(v1.value0),Prelude.sub(dictRing1)(v.value1)(v1.value1))}})}};var monoidTuple=function monoidTuple(dictMonoid){return function(dictMonoid1){return new Data_Monoid.Monoid(function(){return semigroupTuple(dictMonoid["__superclass_Prelude.Semigroup_0"]())(dictMonoid1["__superclass_Prelude.Semigroup_0"]())},new Tuple(Data_Monoid.mempty(dictMonoid),Data_Monoid.mempty(dictMonoid1)))}};var moduloSemiringTuple=function moduloSemiringTuple(dictModuloSemiring){return function(dictModuloSemiring1){return new Prelude.ModuloSemiring(function(){return semiringTuple(dictModuloSemiring["__superclass_Prelude.Semiring_0"]())(dictModuloSemiring1["__superclass_Prelude.Semiring_0"]())},function(v){return function(v1){return new Tuple(Prelude.div(dictModuloSemiring)(v.value0)(v1.value0),Prelude.div(dictModuloSemiring1)(v.value1)(v1.value1))}},function(v){return function(v1){return new Tuple(Prelude.mod(dictModuloSemiring)(v.value0)(v1.value0),Prelude.mod(dictModuloSemiring1)(v.value1)(v1.value1))}})}};var lookup=function lookup(dictFoldable){return function(dictEq){return function(a){return function(f){return Data_Maybe_First.runFirst(Data_Foldable.foldMap(dictFoldable)(Data_Maybe_First.monoidFirst)(function(v){var $145=Prelude["=="](dictEq)(a)(v.value0);if($145){return new Data_Maybe.Just(v.value1)}if(!$145){return Data_Maybe.Nothing.value}throw new Error("Failed pattern match at Data.Tuple line 174, column 58 - line 174, column 93: "+[$145.constructor.name])})(f))}}}};var functorTuple=new Prelude.Functor(function(f){return function(v){return new Tuple(v.value0,f(v.value1))}});var invariantTuple=new Data_Functor_Invariant.Invariant(Data_Functor_Invariant.imapF(functorTuple));var fst=function fst(v){return v.value0};var lazyTuple=function lazyTuple(dictLazy){return function(dictLazy1){return new Control_Lazy.Lazy(function(f){return new Tuple(Control_Lazy.defer(dictLazy)(function(v){return fst(f(Prelude.unit))}),Control_Lazy.defer(dictLazy1)(function(v){return snd(f(Prelude.unit))}))})}};var foldableTuple=new Data_Foldable.Foldable(function(dictMonoid){return function(f){return function(v){return f(v.value1)}}},function(f){return function(z){return function(v){return f(z)(v.value1)}}},function(f){return function(z){return function(v){return f(v.value1)(z)}}});var traversableTuple=new Data_Traversable.Traversable(function(){return foldableTuple},function(){return functorTuple},function(dictApplicative){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Tuple.create(v.value0))(v.value1)}},function(dictApplicative){return function(f){return function(v){return Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Tuple.create(v.value0))(f(v.value1))}}});var extendTuple=new Control_Extend.Extend(function(){return functorTuple},function(f){return function(v){return new Tuple(v.value0,f(v))}});var eqTuple=function eqTuple(dictEq){return function(dictEq1){return new Prelude.Eq(function(v){return function(v1){return Prelude["=="](dictEq)(v.value0)(v1.value0)&&Prelude["=="](dictEq1)(v.value1)(v1.value1)}})}};var ordTuple=function ordTuple(dictOrd){return function(dictOrd1){return new Prelude.Ord(function(){return eqTuple(dictOrd["__superclass_Prelude.Eq_0"]())(dictOrd1["__superclass_Prelude.Eq_0"]())},function(v){return function(v1){var $190=Prelude.compare(dictOrd)(v.value0)(v1.value0);if($190 instanceof Prelude.EQ){return Prelude.compare(dictOrd1)(v.value1)(v1.value1)}return $190}})}};var divisionRingTuple=function divisionRingTuple(dictDivisionRing){return function(dictDivisionRing1){return new Prelude.DivisionRing(function(){return moduloSemiringTuple(dictDivisionRing["__superclass_Prelude.ModuloSemiring_1"]())(dictDivisionRing1["__superclass_Prelude.ModuloSemiring_1"]())},function(){return ringTuple(dictDivisionRing["__superclass_Prelude.Ring_0"]())(dictDivisionRing1["__superclass_Prelude.Ring_0"]())})}};var numTuple=function numTuple(dictNum){return function(dictNum1){return new Prelude.Num(function(){return divisionRingTuple(dictNum["__superclass_Prelude.DivisionRing_0"]())(dictNum1["__superclass_Prelude.DivisionRing_0"]())})}};var curry=function curry(f){return function(a){return function(b){return f(new Tuple(a,b))}}};var comonadTuple=new Control_Comonad.Comonad(function(){return extendTuple},snd);var boundedTuple=function boundedTuple(dictBounded){return function(dictBounded1){return new Prelude.Bounded(new Tuple(Prelude.bottom(dictBounded),Prelude.bottom(dictBounded1)),new Tuple(Prelude.top(dictBounded),Prelude.top(dictBounded1)))}};var boundedOrdTuple=function boundedOrdTuple(dictBoundedOrd){return function(dictBoundedOrd1){return new Prelude.BoundedOrd(function(){return boundedTuple(dictBoundedOrd["__superclass_Prelude.Bounded_0"]())(dictBoundedOrd1["__superclass_Prelude.Bounded_0"]())},function(){return ordTuple(dictBoundedOrd["__superclass_Prelude.Ord_1"]())(dictBoundedOrd1["__superclass_Prelude.Ord_1"]())})}};var booleanAlgebraTuple=function booleanAlgebraTuple(dictBooleanAlgebra){return function(dictBooleanAlgebra1){return new Prelude.BooleanAlgebra(function(){return boundedTuple(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())(dictBooleanAlgebra1["__superclass_Prelude.Bounded_0"]())},function(v){return function(v1){return new Tuple(Prelude.conj(dictBooleanAlgebra)(v.value0)(v1.value0),Prelude.conj(dictBooleanAlgebra1)(v.value1)(v1.value1))}},function(v){return function(v1){return new Tuple(Prelude.disj(dictBooleanAlgebra)(v.value0)(v1.value0),Prelude.disj(dictBooleanAlgebra1)(v.value1)(v1.value1))}},function(v){return new Tuple(Prelude.not(dictBooleanAlgebra)(v.value0),Prelude.not(dictBooleanAlgebra1)(v.value1))})}};var bifunctorTuple=new Data_Bifunctor.Bifunctor(function(f){return function(g){return function(v){return new Tuple(f(v.value0),g(v.value1))}}});var bifoldableTuple=new Data_Bifoldable.Bifoldable(function(dictMonoid){return function(f){return function(g){return function(v){return Prelude["<>"](dictMonoid["__superclass_Prelude.Semigroup_0"]())(f(v.value0))(g(v.value1))}}}},function(f){return function(g){return function(z){return function(v){return g(f(z)(v.value0))(v.value1)}}}},function(f){return function(g){return function(z){return function(v){return f(v.value0)(g(v.value1)(z))}}}});var bitraversableTuple=new Data_Bitraversable.Bitraversable(function(){return bifoldableTuple},function(){return bifunctorTuple},function(dictApplicative){return function(v){return Prelude["<*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Tuple.create)(v.value0))(v.value1)}},function(dictApplicative){return function(f){return function(g){return function(v){return Prelude["<*>"](dictApplicative["__superclass_Prelude.Apply_0"]())(Prelude["<$>"](dictApplicative["__superclass_Prelude.Apply_0"]()["__superclass_Prelude.Functor_0"]())(Tuple.create)(f(v.value0)))(g(v.value1))}}}});var biapplyTuple=new Control_Biapply.Biapply(function(){return bifunctorTuple},function(v){return function(v1){return new Tuple(v.value0(v1.value0),v.value1(v1.value1))}});var biapplicativeTuple=new Control_Biapplicative.Biapplicative(function(){return biapplyTuple},Tuple.create);var applyTuple=function applyTuple(dictSemigroup){return new Prelude.Apply(function(){return functorTuple},function(v){return function(v1){return new Tuple(Prelude["<>"](dictSemigroup)(v.value0)(v1.value0),v.value1(v1.value1))}})};var bindTuple=function bindTuple(dictSemigroup){return new Prelude.Bind(function(){return applyTuple(dictSemigroup)},function(v){return function(f){var $254=f(v.value1);return new Tuple(Prelude["<>"](dictSemigroup)(v.value0)($254.value0),$254.value1)}})};var applicativeTuple=function applicativeTuple(dictMonoid){return new Prelude.Applicative(function(){return applyTuple(dictMonoid["__superclass_Prelude.Semigroup_0"]())},Tuple.create(Data_Monoid.mempty(dictMonoid)))};var monadTuple=function monadTuple(dictMonoid){return new Prelude.Monad(function(){return applicativeTuple(dictMonoid)},function(){return bindTuple(dictMonoid["__superclass_Prelude.Semigroup_0"]())})};module.exports={Tuple:Tuple,lookup:lookup,swap:swap,uncurry:uncurry,curry:curry,snd:snd,fst:fst,showTuple:showTuple,eqTuple:eqTuple,ordTuple:ordTuple,boundedTuple:boundedTuple,boundedOrdTuple:boundedOrdTuple,semigroupoidTuple:semigroupoidTuple,semigroupTuple:semigroupTuple,monoidTuple:monoidTuple,semiringTuple:semiringTuple,moduloSemiringTuple:moduloSemiringTuple,ringTuple:ringTuple,divisionRingTuple:divisionRingTuple,numTuple:numTuple,booleanAlgebraTuple:booleanAlgebraTuple,functorTuple:functorTuple,invariantTuple:invariantTuple,bifunctorTuple:bifunctorTuple,applyTuple:applyTuple,biapplyTuple:biapplyTuple,applicativeTuple:applicativeTuple,biapplicativeTuple:biapplicativeTuple,bindTuple:bindTuple,monadTuple:monadTuple,extendTuple:extendTuple,comonadTuple:comonadTuple,lazyTuple:lazyTuple,foldableTuple:foldableTuple,bifoldableTuple:bifoldableTuple,traversableTuple:traversableTuple,bitraversableTuple:bitraversableTuple}},{"Control.Biapplicative":11,"Control.Biapply":12,"Control.Comonad":14,"Control.Extend":15,"Control.Lazy":16,"Data.Bifoldable":49,"Data.Bifunctor":50,"Data.Bitraversable":51,"Data.Foldable":61,"Data.Functor.Invariant":68,"Data.Maybe":107,"Data.Maybe.First":103,"Data.Monoid":114,"Data.Traversable":132,Prelude:146}],135:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Data_Maybe=require("Data.Maybe");var Data_Tuple=require("Data.Tuple");var Data_Array_ST=require("Data.Array.ST");var Data_Traversable=require("Data.Traversable");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Monad_ST=require("Control.Monad.ST");var Unfoldable=function Unfoldable(unfoldr){this.unfoldr=unfoldr};var unfoldr=function unfoldr(dict){return dict.unfoldr};var unfoldableArray=new Unfoldable(function(f){return function(b){return Control_Monad_Eff.runPure(Data_Array_ST.runSTArray(function __do(){var v=Data_Array_ST.emptySTArray();var v1=Control_Monad_ST.newSTRef(b)();(function(){while(!function __do(){var v2=Control_Monad_ST.readSTRef(v1)();var $12=f(v2);if($12 instanceof Data_Maybe.Nothing){return true}if($12 instanceof Data_Maybe.Just){Data_Array_ST.pushSTArray(v)($12.value0.value0)();Control_Monad_ST.writeSTRef(v1)($12.value0.value1)();return false}throw new Error("Failed pattern match at Data.Unfoldable line 35, column 7 - line 41, column 5: "+[$12.constructor.name])}()){}return{}})();return v}))}});var replicate=function replicate(dictUnfoldable){return function(n){return function(v){var step=function step(i){var $16=i<=0;if($16){return Data_Maybe.Nothing.value}if(!$16){return new Data_Maybe.Just(new Data_Tuple.Tuple(v,i-1))}throw new Error("Failed pattern match at Data.Unfoldable line 54, column 7 - line 58, column 1: "+[$16.constructor.name])};return unfoldr(dictUnfoldable)(step)(n)}}};var replicateA=function replicateA(dictApplicative){return function(dictUnfoldable){return function(dictTraversable){return function(n){return function(m){return Data_Traversable.sequence(dictTraversable)(dictApplicative)(replicate(dictUnfoldable)(n)(m))}}}}};var singleton=function singleton(dictUnfoldable){return replicate(dictUnfoldable)(1)};var none=function none(dictUnfoldable){return unfoldr(dictUnfoldable)(Prelude["const"](Data_Maybe.Nothing.value))(Prelude.unit)};module.exports={Unfoldable:Unfoldable,singleton:singleton,none:none,replicateA:replicateA,replicate:replicate,unfoldr:unfoldr,unfoldableArray:unfoldableArray}},{"Control.Monad.Eff":26,"Control.Monad.ST":31,"Data.Array.ST":44,"Data.Maybe":107,"Data.Traversable":132,"Data.Tuple":134,Prelude:146}],136:[function(require,module,exports){"use strict";var Game=require("Game");var Sigment=require("Sigment");var Preluder=require("Preluder");var Sigment_Dom=require("Sigment.Dom");var Controls=require("Controls");var Sigment_Dom_Props=require("Sigment.Dom.Props");var Sigment_Dom_Tweens=require("Sigment.Dom.Tweens");var Data_Map=require("Data.Map");var Data_List=require("Data.List");var DOM_Timer=require("DOM.Timer");var Control_Monad_Eff_Random=require("Control.Monad.Eff.Random");var Control_Monad_State=require("Control.Monad.State");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Bind=require("Control.Bind");var Utils=require("Utils");var Data_Array_Unsafe=require("Data.Array.Unsafe");var Common=require("Common");var Screens_GameOver=require("Screens.GameOver");var Control_Monad=require("Control.Monad");var Prelude=require("Prelude");var Data_Array=require("Data.Array");var Data_Tuple=require("Data.Tuple");var Data_Lens_Setter=require("Data.Lens.Setter");var Data_Lens_Internal_Wander=require("Data.Lens.Internal.Wander");var Sprites=require("Sprites");var Data_Maybe=require("Data.Maybe");var Utls=require("Utls");var Cnst=require("Cnst");var Analytics=require("Analytics");var Ads=require("Ads");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Lens_Fold=require("Data.Lens.Fold");var Data_Lens_Internal_Forget=require("Data.Lens.Internal.Forget");var Data_Maybe_First=require("Data.Maybe.First");var Control_Apply=require("Control.Apply");var Howler=require("Howler");var Sounds=require("Sounds");var Data_Foldable=require("Data.Foldable");var reverseSnake=function reverseSnake(state){return function(){var sn=Prelude["#"](state)(Game.getSnake);var isRevert=function(){var $16=Prelude[">="](Prelude.ordInt)(Prelude["#"](sn)(Data_Array.length))(2);if($16){return Prelude["=="](Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt))(Game.changePosition(state.directionIndex)(Prelude["#"](state)(Game.snakeHeadPosition)))(Prelude["#"](Data_Array_Unsafe.unsafeIndex(sn)(1))(Data_Tuple.snd))}if(!$16){return false}throw new Error("Failed pattern match at Game.Component line 42, column 7 - line 46, column 1: "+[$16.constructor.name])}();return function(){var $17=isRevert;if($17){return Prelude["#"](state)(Data_Lens_Setter[".~"](Game.currentSnake(state)(Data_Lens_Internal_Wander.wanderFunction))(Data_Array.reverse(sn)))}if(!$17){return state}throw new Error("Failed pattern match at Game.Component line 38, column 22 - line 39, column 3: "+[$17.constructor.name])}()}()};var renderLifes=function renderLifes(props){return function(state){return function(){var tween=Sigment_Dom_Tweens.removing([Sigment_Dom_Tweens.to([Sigment_Dom_Props.scaleZero]),Sigment_Dom_Tweens.duration(500),Sigment_Dom_Tweens.easing(Sigment_Dom_Tweens.types.back["in"])]);var count=Prelude["-"](Prelude.ringInt)(state.level.maxLifes)(state.lifes);return function(){var $18=Prelude[">="](Prelude.ordInt)(count)(1);if($18){return Prelude["$"](Sigment_Dom["group'"](props))(Prelude["#"](Prelude["<#>"](Prelude.functorArray)(Data_Array[".."](1)(count))(Prelude["const"](Sigment_Dom.sprite([Sigment_Dom_Props.anchorCenter,Sigment_Dom_Props.src(Sprites.heart),tween]))))(Controls.stackH(70)))}if(!$18){return Sigment_Dom.empty}throw new Error("Failed pattern match at Game.Component line 108, column 3 - line 109, column 3: "+[$18.constructor.name])}()}()}};var renderInfo=function renderInfo(state){return Prelude["$"](Sigment_Dom["group'"]([Sigment_Dom_Props.key("info"),Sigment_Dom_Props.x(Prelude.ringInt)(55),Sigment_Dom_Props.y(Prelude.ringInt)(10)]))([Controls.txt(Data_Maybe.maybe("")(function(x){return Utls.unwords([Common.lang.round,Prelude.show(Prelude.showInt)(state.eatenCount),"/",Prelude.show(Prelude.showInt)(x)])})(state.level.maxRound))([]),Controls.txt(Utls.unwords([Common.lang.score,Prelude.show(Prelude.showInt)(state.score),Prelude["++"](Prelude.semigroupString)("+ ")(Prelude.show(Prelude.showInt)(state.additionalScore))]))([Sigment_Dom_Props.x(Prelude.ringInt)(400)]),Controls.txt(Common.lang.neurons)([Sigment_Dom_Props.x(Prelude.ringInt)(800)]),renderLifes([Sigment_Dom_Props.x(Prelude.ringInt)(1025),Sigment_Dom_Props.y(Prelude.ringInt)(25)])(state)])};var renderFood=function renderFood(state){return function(v){return function(){var $19=state;var $20=v;var state1=$19;var $22=$20.value0;var itemId=$22;var $23=$20.value1;var $24=$23.value0;var x=$24;var $25=$23.value1;var y=$25;return function(){var tween=function(){var $21=state1.level.hiddingMode;if($21){return Sigment_Dom_Tweens.creating([Sigment_Dom_Tweens.to([Sigment_Dom_Props.alpha(0)]),Sigment_Dom_Tweens.duration(Cnst.hiddingModelShowInterval)])}if(!$21){return Sigment_Dom_Tweens.creating([Sigment_Dom_Tweens.from([Sigment_Dom_Props.scaleZero]),Sigment_Dom_Tweens.duration(500),Sigment_Dom_Tweens.easing(Sigment_Dom_Tweens.types.back.out)])}throw new Error("Failed pattern match at Game.Component line 103, column 15 - line 105, column 7: "+[$21.constructor.name])}();var removing=Sigment_Dom_Tweens.removing([Sigment_Dom_Tweens.to([Sigment_Dom_Props.scaleZero]),Sigment_Dom_Tweens.duration(500),Sigment_Dom_Tweens.easing(Sigment_Dom_Tweens.types.back["in"])]);var md=Game.getMode(state1.level);return Sigment_Dom.sprite([Prelude["$"](Sigment_Dom_Props.key)(Utls.unwords(["food",Prelude.show(Prelude.showInt)(itemId),Prelude.show(Prelude.showInt)(state1.roundIndex)])),Sigment_Dom_Props.anchorCenter,Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["+"](Prelude.semiringInt)(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2))(Prelude["*"](Prelude.semiringInt)(x)(Game.cellSize))),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["+"](Prelude.semiringInt)(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2))(Prelude["*"](Prelude.semiringInt)(y)(Game.cellSize))),Prelude["$"](Sigment_Dom_Props.src)(md.getItemSprite(state1)(itemId)),tween,removing])}();throw new Error("Failed pattern match at Game.Component line 97, column 1 - line 107, column 1: "+[$19.constructor.name,$20.constructor.name])}()}};var renderControlButtons=function renderControlButtons(dispatch){return Prelude["$"](Sigment_Dom.permanent("control-buttons"))(Sigment_Dom["group'"]([Sigment_Dom_Props.key("controls")])([Sigment_Dom["group'"]([Prelude["$"](Sigment_Dom_Props.hitArea)(Sigment_Dom_Props.newRectangle(0)(0)(Controls.widthH)(Controls.height)),Prelude["$"](Sigment_Dom_Props.onTouchStart)(dispatch(new Game.ChangeDirection(Game.directionLeft)))])([]),Sigment_Dom["group'"]([Sigment_Dom_Props.x(Prelude.ringInt)(Controls.widthH),Prelude["$"](Sigment_Dom_Props.hitArea)(Sigment_Dom_Props.newRectangle(0)(0)(Controls.widthH)(Controls.height)),Prelude["$"](Sigment_Dom_Props.onTouchStart)(dispatch(new Game.ChangeDirection(Game.directionRight)))])([])]))};var renderCell=function renderCell(v){return function(){var $26=v;var $27=$26.value0;var x=$27;var $28=$26.value1;var y=$28;return Sigment_Dom.sprite([Sigment_Dom_Props.anchorCenter,Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["+"](Prelude.semiringInt)(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2))(Prelude["*"](Prelude.semiringInt)(x)(Game.cellSize))),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["+"](Prelude.semiringInt)(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2))(Prelude["*"](Prelude.semiringInt)(y)(Game.cellSize))),Prelude["$"](Sigment_Dom_Props.src)(Sprites.cell)]);throw new Error("Failed pattern match at Game.Component line 90, column 1 - line 96, column 1: "+[$26.constructor.name])}()};var renderCellList=Prelude["$"](Sigment_Dom.permanent("cell-list"))(Prelude["$"](Sigment_Dom["group'"]([Sigment_Dom_Props.cacheAsBitmap(true)]))(Prelude["<#>"](Prelude.functorArray)(Game.cells)(renderCell)));var itemAplha=[1,.5];var init=function init(lvl){return Prelude.bind(Control_Monad_Eff.bindEff)(Analytics.event("Level")(lvl.id)(lvl.name)(0))(function(__unused){return Prelude.bind(Control_Monad_Eff.bindEff)(Ads.prepare)(function(__unused){return function(){var md=Game.getMode(lvl);return Prelude.bind(Control_Monad_Eff.bindEff)(Prelude[">>="](Control_Monad_Eff.bindEff)(Prelude["$"](Utils.shuffle)(Data_Array[".."](1)(Cnst.itemCount)))(md.getItemIds(lvl)))(function(v){return function(){var $29=v;var itemIds=$29;return function(){var state=Prelude["#"](Prelude["#"](Prelude["#"](Game.initState)(Data_Lens_Setter[".~"](Game.level(Data_Profunctor_Strong.strongFn))(lvl)))(Data_Lens_Setter[".~"](Game.availableItemIds(Data_Profunctor_Strong.strongFn))(itemIds)))(Data_Lens_Setter[".~"](Game.snakes(Data_Profunctor_Strong.strongFn))(Game.createInitSnakes(lvl)));return Prelude.bind(Control_Monad_Eff.bindEff)(Game.addFood(state))(function(v1){return function(){var $30=v1;var x=$30;return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(x);throw new Error("Failed pattern match at Game.Component line 26, column 12 - line 36, column 1: "+[$30.constructor.name])}()})}();throw new Error("Failed pattern match at Game.Component line 26, column 12 - line 36, column 1: "+[$29.constructor.name])}()})}()})})};var getMistakeInterval=function getMistakeInterval(state){return Prelude["+"](Prelude.semiringInt)(Game.minMistakeInterval)(Prelude["*"](Prelude.semiringInt)(Game.mistakeIntervalPerItem)(Prelude["#"](Prelude["#"](state)(Game.getSnake))(Data_Array.length)))};var getIsMistake=function getIsMistake(eatingItem){return Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(eatingItem)(Prelude[">>>"](Prelude.semigroupoidFn)(Data_Tuple.snd)(Prelude.not(Prelude.booleanAlgebraBoolean))))(Data_Maybe.fromMaybe(false))};var renderSnake=function renderSnake(v){return function(){var $31=v;var $52=$31.eatingItem;var eatingItem=$52;var $53=$31.state;var state=$53;var $54=$31.sn;var sn=$54;var $55=$31.snIndex;var snIndex=$55;return function(){var md=Game.getMode(state.level);var isMistake=Prelude["#"](eatingItem)(getIsMistake);var isCurrent=function(){var $32=isMistake;if($32){return Prelude["=="](Prelude.eqInt)(state.snakeIndex)(snIndex)}if(!$32){return Prelude["=="](Prelude.eqInt)(Game.prevSnake(state)(state.snakeIndex))(snIndex)}throw new Error("Failed pattern match at Game.Component line 137, column 17 - line 138, column 5: "+[$32.constructor.name])}();var isCurrentOrMistake=Prelude["||"](Prelude.booleanAlgebraBoolean)(isCurrent)(isMistake);var snakeBackground=function snakeBackground(snakeIndex){return function(itemId){return function(){var sprite=function sprite(props){return function(src){return Prelude["$"](Sigment_Dom.sprite)(Prelude["++"](Prelude.semigroupArray)(props)([Sigment_Dom_Props.anchorCenter,Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2)),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2)),Sigment_Dom_Props.src(src)]))}};var backSprite=function(){var $33=Prelude["$"](Prelude.not(Prelude.booleanAlgebraBoolean))(isCurrentOrMistake);if($33){return Data_Maybe.Nothing.value}if(!$33){return Prelude.bind(Data_Maybe.bindMaybe)(itemId)(function(v1){return function(){var $34=v1;var itId=$34;return Prelude.bind(Data_Maybe.bindMaybe)(eatingItem)(function(v2){return function(){var $35=v2;var eItem=$35;return function(){var $36=Prelude["=="](Prelude.eqInt)(Data_Tuple.fst(eItem))(itId);if($36){return Prelude["$"](Data_Maybe.Just.create)(Prelude["$"](Sprites.back)(Utls.bool(Utls.bool(0)(1)(isMistake))(2)(isCurrent)))}if(!$36){return function(){var $37=isMistake;if($37){return Prelude["$"](Data_Maybe.Just.create)(Sprites.back(2))}if(!$37){return Data_Maybe.Nothing.value}throw new Error("Failed pattern match at Game.Component line 163, column 105 - line 163, column 157: "+[$37.constructor.name])}()}throw new Error("Failed pattern match at Game.Component line 163, column 11 - line 164, column 5: "+[$36.constructor.name])}();throw new Error("Failed pattern match at Game.Component line 160, column 68 - line 164, column 5: "+[$35.constructor.name])}()});throw new Error("Failed pattern match at Game.Component line 160, column 68 - line 164, column 5: "+[$34.constructor.name])}()})}throw new Error("Failed pattern match at Game.Component line 160, column 22 - line 164, column 5: "+[$33.constructor.name])}();var back=Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(backSprite)(sprite([])))(Data_Maybe.fromMaybe(Sigment_Dom.empty));return Prelude["$"](Sigment_Dom.group)([sprite([])(Sprites.snake),back])}()}};var eatingInteval=function(){var $38=isMistake;if($38){return Prelude["+"](Prelude.semiringInt)(getMistakeInterval(state))(1e3)}if(!$38){return md.eatInterval}throw new Error("Failed pattern match at Game.Component line 141, column 21 - line 142, column 5: "+[$38.constructor.name])}();var renderSnakeSprite=function renderSnakeSprite(snakeIndex){return function(itemId){return function(){var eatTween=function(){var $39=Prelude["$"](Prelude.not(Prelude.booleanAlgebraBoolean))(isCurrentOrMistake);if($39){return Sigment_Dom_Props.none}if(!$39){return Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(eatingItem)(function(v1){return function(){var $40=v1;var $43=$40.value0;var eatItemId=$43;var $44=$40.value1;var isRight=$44;return function(){var $41=isRight;if($41){return function(){var $42=Prelude["=="](Prelude.eqInt)(eatItemId)(itemId);if($42){return Sigment_Dom_Tweens.updating([Sigment_Dom_Tweens.from([Sigment_Dom_Props.scale1(.9)]),Sigment_Dom_Tweens.to([Sigment_Dom_Props.scaleZero]),Sigment_Dom_Tweens.easing(Sigment_Dom_Tweens.types.exponential["in"]),Sigment_Dom_Tweens.duration(eatingInteval)])}if(!$42){return Sigment_Dom_Props.none}throw new Error("Failed pattern match at Game.Component line 172, column 19 - line 172, column 172: "+[$42.constructor.name])}()}if(!$41){return Sigment_Dom_Tweens.updating([Sigment_Dom_Tweens.from([Sigment_Dom_Props.scaleZero]),Sigment_Dom_Tweens.to([Sigment_Dom_Props.scale1(.9)]),Sigment_Dom_Tweens.repeat(1),Sigment_Dom_Tweens.yoyo(true),Prelude["$"](Sigment_Dom_Tweens.duration)(Prelude["/"](Prelude.moduloSemiringInt)(eatingInteval)(2)),Sigment_Dom_Tweens.easing(Sigment_Dom_Tweens.types.exponential.out)])}throw new Error("Failed pattern match at Game.Component line 171, column 13 - line 173, column 163: "+[$41.constructor.name])}();throw new Error("Failed pattern match at Game.Component line 170, column 27 - line 173, column 163: "+[$40.constructor.name])}()}))(Data_Maybe.fromMaybe(Sigment_Dom_Props.none))}throw new Error("Failed pattern match at Game.Component line 169, column 20 - line 176, column 1: "+[$39.constructor.name])}();return Sigment_Dom.sprite([Prelude["$"](Sigment_Dom_Props.key)(Utls.unwords(["snake-item",Prelude.show(Prelude.showInt)(itemId)])),eatTween,Sigment_Dom_Props.scale1(0),Sigment_Dom_Props.anchorCenter,Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2)),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["/"](Prelude.moduloSemiringInt)(Game.cellSize)(2)),Prelude["$"](Sigment_Dom_Props.src)(md.getItemSprite(state)(itemId))])}()}};var renderSnakePart=function renderSnakePart(snakeIndex){return function(v1){return function(index){return function(){var $45=snakeIndex;var $46=v1;var $47=index;var snakeIndex1=$45;var $48=$46.value0;var itemId=$48;var $49=$46.value1;var $50=$49.value0;var x=$50;var $51=$49.value1;var y=$51;var index1=$47;return function(){var position=[Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["*"](Prelude.semiringInt)(x)(Game.cellSize)),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["*"](Prelude.semiringInt)(y)(Game.cellSize))];var tween=[Sigment_Dom_Tweens.updating([Sigment_Dom_Tweens.to(position),Sigment_Dom_Tweens.duration(Game.timeInterval)])];var pos=tween;var creating=[Sigment_Dom_Tweens.creating([Sigment_Dom_Tweens.from(position),Sigment_Dom_Tweens.to(position),Sigment_Dom_Tweens.duration(Game.timeInterval)])];return Sigment_Dom["group'"](Prelude["++"](Prelude.semigroupArray)([Prelude["$"](Sigment_Dom_Props.key)(Utls.unwords(["snake-part",Prelude.show(Prelude.showInt)(snakeIndex1),Prelude.show(Prelude.showInt)(index1)])),Sigment_Dom_Props.anchorCenter])(Prelude["++"](Prelude.semigroupArray)(creating)(pos)))([snakeBackground(snakeIndex1)(itemId),Data_Maybe.maybe(Sigment_Dom.empty)(renderSnakeSprite(snakeIndex1))(itemId)]);
}();throw new Error("Failed pattern match at Game.Component line 134, column 1 - line 176, column 1: "+[$45.constructor.name,$46.constructor.name,$47.constructor.name])}()}}};return Prelude["$"](Sigment_Dom.group)(Prelude["#"](sn)(Utls.zipWithIndex(renderSnakePart(snIndex))))}();throw new Error("Failed pattern match at Game.Component line 134, column 1 - line 176, column 1: "+[$31.constructor.name])}()};var render=function render(action){return function(state){return function(dispatch){return function(){var isMove=Prelude["#"](Prelude[">>="](Data_Maybe.bindMaybe)(action)(Data_Lens_Fold.preview(Game._Move(Data_Lens_Internal_Forget.choiceForget(Data_Maybe_First.monoidFirst)))))(Data_Maybe.isJust);var foods=Sigment_Dom["group'"]([Sigment_Dom_Props.key("foods")])(Prelude["<#>"](Prelude.functorArray)(state.food)(renderFood(state)));var eatingItem=Prelude[">>="](Data_Maybe.bindMaybe)(action)(Data_Lens_Fold.preview(Game._Eating(Data_Lens_Internal_Forget.choiceForget(Data_Maybe_First.monoidFirst))));var isEating=Prelude["#"](eatingItem)(Data_Maybe.isJust);var snake=Sigment_Dom["group'"]([Sigment_Dom_Props.key("snake")])(Prelude["#"](state.snakes)(Utls.zipWithIndex(function(sn){return function(snIndex){return Sigment_Dom.thunk4(Prelude["++"](Prelude.semigroupString)("snake-")(Prelude.show(Prelude.showInt)(snIndex)))(renderSnake)({eatingItem:eatingItem,state:state,sn:sn,snIndex:snIndex})(function(x){return function(y){return Prelude["#"](Prelude["||"](Prelude.booleanAlgebraBoolean)(isMove)(isEating))(Prelude.not(Prelude.booleanAlgebraBoolean))}})}})));var field=Sigment_Dom["group'"]([Sigment_Dom_Props.key("field"),Sigment_Dom_Props.x(Prelude.ringInt)(50),Sigment_Dom_Props.y(Prelude.ringInt)(70)])([renderCellList,foods,snake]);var directionKeys=[new Data_Tuple.Tuple("up",0),new Data_Tuple.Tuple("right",1),new Data_Tuple.Tuple("down",2),new Data_Tuple.Tuple("left",3)];var keys=Prelude["<#>"](Prelude.functorArray)(directionKeys)(function(v){return function(){var $56=v;var $57=$56.value0;var key=$57;var $58=$56.value1;var direction=$58;return Sigment_Dom_Props.newKeys(key)(dispatch(new Game.ChangeDirection(direction)));throw new Error("Failed pattern match at Game.Component line 186, column 31 - line 186, column 109: "+[$56.constructor.name])}()});return Prelude["$"](Controls.stage("game")([Sigment_Dom_Props.keyboard(keys)]))([renderInfo(state),renderControlButtons(dispatch),field])}()}}};var dispatchMove=function dispatchMove(isRight){return function(state){return function(dispatch){return function(){var interval=function(){var $59=isRight;if($59 instanceof Data_Maybe.Just){var $60=$59.value0;if($60){return Prelude["#"](Prelude["#"](state.level)(Game.getMode))(function(v){return v.eatInterval})}}if($59 instanceof Data_Maybe.Just){var $61=$59.value0;if(!$61){return getMistakeInterval(state)}}if($59 instanceof Data_Maybe.Nothing){return state.interval}throw new Error("Failed pattern match at Game.Component line 52, column 7 - line 56, column 1: "+[$59.constructor.name])}();return Control_Apply["*>"](Control_Monad_Eff.applyEff)(DOM_Timer.timeout(interval)(Prelude["$"](dispatch)(Game.Move.value)))(Prelude.pure(Control_Monad_Eff.applicativeEff)(Prelude.unit))}()}}};var dispatchGameComplete=function dispatchGameComplete(state){return function(dispatch){return Prelude["<#>"](Data_Maybe.functorMaybe)(Game.isGameComplete(state))(function(x){return dispatch(Prelude["$"](Game.GameOver.create)(Screens_GameOver.newModel(state.level)(x)(state.score)))})}};var $$eval=function $$eval(v){return function(state){return function(v1){return function(){var $62=v;var $63=state;var $64=v1;if($62 instanceof Game.Start){var $65=$62.value0;var level=$65;var state1=$63;var dispatch=$64;return init(level)}if($62 instanceof Game.Eating){var $68=$62.value0;var eatingItem=$68;var state1=$63;var dispatch=$64;return function(){var isRight=Data_Tuple.snd(eatingItem);return Prelude.bind(Control_Monad_Eff.bindEff)(Howler.play(function(){var $66=isRight;if($66){return Sounds.right}if(!$66){return Sounds.error}throw new Error("Failed pattern match at Game.Component line 60, column 16 - line 60, column 62: "+[$66.constructor.name])}()))(function(__unused){return Prelude.bind(Control_Monad_Eff.bindEff)(Prelude["#"](dispatchGameComplete(state1)(dispatch))(Data_Maybe["fromMaybe'"](function(v2){return function(){var $67=v2;return dispatchMove(Prelude["$"](Data_Maybe.Just.create)(isRight))(state1)(dispatch);throw new Error("Failed pattern match at Game.Component line 61, column 53 - line 61, column 103: "+[$67.constructor.name])}()})))(function(__unused){return Prelude.pure(Control_Monad_Eff.applicativeEff)(state1)})})}()}if($62 instanceof Game.Move){var state1=$63;var dispatch=$64;return function(){var t=Prelude["#"](Prelude["#"](Prelude["#"](Prelude["#"](state1)(Utls[".~?"](Game.directionIndex(Data_Profunctor_Strong.strongFn))(state1.nextDirectionIndex)))(Data_Lens_Setter[".~"](Game.nextDirectionIndex(Data_Profunctor_Strong.strongFn))(Data_Maybe.Nothing.value)))(reverseSnake))(Prelude[">>>"](Prelude.semigroupoidFn)(Game.tryMoveSnake)(Game.eat));var stateF=Data_Tuple.fst(t);var eatingItem=Data_Tuple.snd(t);var isMistake=Prelude["#"](eatingItem)(getIsMistake);return Prelude.bind(Control_Monad_Eff.bindEff)(Prelude["#"](Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(eatingItem)(function(x){return dispatch(new Game.Eating(x))}))(Utils["maybeAlt'"](function(v2){return function(){var $69=v2;return dispatchGameComplete(stateF)(dispatch);throw new Error("Failed pattern match at Game.Component line 66, column 59 - line 66, column 101: "+[$69.constructor.name])}()})))(Data_Maybe["fromMaybe'"](function(v2){return function(){var $70=v2;return dispatchMove(Data_Maybe.Nothing.value)(stateF)(dispatch);throw new Error("Failed pattern match at Game.Component line 67, column 19 - line 67, column 63: "+[$70.constructor.name])}()})))(function(__unused){return Prelude["#"](Prelude["#"](Prelude["#"](stateF)(Data_Lens_Setter[".~"](Game.nextPosition(Data_Profunctor_Strong.strongFn))(Data_Maybe.Nothing.value)))(Game.updateCurrentDistance))(function(){var $71=Data_Maybe.isJust(eatingItem);if($71){return Prelude.pure(Control_Monad_Eff.applicativeEff)}if(!$71){return Game.addFood}throw new Error("Failed pattern match at Game.Component line 68, column 63 - line 68, column 106: "+[$71.constructor.name])}())})}()}if($62 instanceof Game.ChangeDirection){var $77=$62.value0;var direction=$77;var state1=$63;var dispatch=$64;return function(){var newDirection=function(){var $72=Cnst.isMobile;if($72){return function(){var $73=Prelude["#"]([0,2])(Data_Foldable.elem(Data_Foldable.foldableArray)(Prelude.eqInt)(direction));if($73){return Data_Maybe.Nothing.value}if(!$73){return Prelude["$"](Data_Maybe.Just.create)(Prelude.mod(Prelude.moduloSemiringInt)(Prelude["+"](Prelude.semiringInt)(Prelude["+"](Prelude.semiringInt)(4)(state1.directionIndex))(function(){var $74=Prelude["=="](Prelude.eqInt)(direction)(Game.directionRight);if($74){return 1}if(!$74){return Prelude.negate(Prelude.ringInt)(1)}throw new Error("Failed pattern match at Game.Component line 82, column 91 - line 82, column 136: "+[$74.constructor.name])}()))(4))}throw new Error("Failed pattern match at Game.Component line 82, column 9 - line 83, column 7: "+[$73.constructor.name])}()}if(!$72){return function(){var $75=Prelude["#"]([Game.opposite(direction),direction])(Data_Foldable.elem(Data_Foldable.foldableArray)(Prelude.eqInt)(state1.directionIndex));if($75){return Data_Maybe.Nothing.value}if(!$75){return new Data_Maybe.Just(direction)}throw new Error("Failed pattern match at Game.Component line 84, column 9 - line 85, column 5: "+[$75.constructor.name])}()}throw new Error("Failed pattern match at Game.Component line 81, column 7 - line 85, column 5: "+[$72.constructor.name])}();var isChangedDirection=Prelude["&&"](Prelude.booleanAlgebraBoolean)(Data_Maybe.isJust(newDirection))(Prelude["#"](Prelude["=="](Data_Maybe.eqMaybe(Prelude.eqInt))(newDirection)(state1.nextDirectionIndex))(Prelude.not(Prelude.booleanAlgebraBoolean)));return Prelude.bind(Control_Monad_Eff.bindEff)(Control_Monad.when(Control_Monad_Eff.monadEff)(Prelude.not(Prelude.booleanAlgebraBoolean)(state1.started))(dispatch(Game.Move.value)))(function(__unused){return Prelude.bind(Control_Monad_Eff.bindEff)(Control_Monad.when(Control_Monad_Eff.monadEff)(isChangedDirection)(Howler.play(Sounds.turn)))(function(__unused){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(Prelude["#"](Prelude["#"](state1)(Utls[".~?"](Game.nextDirectionIndex(Data_Profunctor_Strong.strongFn))(function(){var $76=isChangedDirection;if($76){return new Data_Maybe.Just(newDirection)}if(!$76){return Data_Maybe.Nothing.value}throw new Error("Failed pattern match at Game.Component line 78, column 42 - line 78, column 99: "+[$76.constructor.name])}())))(Data_Lens_Setter[".~"](Game.started(Data_Profunctor_Strong.strongFn))(true)))})})}()}var state1=$63;return Prelude.pure(Control_Monad_Eff.applicativeEff)(state1);throw new Error("Failed pattern match at Game.Component line 57, column 1 - line 59, column 1: "+[$62.constructor.name,$63.constructor.name,$64.constructor.name])}()}}};var component=Sigment.newComponent(init)($$eval)(render);module.exports={render:render,getIsMistake:getIsMistake,renderCellList:renderCellList,renderSnake:renderSnake,renderControlButtons:renderControlButtons,renderInfo:renderInfo,renderLifes:renderLifes,renderFood:renderFood,renderCell:renderCell,itemAplha:itemAplha,eval:$$eval,dispatchMove:dispatchMove,dispatchGameComplete:dispatchGameComplete,reverseSnake:reverseSnake,getMistakeInterval:getMistakeInterval,init:init,component:component}},{Ads:2,Analytics:4,Cnst:6,Common:7,"Control.Apply":10,"Control.Bind":13,"Control.Monad":38,"Control.Monad.Eff":26,"Control.Monad.Eff.Random":20,"Control.Monad.State":34,Controls:40,"DOM.Timer":42,"Data.Array":48,"Data.Array.Unsafe":46,"Data.Foldable":61,"Data.Lens.Fold":76,"Data.Lens.Internal.Forget":81,"Data.Lens.Internal.Wander":88,"Data.Lens.Setter":97,"Data.List":101,"Data.Map":102,"Data.Maybe":107,"Data.Maybe.First":103,"Data.Profunctor.Strong":120,"Data.Tuple":134,Game:137,Howler:139,Prelude:146,Preluder:147,"Screens.GameOver":148,Sigment:159,"Sigment.Dom":157,"Sigment.Dom.Props":153,"Sigment.Dom.Tweens":155,Sounds:160,Sprites:161,Utils:167,Utls:169}],137:[function(require,module,exports){"use strict";var Sigment=require("Sigment");var Preluder=require("Preluder");var Data_Map=require("Data.Map");var Data_List=require("Data.List");var Control_Monad_Eff_Random=require("Control.Monad.Eff.Random");var Control_Monad_State=require("Control.Monad.State");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Bind=require("Control.Bind");var Utils=require("Utils");var Data_Array_Unsafe=require("Data.Array.Unsafe");var Common=require("Common");var Screens_GameOver=require("Screens.GameOver");var Cnst=require("Cnst");var Data_Lens_Lens=require("Data.Lens.Lens");var Prelude=require("Prelude");var Data_Tuple=require("Data.Tuple");var Data_Array=require("Data.Array");var Data_Lens_Setter=require("Data.Lens.Setter");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var Data_Lens_Lens_Tuple=require("Data.Lens.Lens.Tuple");var Data_Maybe=require("Data.Maybe");var Utls=require("Utls");var Control_Alt=require("Control.Alt");var Sprites=require("Sprites");var Data_Lens_Internal_Wander=require("Data.Lens.Internal.Wander");var Data_Foldable=require("Data.Foldable");var Data_Either=require("Data.Either");var Data_Lens_Prism=require("Data.Lens.Prism");var Move=function(){function Move(){}Move.value=new Move;return Move}();var Start=function(){function Start(value0){this.value0=value0}Start.create=function(value0){return new Start(value0)};return Start}();var Eating=function(){function Eating(value0){this.value0=value0}Eating.create=function(value0){return new Eating(value0)};return Eating}();var ChangeDirection=function(){function ChangeDirection(value0){this.value0=value0}ChangeDirection.create=function(value0){return new ChangeDirection(value0)};return ChangeDirection}();var GameOver=function(){function GameOver(value0){this.value0=value0}GameOver.create=function(value0){return new GameOver(value0)};return GameOver}();var timeInterval=function(){var $103=Cnst.isMobile;if($103){return 400}if(!$103){return 300}throw new Error("Failed pattern match at Game line 22, column 16 - line 23, column 1: "+[$103.constructor.name])}();var started=function started(dictStrong){return Data_Lens_Lens.lens(function(v){return v.started})(function(v){return function(v1){return function(){var $104={};for(var $105 in v){if(v.hasOwnProperty($105)){$104[$105]=v[$105]}}$104.started=v1;return $104}()}})(dictStrong)};var snakes=function snakes(dictStrong){return Data_Lens_Lens.lens(function(v){return v.snakes})(function(v){return function(v1){return function(){var $106={};for(var $107 in v){if(v.hasOwnProperty($107)){$106[$107]=v[$107]}}$106.snakes=v1;return $106}()}})(dictStrong)};var snakeItemIds=function snakeItemIds(snake){return Prelude["#"](Prelude["<#>"](Prelude.functorArray)(snake)(Data_Tuple.fst))(Data_Array.catMaybes)};var snakesItemIds=function snakesItemIds(state){return Prelude[">>="](Prelude.bindArray)(state.snakes)(snakeItemIds)};var snakeIndex=function snakeIndex(dictStrong){return Data_Lens_Lens.lens(function(v){return v.snakeIndex})(function(v){return function(v1){return function(){var $108={};for(var $109 in v){if(v.hasOwnProperty($109)){$108[$109]=v[$109]}}$108.snakeIndex=v1;return $108}()}})(dictStrong)};var score=function score(dictStrong){return Data_Lens_Lens.lens(function(v){return v.score})(function(v){return function(v1){return function(){var $110={};for(var $111 in v){if(v.hasOwnProperty($111)){$110[$111]=v[$111]}}$110.score=v1;return $110}()}})(dictStrong)};var roundIndex=function roundIndex(dictStrong){return Data_Lens_Lens.lens(function(v){return v.roundIndex})(function(v){return function(v1){return function(){var $112={};for(var $113 in v){if(v.hasOwnProperty($113)){$112[$113]=v[$113]}}$112.roundIndex=v1;return $112}()}})(dictStrong)};var prevSnake=function prevSnake(state){return function(index){return Prelude.mod(Prelude.moduloSemiringInt)(Prelude["-"](Prelude.ringInt)(Prelude["+"](Prelude.semiringInt)(state.level.snakeCount)(index))(1))(state.level.snakeCount)}};var opposite=function opposite(x){return Prelude.mod(Prelude.moduloSemiringInt)(Prelude["+"](Prelude.semiringInt)(x)(2))(4)};var nextSnake=function nextSnake(state){return function(index){return Prelude.mod(Prelude.moduloSemiringInt)(Prelude["+"](Prelude.semiringInt)(index)(1))(state.level.snakeCount)}};var switchSnake=function switchSnake(state){return Prelude["#"](state)(Data_Lens_Setter["%~"](snakeIndex(Data_Profunctor_Strong.strongFn))(nextSnake(state)))};var nextPosition=function nextPosition(dictStrong){return Data_Lens_Lens.lens(function(v){return v.nextPosition})(function(v){return function(v1){return function(){var $114={};for(var $115 in v){if(v.hasOwnProperty($115)){$114[$115]=v[$115]}}$114.nextPosition=v1;return $114}()}})(dictStrong)};var nextDirectionIndex=function nextDirectionIndex(dictStrong){return Data_Lens_Lens.lens(function(v){return v.nextDirectionIndex})(function(v){return function(v1){return function(){var $116={};for(var $117 in v){if(v.hasOwnProperty($117)){$116[$117]=v[$117]}}$116.nextDirectionIndex=v1;return $116}()}})(dictStrong)};var moveSnake=function moveSnake(newHeadPosition){return function(sn){return function(){var lastItem=Prelude["#"](Prelude["#"](sn)(Data_Array.last))(Data_Maybe_Unsafe.fromJust);var result=Data_Array[":"](Prelude["#"](lastItem)(Data_Lens_Setter[".~"](Data_Lens_Lens_Tuple._2(Data_Profunctor_Strong.strongFn))(newHeadPosition)))(Prelude["#"](Prelude["#"](sn)(Data_Array.init))(Data_Maybe_Unsafe.fromJust));var itemIdxs=Prelude["#"](Prelude["<#>"](Prelude.functorArray)(result)(Data_Tuple.fst))(Utils.shift(1));var snakeF=Data_Array.zipWith(function(item){return function(i){return Prelude["#"](item)(Data_Lens_Setter[".~"](Data_Lens_Lens_Tuple._1(Data_Profunctor_Strong.strongFn))(i))}})(result)(itemIdxs);return snakeF}()}};var moveComplete=function moveComplete(dictStrong){return Data_Lens_Lens.lens(function(v){return v.moveComplete})(function(v){return function(v1){return function(){var $118={};for(var $119 in v){if(v.hasOwnProperty($119)){$118[$119]=v[$119]}}$118.moveComplete=v1;return $118}()}})(dictStrong)};var mistakeIntervalPerItem=200;var mistake=function mistake(wrongFood){return function(state){return Prelude["$"](Data_Tuple.Tuple.create(state))(wrongFood)}};var minMistakeInterval=2e3;var lifes=function lifes(dictStrong){return Data_Lens_Lens.lens(function(v){return v.lifes})(function(v){return function(v1){return function(){var $120={};for(var $121 in v){if(v.hasOwnProperty($121)){$120[$121]=v[$121]}}$120.lifes=v1;return $120}()}})(dictStrong)};var level=function level(dictStrong){return Data_Lens_Lens.lens(function(v){return v.level})(function(v){return function(v1){return function(){var $122={};for(var $123 in v){if(v.hasOwnProperty($123)){$122[$123]=v[$123]}}$122.level=v1;return $122}()}})(dictStrong)};var itemToSnakePart=function itemToSnakePart(v){return function(){var $124=v;var $125=$124.value0;var x=$125;var $126=$124.value1;var y=$126;return new Data_Tuple.Tuple(new Data_Maybe.Just(x),y);throw new Error("Failed pattern match at Game line 313, column 1 - line 316, column 1: "+[$124.constructor.name])}()};var isOut=function isOut(x){return function(size){return Prelude["||"](Prelude.booleanAlgebraBoolean)(Prelude["<"](Prelude.ordInt)(x)(0))(Prelude[">="](Prelude.ordInt)(x)(size))}};var isLevel=function isLevel(state){return Prelude["#"](state.level.maxRound)(Data_Maybe.isJust)};var interval=function interval(dictStrong){return Data_Lens_Lens.lens(function(v){return v.interval})(function(v){return function(v1){return function(){var $127={};for(var $128 in v){if(v.hasOwnProperty($128)){$127[$128]=v[$128]}}$127.interval=v1;return $127}()}})(dictStrong)};var initState={snakes:[[]],snakeIndex:0,directionIndex:0,nextDirectionIndex:Data_Maybe.Nothing.value,food:[],moveComplete:true,foodIndex:0,roundIndex:0,eatenCount:0,nextPosition:Data_Maybe.Nothing.value,lifes:0,distanceToAnswer:0,currentDistance:0,interval:timeInterval,score:0,additionalScore:0,availableItemIds:[],started:false,level:Prelude["#"](Common.levels)(Data_Array_Unsafe.head)};var getSnake=function getSnake(state){return Data_Array_Unsafe.unsafeIndex(state.snakes)(state.snakeIndex)};var rightFood=function rightFood(state){return Data_Array["\\\\"](Prelude.eqInt)(Prelude["<#>"](Prelude.functorArray)(state.food)(Data_Tuple.fst))(Prelude["#"](Prelude["<#>"](Prelude.functorArray)(Prelude["#"](state)(getSnake))(Data_Tuple.fst))(Data_Array.catMaybes))};var rightFoodComplete=function rightFoodComplete(state){return Prelude["#"](Prelude["#"](state)(rightFood))(Data_Array["null"])};var snakeHeadPosition=function snakeHeadPosition(state){return Prelude["#"](Prelude["#"](Prelude["#"](state)(getSnake))(Data_Array_Unsafe.head))(Data_Tuple.snd)};var getRandomItemFromSnake=function getRandomItemFromSnake(state){return function(){var sn=Prelude["#"](state)(getSnake);var items=Data_Array["\\\\"](Prelude.eqInt)(Prelude["#"](sn)(snakeItemIds))(Prelude["<#>"](Prelude.functorArray)(state.food)(Data_Tuple.fst));var item=Prelude["#"](function(){var $129=Prelude[">"](Prelude.ordInt)(Data_Array.length(items))(1);if($129){return Prelude["#"](items)(Data_Array_Unsafe.tail)}if(!$129){return items}throw new Error("Failed pattern match at Game line 202, column 13 - line 202, column 63: "+[$129.constructor.name])}())(Utls.randomElement);return Prelude["<#>"](Control_Monad_Eff.functorEff)(item)(function(v){return Control_Alt["<|>"](Data_Maybe.altMaybe)(v)(Prelude["#"](Prelude["#"](Prelude["#"](state)(getSnake))(Data_Array_Unsafe.head))(Data_Tuple.fst))})}()};var getItemIdsNBack=function getItemIdsNBack(lvl){return function(items){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(Prelude["#"](items)(Data_Array.take(Prelude["*"](Prelude.semiringInt)(Prelude["*"](Prelude.semiringInt)(Prelude["#"](lvl.maxLength)(Data_Maybe_Unsafe.fromJust))(lvl.snakeCount))(3))))}};var getItemIds=function getItemIds(lvl){return function(items){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(items)}};var foodIndex=function foodIndex(dictStrong){return Data_Lens_Lens.lens(function(v){return v.foodIndex})(function(v){return function(v1){return function(){var $130={};for(var $131 in v){if(v.hasOwnProperty($131)){$130[$131]=v[$131]}}$130.foodIndex=v1;return $130}()}})(dictStrong)};var food=function food(dictStrong){return Data_Lens_Lens.lens(function(v){return v.food})(function(v){return function(v1){return function(){var $132={};for(var $133 in v){if(v.hasOwnProperty($133)){$132[$133]=v[$133]}}$132.food=v1;return $132}()}})(dictStrong)};var fieldWidth=13;var fieldHeight=7;var innerCells=Prelude.bind(Prelude.bindArray)(Data_Array[".."](0)(fieldWidth))(function(v){return function(){var $134=v;var x=$134;return Prelude.bind(Prelude.bindArray)(Data_Array[".."](0)(fieldHeight))(function(v1){return function(){var $135=v1;var y=$135;return Prelude["$"](Prelude.pure(Prelude.applicativeArray))(new Data_Tuple.Tuple(x,y));throw new Error("Failed pattern match at Game line 92, column 14 - line 96, column 1: "+[$135.constructor.name])}()});throw new Error("Failed pattern match at Game line 92, column 14 - line 96, column 1: "+[$134.constructor.name])}()});var positionIsOut=function positionIsOut(v){return function(){var $136=v;var $137=$136.value0;var x=$137;var $138=$136.value1;var y=$138;return Prelude["||"](Prelude.booleanAlgebraBoolean)(isOut(x)(fieldWidth))(isOut(y)(fieldHeight));throw new Error("Failed pattern match at Game line 273, column 1 - line 276, column 1: "+[$136.constructor.name])}()};var eatenCount=function eatenCount(dictStrong){return Data_Lens_Lens.lens(function(v){return v.eatenCount})(function(v){return function(v1){return function(){var $139={};for(var $140 in v){if(v.hasOwnProperty($140)){$139[$140]=v[$140]}}$139.eatenCount=v1;return $139}()}})(dictStrong)};var eatIntervalNormal=1e3;var normalMode={getItemIds:getItemIds,getItemSprite:function getItemSprite(state){return function(itemId){return Sprites.item(itemId)}},eatInterval:eatIntervalNormal};var nbackMode=function(){var $141={};for(var $142 in normalMode){if(normalMode.hasOwnProperty($142)){$141[$142]=normalMode[$142]}}$141.getItemIds=getItemIdsNBack;return $141}();var eatIntervalAll=timeInterval;var hiddingMode=function(){var $143={};for(var $144 in normalMode){if(normalMode.hasOwnProperty($144)){$143[$144]=normalMode[$144]}}$143.eatInterval=eatIntervalAll;$143.getItemSprite=function(state){return function(itemId){return Sprites.hidding(true)}};return $143}();var getMode=function getMode(lvl){return function(){var $145=Prelude["#"](lvl.maxLength)(Data_Maybe.isJust);if($145){return nbackMode}if(!$145){return function(){var $146=lvl.hiddingMode;if($146){return hiddingMode}if(!$146){return normalMode}throw new Error("Failed pattern match at Game line 168, column 61 - line 170, column 1: "+[$146.constructor.name])}()}throw new Error("Failed pattern match at Game line 168, column 15 - line 170, column 1: "+[$145.constructor.name])}()};var distanceToAnswer=function distanceToAnswer(dictStrong){return Data_Lens_Lens.lens(function(v){return v.distanceToAnswer})(function(v){return function(v1){return function(){var $147={};for(var $148 in v){if(v.hasOwnProperty($148)){$147[$148]=v[$148]}}$147.distanceToAnswer=v1;return $147}()}})(dictStrong)};var distance=function distance(v){return function(v1){return function(){var $149=v;var $150=v1;var $153=$149.value0;var x=$153;var $154=$149.value1;var y=$154;var $151=$150.value0;var x1=$151;var $152=$150.value1;var y1=$152;return Prelude["+"](Prelude.semiringInt)(Utils.abs(Prelude.ringInt)(Prelude.ordInt)(Prelude["-"](Prelude.ringInt)(x)(x1)))(Utils.abs(Prelude.ringInt)(Prelude.ordInt)(Prelude["-"](Prelude.ringInt)(y)(y1)));throw new Error("Failed pattern match at Game line 194, column 1 - line 196, column 1: "+[$149.constructor.name,$150.constructor.name])}()}};var directions=[new Data_Tuple.Tuple(0,Prelude.negate(Prelude.ringInt)(1)),new Data_Tuple.Tuple(1,0),new Data_Tuple.Tuple(0,1),new Data_Tuple.Tuple(Prelude.negate(Prelude.ringInt)(1),0)];var directionRight=1;var directionLeft=3;var directionIndex=function directionIndex(dictStrong){return Data_Lens_Lens.lens(function(v){return v.directionIndex})(function(v){return function(v1){return function(){var $155={};for(var $156 in v){if(v.hasOwnProperty($156)){$155[$156]=v[$156]}}$155.directionIndex=v1;return $155}()}})(dictStrong)};var currentSnake=function currentSnake(state){return function(dictWander){return Prelude["<<<"](Prelude.semigroupoidFn)(snakes(dictWander["__superclass_Data.Profunctor.Strong.Strong_0"](undefined)))(Utls.aix(state.snakeIndex)(dictWander))}};var cutMaxLength=function cutMaxLength(state){return function(){var maxLength=function(){var $157=state.level.hiddingMode;if($157){return new Data_Maybe.Just(Cnst.hiddingModeMaxLength)}if(!$157){return state.level.maxLength}throw new Error("Failed pattern match at Game line 312, column 17 - line 313, column 1: "+[$157.constructor.name])}();return Prelude["#"](state)(Utls[".~?"](currentSnake(state)(Data_Lens_Internal_Wander.wanderFunction))(Prelude["<#>"](Data_Maybe.functorMaybe)(maxLength)(function(x){return Prelude["#"](Prelude["#"](state)(getSnake))(Data_Array.take(x))})))}()};var eatRight=function eatRight(food1){return function(state){return function(){var sn=Prelude["#"](state)(getSnake);var headPart=Prelude["#"](sn)(Data_Array_Unsafe.head);var newSnake=function(){var $158=Prelude["#"](Prelude["#"](headPart)(Data_Tuple.fst))(Data_Maybe.isNothing);if($158){return Prelude["#"](Data_Array[":"](Prelude["#"](headPart)(Data_Lens_Setter[".~"](Data_Lens_Lens_Tuple._1(Data_Profunctor_Strong.strongFn))(Prelude["$"](Data_Maybe.Just.create)(Data_Tuple.fst(food1)))))(Data_Array_Unsafe.tail(sn)))(moveSnake(Data_Tuple.snd(food1)))}if(!$158){return Data_Array[":"](Prelude["#"](food1)(itemToSnakePart))(sn)}throw new Error("Failed pattern match at Game line 330, column 9 - line 333, column 5: "+[$158.constructor.name])}();var addScore=function(){var $159=Prelude["#"](state)(rightFoodComplete);if($159){return state.additionalScore}if(!$159){return 0}throw new Error("Failed pattern match at Game line 328, column 16 - line 329, column 5: "+[$159.constructor.name])}();var stateF=Prelude["#"](Prelude["#"](Prelude["#"](Prelude["#"](Prelude["#"](state)(Data_Lens_Setter[".~"](currentSnake(state)(Data_Lens_Internal_Wander.wanderFunction))(newSnake)))(Data_Lens_Setter["+~"](Prelude.semiringInt)(score(Data_Profunctor_Strong.strongFn))(addScore)))(cutMaxLength))(switchSnake))(Data_Lens_Setter["+~"](Prelude.semiringInt)(eatenCount(Data_Profunctor_Strong.strongFn))(1));return new Data_Tuple.Tuple(stateF,new Data_Maybe.Just(new Data_Tuple.Tuple(Prelude["#"](food1)(Data_Tuple.fst),true)))}()}};var eatWrong=function eatWrong(food1){return function(state){return function(){var sn=Prelude["#"](state)(getSnake);var foodPosition=Data_Tuple.snd(food1);var stateF=Prelude["#"](Prelude["#"](Prelude["#"](state)(Data_Lens_Setter[".~"](currentSnake(state)(Data_Lens_Internal_Wander.wanderFunction))(moveSnake(foodPosition)(sn))))(Data_Lens_Setter["+~"](Prelude.semiringInt)(lifes(Data_Profunctor_Strong.strongFn))(1)))(Data_Lens_Setter["-~"](Prelude.ringInt)(score(Data_Profunctor_Strong.strongFn))(Cnst.wrongEatScore));var foodId=Data_Tuple.fst(food1);return new Data_Tuple.Tuple(stateF,Prelude["$"](Data_Maybe.Just.create)(new Data_Tuple.Tuple(foodId,false)))}()}};var eatFood=function eatFood(fd){return function(state){return function(){var newFood=function(){var $160=state.level.hiddingMode;if($160){return Data_Array["delete"](Data_Tuple.eqTuple(Prelude.eqInt)(Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt)))(fd)(state.food)}if(!$160){return[]}throw new Error("Failed pattern match at Game line 349, column 15 - line 350, column 5: "+[$160.constructor.name])}();var stateF=Prelude["#"](state)(Data_Lens_Setter[".~"](food(Data_Profunctor_Strong.strongFn))(newFood));var foodId=Data_Tuple.fst(fd);var isMistake=Data_Foldable.elem(Data_Foldable.foldableArray)(Prelude.eqInt)(foodId)(Prelude["#"](Prelude["#"](state)(getSnake))(snakeItemIds));return function(){var $161=isMistake;if($161){return eatWrong}if(!$161){return eatRight}throw new Error("Failed pattern match at Game line 345, column 21 - line 345, column 61: "+[$161.constructor.name])}()(fd)(stateF)}()}};var eat=function eat(state){return function(){var foodToEat=Prelude[">>="](Data_Maybe.bindMaybe)(state.nextPosition)(function(position){return Prelude["#"](state.food)(Data_Foldable.find(Data_Foldable.foldableArray)(function(x){return Prelude["=="](Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt))(Data_Tuple.snd(x))(position)}))});return Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(foodToEat)(function(v){return eatFood(v)(state)}))(Data_Maybe.fromMaybe(new Data_Tuple.Tuple(state,Data_Maybe.Nothing.value)))}()};var currentDistance=function currentDistance(dictStrong){return Data_Lens_Lens.lens(function(v){return v.currentDistance})(function(v){return function(v1){return function(){var $162={};for(var $163 in v){if(v.hasOwnProperty($163)){$162[$163]=v[$163]}}$162.currentDistance=v1;return $162}()}})(dictStrong)};var setDistanceToAnswer=function setDistanceToAnswer(state){return function(){var itemIds=Prelude["#"](Prelude["#"](state)(getSnake))(snakeItemIds);var headPosition=snakeHeadPosition(state);var answers=Prelude["#"](state.food)(Data_Array.filter(function(v){return function(){var $164=v;var $165=$164.value0;var itemId=$165;var $166=$164.value1;return Prelude["#"](itemIds)(Data_Foldable.notElem(Data_Foldable.foldableArray)(Prelude.eqInt)(itemId));throw new Error("Failed pattern match at Game line 227, column 36 - line 227, column 81: "+[$164.constructor.name])}()}));var maxDistance=Prelude["#"](Prelude["#"](Prelude["<#>"](Prelude.functorArray)(answers)(Prelude[">>>"](Prelude.semigroupoidFn)(Data_Tuple.snd)(distance(headPosition))))(Data_Foldable.maximum(Prelude.ordInt)(Data_Foldable.foldableArray)))(Data_Maybe.fromMaybe(0));var answerDistance=function(){var $167=state.level.hiddingMode;if($167){return Prelude["*"](Prelude.semiringInt)(Prelude["/"](Prelude.moduloSemiringInt)(maxDistance)(2))(Prelude["+"](Prelude.semiringInt)(Data_Array.length(answers))(1))}if(!$167){return Prelude["+"](Prelude.semiringInt)(maxDistance)(Cnst.distancePlus)}throw new Error("Failed pattern match at Game line 230, column 22 - line 232, column 1: "+[$167.constructor.name])}();return Prelude["#"](Prelude["#"](state)(Data_Lens_Setter[".~"](currentDistance(Data_Profunctor_Strong.strongFn))(0)))(Data_Lens_Setter[".~"](distanceToAnswer(Data_Profunctor_Strong.strongFn))(answerDistance))}()};var createInitSnakes=function createInitSnakes(lvl){return function(){var wh=Prelude["-"](Prelude.ringInt)(Prelude["/"](Prelude.moduloSemiringInt)(fieldWidth)(2))(1);var top=1;var up=new Data_Tuple.Tuple(wh,top);var down=new Data_Tuple.Tuple(wh,Prelude["-"](Prelude.ringInt)(Prelude["-"](Prelude.ringInt)(fieldHeight)(top))(1));var center=new Data_Tuple.Tuple(wh,Prelude["/"](Prelude.moduloSemiringInt)(fieldHeight)(2));var positions=function(){var $168=lvl.snakeCount;if($168===1){return[center]}if($168===2){return[up,down]}if($168===3){return[up,center,down]}throw new Error("Failed pattern match at Game line 179, column 7 - line 187, column 1: "+[$168.constructor.name])}();return Prelude["<#>"](Prelude.functorArray)(positions)(function(v){return function(){var $169=v;var $170=$169.value0;var x=$170;var $171=$169.value1;var y=$171;return Prelude["<#>"](Prelude.functorArray)(Data_Array[".."](1)(Prelude["#"](lvl.maxLength)(Data_Maybe.fromMaybe(1))))(function(i){return new Data_Tuple.Tuple(Data_Maybe.Nothing.value,new Data_Tuple.Tuple(Prelude["+"](Prelude.semiringInt)(x)(i),y));
});throw new Error("Failed pattern match at Game line 171, column 20 - line 171, column 114: "+[$169.constructor.name])}()})}()};var changePosition=function changePosition(directionIndex1){return function(pos){return function(){var direction=Prelude["#"](Data_Array["!!"](directions)(directionIndex1))(Data_Maybe_Unsafe.fromJust);return Prelude["#"](Prelude["#"](pos)(Data_Lens_Setter["+~"](Prelude.semiringInt)(Data_Lens_Lens_Tuple._1(Data_Profunctor_Strong.strongFn))(Data_Tuple.fst(direction))))(Data_Lens_Setter["+~"](Prelude.semiringInt)(Data_Lens_Lens_Tuple._2(Data_Profunctor_Strong.strongFn))(Data_Tuple.snd(direction)))}()}};var moveItem=function moveItem(directionIndex1){return function(item){return Prelude["#"](item)(Data_Lens_Setter["%~"](Data_Lens_Lens_Tuple._2(Data_Profunctor_Strong.strongFn))(changePosition(directionIndex1)))}};var cells=Prelude.bind(Prelude.bindArray)(Utils.rangeIndex(fieldWidth))(function(v){return function(){var $172=v;var x=$172;return Prelude.bind(Prelude.bindArray)(Utils.rangeIndex(fieldHeight))(function(v1){return function(){var $173=v1;var y=$173;return Prelude["$"](Prelude.pure(Prelude.applicativeArray))(new Data_Tuple.Tuple(x,y));throw new Error("Failed pattern match at Game line 96, column 9 - line 101, column 1: "+[$173.constructor.name])}()});throw new Error("Failed pattern match at Game line 96, column 9 - line 101, column 1: "+[$172.constructor.name])}()});var cellSize=140;var sideSize=Prelude["*"](Prelude.semiringInt)(cellSize)(fieldHeight);var availableItemIds=function availableItemIds(dictStrong){return Data_Lens_Lens.lens(function(v){return v.availableItemIds})(function(v){return function(v1){return function(){var $174={};for(var $175 in v){if(v.hasOwnProperty($175)){$174[$175]=v[$175]}}$174.availableItemIds=v1;return $174}()}})(dictStrong)};var allSnakePositions=function allSnakePositions(state){return Prelude["<#>"](Prelude.functorArray)(Prelude["#"](state.snakes)(Data_Array.concat))(Data_Tuple.snd)};var foodAndSnakePositions=function foodAndSnakePositions(state){return Prelude["++"](Prelude.semigroupArray)(allSnakePositions(state))(Prelude["<#>"](Prelude.functorArray)(state.food)(Data_Tuple.snd))};var positionIsFree=function positionIsFree(state){return function(position){return function(){var isWall=positionIsOut(position);return Prelude["#"](Prelude["||"](Prelude.booleanAlgebraBoolean)(isWall)(Data_Foldable.elem(Data_Foldable.foldableArray)(Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt))(position)(foodAndSnakePositions(state))))(Prelude.not(Prelude.booleanAlgebraBoolean))}()}};var tryMoveSnake=function tryMoveSnake(state){return function(){var sn=Prelude["#"](state)(getSnake);var newHeadPosition=Prelude["#"](Prelude["#"](state)(snakeHeadPosition))(changePosition(state.directionIndex));return function(){var $176=positionIsFree(state)(newHeadPosition);if($176){return Prelude["#"](Prelude["#"](state)(Data_Lens_Setter["%~"](currentSnake(state)(Data_Lens_Internal_Wander.wanderFunction))(moveSnake(newHeadPosition))))(Data_Lens_Setter[".~"](nextPosition(Data_Profunctor_Strong.strongFn))(Data_Maybe.Nothing.value))}if(!$176){return Prelude["#"](state)(Data_Lens_Setter[".~"](nextPosition(Data_Profunctor_Strong.strongFn))(new Data_Maybe.Just(newHeadPosition)))}throw new Error("Failed pattern match at Game line 302, column 3 - line 305, column 3: "+[$176.constructor.name])}()}()};var isCollided=function isCollided(state){return function(){var snakePoses=Prelude["#"](allSnakePositions(state))(Data_Array["delete"](Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt))(snakeHeadPosition(state)));return Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(state.nextPosition)(function(x){return Prelude["||"](Prelude.booleanAlgebraBoolean)(positionIsOut(x))(Prelude["#"](snakePoses)(Data_Foldable.elem(Data_Foldable.foldableArray)(Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt))(x)))}))(Data_Maybe.fromMaybe(false))}()};var isGameComplete=function isGameComplete(state){return function(){var isOut1=Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(state.nextPosition)(positionIsOut))(Data_Maybe.fromMaybe(false));var isLevelComplete=Data_Maybe.maybe(false)(Prelude[">="](Prelude.ordInt)(state.eatenCount))(state.level.maxRound);var isGameOver=Prelude["||"](Prelude.booleanAlgebraBoolean)(Prelude["=="](Prelude.eqInt)(state.lifes)(state.level.maxLifes))(isCollided(state));return function(){var $177=isLevelComplete;if($177){return new Data_Maybe.Just(true)}if(!$177){return function(){var $178=isGameOver;if($178){return new Data_Maybe.Just(false)}if(!$178){return Data_Maybe.Nothing.value}throw new Error("Failed pattern match at Game line 280, column 42 - line 281, column 3: "+[$178.constructor.name])}()}throw new Error("Failed pattern match at Game line 280, column 3 - line 281, column 3: "+[$177.constructor.name])}()}()};var allPositionsForItem=cells;var allBorderPosition=function allBorderPosition(position){return function(){var y=Data_Tuple.snd(position);var x=Data_Tuple.fst(position);return Prelude.bind(Prelude.bindArray)(Data_Array[".."](Utils.max(Prelude.ordInt)(0)(Prelude["-"](Prelude.ringInt)(x)(1)))(Utils.min(Prelude.ordInt)(Prelude["-"](Prelude.ringInt)(fieldWidth)(1))(Prelude["+"](Prelude.semiringInt)(x)(1))))(function(v){return function(){var $179=v;var xx=$179;return Prelude.bind(Prelude.bindArray)(Data_Array[".."](Utils.max(Prelude.ordInt)(0)(Prelude["-"](Prelude.ringInt)(y)(1)))(Utils.min(Prelude.ordInt)(Prelude["-"](Prelude.ringInt)(fieldHeight)(1))(Prelude["+"](Prelude.semiringInt)(y)(1))))(function(v1){return function(){var $180=v1;var yy=$180;return Prelude["$"](Prelude.pure(Prelude.applicativeArray))(new Data_Tuple.Tuple(xx,yy));throw new Error("Failed pattern match at Game line 110, column 30 - line 114, column 3: "+[$180.constructor.name])}()});throw new Error("Failed pattern match at Game line 110, column 30 - line 114, column 3: "+[$179.constructor.name])}()})}()};var foodWithBordersAndSnakePositions=function foodWithBordersAndSnakePositions(state){return Prelude["++"](Prelude.semigroupArray)(Prelude["<#>"](Prelude.functorArray)(Prelude["#"](state)(getSnake))(Data_Tuple.snd))(Prelude[">>="](Prelude.bindArray)(Prelude["<#>"](Prelude.functorArray)(state.food)(Data_Tuple.snd))(allBorderPosition))};var getRandomPosition=function getRandomPosition(state){return function(){var headPosition=Prelude["#"](state)(snakeHeadPosition);var ahead1=changePosition(state.directionIndex)(headPosition);var ahead2=changePosition(state.directionIndex)(ahead1);var ahead0=changePosition(opposite(state.directionIndex))(headPosition);var smallList=Data_Array["\\\\"](Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt))(allPositionsForItem)(Prelude["++"](Prelude.semigroupArray)(foodWithBordersAndSnakePositions(state))([ahead0,ahead1,ahead2]));var list=function(){var $181=Data_Array["null"](smallList);if($181){return Data_Array["\\\\"](Data_Tuple.eqTuple(Prelude.eqInt)(Prelude.eqInt))(allPositionsForItem)(Prelude["++"](Prelude.semigroupArray)(foodAndSnakePositions(state))([ahead1,ahead2]))}if(!$181){return smallList}throw new Error("Failed pattern match at Game line 132, column 12 - line 134, column 1: "+[$181.constructor.name])}();return Prelude["$"](Utls.randomElement)(list)}()};var additionalScore=function additionalScore(dictStrong){return Data_Lens_Lens.lens(function(v){return v.additionalScore})(function(v){return function(v1){return function(){var $182={};for(var $183 in v){if(v.hasOwnProperty($183)){$182[$183]=v[$183]}}$182.additionalScore=v1;return $182}()}})(dictStrong)};var updateCurrentDistance=function updateCurrentDistance(state){return function(){var newCurrentDistance=Prelude["+"](Prelude.semiringInt)(state.currentDistance)(1);var diff=Prelude["-"](Prelude.ringInt)(state.distanceToAnswer)(newCurrentDistance);var newAdditionalScore=function(){var $184=Prelude[">="](Prelude.ordInt)(diff)(0);if($184){return Cnst.maxScore}if(!$184){return Prelude["/"](Prelude.moduloSemiringInt)(Prelude["*"](Prelude.semiringInt)(Cnst.maxScore)(Prelude["+"](Prelude.semiringInt)(state.distanceToAnswer)(diff)))(state.distanceToAnswer)}throw new Error("Failed pattern match at Game line 361, column 26 - line 364, column 1: "+[$184.constructor.name])}();return Prelude["#"](Prelude["#"](state)(Data_Lens_Setter[".~"](currentDistance(Data_Profunctor_Strong.strongFn))(newCurrentDistance)))(Data_Lens_Setter[".~"](additionalScore(Data_Profunctor_Strong.strongFn))(function(){var $185=Prelude[">="](Prelude.ordInt)(newAdditionalScore)(10);if($185){return newAdditionalScore}if(!$185){return Cnst.minScore}throw new Error("Failed pattern match at Game line 357, column 31 - line 358, column 3: "+[$185.constructor.name])}()))}()};var addWrongFood=function addWrongFood(state){return Prelude.bind(Control_Monad_Eff.bindEff)(getRandomPosition(state))(function(v){return function(){var $186=v;if($186 instanceof Data_Maybe.Just){var $188=$186.value0;var position=$188;return Prelude.bind(Control_Monad_Eff.bindEff)(getRandomItemFromSnake(state))(function(v1){return function(){var $187=v1;var itemId=$187;return function(){var newFood=new Data_Tuple.Tuple(itemId,position);return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(Prelude["#"](state)(Utls[".~?"](food(Data_Profunctor_Strong.strongFn))(Prelude["<#>"](Data_Maybe.functorMaybe)(itemId)(function(x){return Data_Array[":"](new Data_Tuple.Tuple(x,position))(state.food)}))))}();throw new Error("Failed pattern match at Game line 215, column 22 - line 221, column 1: "+[$187.constructor.name])}()})}throw new Error("Failed pattern match at Game line 215, column 22 - line 221, column 1: "+[$186.constructor.name])}()})};var addAnswerFood=function addAnswerFood(state){return Prelude.bind(Control_Monad_Eff.bindEff)(getRandomPosition(state))(function(v){return function(){var $189=v;if($189 instanceof Data_Maybe.Just){var $191=$189.value0;var position=$191;return Prelude.bind(Control_Monad_Eff.bindEff)(Prelude["<#>"](Control_Monad_Eff.functorEff)(Prelude["#"](Data_Array["\\\\"](Prelude.eqInt)(state.availableItemIds)(Prelude["++"](Prelude.semigroupArray)(Prelude["#"](Prelude["#"](state)(getSnake))(snakeItemIds))(Prelude["<#>"](Prelude.functorArray)(state.food)(Data_Tuple.fst))))(Utls.randomElement))(Data_Maybe_Unsafe.fromJust))(function(v1){return function(){var $190=v1;var answerItemId=$190;return function(){var newFood=new Data_Tuple.Tuple(answerItemId,position);return function(){var dist=distance(position)(snakeHeadPosition(state));return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(Prelude["#"](state)(Data_Lens_Setter["%~"](food(Data_Profunctor_Strong.strongFn))(Data_Array[":"](newFood))))}()}();throw new Error("Failed pattern match at Game line 207, column 23 - line 214, column 1: "+[$190.constructor.name])}()})}throw new Error("Failed pattern match at Game line 207, column 23 - line 214, column 1: "+[$189.constructor.name])}()})};var addFoodHiddingMode=function addFoodHiddingMode(state){return Data_Array.foldM(Control_Monad_Eff.monadEff)(function(state1){return function(i){return addAnswerFood(state1)}})(state)(Data_Array[".."](0)(state.roundIndex))};var addFoodNormalMode=function addFoodNormalMode(state){return function(){var wrongFoodCount=Prelude["#"](state.level.maxWrongFood)(Data_Maybe.fromMaybe(Prelude["#"](Prelude["#"](state)(getSnake))(Data_Array.length)));return Prelude[">>="](Control_Monad_Eff.bindEff)(Data_Array.foldM(Control_Monad_Eff.monadEff)(function(state1){return function(i){return addWrongFood(state1)}})(state)(Data_Array[".."](1)(wrongFoodCount)))(addAnswerFood)}()};var addFood=function addFood(state){return function(){var $192=Prelude["#"](state)(rightFoodComplete);if($192){return Prelude["<#>"](Control_Monad_Eff.functorEff)(Prelude["<#>"](Control_Monad_Eff.functorEff)(Prelude["#"](Prelude["#"](state)(Data_Lens_Setter[".~"](food(Data_Profunctor_Strong.strongFn))([])))(Utls.bool(addFoodHiddingMode)(addFoodNormalMode)(state.level.hiddingMode)))(setDistanceToAnswer))(Data_Lens_Setter["+~"](Prelude.semiringInt)(roundIndex(Data_Profunctor_Strong.strongFn))(1))}if(!$192){return Prelude.pure(Control_Monad_Eff.applicativeEff)(state)}throw new Error("Failed pattern match at Game line 254, column 3 - line 263, column 1: "+[$192.constructor.name])}()};var _Start=function _Start(dictChoice){return function(){var unwrap=function unwrap(v){return function(){var $193=v;if($193 instanceof Start){var $194=$193.value0;var x=$194;return new Data_Either.Right(x)}var y=$193;return new Data_Either.Left(y);throw new Error("Failed pattern match at Game line 430, column 3 - line 431, column 3: "+[$193.constructor.name])}()};return Data_Lens_Prism.prism(Start.create)(unwrap)(dictChoice)}()};var _Move=function _Move(dictChoice){return function(){var unwrap=function unwrap(v){return function(){var $195=v;if($195 instanceof Move){return new Data_Either.Right(Prelude.unit)}var y=$195;return new Data_Either.Left(y);throw new Error("Failed pattern match at Game line 424, column 3 - line 425, column 3: "+[$195.constructor.name])}()};return Data_Lens_Prism.prism(Prelude["const"](Move.value))(unwrap)(dictChoice)}()};var _Eating=function _Eating(dictChoice){return function(){var unwrap=function unwrap(v){return function(){var $196=v;if($196 instanceof Eating){var $197=$196.value0;var x=$197;return new Data_Either.Right(x)}var y=$196;return new Data_Either.Left(y);throw new Error("Failed pattern match at Game line 436, column 3 - line 437, column 3: "+[$196.constructor.name])}()};return Data_Lens_Prism.prism(Eating.create)(unwrap)(dictChoice)}()};var _ChangeDirection=function _ChangeDirection(dictChoice){return function(){var unwrap=function unwrap(v){return function(){var $198=v;if($198 instanceof ChangeDirection){var $199=$198.value0;var x=$199;return new Data_Either.Right(x)}var y=$198;return new Data_Either.Left(y);throw new Error("Failed pattern match at Game line 442, column 3 - line 443, column 3: "+[$198.constructor.name])}()};return Data_Lens_Prism.prism(ChangeDirection.create)(unwrap)(dictChoice)}()};module.exports={Move:Move,Start:Start,Eating:Eating,ChangeDirection:ChangeDirection,GameOver:GameOver,_ChangeDirection:_ChangeDirection,_Eating:_Eating,_Start:_Start,_Move:_Move,availableItemIds:availableItemIds,eatenCount:eatenCount,interval:interval,foodIndex:foodIndex,moveComplete:moveComplete,distanceToAnswer:distanceToAnswer,currentDistance:currentDistance,nextPosition:nextPosition,started:started,lifes:lifes,additionalScore:additionalScore,snakeIndex:snakeIndex,level:level,roundIndex:roundIndex,score:score,food:food,nextDirectionIndex:nextDirectionIndex,directionIndex:directionIndex,snakes:snakes,updateCurrentDistance:updateCurrentDistance,eat:eat,eatFood:eatFood,eatWrong:eatWrong,eatRight:eatRight,switchSnake:switchSnake,prevSnake:prevSnake,nextSnake:nextSnake,mistake:mistake,itemToSnakePart:itemToSnakePart,cutMaxLength:cutMaxLength,tryMoveSnake:tryMoveSnake,moveSnake:moveSnake,currentSnake:currentSnake,isGameComplete:isGameComplete,snakeHeadPosition:snakeHeadPosition,positionIsOut:positionIsOut,isCollided:isCollided,isOut:isOut,addFood:addFood,rightFoodComplete:rightFoodComplete,rightFood:rightFood,isLevel:isLevel,addFoodNormalMode:addFoodNormalMode,addFoodHiddingMode:addFoodHiddingMode,setDistanceToAnswer:setDistanceToAnswer,addWrongFood:addWrongFood,addAnswerFood:addAnswerFood,snakesItemIds:snakesItemIds,getRandomItemFromSnake:getRandomItemFromSnake,snakeItemIds:snakeItemIds,distance:distance,moveItem:moveItem,changePosition:changePosition,createInitSnakes:createInitSnakes,getMode:getMode,hiddingMode:hiddingMode,nbackMode:nbackMode,normalMode:normalMode,getItemIdsNBack:getItemIdsNBack,getItemIds:getItemIds,opposite:opposite,directions:directions,directionRight:directionRight,directionLeft:directionLeft,getRandomPosition:getRandomPosition,foodWithBordersAndSnakePositions:foodWithBordersAndSnakePositions,foodAndSnakePositions:foodAndSnakePositions,allSnakePositions:allSnakePositions,allBorderPosition:allBorderPosition,positionIsFree:positionIsFree,allPositionsForItem:allPositionsForItem,cells:cells,innerCells:innerCells,initState:initState,getSnake:getSnake,mistakeIntervalPerItem:mistakeIntervalPerItem,minMistakeInterval:minMistakeInterval,eatIntervalAll:eatIntervalAll,eatIntervalNormal:eatIntervalNormal,timeInterval:timeInterval,sideSize:sideSize,fieldWidth:fieldWidth,fieldHeight:fieldHeight,cellSize:cellSize}},{Cnst:6,Common:7,"Control.Alt":8,"Control.Bind":13,"Control.Monad.Eff":26,"Control.Monad.Eff.Random":20,"Control.Monad.State":34,"Data.Array":48,"Data.Array.Unsafe":46,"Data.Either":57,"Data.Foldable":61,"Data.Lens.Internal.Wander":88,"Data.Lens.Lens":93,"Data.Lens.Lens.Tuple":90,"Data.Lens.Prism":96,"Data.Lens.Setter":97,"Data.List":101,"Data.Map":102,"Data.Maybe":107,"Data.Maybe.Unsafe":106,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146,Preluder:147,"Screens.GameOver":148,Sigment:159,Sprites:161,Utils:167,Utls:169}],138:[function(require,module,exports){var cache={};function play(name){if(cache[name])cache[name].play()}function unload(names){names.forEach(function(x){cache[x].unload(x);delete cache[x]})}function load(names,cb){var toLoad=names.length;names.forEach(function(x){var howl=new Howl({urls:[x],onload:function onload(){toLoad-=1;if(toLoad==0){cb()}}});cache[x]=howl})}exports._play=play;exports._load=load;exports._unload=unload},{}],139:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Function_Eff=require("Data.Function.Eff");var unload=Data_Function_Eff.runEffFn1($foreign._unload);var play=Data_Function_Eff.runEffFn1($foreign._play);var load=Data_Function_Eff.runEffFn2($foreign._load);module.exports={unload:unload,load:load,play:play,_unload:$foreign._unload,_load:$foreign._load,_play:$foreign._play}},{"./foreign":138,"Control.Monad.Eff":26,"Data.Function.Eff":63,Prelude:146}],140:[function(require,module,exports){function getItem(maybe,key){var item=localStorage.getItem(key);if(item){return maybe.just(JSON.parse(item))}return maybe.nothing}function setItem(key,item){localStorage.setItem(key,JSON.stringify(item))}exports._setItem=setItem;exports._getItem=getItem},{}],141:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Data_Function_Eff=require("Data.Function.Eff");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Maybe=require("Data.Maybe");var Prelude=require("Prelude");var setItem=Data_Function_Eff.runEffFn2($foreign._setItem);var maybeApi={just:Data_Maybe.Just.create,nothing:Data_Maybe.Nothing.value};var getItem=Data_Function_Eff.runEffFn2($foreign._getItem)(maybeApi);module.exports={getItem:getItem,setItem:setItem,maybeApi:maybeApi,_getItem:$foreign._getItem,_setItem:$foreign._setItem}},{"./foreign":140,"Control.Monad.Eff":26,"Data.Function.Eff":63,"Data.Maybe":107,Prelude:146}],142:[function(require,module,exports){"use strict";var Sigment=require("Sigment");var Game=require("Game");var Game_Component=require("Game.Component");var Screens_Levels=require("Screens.Levels");var Screens_GameOver=require("Screens.GameOver");var Preluder=require("Preluder");var Sigment_Dom=require("Sigment.Dom");var Data_Exists=require("Data.Exists");var Unsafe_Coerce=require("Unsafe.Coerce");var Data_Array_Unsafe=require("Data.Array.Unsafe");var Common=require("Common");var Sigment_Subcomponents=require("Sigment.Subcomponents");var Data_Maybe=require("Data.Maybe");var Prelude=require("Prelude");var Sprites=require("Sprites");var Cnst=require("Cnst");var Controls=require("Controls");var Control_Monad_Eff=require("Control.Monad.Eff");var Howler=require("Howler");var Sounds=require("Sounds");var Control_Apply=require("Control.Apply");var Analytics=require("Analytics");var ML=function(){function ML(value0){this.value0=value0}ML.create=function(value0){return new ML(value0)};return ML}();var MG=function(){function MG(value0){this.value0=value0}MG.create=function(value0){return new MG(value0)};return MG}();var MO=function(){function MO(value0){this.value0=value0}MO.create=function(value0){return new MO(value0)};return MO}();var AL=function(){function AL(value0){this.value0=value0}AL.create=function(value0){return new AL(value0)};return AL}();var AG=function(){function AG(value0){this.value0=value0}AG.create=function(value0){return new AG(value0)};return AG}();var AO=function(){function AO(value0){this.value0=value0}AO.create=function(value0){return new AO(value0)};return AO}();var initSelect=new Data_Maybe.Just(new AL(Prelude["$"](Screens_Levels.Select.create)(Data_Array_Unsafe.unsafeIndex(Common.levels)(0))));var initGameOver=new Data_Maybe.Just(Prelude["$"](AG.create)(new Game.GameOver(Screens_GameOver.newModel(Data_Array_Unsafe.head(Common.levels))(true)(0))));var accessorO=function(){var unwrap=function unwrap(v){return function(){var $7=v;if($7 instanceof AO){var $8=$7.value0;var x=$8;return new Data_Maybe.Just(x)}var y=$7;return Data_Maybe.Nothing.value;throw new Error("Failed pattern match at Main line 36, column 5 - line 37, column 5: "+[$7.constructor.name])}()};var stateSet=function stateSet(key){return function(s){return function(subS){return new MO(subS)}}};var stateGet=function stateGet(key){return function(v){return function(){var $9=key;var $10=v;var key1=$9;if($10 instanceof MO){var $11=$10.value0;var x=$11;return new Data_Maybe.Just(x)}var key1=$9;var y=$10;return Data_Maybe.Nothing.value;throw new Error("Failed pattern match at Main line 39, column 5 - line 40, column 5: "+[$9.constructor.name,$10.constructor.name])}()}};return Sigment_Subcomponents.newAccessor(unwrap)(AO.create)(stateGet)(stateSet)}();var subcomponentO=Sigment_Subcomponents.newSubcomponent(Screens_GameOver.component)(accessorO);var accessorL=function(){var unwrap=function unwrap(v){return function(){var $12=v;if($12 instanceof AL){var $13=$12.value0;var x=$13;return new Data_Maybe.Just(x)}var y=$12;return Data_Maybe.Nothing.value;throw new Error("Failed pattern match at Main line 28, column 5 - line 29, column 5: "+[$12.constructor.name])}()};var stateSet=function stateSet(key){return function(s){return function(subS){return new ML(subS)}}};var stateGet=function stateGet(key){return function(v){return function(){var $14=key;var $15=v;var key1=$14;if($15 instanceof ML){var $16=$15.value0;var x=$16;return new Data_Maybe.Just(x)}var key1=$14;var y=$15;return Data_Maybe.Nothing.value;throw new Error("Failed pattern match at Main line 24, column 1 - line 32, column 1: "+[$14.constructor.name,$15.constructor.name])}()}};return Sigment_Subcomponents.newAccessor(unwrap)(AL.create)(stateGet)(stateSet)}();var subcomponentL=Sigment_Subcomponents.newSubcomponent(Screens_Levels.component)(accessorL);var init=subcomponentL.init;var accessorG=function(){var unwrap=function unwrap(v){return function(){var $17=v;if($17 instanceof AG){var $18=$17.value0;var x=$18;return new Data_Maybe.Just(x)}var y=$17;return Data_Maybe.Nothing.value;throw new Error("Failed pattern match at Main line 49, column 5 - line 50, column 5: "+[$17.constructor.name])}()};var stateSet=function stateSet(key){return function(s){return function(subS){return new MG(subS)}}};var stateGet=function stateGet(key){return function(v){return function(){var $19=key;var $20=v;var key1=$19;if($20 instanceof MG){var $21=$20.value0;var x=$21;return new Data_Maybe.Just(x)}var key1=$19;var y=$20;return Data_Maybe.Nothing.value;throw new Error("Failed pattern match at Main line 45, column 1 - line 54, column 1: "+[$19.constructor.name,$20.constructor.name])}()}};return Sigment_Subcomponents.newAccessor(unwrap)(AG.create)(stateGet)(stateSet)}();var subcomponentG=Sigment_Subcomponents.newSubcomponent(Game_Component.component)(accessorG);var subcomponents=[Sigment_Subcomponents.toER(subcomponentG),Sigment_Subcomponents.toER(subcomponentL),Sigment_Subcomponents.toER(subcomponentO)];var $$eval=function $$eval(v){return function(state){return function(dispatch){return function(){var $22=v;var $23=state;var $24=dispatch;if($22 instanceof AO){var $25=$22.value0;if($25 instanceof Screens_GameOver.Levels){var state1=$23;var dispatch1=$24;return subcomponentL.init(Prelude.unit)}}if($22 instanceof AO){var $26=$22.value0;if($26 instanceof Screens_GameOver.Restart){var $27=$26.value0;var levelId=$27;var state1=$23;var dispatch1=$24;return subcomponentG.init(levelId)}}if($22 instanceof AG){var $28=$22.value0;if($28 instanceof Game.GameOver){var $29=$28.value0;var model=$29;var state1=$23;var dispatch1=$24;return subcomponentO.init(model)}}if($22 instanceof AL){var $30=$22.value0;if($30 instanceof Screens_Levels.Select){var $31=$30.value0;var level=$31;var state1=$23;var dispatch1=$24;return subcomponentG.init(level)}}var action=$22;var state1=$23;var dispatch1=$24;return Sigment_Subcomponents.evalSubcomponents(subcomponents)(action)(state1)(dispatch1);throw new Error("Failed pattern match at Main line 67, column 1 - line 68, column 1: "+[$22.constructor.name,$23.constructor.name,$24.constructor.name])}()}}};var render=Sigment_Subcomponents.renderSubcomponents(subcomponents);var component=Sigment.newComponent(init)($$eval)(render);var main=function(){var config=function(){var $32={};for(var $33 in Sigment.defConfig){if(Sigment.defConfig.hasOwnProperty($33)){$32[$33]=Sigment.defConfig[$33]}}$32.sprites=Sprites.all;$32.backgroundColor="ffffff";$32.containerId=Cnst.container;$32.height=Controls.height;$32.width=Controls.width;return $32}();return Prelude.bind(Control_Monad_Eff.bindEff)(Howler.load(Sounds.all)(Control_Apply["*>"](Control_Monad_Eff.applyEff)(Sigment.init(config)(Prelude.unit)(component))(Prelude.pure(Control_Monad_Eff.applicativeEff)(Prelude.unit))))(function(__unused){return Analytics.setVersion})}();module.exports={AL:AL,AG:AG,AO:AO,ML:ML,MG:MG,MO:MO,main:main,initSelect:initSelect,initGameOver:initGameOver,render:render,eval:$$eval,subcomponents:subcomponents,subcomponentO:subcomponentO,subcomponentG:subcomponentG,subcomponentL:subcomponentL,accessorG:accessorG,accessorO:accessorO,accessorL:accessorL,component:component,init:init}},{Analytics:4,Cnst:6,Common:7,"Control.Apply":10,"Control.Monad.Eff":26,Controls:40,"Data.Array.Unsafe":46,"Data.Exists":59,"Data.Maybe":107,Game:137,"Game.Component":136,Howler:139,Prelude:146,Preluder:147,"Screens.GameOver":148,"Screens.Levels":149,Sigment:159,"Sigment.Dom":157,"Sigment.Subcomponents":158,Sounds:160,Sprites:161,"Unsafe.Coerce":166}],143:[function(require,module,exports){"use strict";exports.abs=Math.abs;exports.acos=Math.acos;exports.asin=Math.asin;exports.atan=Math.atan;exports.atan2=function(y){return function(x){return Math.atan2(y,x)}};exports.ceil=Math.ceil;exports.cos=Math.cos;exports.exp=Math.exp;exports.floor=Math.floor;exports.log=Math.log;exports.max=function(n1){return function(n2){return Math.max(n1,n2)}};exports.min=function(n1){return function(n2){return Math.min(n1,n2)}};exports.pow=function(n){return function(p){return Math.pow(n,p)}};exports["%"]=function(n){return function(m){return n%m}};exports.round=Math.round;exports.sin=Math.sin;exports.sqrt=Math.sqrt;exports.tan=Math.tan;exports.e=Math.E;exports.ln2=Math.LN2;exports.ln10=Math.LN10;exports.log2e=Math.LOG2E;exports.log10e=Math.LOG10E;exports.pi=Math.PI;exports.sqrt1_2=Math.SQRT1_2;exports.sqrt2=Math.SQRT2},{}],144:[function(require,module,exports){"use strict";var $foreign=require("./foreign");module.exports={sqrt2:$foreign.sqrt2,sqrt1_2:$foreign.sqrt1_2,pi:$foreign.pi,log10e:$foreign.log10e,log2e:$foreign.log2e,ln10:$foreign.ln10,ln2:$foreign.ln2,e:$foreign.e,"%":$foreign["%"],tan:$foreign.tan,sqrt:$foreign.sqrt,sin:$foreign.sin,round:$foreign.round,pow:$foreign.pow,min:$foreign.min,max:$foreign.max,log:$foreign.log,floor:$foreign.floor,exp:$foreign.exp,cos:$foreign.cos,ceil:$foreign.ceil,atan2:$foreign.atan2,atan:$foreign.atan,asin:$foreign.asin,acos:$foreign.acos,abs:$foreign.abs}},{"./foreign":143}],145:[function(require,module,exports){"use strict";exports.arrayMap=function(f){return function(arr){var l=arr.length;var result=new Array(l);for(var i=0;i<l;i++){result[i]=f(arr[i])}return result}};exports.arrayBind=function(arr){return function(f){var result=[];for(var i=0,l=arr.length;i<l;i++){Array.prototype.push.apply(result,f(arr[i]))}return result}};exports.concatString=function(s1){return function(s2){return s1+s2}};exports.concatArray=function(xs){return function(ys){return xs.concat(ys)}};exports.intAdd=function(x){return function(y){return x+y|0}};exports.intMul=function(x){return function(y){return x*y|0}};exports.numAdd=function(n1){return function(n2){return n1+n2}};exports.numMul=function(n1){return function(n2){return n1*n2}};exports.intDiv=function(x){return function(y){return x/y|0}};exports.intMod=function(x){return function(y){return x%y}};exports.numDiv=function(n1){return function(n2){return n1/n2}};exports.intSub=function(x){return function(y){return x-y|0}};exports.numSub=function(n1){return function(n2){return n1-n2}};exports.refEq=function(r1){return function(r2){return r1===r2}};exports.refIneq=function(r1){return function(r2){return r1!==r2}};exports.eqArrayImpl=function(f){return function(xs){return function(ys){if(xs.length!==ys.length)return false;for(var i=0;i<xs.length;i++){if(!f(xs[i])(ys[i]))return false}return true}}};exports.ordArrayImpl=function(f){return function(xs){return function(ys){var i=0;var xlen=xs.length;var ylen=ys.length;while(i<xlen&&i<ylen){var x=xs[i];var y=ys[i];var o=f(x)(y);if(o!==0){return o}i++}if(xlen===ylen){return 0}else if(xlen>ylen){return-1}else{return 1}}}};exports.unsafeCompareImpl=function(lt){return function(eq){return function(gt){return function(x){return function(y){return x<y?lt:x>y?gt:eq}}}}};exports.topInt=2147483647;exports.bottomInt=-2147483648;exports.topChar=String.fromCharCode(65535);exports.bottomChar=String.fromCharCode(0);exports.boolOr=function(b1){return function(b2){return b1||b2}};exports.boolAnd=function(b1){return function(b2){return b1&&b2}};exports.boolNot=function(b){return!b};exports.showIntImpl=function(n){return n.toString()};exports.showNumberImpl=function(n){return n===(n|0)?n+".0":n.toString()};exports.showCharImpl=function(c){var code=c.charCodeAt(0);if(code<32||code===127){switch(c){case"a":return"'\\a'";case"\b":return"'\\b'";case"\f":return"'\\f'";case"\n":return"'\\n'";case"\r":return"'\\r'";case"	":return"'\\t'";case"\x0B":return"'\\v'"}return"'\\"+code.toString(10)+"'"}return c==="'"||c==="\\"?"'\\"+c+"'":"'"+c+"'"};exports.showStringImpl=function(s){var l=s.length;return'"'+s.replace(/[\0-\x1F\x7F"\\]/g,function(c,i){switch(c){case'"':case"\\":return"\\"+c;case"a":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\x0B":return"\\v"}var k=i+1;var empty=k<l&&s[k]>="0"&&s[k]<="9"?"\\&":"";return"\\"+c.charCodeAt(0).toString(10)+empty})+'"'};exports.showArrayImpl=function(f){return function(xs){var ss=[];for(var i=0,l=xs.length;i<l;i++){ss[i]=f(xs[i])}return"["+ss.join(",")+"]"}}},{}],146:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Unit=function Unit(x){return x};var LT=function(){function LT(){}LT.value=new LT;return LT}();var GT=function(){function GT(){}GT.value=new GT;return GT}();var EQ=function(){function EQ(){}EQ.value=new EQ;return EQ}();var Semigroupoid=function Semigroupoid(compose){this.compose=compose};var Category=function Category(__superclass_Prelude$dotSemigroupoid_0,id){this["__superclass_Prelude.Semigroupoid_0"]=__superclass_Prelude$dotSemigroupoid_0;this.id=id};var Functor=function Functor(map){this.map=map};var Apply=function Apply(__superclass_Prelude$dotFunctor_0,apply){this["__superclass_Prelude.Functor_0"]=__superclass_Prelude$dotFunctor_0;this.apply=apply};var Applicative=function Applicative(__superclass_Prelude$dotApply_0,pure){this["__superclass_Prelude.Apply_0"]=__superclass_Prelude$dotApply_0;this.pure=pure};var Bind=function Bind(__superclass_Prelude$dotApply_0,bind){this["__superclass_Prelude.Apply_0"]=__superclass_Prelude$dotApply_0;
this.bind=bind};var Monad=function Monad(__superclass_Prelude$dotApplicative_0,__superclass_Prelude$dotBind_1){this["__superclass_Prelude.Applicative_0"]=__superclass_Prelude$dotApplicative_0;this["__superclass_Prelude.Bind_1"]=__superclass_Prelude$dotBind_1};var Semigroup=function Semigroup(append){this.append=append};var Semiring=function Semiring(add,mul,one,zero){this.add=add;this.mul=mul;this.one=one;this.zero=zero};var Ring=function Ring(__superclass_Prelude$dotSemiring_0,sub){this["__superclass_Prelude.Semiring_0"]=__superclass_Prelude$dotSemiring_0;this.sub=sub};var ModuloSemiring=function ModuloSemiring(__superclass_Prelude$dotSemiring_0,div,mod){this["__superclass_Prelude.Semiring_0"]=__superclass_Prelude$dotSemiring_0;this.div=div;this.mod=mod};var DivisionRing=function DivisionRing(__superclass_Prelude$dotModuloSemiring_1,__superclass_Prelude$dotRing_0){this["__superclass_Prelude.ModuloSemiring_1"]=__superclass_Prelude$dotModuloSemiring_1;this["__superclass_Prelude.Ring_0"]=__superclass_Prelude$dotRing_0};var Num=function Num(__superclass_Prelude$dotDivisionRing_0){this["__superclass_Prelude.DivisionRing_0"]=__superclass_Prelude$dotDivisionRing_0};var Eq=function Eq(eq){this.eq=eq};var Ord=function Ord(__superclass_Prelude$dotEq_0,compare){this["__superclass_Prelude.Eq_0"]=__superclass_Prelude$dotEq_0;this.compare=compare};var Bounded=function Bounded(bottom,top){this.bottom=bottom;this.top=top};var BoundedOrd=function BoundedOrd(__superclass_Prelude$dotBounded_0,__superclass_Prelude$dotOrd_1){this["__superclass_Prelude.Bounded_0"]=__superclass_Prelude$dotBounded_0;this["__superclass_Prelude.Ord_1"]=__superclass_Prelude$dotOrd_1};var BooleanAlgebra=function BooleanAlgebra(__superclass_Prelude$dotBounded_0,conj,disj,not){this["__superclass_Prelude.Bounded_0"]=__superclass_Prelude$dotBounded_0;this.conj=conj;this.disj=disj;this.not=not};var Show=function Show(show){this.show=show};var $dollar=function $dollar(f){return function(x){return f(x)}};var $hash=function $hash(x){return function(f){return f(x)}};var zero=function zero(dict){return dict.zero};var unsafeCompare=$foreign.unsafeCompareImpl(LT.value)(EQ.value)(GT.value);var unit={};var top=function top(dict){return dict.top};var sub=function sub(dict){return dict.sub};var $minus=function $minus(dictRing){return sub(dictRing)};var showUnit=new Show(function(v){return"unit"});var showString=new Show($foreign.showStringImpl);var showOrdering=new Show(function(v){if(v instanceof LT){return"LT"}if(v instanceof GT){return"GT"}if(v instanceof EQ){return"EQ"}throw new Error("Failed pattern match at Prelude line 864, column 3 - line 865, column 3: "+[v.constructor.name])});var showNumber=new Show($foreign.showNumberImpl);var showInt=new Show($foreign.showIntImpl);var showChar=new Show($foreign.showCharImpl);var showBoolean=new Show(function(v){if(v){return"true"}if(!v){return"false"}throw new Error("Failed pattern match at Prelude line 842, column 3 - line 843, column 3: "+[v.constructor.name])});var show=function show(dict){return dict.show};var showArray=function showArray(dictShow){return new Show($foreign.showArrayImpl(show(dictShow)))};var semiringUnit=new Semiring(function(v){return function(v1){return unit}},function(v){return function(v1){return unit}},unit,unit);var semiringNumber=new Semiring($foreign.numAdd,$foreign.numMul,1,0);var semiringInt=new Semiring($foreign.intAdd,$foreign.intMul,1,0);var semigroupoidFn=new Semigroupoid(function(f){return function(g){return function(x){return f(g(x))}}});var semigroupUnit=new Semigroup(function(v){return function(v1){return unit}});var semigroupString=new Semigroup($foreign.concatString);var semigroupOrdering=new Semigroup(function(v){return function(v1){if(v instanceof LT){return LT.value}if(v instanceof GT){return GT.value}if(v instanceof EQ){return v1}throw new Error("Failed pattern match at Prelude line 414, column 3 - line 415, column 3: "+[v.constructor.name,v1.constructor.name])}});var semigroupArray=new Semigroup($foreign.concatArray);var ringUnit=new Ring(function(){return semiringUnit},function(v){return function(v1){return unit}});var ringNumber=new Ring(function(){return semiringNumber},$foreign.numSub);var ringInt=new Ring(function(){return semiringInt},$foreign.intSub);var pure=function pure(dict){return dict.pure};var $$return=function $$return(dictApplicative){return pure(dictApplicative)};var otherwise=true;var one=function one(dict){return dict.one};var not=function not(dict){return dict.not};var negate=function negate(dictRing){return function(a){return $minus(dictRing)(zero(dictRing["__superclass_Prelude.Semiring_0"]()))(a)}};var mul=function mul(dict){return dict.mul};var $times=function $times(dictSemiring){return mul(dictSemiring)};var moduloSemiringUnit=new ModuloSemiring(function(){return semiringUnit},function(v){return function(v1){return unit}},function(v){return function(v1){return unit}});var moduloSemiringNumber=new ModuloSemiring(function(){return semiringNumber},$foreign.numDiv,function(v){return function(v1){return 0}});var moduloSemiringInt=new ModuloSemiring(function(){return semiringInt},$foreign.intDiv,$foreign.intMod);var mod=function mod(dict){return dict.mod};var map=function map(dict){return dict.map};var $less$dollar$greater=function $less$dollar$greater(dictFunctor){return map(dictFunctor)};var $less$hash$greater=function $less$hash$greater(dictFunctor){return function(fa){return function(f){return $less$dollar$greater(dictFunctor)(f)(fa)}}};var id=function id(dict){return dict.id};var functorArray=new Functor($foreign.arrayMap);var flip=function flip(f){return function(b){return function(a){return f(a)(b)}}};var eqUnit=new Eq(function(v){return function(v1){return true}});var ordUnit=new Ord(function(){return eqUnit},function(v){return function(v1){return EQ.value}});var eqString=new Eq($foreign.refEq);var ordString=new Ord(function(){return eqString},unsafeCompare);var eqOrdering=new Eq(function(v){return function(v1){if(v instanceof LT&&v1 instanceof LT){return true}if(v instanceof GT&&v1 instanceof GT){return true}if(v instanceof EQ&&v1 instanceof EQ){return true}return false}});var ordOrdering=new Ord(function(){return eqOrdering},function(v){return function(v1){if(v instanceof LT&&v1 instanceof LT){return EQ.value}if(v instanceof EQ&&v1 instanceof EQ){return EQ.value}if(v instanceof GT&&v1 instanceof GT){return EQ.value}if(v instanceof LT){return LT.value}if(v instanceof EQ&&v1 instanceof LT){return GT.value}if(v instanceof EQ&&v1 instanceof GT){return LT.value}if(v instanceof GT){return GT.value}throw new Error("Failed pattern match at Prelude line 669, column 3 - line 670, column 3: "+[v.constructor.name,v1.constructor.name])}});var eqNumber=new Eq($foreign.refEq);var ordNumber=new Ord(function(){return eqNumber},unsafeCompare);var eqInt=new Eq($foreign.refEq);var ordInt=new Ord(function(){return eqInt},unsafeCompare);var eqChar=new Eq($foreign.refEq);var ordChar=new Ord(function(){return eqChar},unsafeCompare);var eqBoolean=new Eq($foreign.refEq);var ordBoolean=new Ord(function(){return eqBoolean},unsafeCompare);var eq=function eq(dict){return dict.eq};var $eq$eq=function $eq$eq(dictEq){return eq(dictEq)};var eqArray=function eqArray(dictEq){return new Eq($foreign.eqArrayImpl($eq$eq(dictEq)))};var divisionRingUnit=new DivisionRing(function(){return moduloSemiringUnit},function(){return ringUnit});var numUnit=new Num(function(){return divisionRingUnit});var divisionRingNumber=new DivisionRing(function(){return moduloSemiringNumber},function(){return ringNumber});var numNumber=new Num(function(){return divisionRingNumber});var div=function div(dict){return dict.div};var $div=function $div(dictModuloSemiring){return div(dictModuloSemiring)};var disj=function disj(dict){return dict.disj};var $bar$bar=function $bar$bar(dictBooleanAlgebra){return disj(dictBooleanAlgebra)};var $$const=function $$const(a){return function(v){return a}};var $$void=function $$void(dictFunctor){return function(fa){return $less$dollar$greater(dictFunctor)($$const(unit))(fa)}};var conj=function conj(dict){return dict.conj};var $amp$amp=function $amp$amp(dictBooleanAlgebra){return conj(dictBooleanAlgebra)};var compose=function compose(dict){return dict.compose};var functorFn=new Functor(compose(semigroupoidFn));var $less$less$less=function $less$less$less(dictSemigroupoid){return compose(dictSemigroupoid)};var $greater$greater$greater=function $greater$greater$greater(dictSemigroupoid){return flip(compose(dictSemigroupoid))};var compare=function compare(dict){return dict.compare};var ordArray=function ordArray(dictOrd){return new Ord(function(){return eqArray(dictOrd["__superclass_Prelude.Eq_0"]())},function(xs){return function(ys){return $dollar(compare(ordInt)(0))($foreign.ordArrayImpl(function(x){return function(y){var $79=compare(dictOrd)(x)(y);if($79 instanceof EQ){return 0}if($79 instanceof LT){return 1}if($79 instanceof GT){return negate(ringInt)(1)}throw new Error("Failed pattern match at Prelude line 661, column 53 - line 664, column 57: "+[$79.constructor.name])}})(xs)(ys))}})};var $less=function $less(dictOrd){return function(a1){return function(a2){var $80=compare(dictOrd)(a1)(a2);if($80 instanceof LT){return true}return false}}};var $less$eq=function $less$eq(dictOrd){return function(a1){return function(a2){var $81=compare(dictOrd)(a1)(a2);if($81 instanceof GT){return false}return true}}};var $greater=function $greater(dictOrd){return function(a1){return function(a2){var $82=compare(dictOrd)(a1)(a2);if($82 instanceof GT){return true}return false}}};var $greater$eq=function $greater$eq(dictOrd){return function(a1){return function(a2){var $83=compare(dictOrd)(a1)(a2);if($83 instanceof LT){return false}return true}}};var categoryFn=new Category(function(){return semigroupoidFn},function(x){return x});var boundedUnit=new Bounded(unit,unit);var boundedOrdering=new Bounded(LT.value,GT.value);var boundedOrdUnit=new BoundedOrd(function(){return boundedUnit},function(){return ordUnit});var boundedOrdOrdering=new BoundedOrd(function(){return boundedOrdering},function(){return ordOrdering});var boundedInt=new Bounded($foreign.bottomInt,$foreign.topInt);var boundedOrdInt=new BoundedOrd(function(){return boundedInt},function(){return ordInt});var boundedChar=new Bounded($foreign.bottomChar,$foreign.topChar);var boundedOrdChar=new BoundedOrd(function(){return boundedChar},function(){return ordChar});var boundedBoolean=new Bounded(false,true);var boundedOrdBoolean=new BoundedOrd(function(){return boundedBoolean},function(){return ordBoolean});var bottom=function bottom(dict){return dict.bottom};var boundedFn=function boundedFn(dictBounded){return new Bounded(function(v){return bottom(dictBounded)},function(v){return top(dictBounded)})};var booleanAlgebraUnit=new BooleanAlgebra(function(){return boundedUnit},function(v){return function(v1){return unit}},function(v){return function(v1){return unit}},function(v){return unit});var booleanAlgebraFn=function booleanAlgebraFn(dictBooleanAlgebra){return new BooleanAlgebra(function(){return boundedFn(dictBooleanAlgebra["__superclass_Prelude.Bounded_0"]())},function(fx){return function(fy){return function(a){return conj(dictBooleanAlgebra)(fx(a))(fy(a))}}},function(fx){return function(fy){return function(a){return disj(dictBooleanAlgebra)(fx(a))(fy(a))}}},function(fx){return function(a){return not(dictBooleanAlgebra)(fx(a))}})};var booleanAlgebraBoolean=new BooleanAlgebra(function(){return boundedBoolean},$foreign.boolAnd,$foreign.boolOr,$foreign.boolNot);var $div$eq=function $div$eq(dictEq){return function(x){return function(y){return not(booleanAlgebraBoolean)($eq$eq(dictEq)(x)(y))}}};var bind=function bind(dict){return dict.bind};var liftM1=function liftM1(dictMonad){return function(f){return function(a){return bind(dictMonad["__superclass_Prelude.Bind_1"]())(a)(function(v){return $$return(dictMonad["__superclass_Prelude.Applicative_0"]())(f(v))})}}};var $greater$greater$eq=function $greater$greater$eq(dictBind){return bind(dictBind)};var asTypeOf=function asTypeOf(x){return function(v){return x}};var applyFn=new Apply(function(){return functorFn},function(f){return function(g){return function(x){return f(x)(g(x))}}});var bindFn=new Bind(function(){return applyFn},function(m){return function(f){return function(x){return f(m(x))(x)}}});var apply=function apply(dict){return dict.apply};var $less$times$greater=function $less$times$greater(dictApply){return apply(dictApply)};var liftA1=function liftA1(dictApplicative){return function(f){return function(a){return $less$times$greater(dictApplicative["__superclass_Prelude.Apply_0"]())(pure(dictApplicative)(f))(a)}}};var applicativeFn=new Applicative(function(){return applyFn},$$const);var monadFn=new Monad(function(){return applicativeFn},function(){return bindFn});var append=function append(dict){return dict.append};var $plus$plus=function $plus$plus(dictSemigroup){return append(dictSemigroup)};var $less$greater=function $less$greater(dictSemigroup){return append(dictSemigroup)};var semigroupFn=function semigroupFn(dictSemigroup){return new Semigroup(function(f){return function(g){return function(x){return $less$greater(dictSemigroup)(f(x))(g(x))}}})};var ap=function ap(dictMonad){return function(f){return function(a){return bind(dictMonad["__superclass_Prelude.Bind_1"]())(f)(function(v){return bind(dictMonad["__superclass_Prelude.Bind_1"]())(a)(function(v1){return $$return(dictMonad["__superclass_Prelude.Applicative_0"]())(v(v1))})})}}};var monadArray=new Monad(function(){return applicativeArray},function(){return bindArray});var bindArray=new Bind(function(){return applyArray},$foreign.arrayBind);var applyArray=new Apply(function(){return functorArray},ap(monadArray));var applicativeArray=new Applicative(function(){return applyArray},function(x){return[x]});var add=function add(dict){return dict.add};var $plus=function $plus(dictSemiring){return add(dictSemiring)};module.exports={LT:LT,GT:GT,EQ:EQ,Show:Show,BooleanAlgebra:BooleanAlgebra,BoundedOrd:BoundedOrd,Bounded:Bounded,Ord:Ord,Eq:Eq,DivisionRing:DivisionRing,Num:Num,Ring:Ring,ModuloSemiring:ModuloSemiring,Semiring:Semiring,Semigroup:Semigroup,Monad:Monad,Bind:Bind,Applicative:Applicative,Apply:Apply,Functor:Functor,Category:Category,Semigroupoid:Semigroupoid,show:show,"||":$bar$bar,"&&":$amp$amp,not:not,disj:disj,conj:conj,bottom:bottom,top:top,unsafeCompare:unsafeCompare,">=":$greater$eq,"<=":$less$eq,">":$greater,"<":$less,compare:compare,"/=":$div$eq,"==":$eq$eq,eq:eq,"-":$minus,negate:negate,sub:sub,"/":$div,mod:mod,div:div,"*":$times,"+":$plus,one:one,mul:mul,zero:zero,add:add,"++":$plus$plus,"<>":$less$greater,append:append,ap:ap,liftM1:liftM1,"return":$$return,">>=":$greater$greater$eq,bind:bind,liftA1:liftA1,pure:pure,"<*>":$less$times$greater,apply:apply,"void":$$void,"<#>":$less$hash$greater,"<$>":$less$dollar$greater,map:map,id:id,">>>":$greater$greater$greater,"<<<":$less$less$less,compose:compose,otherwise:otherwise,asTypeOf:asTypeOf,"const":$$const,flip:flip,"#":$hash,$:$dollar,unit:unit,semigroupoidFn:semigroupoidFn,categoryFn:categoryFn,functorFn:functorFn,functorArray:functorArray,applyFn:applyFn,applyArray:applyArray,applicativeFn:applicativeFn,applicativeArray:applicativeArray,bindFn:bindFn,bindArray:bindArray,monadFn:monadFn,monadArray:monadArray,semigroupString:semigroupString,semigroupUnit:semigroupUnit,semigroupFn:semigroupFn,semigroupOrdering:semigroupOrdering,semigroupArray:semigroupArray,semiringInt:semiringInt,semiringNumber:semiringNumber,semiringUnit:semiringUnit,ringInt:ringInt,ringNumber:ringNumber,ringUnit:ringUnit,moduloSemiringInt:moduloSemiringInt,moduloSemiringNumber:moduloSemiringNumber,moduloSemiringUnit:moduloSemiringUnit,divisionRingNumber:divisionRingNumber,divisionRingUnit:divisionRingUnit,numNumber:numNumber,numUnit:numUnit,eqBoolean:eqBoolean,eqInt:eqInt,eqNumber:eqNumber,eqChar:eqChar,eqString:eqString,eqUnit:eqUnit,eqArray:eqArray,eqOrdering:eqOrdering,ordBoolean:ordBoolean,ordInt:ordInt,ordNumber:ordNumber,ordString:ordString,ordChar:ordChar,ordUnit:ordUnit,ordArray:ordArray,ordOrdering:ordOrdering,boundedBoolean:boundedBoolean,boundedUnit:boundedUnit,boundedOrdering:boundedOrdering,boundedInt:boundedInt,boundedChar:boundedChar,boundedFn:boundedFn,boundedOrdBoolean:boundedOrdBoolean,boundedOrdUnit:boundedOrdUnit,boundedOrdOrdering:boundedOrdOrdering,boundedOrdInt:boundedOrdInt,boundedOrdChar:boundedOrdChar,booleanAlgebraBoolean:booleanAlgebraBoolean,booleanAlgebraUnit:booleanAlgebraUnit,booleanAlgebraFn:booleanAlgebraFn,showBoolean:showBoolean,showInt:showInt,showNumber:showNumber,showChar:showChar,showString:showString,showUnit:showUnit,showArray:showArray,showOrdering:showOrdering}},{"./foreign":145}],147:[function(require,module,exports){"use strict";var Prelude=require("Prelude");var Utls=require("Utls");var Data_Tuple=require("Data.Tuple");var Data_Array=require("Data.Array");var Data_Maybe=require("Data.Maybe");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var Data_Lens_1=require("Data.Lens");var Data_Lens_Index_1=require("Data.Lens.Index");var Data_Foldable=require("Data.Foldable");var Control_MonadPlus=require("Control.MonadPlus");var Control_Alt=require("Control.Alt");var Data_Tuple_Nested=require("Data.Tuple.Nested");var Data_String=require("Data.String");var Control_Apply=require("Control.Apply");var Data_Bifunctor=require("Data.Bifunctor");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Either=require("Data.Either");var Data_Lens_1=require("Data.Lens");var Data_Lens_Index_1=require("Data.Lens.Index");var Control_Bind=require("Control.Bind");var Data_Function=require("Data.Function");var Data_Traversable=require("Data.Traversable");var Data_Functor=require("Data.Functor");module.exports={}},{"Control.Alt":8,"Control.Apply":10,"Control.Bind":13,"Control.Monad.Eff":26,"Control.MonadPlus":37,"Data.Array":48,"Data.Bifunctor":50,"Data.Either":57,"Data.Foldable":61,"Data.Function":65,"Data.Functor":69,"Data.Lens":100,"Data.Lens.Index":78,"Data.Maybe":107,"Data.Maybe.Unsafe":106,"Data.String":130,"Data.Traversable":132,"Data.Tuple":134,"Data.Tuple.Nested":133,Prelude:146,Utls:169}],148:[function(require,module,exports){"use strict";var Preluder=require("Preluder");var Sigment=require("Sigment");var Common=require("Common");var Controls=require("Controls");var Sigment_Dom=require("Sigment.Dom");var Sigment_Dom_Props=require("Sigment.Dom.Props");var Sigment_Dom_Tweens=require("Sigment.Dom.Tweens");var Storage=require("Storage");var Prelude=require("Prelude");var Utls=require("Utls");var Data_Tuple=require("Data.Tuple");var Data_Maybe=require("Data.Maybe");var Control_Monad_Eff=require("Control.Monad.Eff");var Howler=require("Howler");var Sounds=require("Sounds");var Analytics=require("Analytics");var Ads=require("Ads");var Init=function(){function Init(value0){this.value0=value0}Init.create=function(value0){return new Init(value0)};return Init}();var Restart=function(){function Restart(value0){this.value0=value0}Restart.create=function(value0){return new Restart(value0)};return Restart}();var Levels=function(){function Levels(){}Levels.value=new Levels;return Levels}();var render=function render(action){return function(state){return function(dispatch){return function(){var stars=function stars(result){return function(){var starCount=Common.getStars(state.score)(state.level);return Controls.scoreWithStars(Prelude["++"](Prelude.semigroupArray)(Controls.centerX)([Sigment_Dom_Props.scale1(1.5),Sigment_Dom_Props.y(Prelude.ringInt)(160)]))(Utls.bool(starCount)(0)(state.isComplete))(state.score)}()};var starScore=function starScore(v){return function(){var $4=v;var $5=$4.value0;var score=$5;var $6=$4.value1;var count=$6;return Controls.scoreWithStars([Sigment_Dom_Props.scale1(.6)])(count)(score);throw new Error("Failed pattern match at Screens.GameOver line 38, column 1 - line 59, column 18: "+[$4.constructor.name])}()};var starScores=Prelude["$"](Sigment_Dom["group'"]([Sigment_Dom_Props.x(Prelude.ringInt)(1030),Sigment_Dom_Props.y(Prelude.ringInt)(390)]))(Prelude["#"](Prelude["<#>"](Prelude.functorArray)(Common.getStarScores(state.level))(starScore))(Controls.stackV(160)));var buttons=Prelude["$"](Sigment_Dom["group'"](Prelude["++"](Prelude.semigroupArray)(Controls.centerX)([Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["-"](Prelude.ringInt)(Controls.height)(170))])))(Prelude["#"]([Controls.button([])(Common.lang.menu)(Prelude["$"](dispatch)(Levels.value)),Controls.button([])(Common.lang.restart)(Prelude["$"](dispatch)(new Restart(state.level)))])(Controls.stackH(500)));var bestResults=function bestResults(result){return Prelude["$"](Sigment_Dom["group'"]([]))(Prelude["#"](Prelude["#"](result.scores)(Utls.zipWithIndex(function(x){return function(i){return Sigment_Dom.text([Sigment_Dom_Props.txt(Prelude["++"](Prelude.semigroupString)(Prelude.show(Prelude.showInt)(Prelude["+"](Prelude.semiringInt)(i)(1)))(Prelude["++"](Prelude.semigroupString)(". ")(Prelude.show(Prelude.showInt)(x)))),Controls.scoreStyle])}})))(Controls.stackV(80)))};return Controls.stage("gameover")([Sigment_Dom_Props.keyboard([Sigment_Dom_Props.newKeys("space")(Prelude["$"](dispatch)(new Restart(state.level)))])])([Prelude["$"](Controls.title)(Utls.bool(Common.lang.levelComplete)(Common.lang.gameOver)(state.isComplete)),Controls.me(stars)(state.result),starScores,Controls.me(function(x){return Sigment_Dom["group'"]([Sigment_Dom_Props.x(Prelude.ringInt)(610),Sigment_Dom_Props.y(Prelude.ringInt)(400)])([bestResults(x)])})(state.result),buttons])}()}}};var newModel=function newModel(level){return function(isComplete){return function(score){return{level:level,isComplete:isComplete,score:score,result:Data_Maybe.Nothing.value}}}};var init=function init(state){return Prelude.bind(Control_Monad_Eff.bindEff)(Howler.play(function(){var $7=state.isComplete;if($7){return Sounds.complete}if(!$7){return Sounds.gameover}throw new Error("Failed pattern match at Screens.GameOver line 24, column 16 - line 24, column 77: "+[$7.constructor.name])}()))(function(__unused){return Prelude.bind(Control_Monad_Eff.bindEff)(Analytics.event(Utls.bool("LevelComplete")("GameOver")(state.isComplete))(state.level.id)(state.level.name)(state.score))(function(__unused){return Prelude.bind(Control_Monad_Eff.bindEff)(Storage.addBestResult(state.level.id)(state.score)(state.isComplete))(function(__unused){return Prelude.bind(Control_Monad_Eff.bindEff)(Storage.getResult(state.level.id))(function(v){return function(){var $8=v;var result=$8;return Prelude.bind(Control_Monad_Eff.bindEff)(Ads.show)(function(__unused){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(function(){var $9={};for(var $10 in state){if(state.hasOwnProperty($10)){$9[$10]=state[$10]}}$9.result=result;return $9}())});throw new Error("Failed pattern match at Screens.GameOver line 23, column 14 - line 31, column 1: "+[$8.constructor.name])}()})})})})};var $$eval=function $$eval(v){return function(state){return function(v1){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(state)}}};var component=Sigment.newComponent(init)($$eval)(render);module.exports={Init:Init,Restart:Restart,Levels:Levels,render:render,eval:$$eval,component:component,init:init,newModel:newModel}},{Ads:2,Analytics:4,Common:7,"Control.Monad.Eff":26,Controls:40,"Data.Maybe":107,"Data.Tuple":134,Howler:139,Prelude:146,Preluder:147,Sigment:159,"Sigment.Dom":157,"Sigment.Dom.Props":153,"Sigment.Dom.Tweens":155,Sounds:160,Storage:162,Utls:169}],149:[function(require,module,exports){"use strict";var Preluder=require("Preluder");var Sigment=require("Sigment");var Common=require("Common");var Controls=require("Controls");var Utils=require("Utils");var Storage=require("Storage");var Control_Monad=require("Control.Monad");var Sigment_Dom=require("Sigment.Dom");var Sigment_Dom_Props=require("Sigment.Dom.Props");var Sigment_Dom_Tweens=require("Sigment.Dom.Tweens");var Prelude=require("Prelude");var Utls=require("Utls");var Cnst=require("Cnst");var Data_Maybe=require("Data.Maybe");var Sprites=require("Sprites");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Array=require("Data.Array");var Data_Traversable=require("Data.Traversable");var Select=function(){function Select(value0){this.value0=value0}Select.create=function(value0){return new Select(value0)};return Select}();var Click=function(){function Click(value0){this.value0=value0}Click.create=function(value0){return new Click(value0)};return Click}();var OpenUrl=function(){function OpenUrl(value0){this.value0=value0}OpenUrl.create=function(value0){return new OpenUrl(value0)};return OpenUrl}();var unlockPerLevel=2;var tutorials=[Prelude["++"](Prelude.semigroupString)(Common.lang.tLong)(Prelude["++"](Prelude.semigroupString)(" ")(Utls.bool(Common.lang.controlMobile)(Common.lang.controlWeb)(Cnst.isMobile))),Common.lang.tNback,Common.lang.tShort,Common.lang.tDouble,Common.lang.tSearch];var starsToUnlock=function starsToUnlock(index){return function(){var $5=Prelude[">="](Prelude.ordInt)(index)(Cnst.firstLockIndex);if($5){return Prelude["*"](Prelude.semiringInt)(unlockPerLevel)(Prelude["-"](Prelude.ringInt)(Prelude["+"](Prelude.semiringInt)(1)(index))(Cnst.firstLockIndex))}if(!$5){return 0}throw new Error("Failed pattern match at Screens.Levels line 40, column 23 - line 43, column 1: "+[$5.constructor.name])}()};var render=function render(action){return function(state){return function(dispatch){return function(){var version=Controls.txt(Cnst.version)([Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(Prelude["-"](Prelude.ringInt)(Controls.width)(120)),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["-"](Prelude.ringInt)(Controls.height)(50))]);var tutorial=Prelude["#"](state.selectedLevel)(Data_Maybe.maybe(Sigment_Dom.empty)(function(x){return Sigment_Dom["group'"](Prelude["++"](Prelude.semigroupArray)(Controls.centerXY)([Sigment_Dom_Tweens.creating([Sigment_Dom_Tweens.from([Sigment_Dom_Props.scaleZero]),Sigment_Dom_Tweens.duration(500),Sigment_Dom_Tweens.easingExponential.out])]))([Sigment_Dom.sprite([Sigment_Dom_Props.src(Sprites.dialog)]),Sigment_Dom.text([Sigment_Dom_Props.txt(Prelude["#"](x.tutorial)(Data_Maybe_Unsafe.fromJust)),Controls.tutorialStyle,Sigment_Dom_Props.x(Prelude.ringInt)(50),Sigment_Dom_Props.y(Prelude.ringInt)(50)]),Controls.button([Sigment_Dom_Props.x(Prelude.ringInt)(275),Sigment_Dom_Props.y(Prelude.ringInt)(425)])(Common.lang.start)(dispatch(new Select(x.level)))])}));var renderButton=function renderButton(lvl){return function(){var resultBlock=Prelude["#"](Prelude["<#>"](Data_Maybe.functorMaybe)(lvl.result)(function(r){return Controls.renderStars2([Sigment_Dom_Props.x(Prelude.ringInt)(410),Sigment_Dom_Props.y(Prelude.ringInt)(7)])(r.stars)(false)}))(Data_Maybe.fromMaybe(Sigment_Dom.empty));return function(){var $6=lvl.unlocked;if($6){return Sigment_Dom.group([Controls.button([])(Utls.unwords([Prelude["#"](lvl.level)(function(v){return v.name})]))(Prelude["$"](dispatch)(new Click(lvl))),resultBlock])}if(!$6){return Controls.button3([])(Controls.renderStars([])(lvl.starCount)(Controls.buttonStarStyle))(Data_Maybe.Nothing.value)}throw new Error("Failed pattern match at Screens.Levels line 83, column 7 - line 85, column 7: "+[$6.constructor.name])}()}()};var cols=Prelude["#"](state.levels)(Utils.splitEvery(6));var lvls=Prelude["$"](Sigment_Dom["group'"](Prelude["++"](Prelude.semigroupArray)(Controls.centerX)([Sigment_Dom_Props.y(Prelude.ringInt)(200)])))(Prelude["#"](Prelude["<#>"](Prelude.functorArray)(cols)(Prelude[">>>"](Prelude.semigroupoidFn)(Prelude.map(Prelude.functorArray)(renderButton))(Prelude[">>>"](Prelude.semigroupoidFn)(Controls.stackV(140))(Sigment_Dom.group))))(Controls.stackH(600)));var be=Controls.txt("www.brainexer.com")([Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(10),Prelude["$"](Sigment_Dom_Props.y(Prelude.ringInt))(Prelude["-"](Prelude.ringInt)(Controls.height)(50)),Prelude["$"](Sigment_Dom_Props.onClick)(Prelude["$"](dispatch)(new OpenUrl("http://www.brainexer.com")))]);return Prelude["$"](Controls.stage("levels")([]))([Controls.title(Common.lang.convolution),Controls.renderStars([Sigment_Dom_Props.y(Prelude.ringInt)(55),Sigment_Dom_Props.x(Prelude.ringInt)(1455)])(state.starCount)(Controls.scoreStyle),function(){var $7=Cnst.isMobile;if($7){return Sigment_Dom.empty}if(!$7){return Sigment_Dom.sprite([Sigment_Dom_Props.scale1(.9),Prelude["$"](Sigment_Dom_Props.x(Prelude.ringInt))(20),Sigment_Dom_Props.y(Prelude.ringInt)(40),Sigment_Dom_Props.src(Sprites.android),Sigment_Dom_Props.onClick(Prelude["$"](dispatch)(new OpenUrl(Cnst.androidUrl)))])}throw new Error("Failed pattern match at Screens.Levels line 64, column 5 - line 64, column 152: "+[$7.constructor.name])}(),version,function(){var $8=Cnst.isMobile;if($8){return Sigment_Dom.empty}if(!$8){return be}throw new Error("Failed pattern match at Screens.Levels line 66, column 5 - line 66, column 42: "+[$8.constructor.name])}(),lvls,tutorial])}()}}};var newLevelInfo=function newLevelInfo(level){return function(result){return function(starCount){return function(unlocked){return function(tutorial){return{level:level,result:result,starCount:starCount,unlocked:unlocked,tutorial:tutorial}}}}}};var init=Prelude.bind(Control_Monad_Eff.bindEff)(Storage.allStarCount)(function(v){return function(){var $9=v;var stars=$9;return Prelude.bind(Control_Monad_Eff.bindEff)(Prelude["#"](Prelude["#"](Common.levels)(Utls.zipWithIndex(function(lvl){return function(i){return Prelude["<#>"](Control_Monad_Eff.functorEff)(Storage.getResult(lvl.id))(function(x){return function(){var starCount=starsToUnlock(i);return newLevelInfo(lvl)(x)(starCount)(Prelude[">="](Prelude.ordInt)(stars)(starCount))(Data_Array["!!"](tutorials)(i))}()})}})))(Data_Traversable.sequence(Data_Traversable.traversableArray)(Control_Monad_Eff.applicativeEff)))(function(v1){return function(){var $10=v1;var x=$10;return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))({levels:x,attacks:[],starCount:stars,selectedLevel:Data_Maybe.Nothing.value});throw new Error("Failed pattern match at Screens.Levels line 43, column 8 - line 50, column 1: "+[$10.constructor.name])}()});throw new Error("Failed pattern match at Screens.Levels line 43, column 8 - line 50, column 1: "+[$9.constructor.name])}()});var $$eval=function $$eval(v){return function(state){return function(v1){return function(){var $11=v;var $12=state;var $13=v1;if($11 instanceof Click){var $16=$11.value0;var levelInfo=$16;var state1=$12;var dispatch=$13;return Prelude.bind(Control_Monad_Eff.bindEff)(Control_Monad.when(Control_Monad_Eff.monadEff)(Data_Maybe.isNothing(levelInfo.tutorial))(Prelude["$"](dispatch)(new Select(levelInfo.level))))(function(__unused){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(function(){var $14={};for(var $15 in state1){if(state1.hasOwnProperty($15)){$14[$15]=state1[$15]}}$14.selectedLevel=Prelude["<#>"](Data_Maybe.functorMaybe)(levelInfo.tutorial)(Prelude["const"](levelInfo));return $14}())})}if($11 instanceof OpenUrl){var $17=$11.value0;var url=$17;var state1=$12;return Prelude.bind(Control_Monad_Eff.bindEff)(Cnst.openUrl(url))(function(__unused){return Prelude.pure(Control_Monad_Eff.applicativeEff)(state1)})}var state1=$12;return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(state1);throw new Error("Failed pattern match at Screens.Levels line 51, column 1 - line 54, column 1: "+[$11.constructor.name,$12.constructor.name,$13.constructor.name])}()}}};var component=Sigment.newComponent(Prelude["const"](init))($$eval)(render);module.exports={Select:Select,Click:Click,OpenUrl:OpenUrl,render:render,eval:$$eval,init:init,starsToUnlock:starsToUnlock,unlockPerLevel:unlockPerLevel,component:component,newLevelInfo:newLevelInfo,tutorials:tutorials}},{Cnst:6,Common:7,"Control.Monad":38,"Control.Monad.Eff":26,Controls:40,"Data.Array":48,"Data.Maybe":107,"Data.Maybe.Unsafe":106,
"Data.Traversable":132,Prelude:146,Preluder:147,Sigment:159,"Sigment.Dom":157,"Sigment.Dom.Props":153,"Sigment.Dom.Tweens":155,Sprites:161,Storage:162,Utils:167,Utls:169}],150:[function(require,module,exports){var execActionF=null;var renderer=null;var stage=null;var config=null;var mapFunction=null;function initSigment(pExecAction,pMapFunction,pConfig,cb){mapFunction=pMapFunction;config=pConfig;execActionF=pExecAction;renderer=PIXI.autoDetectRenderer(config.width,config.height,{backgroundColor:parseInt("0x"+pConfig.backgroundColor)});stage=virtualPixi.api.createElement("group");var container=config.containerId?document.getElementById(config.containerId):document.body;container.appendChild(renderer.view);if(config.containerId){resize(container.clientWidth,container.clientHeight)}else{resize(window.innerWidth,window.innerHeight)}if(config.sprites.length>0){PIXI.loader.add(config.sprites).load(function(){cb();startRender()})}else{cb();startRender()}}function resize(width,height){var ratio=config.width/config.height;var x=0;var y=0;var w=0;var h=0;if(width/height>=ratio){w=height*ratio;x=(width-w)/2;h=height}else{w=width;h=width/ratio;y=(height-h)/2}renderer.view.style.width=w+"px";renderer.view.style.height=h+"px";renderer.view.style.left=x+"px";renderer.view.style.top=y+"px";renderer.view.style.position="relative"}var currentVNode=null;function updateStage(vNode){var vn=virtualPixi.h("group",{},[vNode]);if(currentVNode){currentVNode=virtualPixi.patch(currentVNode,vn)}else{currentVNode=virtualPixi.patch(stage,vn)}}function startRender(){requestAnimationFrame(render)}var prevTimestamp=null;function render(timestamp){requestAnimationFrame(render);if(!prevTimestamp)prevTimestamp=timestamp;var interval=timestamp-prevTimestamp;prevTimestamp=timestamp;mapFunction(function(x){execActionF(x(interval))()})(config.frameAction);TWEEN.update(timestamp);renderer.render(stage)}exports._updateStage=updateStage;exports._initSigment=initSigment;exports._requestAnimationFrame=requestAnimationFrame},{}],151:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Control_Monad_Eff=require("Control.Monad.Eff");var Prelude=require("Prelude");var Sigment_Dom=require("Sigment.Dom");var Data_Function=require("Data.Function");var Data_Function_Eff=require("Data.Function.Eff");var Data_Maybe=require("Data.Maybe");var updateStage=Data_Function_Eff.runEffFn1($foreign._updateStage);var requestAnimationFrame=Data_Function_Eff.runEffFn1($foreign._requestAnimationFrame);var initSigment=Data_Function_Eff.runEffFn4($foreign._initSigment);module.exports={requestAnimationFrame:requestAnimationFrame,updateStage:updateStage,initSigment:initSigment,_requestAnimationFrame:$foreign._requestAnimationFrame,_updateStage:$foreign._updateStage,_initSigment:$foreign._initSigment}},{"./foreign":150,"Control.Monad.Eff":26,"Data.Function":65,"Data.Function.Eff":63,"Data.Maybe":107,Prelude:146,"Sigment.Dom":157}],152:[function(require,module,exports){function createProp(key,value){return{key:key,value:value}}function newRectangle(x,y,width,height){return new PIXI.Rectangle(x,y,width,height)}function newPoint(x,y){return new PIXI.Point(x,y)}exports._createProp=createProp;exports._newRectangle=newRectangle;exports._newPoint=newPoint;exports.none={}},{}],153:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Function=require("Data.Function");var newRectangle=Data_Function.runFn4($foreign._newRectangle);var newPoint=Data_Function.runFn2($foreign._newPoint);var newPoint1=function newPoint1(x1){return newPoint(x1)(x1)};var newKeys=function newKeys(keys){return function(callback){return{keys:keys,callback:callback,action:"keydown"}}};var createProp=Data_Function.runFn2($foreign._createProp);var height=function height(dictRing){return createProp("height")};var hitArea=createProp("hitArea");var key=createProp("key");var keyboard=createProp("keyboard");var onClick=createProp("on-click");var onMouseDown=createProp("on-mousedown");var onMouseOrTouchStart=createProp("on-mouseortouchstart");var onTouchStart=createProp("on-touchstart");var pivot=createProp("pivot");var pivotAnchor=createProp("pivotAnchor");var pivotCenter=pivotAnchor(newPoint1(.5));var pivotCenterX=pivotAnchor(newPoint(.5)(0));var pivotCenterY=pivotAnchor(newPoint(0)(.5));var rotation=createProp("rotation");var scale=createProp("scale");var scale1=function scale1(x1){return scale(newPoint1(x1))};var scaleOne=scale1(1);var scaleZero=scale1(0);var scale2=function scale2(x1){return function(y1){return scale(newPoint(x1)(y1))}};var src=createProp("src");var style=createProp("style");var txt=createProp("text");var width=function width(dictRing){return createProp("width")};var x=function x(dictRing){return createProp("x")};var y=function y(dictRing){return createProp("y")};var cacheAsBitmap=createProp("cacheAsBitmap");var anchor=createProp("anchor");var anchorCenter=anchor(newPoint1(.5));var alpha=createProp("alpha");module.exports={onMouseOrTouchStart:onMouseOrTouchStart,onTouchStart:onTouchStart,onMouseDown:onMouseDown,onClick:onClick,cacheAsBitmap:cacheAsBitmap,src:src,key:key,style:style,txt:txt,rotation:rotation,alpha:alpha,pivotCenterY:pivotCenterY,pivotCenterX:pivotCenterX,pivotCenter:pivotCenter,pivotAnchor:pivotAnchor,pivot:pivot,anchorCenter:anchorCenter,anchor:anchor,hitArea:hitArea,scale2:scale2,scale1:scale1,scaleZero:scaleZero,scaleOne:scaleOne,scale:scale,keyboard:keyboard,newKeys:newKeys,height:height,width:width,y:y,x:x,newPoint1:newPoint1,newPoint:newPoint,newRectangle:newRectangle,createProp:createProp,_newPoint:$foreign._newPoint,_newRectangle:$foreign._newRectangle,_createProp:$foreign._createProp,none:$foreign.none}},{"./foreign":152,"Control.Monad.Eff":26,"Data.Function":65,Prelude:146}],154:[function(require,module,exports){function lowerFirstChar(string){return string.charAt(0).toLowerCase()+string.slice(1)}function convertEasing(){var result={};for(var key in TWEEN.Easing){var easing=TWEEN.Easing[key];result[lowerFirstChar(key)]={"in":easing.In,out:easing.Out,inOut:easing.InOut}}return result}exports.types=convertEasing()},{}],155:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Sigment_Dom_Props=require("Sigment.Dom.Props");var Control_Monad_Eff=require("Control.Monad.Eff");var Prelude=require("Prelude");var yoyo=Sigment_Dom_Props.createProp("yoyo");var updating=Sigment_Dom_Props.createProp("tween-update");var to=Sigment_Dom_Props.createProp("to");var repeat=Sigment_Dom_Props.createProp("repeat");var removing=Sigment_Dom_Props.createProp("tween-remove");var onComplete=Sigment_Dom_Props.createProp("onComplete");var map=function map(f){return function(x){return{"in":f(x["in"]),out:f(x.out),inOut:f(x.inOut)}}};var from=Sigment_Dom_Props.createProp("from");var easing=Sigment_Dom_Props.createProp("easing");var easingBack=map(easing)($foreign.types.back);var easingBounce=map(easing)($foreign.types.bounce);var easingCircular=map(easing)($foreign.types.circular);var easingCubic=map(easing)($foreign.types.cubic);var easingElastic=map(easing)($foreign.types.elastic);var easingExponential=map(easing)($foreign.types.exponential);var easingLinear=map(easing)($foreign.types.linear);var easingQuadratic=map(easing)($foreign.types.quadratic);var easingQuartic=map(easing)($foreign.types.quartic);var easingQuintic=map(easing)($foreign.types.quintic);var easingSinusoidal=map(easing)($foreign.types.sinusoidal);var duration=Sigment_Dom_Props.createProp("duration");var creating=Sigment_Dom_Props.createProp("tween-create");module.exports={creating:creating,removing:removing,updating:updating,onComplete:onComplete,easingBounce:easingBounce,easingBack:easingBack,easingElastic:easingElastic,easingCircular:easingCircular,easingExponential:easingExponential,easingSinusoidal:easingSinusoidal,easingQuintic:easingQuintic,easingQuartic:easingQuartic,easingCubic:easingCubic,easingQuadratic:easingQuadratic,easingLinear:easingLinear,easing:easing,map:map,repeat:repeat,yoyo:yoyo,duration:duration,from:from,to:to,types:$foreign.types}},{"./foreign":154,"Control.Monad.Eff":26,Prelude:146,"Sigment.Dom.Props":153}],156:[function(require,module,exports){var vp=virtualPixi;function merge(props){var result={};if(props){props.forEach(function(x){result[x.key]=x.value})}return result}function createTween(value){var tween=merge(value);tween.from=merge(tween.from);tween.to=merge(tween.to);return tween}var dataKeys=["props","on","tween","keyboard"];var tweenPrefix="tween-";var onPrefix="on-";function convertProps(props){var o={};dataKeys.forEach(function(x){return o[x]={}});props.forEach(function(x){var value=x.value;var key=x.key;if(!key){}else if(key=="key"){o.key=value}else if(key.indexOf(tweenPrefix)==0){var tweenKey=key.replace(tweenPrefix,"");o.tween[tweenKey]=createTween(value)}else if(key.indexOf(onPrefix)==0){var onKey=key.replace(onPrefix,"");if(onKey=="mouseortouchstart"){o.on["touchstart"]=value;o.on["mousedown"]=value}else{o.on[onKey]=value}}else if(key=="keyboard"){value.forEach(function(x){o.keyboard[x.keys]=x})}else{o.props[key]=value}});return o}function createNode(name,props,children){var data=convertProps(props);var s=vp.h(name,data,children.filter(function(x){return x!=null}));return s}function thunk(name,render,state){return vp.thunk(name,render,state)}function thunk4(name,render,state,compare){return vp.thunk(name,render,state,function(x,y){return compare(x)(y)})}function addProps(newData,oldData){dataKeys.forEach(function(dataKey){var newProps=newData[dataKey];var oldProps=oldData[dataKey];for(var key in oldProps){if(!newProps[key]){newProps[key]=oldProps[key]}}})}function setProps(props,node){var data=convertProps(props);addProps(data,node.data);return vp.h(node.sel,data,node.children)}exports._createNode=createNode;exports._thunk=thunk;exports._thunk4=thunk4;exports._setProps=setProps;exports.empty=null},{}],157:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Sigment_Dom_Props=require("Sigment.Dom.Props");var Prelude=require("Prelude");var Data_Function=require("Data.Function");var thunk4=Data_Function.runFn4($foreign._thunk4);var thunk=Data_Function.runFn3($foreign._thunk);var setProps=Data_Function.runFn2($foreign._setProps);var permanent=function permanent(name){return function(node){return thunk(name)(function(v){return function(){var $1=v;return node;throw new Error("Failed pattern match at Sigment.Dom line 32, column 35 - line 32, column 45: "+[$1.constructor.name])}()})(true)}};var createNode=Data_Function.runFn3($foreign._createNode);var group$prime=createNode("group");var group=group$prime([]);var sprite$prime=createNode("sprite");var sprite=function sprite(props){return sprite$prime(props)([])};var text$prime=createNode("text");var text=function text(props){return text$prime(props)([])};module.exports={permanent:permanent,setProps:setProps,thunk4:thunk4,thunk:thunk,sprite:sprite,"sprite'":sprite$prime,text:text,"text'":text$prime,group:group,"group'":group$prime,createNode:createNode,empty:$foreign.empty,_setProps:$foreign._setProps,_thunk4:$foreign._thunk4,_thunk:$foreign._thunk,_createNode:$foreign._createNode}},{"./foreign":156,"Data.Function":65,Prelude:146,"Sigment.Dom.Props":153}],158:[function(require,module,exports){"use strict";var Sigment_Dom=require("Sigment.Dom");var Sigment_Dom_Props=require("Sigment.Dom.Props");var Control_Monad_Eff_Ref=require("Control.Monad.Eff.Ref");var Control_Monad_Eff=require("Control.Monad.Eff");var Sigment_Core=require("Sigment.Core");var Data_Tuple=require("Data.Tuple");var Data_Maybe=require("Data.Maybe");var Data_Lens=require("Data.Lens");var Data_Lens_Index=require("Data.Lens.Index");var Prelude=require("Prelude");var Data_Profunctor_Choice=require("Data.Profunctor.Choice");var Data_Profunctor_Strong=require("Data.Profunctor.Strong");var Data_Either=require("Data.Either");var Data_Map=require("Data.Map");var Data_Array=require("Data.Array");var Data_Array_Unsafe=require("Data.Array.Unsafe");var Data_Exists=require("Data.Exists");var Sigment=require("Sigment");var toER=function toER(meta){return{eval:meta["eval"],render:meta.render}};var renderSubcomponents=function renderSubcomponents(subcomponents){return function(action){return function(state){return function(dispatch){return function(){var node=Data_Array_Unsafe.head(subcomponents).render(action)(state)(dispatch);return function(){var $6=Data_Array["null"](subcomponents);if($6){return Sigment_Dom.empty}if(!$6){return Data_Maybe["fromMaybe'"](function(v){return function(){var $7=v;return renderSubcomponents(Data_Array_Unsafe.tail(subcomponents))(action)(state)(dispatch);throw new Error("Failed pattern match at Sigment.Subcomponents line 103, column 17 - line 103, column 87: "+[$7.constructor.name])}()})(node)}throw new Error("Failed pattern match at Sigment.Subcomponents line 101, column 3 - line 104, column 5: "+[$6.constructor.name])}()}()}}}};var renderSubcomponentWithKey=function renderSubcomponentWithKey(key){return function(subcomponent){return function(action){return function(state){return function(dispatch){return function(){var render=subcomponent.component.render;var acc=subcomponent.accessor;return Prelude.bind(Data_Maybe.bindMaybe)(acc.stateGet(key)(state))(function(v){return function(){var $8=v;var st=$8;return Prelude["$"](Prelude.pure(Data_Maybe.applicativeMaybe))(render(Prelude[">>="](Data_Maybe.bindMaybe)(action)(function(x){return Prelude["#"](x)(acc.actionUnwrap)}))(st)(function(x){return Prelude["#"](Prelude["#"](x)(acc.actionWrap))(dispatch)}));throw new Error("Failed pattern match at Sigment.Subcomponents line 112, column 68 - line 115, column 3: "+[$8.constructor.name])}()})}()}}}}};var renderSubcomponent=renderSubcomponentWithKey(Prelude.unit);var newSubcomponent3=function newSubcomponent3(init){return function($$eval){return function(render){return{init:init,eval:$$eval,render:render}}}};var newAccessor=function newAccessor(actionUnwrap){return function(actionWrap){return function(stateGet){return function(stateSet){return{actionUnwrap:actionUnwrap,actionWrap:actionWrap,stateGet:stateGet,stateSet:stateSet}}}}};var initSubcomponent=function initSubcomponent(initParam){return function(subcomponent){return function(){var acc=subcomponent.accessor;return Prelude.bind(Control_Monad_Eff.bindEff)(subcomponent.component.init(initParam))(function(v){return function(){var $9=v;var initState=$9;return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(acc.stateSet(Prelude.unit)(Data_Maybe.Nothing.value)(initState));throw new Error("Failed pattern match at Sigment.Subcomponents line 71, column 43 - line 74, column 3: "+[$9.constructor.name])}()})}()}};var evalSubcomponents=function evalSubcomponents(subcomponents){return function(action){return function(state){return function(dispatch){return Data_Array.foldM(Control_Monad_Eff.monadEff)(function(acc){return function(subcomponent){return subcomponent["eval"](action)(acc)(dispatch)}})(state)(subcomponents)}}}};var evalSubcomponentWithKey=function evalSubcomponentWithKey(key){return function(subcomponent){return function(action){return function(state){return function(dispatch){return function(){var acc=subcomponent.accessor;return Data_Maybe.fromMaybe(Prelude.pure(Control_Monad_Eff.applicativeEff)(state))(Prelude.bind(Data_Maybe.bindMaybe)(acc.actionUnwrap(action))(function(v){return function(){var $10=v;var act=$10;return Prelude.bind(Data_Maybe.bindMaybe)(acc.stateGet(key)(state))(function(v1){return function(){var $11=v1;var st=$11;return Prelude.pure(Data_Maybe.applicativeMaybe)(Prelude.bind(Control_Monad_Eff.bindEff)(subcomponent.component["eval"](act)(st)(function(x){return Prelude["#"](Prelude["#"](x)(acc.actionWrap))(dispatch)}))(function(v2){return function(){var $12=v2;var x=$12;return Prelude.pure(Control_Monad_Eff.applicativeEff)(acc.stateSet(key)(new Data_Maybe.Just(state))(x));throw new Error("Failed pattern match at Sigment.Subcomponents line 93, column 3 - line 96, column 3: "+[$12.constructor.name])}()}));throw new Error("Failed pattern match at Sigment.Subcomponents line 90, column 66 - line 96, column 3: "+[$11.constructor.name])}()});throw new Error("Failed pattern match at Sigment.Subcomponents line 90, column 66 - line 96, column 3: "+[$10.constructor.name])}()}))}()}}}}};var evalSubcomponent=evalSubcomponentWithKey(Prelude.unit);var newSubcomponent=function newSubcomponent(component){return function(accessor){return function(){var subData={component:component,accessor:accessor};return newSubcomponent3(function(i){return initSubcomponent(i)(subData)})(evalSubcomponent(subData))(renderSubcomponent(subData))}()}};module.exports={renderSubcomponentWithKey:renderSubcomponentWithKey,renderSubcomponent:renderSubcomponent,renderSubcomponents:renderSubcomponents,evalSubcomponentWithKey:evalSubcomponentWithKey,evalSubcomponent:evalSubcomponent,evalSubcomponents:evalSubcomponents,initSubcomponent:initSubcomponent,newSubcomponent:newSubcomponent,newSubcomponent3:newSubcomponent3,toER:toER,newAccessor:newAccessor}},{"Control.Monad.Eff":26,"Control.Monad.Eff.Ref":22,"Data.Array":48,"Data.Array.Unsafe":46,"Data.Either":57,"Data.Exists":59,"Data.Lens":100,"Data.Lens.Index":78,"Data.Map":102,"Data.Maybe":107,"Data.Profunctor.Choice":115,"Data.Profunctor.Strong":120,"Data.Tuple":134,Prelude:146,Sigment:159,"Sigment.Core":151,"Sigment.Dom":157,"Sigment.Dom.Props":153}],159:[function(require,module,exports){"use strict";var Sigment_Dom=require("Sigment.Dom");var Control_Monad_Eff_Ref=require("Control.Monad.Eff.Ref");var Control_Monad_Eff=require("Control.Monad.Eff");var Sigment_Core=require("Sigment.Core");var Data_Maybe=require("Data.Maybe");var Preluder=require("Preluder");var Prelude=require("Prelude");var updateStateRef=function updateStateRef(stateRef){return function($$eval){return function(render){return function(action){return Prelude.bind(Control_Monad_Eff.bindEff)(Control_Monad_Eff_Ref.readRef(stateRef))(function(v){return function(){var $8=v;var oldState=$8;return function(){var dispatch=updateStateRef(stateRef)($$eval)(render);return function(){var dispatchNextFrame=function dispatchNextFrame(a){return Sigment_Core.requestAnimationFrame(dispatch(a))};return Prelude.bind(Control_Monad_Eff.bindEff)($$eval(action)(oldState)(dispatchNextFrame))(function(v1){return function(){var $9=v1;var result=$9;return Prelude.bind(Control_Monad_Eff.bindEff)(Control_Monad_Eff_Ref.writeRef(stateRef)(result))(function(__unused){return Prelude.bind(Control_Monad_Eff.bindEff)(Control_Monad_Eff_Ref.readRef(stateRef))(function(v2){return function(){var $10=v2;var newState=$10;return function(){var vNode=render(new Data_Maybe.Just(action))(newState)(dispatch);return Sigment_Core.updateStage(vNode)}();throw new Error("Failed pattern match at Sigment line 50, column 46 - line 58, column 15: "+[$10.constructor.name])}()})});throw new Error("Failed pattern match at Sigment line 50, column 46 - line 58, column 15: "+[$9.constructor.name])}()})}()}();throw new Error("Failed pattern match at Sigment line 50, column 46 - line 58, column 15: "+[$8.constructor.name])}()})}}}};var pureEval=function pureEval($$eval){return function(a){return function(s){return function(d){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))($$eval(a)(s))}}}};var newComponent=function newComponent(v){return function(v1){return function(v2){return{init:v,eval:v1,render:v2}}}};var init=function init(config){return function(initParam){return function(component){return Prelude.bind(Control_Monad_Eff.bindEff)(component.init(initParam))(function(v){return function(){var $11=v;var initState=$11;return Prelude.bind(Control_Monad_Eff.bindEff)(Control_Monad_Eff_Ref.newRef(initState))(function(v1){return function(){var $12=v1;var stateRef=$12;return function(){var dispatch=updateStateRef(stateRef)(component["eval"])(component.render);return Prelude.bind(Control_Monad_Eff.bindEff)(Sigment_Core.initSigment(dispatch)(Prelude.map(Data_Maybe.functorMaybe))(config)(Prelude["#"](config.initAction)(Data_Maybe.maybe(Sigment_Core.updateStage(component.render(Data_Maybe.Nothing.value)(initState)(dispatch)))(dispatch))))(function(__unused){return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(dispatch)})}();throw new Error("Failed pattern match at Sigment line 41, column 35 - line 49, column 1: "+[$12.constructor.name])}()});throw new Error("Failed pattern match at Sigment line 41, column 35 - line 49, column 1: "+[$11.constructor.name])}()})}}};var defConfig={sprites:[],width:800,height:600,frameAction:Data_Maybe.Nothing.value,containerId:"",backgroundColor:"000000",initAction:Data_Maybe.Nothing.value};module.exports={updateStateRef:updateStateRef,init:init,defConfig:defConfig,newComponent:newComponent,pureEval:pureEval}},{"Control.Monad.Eff":26,"Control.Monad.Eff.Ref":22,"Data.Maybe":107,Prelude:146,Preluder:147,"Sigment.Core":151,"Sigment.Dom":157}],160:[function(require,module,exports){"use strict";var Preluder=require("Preluder");var Prelude=require("Prelude");var root=function root(x){return Prelude["++"](Prelude.semigroupString)("convolution/sounds/")(Prelude["++"](Prelude.semigroupString)(x)(".mp3"))};var turn=root("turn");var right=root("right");var gameover=root("gameover");var error=root("error");var complete=root("complete");var all=[turn,right,error,gameover,complete];module.exports={all:all,turn:turn,complete:complete,gameover:gameover,error:error,right:right,root:root}},{Prelude:146,Preluder:147}],161:[function(require,module,exports){"use strict";var Preluder=require("Preluder");var Prelude=require("Prelude");var Utls=require("Utls");var Data_Array=require("Data.Array");var Cnst=require("Cnst");var root=function root(x){return Prelude["++"](Prelude.semigroupString)("convolution/sprites/")(Prelude["++"](Prelude.semigroupString)(x)(".png"))};var snake=root("snake");var star=root("star");var starOut=root("starout");var heart=root("heart");var dialog=root("dialog");var cell=root("cell");var byId=function byId(name){return function(id){return Prelude["$"](root)(Prelude["++"](Prelude.semigroupString)(name)(Prelude["++"](Prelude.semigroupString)("/")(Prelude["++"](Prelude.semigroupString)(name)(Prelude["++"](Prelude.semigroupString)("_")(Prelude.show(Prelude.showInt)(id))))))}};var hidding=function hidding(b){return byId("hidding")(Utls.bool(1)(0)(b))};var item=byId("item");var itemList=Prelude["<#>"](Prelude.functorArray)(Data_Array[".."](1)(Cnst.itemCount))(item);var button=root("button");var back=byId("back");var backList=Prelude["<#>"](Prelude.functorArray)(Data_Array[".."](0)(2))(back);var atlas=true;var android=root("android");var all=function(){var $0=atlas;if($0){return["convolution/atlas.json"]}if(!$0){return Prelude["++"](Prelude.semigroupArray)([hidding(true),hidding(false),android,dialog,heart,cell,star,starOut,button,snake])(Prelude["++"](Prelude.semigroupArray)(itemList)(backList))}throw new Error("Failed pattern match at Sprites line 26, column 3 - line 27, column 113: "+[$0.constructor.name])}();module.exports={all:all,backList:backList,itemList:itemList,hidding:hidding,item:item,back:back,snake:snake,cell:cell,button:button,starOut:starOut,dialog:dialog,android:android,star:star,heart:heart,byId:byId,root:root,atlas:atlas}},{Cnst:6,"Data.Array":48,Prelude:146,Preluder:147,Utls:169}],162:[function(require,module,exports){"use strict";var Preluder=require("Preluder");var LocalStorage=require("LocalStorage");var Utils=require("Utils");var Common=require("Common");var Prelude=require("Prelude");var Control_Monad_Eff=require("Control.Monad.Eff");var Data_Maybe=require("Data.Maybe");var Data_Array=require("Data.Array");var Data_Foldable=require("Data.Foldable");var newLevelResult=function newLevelResult(id){return function(scores){return function(stars){return{id:id,scores:scores,stars:stars}}}};var maxScoreCount=5;var levelResultKey="ConvolutionLevelResultKey";var allResults=function(){var levelIds=Prelude["<#>"](Prelude.functorArray)(Common.levels)(function(v){return v.id});return Prelude["<#>"](Control_Monad_Eff.functorEff)(Prelude["<#>"](Control_Monad_Eff.functorEff)(LocalStorage.getItem(levelResultKey))(Data_Maybe.fromMaybe([])))(Data_Array.filter(function(x){return Data_Foldable.any(Data_Foldable.foldableArray)(Prelude.booleanAlgebraBoolean)(Prelude["=="](Prelude.eqString)(x.id))(levelIds)}))}();var allStarCount=Prelude["<#>"](Control_Monad_Eff.functorEff)(Prelude["<#>"](Control_Monad_Eff.functorEff)(allResults)(Prelude.map(Prelude.functorArray)(function(v){return v.stars})))(Data_Foldable.sum(Data_Foldable.foldableArray)(Prelude.semiringInt));var getResult=function getResult(levelId){return Prelude.bind(Control_Monad_Eff.bindEff)(allResults)(function(v){return function(){var $5=v;var results=$5;return Prelude["$"](Prelude.pure(Control_Monad_Eff.applicativeEff))(Prelude["#"](results)(Data_Foldable.find(Data_Foldable.foldableArray)(function(x){return Prelude["=="](Prelude.eqString)(x.id)(levelId)})));throw new Error("Failed pattern match at Storage line 27, column 21 - line 31, column 1: "+[$5.constructor.name])}()})};var addBestResult=function addBestResult(levelId){return function(score){return function(isComplete){return function(){var $6=Prelude["<="](Prelude.ordInt)(score)(0);if($6){return Prelude.pure(Control_Monad_Eff.applicativeEff)(Prelude.unit)}if(!$6){return Prelude.bind(Control_Monad_Eff.bindEff)(Prelude["<#>"](Control_Monad_Eff.functorEff)(getResult(levelId))(Prelude["$"](Data_Maybe.fromMaybe)(newLevelResult(levelId)([])(0))))(function(v){return function(){var $7=v;var result=$7;return function(){var newScores=Prelude["#"](Prelude["#"](Data_Array[":"](score)(result.scores))(Utils.sortWithDesc(Prelude.ordInt)(Prelude.id(Prelude.categoryFn))))(Data_Array.take(maxScoreCount));return function(){var stars=function(){var $8=isComplete;if($8){return Prelude["#"](Common.levelById(levelId))(Common.getStars(score))}if(!$8){return 0}throw new Error("Failed pattern match at Storage line 34, column 15 - line 35, column 3: "+[$8.constructor.name])}();return function(){var newStars=function(){var $9=Prelude[">"](Prelude.ordInt)(stars)(result.stars);if($9){return stars}if(!$9){return result.stars}throw new Error("Failed pattern match at Storage line 35, column 18 - line 36, column 3: "+[$9.constructor.name])}();return function(){var newResult=function(){var $10={};for(var $11 in result){if(result.hasOwnProperty($11)){$10[$11]=result[$11]}}$10.scores=newScores;$10.stars=newStars;return $10}();return Prelude.bind(Control_Monad_Eff.bindEff)(allResults)(function(v1){return function(){var $12=v1;var results=$12;return function(){var newResults=Prelude["#"](Prelude["#"](results)(Data_Array.filter(function(x){return Prelude["$"](Prelude.not(Prelude.booleanAlgebraBoolean))(Prelude["=="](Prelude.eqString)(x.id)(levelId))})))(Data_Array[":"](newResult));return LocalStorage.setItem(levelResultKey)(newResults)}();throw new Error("Failed pattern match at Storage line 31, column 78 - line 39, column 26: "+[$12.constructor.name])}()})}()}()}()}();throw new Error("Failed pattern match at Storage line 31, column 78 - line 39, column 26: "+[$7.constructor.name])}()})}throw new Error("Failed pattern match at Storage line 31, column 42 - line 39, column 26: "+[$6.constructor.name])}()}}};module.exports={addBestResult:addBestResult,getResult:getResult,allStarCount:allStarCount,allResults:allResults,maxScoreCount:maxScoreCount,newLevelResult:newLevelResult,levelResultKey:levelResultKey}},{Common:7,"Control.Monad.Eff":26,"Data.Array":48,"Data.Foldable":61,"Data.Maybe":107,LocalStorage:141,Prelude:146,Preluder:147,Utils:167}],163:[function(require,module,exports){exports.russian=window.convolutionRu},{}],164:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var english={round:"Count",score:"Score",neurons:"Neurons",convolution:"Convolution",topScores:"Top scores",levelComplete:"Level Complete",gameOver:"Game Over",menu:"Menu",restart:"Restart",shortTerm:"Short-term",longTerm:"Long-term",nback:"N-back",all:"Search","double":"Double",start:"Start",triple:"Triple",tLong:"You need to feed the convolution by icons consumption. All the icons in the convolution must be unique. To complete the level, consume a required number of icons.",tNback:"The convolution length is limited. You need to remember only last two icons. When you make a mistake you lose one neuron and 50 points",tShort:"You need to memorize only positions. You earn stars only when the level is completed",tDouble:"You control two convolutions with limited length. The direction of the convolution movement is passed from the previous one. You can change the direction before the movement of the next convolution.",tSearch:"Only one icon is correct. Find it.",controlWeb:"Use the arrow keys to change the movement direction.",controlMobile:"Use left and right screen sides to turn the convolution."};module.exports={english:english,russian:$foreign.russian}},{"./foreign":163}],165:[function(require,module,exports){"use strict";exports.unsafeCoerce=function(x){return x}},{}],166:[function(require,module,exports){"use strict";var $foreign=require("./foreign");module.exports={unsafeCoerce:$foreign.unsafeCoerce}},{"./foreign":165}],167:[function(require,module,exports){"use strict";var Control_Monad_Eff_Random=require("Control.Monad.Eff.Random");var Control_Monad_Eff=require("Control.Monad.Eff");var Preluder=require("Preluder");var Data_Traversable=require("Data.Traversable");var Prelude=require("Prelude");var Data_Int=require("Data.Int");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var Data_Array=require("Data.Array");var Data_Tuple=require("Data.Tuple");var Utls=require("Utls");var Data_Maybe=require("Data.Maybe");var toInt=Prelude[">>>"](Prelude.semigroupoidFn)(Data_Int.fromNumber)(Data_Maybe_Unsafe.fromJust);var splitEvery=function splitEvery(v){return function(v1){return function(){var $12=v;var $13=v1;if($13.length===0){return[]}var n=$12;var list=$13;return Data_Array[":"](Data_Array.take(n)(list))(splitEvery(n)(Data_Array.drop(n)(list)));throw new Error("Failed pattern match: "+[$12.constructor.name,$13.constructor.name])}()}};var sortWithDesc=function sortWithDesc(dictOrd){return function(p){return function(l){return Prelude["#"](l)(Data_Array.sortBy(function(x){return function(y){return function(){var $14=Prelude["<"](dictOrd)(p(x))(p(y));if($14){return Prelude.GT.value}if(!$14){return Prelude.LT.value}throw new Error("Failed pattern match at Utils line 37, column 39 - line 37, column 67: "+[$14.constructor.name])}()}}))}}};var shift=function shift(n){return function(list){return Prelude["++"](Prelude.semigroupArray)(Data_Array.drop(n)(list))(Data_Array.take(n)(list))}};var rangeIndex=function rangeIndex(max1){return Data_Array[".."](0)(Prelude["-"](Prelude.ringInt)(max1)(1))};var randomIndex=function randomIndex(count){return Control_Monad_Eff_Random.randomInt(0)(Prelude["-"](Prelude.ringInt)(count)(1))};var shuffle=function shuffle(list){return function(){var l=Data_Array.length(list);return Prelude["<#>"](Control_Monad_Eff.functorEff)(Prelude["#"](list)(Data_Traversable.traverse(Data_Traversable.traversableArray)(Control_Monad_Eff.applicativeEff)(function(x){return Prelude["<$>"](Control_Monad_Eff.functorEff)(Data_Tuple.Tuple.create(x))(randomIndex(l))})))(Prelude[">>>"](Prelude.semigroupoidFn)(Utls.sortWith(Prelude.ordInt)(Data_Tuple.snd))(Prelude.map(Prelude.functorArray)(Data_Tuple.fst)))}()};var min=function min(dictOrd){return function(x){return function(y){return function(){var $15=Prelude.compare(dictOrd)(x)(y);if($15 instanceof Prelude.LT){return x}if($15 instanceof Prelude.EQ){return x}if($15 instanceof Prelude.GT){return y}throw new Error("Failed pattern match at Utils line 17, column 3 - line 22, column 1: "+[$15.constructor.name])}()}}};var maybeAlt$prime=function maybeAlt$prime(v){return function(v1){return function(){var $16=v;
var $17=v1;var r=$16;if($17 instanceof Data_Maybe.Nothing){return r(Prelude.unit)}var l=$17;return l;throw new Error("Failed pattern match at Utils line 44, column 1 - line 45, column 1: "+[$16.constructor.name,$17.constructor.name])}()}};var maybeAlt=function maybeAlt(v){return function(v1){return function(){var $18=v;var $19=v1;var r=$18;if($19 instanceof Data_Maybe.Nothing){return r}var l=$19;return l;throw new Error("Failed pattern match at Utils line 40, column 1 - line 41, column 1: "+[$18.constructor.name,$19.constructor.name])}()}};var max=function max(dictOrd){return function(x){return function(y){return function(){var $20=Prelude.compare(dictOrd)(x)(y);if($20 instanceof Prelude.LT){return y}if($20 instanceof Prelude.EQ){return x}if($20 instanceof Prelude.GT){return x}throw new Error("Failed pattern match at Utils line 24, column 3 - line 30, column 1: "+[$20.constructor.name])}()}}};var eqOn=function eqOn(dictEq){return function(f){return function(x){return function(y){return Prelude["=="](dictEq)(f(x))(f(y))}}}};var abs=function abs(dictRing){return function(dictOrd){return function(x){return function(){var $21=Prelude[">="](dictOrd)(x)(Prelude.zero(dictRing["__superclass_Prelude.Semiring_0"](undefined)));if($21){return x}if(!$21){return Prelude.negate(dictRing)(x)}throw new Error("Failed pattern match at Utils line 13, column 9 - line 15, column 1: "+[$21.constructor.name])}()}}};module.exports={splitEvery:splitEvery,shuffle:shuffle,eqOn:eqOn,rangeIndex:rangeIndex,randomIndex:randomIndex,"maybeAlt'":maybeAlt$prime,maybeAlt:maybeAlt,sortWithDesc:sortWithDesc,shift:shift,toInt:toInt,max:max,min:min,abs:abs}},{"Control.Monad.Eff":26,"Control.Monad.Eff.Random":20,"Data.Array":48,"Data.Int":74,"Data.Maybe":107,"Data.Maybe.Unsafe":106,"Data.Traversable":132,"Data.Tuple":134,Prelude:146,Preluder:147,Utls:169}],168:[function(require,module,exports){function trace(x){console.log(x);return x}function trace2(y){return function(x){console.log(y);return x}}function traceString(x){console.log(toString(x));return x}exports.randomInt=function(max){var min=0;return Math.floor(Math.random()*(max-min))+min};function toString(x){return JSON.stringify(x)}exports.trace=trace;exports.trace2=trace2;exports.traceString=traceString;exports.toString=toString;exports.parseInt=function(x){return parseInt(x,10)};exports.formatString=function(args){return function(text){args.forEach(function(arg){text=text.replace("{"+arg+"}",arg)});return text}};exports._objEqual=function(obj1,obj2){return _.isEqual(obj1,obj2)}},{}],169:[function(require,module,exports){"use strict";var $foreign=require("./foreign");var Prelude=require("Prelude");var Data_Maybe_Unsafe=require("Data.Maybe.Unsafe");var Data_Tuple=require("Data.Tuple");var Data_Array=require("Data.Array");var Data_Array_Unsafe=require("Data.Array.Unsafe");var Data_String=require("Data.String");var Data_Function=require("Data.Function");var Data_Maybe=require("Data.Maybe");var Data_Foldable=require("Data.Foldable");var Data_Lens=require("Data.Lens");var Data_Lens_Index=require("Data.Lens.Index");var Control_Monad_Eff=require("Control.Monad.Eff");var Control_Monad_Eff_Random=require("Control.Monad.Eff.Random");var Data_Lens_Setter=require("Data.Lens.Setter");var $dot$tilde$qmark=function $dot$tilde$qmark(x){return function(y){return Data_Lens_Setter["%~"](x)(function(v){return Data_Maybe.fromMaybe(v)(y)})}};var $amp=Prelude[">>>"];var zipWithIndex=function zipWithIndex(f){return function(a){return Data_Array.zipWith(f)(a)(Data_Array.range(0)(Prelude["-"](Prelude.ringInt)(Data_Array.length(a))(1)))}};var updateWith=function updateWith(f){return function(x){return function(a){return function(){var index=Data_Array.findIndex(f)(a);return Prelude["#"](Prelude[">>="](Data_Maybe.bindMaybe)(index)(function(i){return Data_Array.updateAt(i)(x)(a)}))(Data_Maybe.fromMaybe(a))}()}}};var unwords=function unwords(l){return Data_String.joinWith(" ")(l)};var uncons=function uncons(array){return function(){var x=Prelude["#"](Data_Array.uncons(array))(Data_Maybe_Unsafe.fromJust);return new Data_Tuple.Tuple(x.head,x.tail)}()};var tup=function tup(x){return function(y){return new Data_Tuple.Tuple(x,y)}};var tail$prime=function tail$prime(array){return Data_Maybe.fromMaybe([])(Data_Array.tail(array))};var sortWith=function sortWith(dictOrd){return function(p){return function(l){return Prelude["#"](l)(Data_Array.sortBy(function(x){return function(y){return function(){var $7=Prelude[">"](dictOrd)(p(x))(p(y));if($7){return Prelude.GT.value}if(!$7){return Prelude.LT.value}throw new Error("Failed pattern match at Utls line 19, column 37 - line 19, column 65: "+[$7.constructor.name])}()}}))}}};var randomElement=function randomElement(l){return Prelude["<#>"](Control_Monad_Eff.functorEff)(Control_Monad_Eff_Random.randomInt(0)(Prelude["-"](Prelude.ringInt)(Data_Array.length(l))(1)))(Data_Array.index(l))};var permutations=function permutations(xs0){return function(){var perms=function perms(v){return function(v1){return function(){var $8=v;var $9=v1;if($8.length===0){return[]}var a=$8;var is=$9;return function(){var ht=uncons(a);var t=Data_Tuple.fst(ht);var ts=Data_Tuple.snd(ht);var interleave$prime=function interleave$prime(v2){return function(v3){return function(r){return function(){var $10=v2;var $11=v3;var $12=r;var q=$10;if($11.length===0){var r1=$12;return new Data_Tuple.Tuple(ts,r1)}var f=$10;var yl=$11;var r1=$12;return function(){var ht1=uncons(yl);var y=Data_Tuple.fst(ht1);var ys=Data_Tuple.snd(ht1);var z=interleave$prime(Prelude["<<<"](Prelude.semigroupoidFn)(f)(Data_Array[":"](y)))(ys)(r1);return new Data_Tuple.Tuple(Data_Array[":"](y)(Data_Tuple.fst(z)),Data_Array[":"](f(Data_Array[":"](t)(Data_Array[":"](y)(Data_Tuple.fst(z)))))(Data_Tuple.snd(z)))}();throw new Error("Failed pattern match at Utls line 74, column 1 - line 91, column 68: "+[$10.constructor.name,$11.constructor.name,$12.constructor.name])}()}}};var interleave=function interleave(xs){return function(r){return function(){var z=interleave$prime(Prelude.id(Prelude.categoryFn))(xs)(r);return Data_Tuple.snd(z)}()}};return Data_Foldable.foldr(Data_Foldable.foldableArray)(interleave)(perms(ts)(Data_Array[":"](t)(is)))(permutations(is))}();throw new Error("Failed pattern match at Utls line 74, column 1 - line 91, column 68: "+[$8.constructor.name,$9.constructor.name])}()}};return Data_Array[":"](xs0)(perms(xs0)([]))}()};var objEqual=Data_Function.runFn2($foreign._objEqual);var $eq$eq$eq=objEqual;var format=function format(dictShow){return function(text){return function(args){return $foreign.formatString(Prelude["<#>"](Prelude.functorArray)(args)(Prelude.show(dictShow)))(text)}}};var bool=function bool(x){return function(y){return function(b){return function(){var $13=b;if($13){return x}if(!$13){return y}throw new Error("Failed pattern match at Utls line 51, column 14 - line 53, column 1: "+[$13.constructor.name])}()}}};var aix=function aix(n){return function(dictWander){return Data_Lens_Index.ix(Data_Lens_Index.indexArray)(n)(dictWander)}};module.exports={permutations:permutations,updateWith:updateWith,"===":$eq$eq$eq,tup:tup,objEqual:objEqual,bool:bool,unwords:unwords,format:format,"tail'":tail$prime,uncons:uncons,zipWithIndex:zipWithIndex,aix:aix,".~?":$dot$tilde$qmark,randomElement:randomElement,sortWith:sortWith,"&":$amp,_objEqual:$foreign._objEqual,parseInt:$foreign["parseInt"],toString:$foreign.toString,traceString:$foreign.traceString,trace2:$foreign.trace2,trace:$foreign.trace,formatString:$foreign.formatString}},{"./foreign":168,"Control.Monad.Eff":26,"Control.Monad.Eff.Random":20,"Data.Array":48,"Data.Array.Unsafe":46,"Data.Foldable":61,"Data.Function":65,"Data.Lens":100,"Data.Lens.Index":78,"Data.Lens.Setter":97,"Data.Maybe":107,"Data.Maybe.Unsafe":106,"Data.String":130,"Data.Tuple":134,Prelude:146}],170:[function(require,module,exports){(function(global){global.convolutionMain=require("Main").main}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{Main:142}]},{},[170]);